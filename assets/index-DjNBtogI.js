(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();var Qc={exports:{}},Bi={};var Um;function fv(){if(Um)return Bi;Um=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(l,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var g in d)g!=="key"&&(h[g]=d[g])}else h=d;return d=h.ref,{$$typeof:s,type:l,key:f,ref:d!==void 0?d:null,props:h}}return Bi.Fragment=n,Bi.jsx=r,Bi.jsxs=r,Bi}var zm;function mv(){return zm||(zm=1,Qc.exports=fv()),Qc.exports}var o=mv(),Xc={exports:{}},Se={};var Bm;function gv(){if(Bm)return Se;Bm=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function k(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,z={};function G(w,q,Q){this.props=w,this.context=q,this.refs=z,this.updater=Q||S}G.prototype.isReactComponent={},G.prototype.setState=function(w,q){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,q,"setState")},G.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function T(){}T.prototype=G.prototype;function D(w,q,Q){this.props=w,this.context=q,this.refs=z,this.updater=Q||S}var K=D.prototype=new T;K.constructor=D,O(K,G.prototype),K.isPureReactComponent=!0;var ne=Array.isArray;function J(){}var Z={H:null,A:null,T:null,S:null},_e=Object.prototype.hasOwnProperty;function ke(w,q,Q){var W=Q.ref;return{$$typeof:s,type:w,key:q,ref:W!==void 0?W:null,props:Q}}function Y(w,q){return ke(w.type,q,w.props)}function I(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function te(w){var q={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(Q){return q[Q]})}var X=/\/+/g;function me(w,q){return typeof w=="object"&&w!==null&&w.key!=null?te(""+w.key):q.toString(36)}function de(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(J,J):(w.status="pending",w.then(function(q){w.status==="pending"&&(w.status="fulfilled",w.value=q)},function(q){w.status==="pending"&&(w.status="rejected",w.reason=q)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function A(w,q,Q,W,oe){var pe=typeof w;(pe==="undefined"||pe==="boolean")&&(w=null);var ve=!1;if(w===null)ve=!0;else switch(pe){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(w.$$typeof){case s:case n:ve=!0;break;case b:return ve=w._init,A(ve(w._payload),q,Q,W,oe)}}if(ve)return oe=oe(w),ve=W===""?"."+me(w,0):W,ne(oe)?(Q="",ve!=null&&(Q=ve.replace(X,"$&/")+"/"),A(oe,q,Q,"",function(tt){return tt})):oe!=null&&(I(oe)&&(oe=Y(oe,Q+(oe.key==null||w&&w.key===oe.key?"":(""+oe.key).replace(X,"$&/")+"/")+ve)),q.push(oe)),1;ve=0;var V=W===""?".":W+":";if(ne(w))for(var ye=0;ye<w.length;ye++)W=w[ye],pe=V+me(W,ye),ve+=A(W,q,Q,pe,oe);else if(ye=k(w),typeof ye=="function")for(w=ye.call(w),ye=0;!(W=w.next()).done;)W=W.value,pe=V+me(W,ye++),ve+=A(W,q,Q,pe,oe);else if(pe==="object"){if(typeof w.then=="function")return A(de(w),q,Q,W,oe);throw q=String(w),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ve}function P(w,q,Q){if(w==null)return w;var W=[],oe=0;return A(w,W,"","",function(pe){return q.call(Q,pe,oe++)}),W}function ee(w){if(w._status===-1){var q=w._result;q=q(),q.then(function(Q){(w._status===0||w._status===-1)&&(w._status=1,w._result=Q)},function(Q){(w._status===0||w._status===-1)&&(w._status=2,w._result=Q)}),w._status===-1&&(w._status=0,w._result=q)}if(w._status===1)return w._result.default;throw w._result}var we=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},le={map:P,forEach:function(w,q,Q){P(w,function(){q.apply(this,arguments)},Q)},count:function(w){var q=0;return P(w,function(){q++}),q},toArray:function(w){return P(w,function(q){return q})||[]},only:function(w){if(!I(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Se.Activity=x,Se.Children=le,Se.Component=G,Se.Fragment=r,Se.Profiler=d,Se.PureComponent=D,Se.StrictMode=l,Se.Suspense=v,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Se.__COMPILER_RUNTIME={__proto__:null,c:function(w){return Z.H.useMemoCache(w)}},Se.cache=function(w){return function(){return w.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(w,q,Q){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var W=O({},w.props),oe=w.key;if(q!=null)for(pe in q.key!==void 0&&(oe=""+q.key),q)!_e.call(q,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&q.ref===void 0||(W[pe]=q[pe]);var pe=arguments.length-2;if(pe===1)W.children=Q;else if(1<pe){for(var ve=Array(pe),V=0;V<pe;V++)ve[V]=arguments[V+2];W.children=ve}return ke(w.type,oe,W)},Se.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:h,_context:w},w},Se.createElement=function(w,q,Q){var W,oe={},pe=null;if(q!=null)for(W in q.key!==void 0&&(pe=""+q.key),q)_e.call(q,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(oe[W]=q[W]);var ve=arguments.length-2;if(ve===1)oe.children=Q;else if(1<ve){for(var V=Array(ve),ye=0;ye<ve;ye++)V[ye]=arguments[ye+2];oe.children=V}if(w&&w.defaultProps)for(W in ve=w.defaultProps,ve)oe[W]===void 0&&(oe[W]=ve[W]);return ke(w,pe,oe)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(w){return{$$typeof:g,render:w}},Se.isValidElement=I,Se.lazy=function(w){return{$$typeof:b,_payload:{_status:-1,_result:w},_init:ee}},Se.memo=function(w,q){return{$$typeof:p,type:w,compare:q===void 0?null:q}},Se.startTransition=function(w){var q=Z.T,Q={};Z.T=Q;try{var W=w(),oe=Z.S;oe!==null&&oe(Q,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(J,we)}catch(pe){we(pe)}finally{q!==null&&Q.types!==null&&(q.types=Q.types),Z.T=q}},Se.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Se.use=function(w){return Z.H.use(w)},Se.useActionState=function(w,q,Q){return Z.H.useActionState(w,q,Q)},Se.useCallback=function(w,q){return Z.H.useCallback(w,q)},Se.useContext=function(w){return Z.H.useContext(w)},Se.useDebugValue=function(){},Se.useDeferredValue=function(w,q){return Z.H.useDeferredValue(w,q)},Se.useEffect=function(w,q){return Z.H.useEffect(w,q)},Se.useEffectEvent=function(w){return Z.H.useEffectEvent(w)},Se.useId=function(){return Z.H.useId()},Se.useImperativeHandle=function(w,q,Q){return Z.H.useImperativeHandle(w,q,Q)},Se.useInsertionEffect=function(w,q){return Z.H.useInsertionEffect(w,q)},Se.useLayoutEffect=function(w,q){return Z.H.useLayoutEffect(w,q)},Se.useMemo=function(w,q){return Z.H.useMemo(w,q)},Se.useOptimistic=function(w,q){return Z.H.useOptimistic(w,q)},Se.useReducer=function(w,q,Q){return Z.H.useReducer(w,q,Q)},Se.useRef=function(w){return Z.H.useRef(w)},Se.useState=function(w){return Z.H.useState(w)},Se.useSyncExternalStore=function(w,q,Q){return Z.H.useSyncExternalStore(w,q,Q)},Se.useTransition=function(){return Z.H.useTransition()},Se.version="19.2.4",Se}var qm;function Su(){return qm||(qm=1,Xc.exports=gv()),Xc.exports}var $=Su(),Jc={exports:{}},qi={},Zc={exports:{}},Wc={};var Hm;function pv(){return Hm||(Hm=1,(function(s){function n(A,P){var ee=A.length;A.push(P);e:for(;0<ee;){var we=ee-1>>>1,le=A[we];if(0<d(le,P))A[we]=P,A[ee]=le,ee=we;else break e}}function r(A){return A.length===0?null:A[0]}function l(A){if(A.length===0)return null;var P=A[0],ee=A.pop();if(ee!==P){A[0]=ee;e:for(var we=0,le=A.length,w=le>>>1;we<w;){var q=2*(we+1)-1,Q=A[q],W=q+1,oe=A[W];if(0>d(Q,ee))W<le&&0>d(oe,Q)?(A[we]=oe,A[W]=ee,we=W):(A[we]=Q,A[q]=ee,we=q);else if(W<le&&0>d(oe,ee))A[we]=oe,A[W]=ee,we=W;else break e}}return P}function d(A,P){var ee=A.sortIndex-P.sortIndex;return ee!==0?ee:A.id-P.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var v=[],p=[],b=1,x=null,E=3,k=!1,S=!1,O=!1,z=!1,G=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function K(A){for(var P=r(p);P!==null;){if(P.callback===null)l(p);else if(P.startTime<=A)l(p),P.sortIndex=P.expirationTime,n(v,P);else break;P=r(p)}}function ne(A){if(O=!1,K(A),!S)if(r(v)!==null)S=!0,J||(J=!0,te());else{var P=r(p);P!==null&&de(ne,P.startTime-A)}}var J=!1,Z=-1,_e=5,ke=-1;function Y(){return z?!0:!(s.unstable_now()-ke<_e)}function I(){if(z=!1,J){var A=s.unstable_now();ke=A;var P=!0;try{e:{S=!1,O&&(O=!1,T(Z),Z=-1),k=!0;var ee=E;try{t:{for(K(A),x=r(v);x!==null&&!(x.expirationTime>A&&Y());){var we=x.callback;if(typeof we=="function"){x.callback=null,E=x.priorityLevel;var le=we(x.expirationTime<=A);if(A=s.unstable_now(),typeof le=="function"){x.callback=le,K(A),P=!0;break t}x===r(v)&&l(v),K(A)}else l(v);x=r(v)}if(x!==null)P=!0;else{var w=r(p);w!==null&&de(ne,w.startTime-A),P=!1}}break e}finally{x=null,E=ee,k=!1}P=void 0}}finally{P?te():J=!1}}}var te;if(typeof D=="function")te=function(){D(I)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,me=X.port2;X.port1.onmessage=I,te=function(){me.postMessage(null)}}else te=function(){G(I,0)};function de(A,P){Z=G(function(){A(s.unstable_now())},P)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(A){A.callback=null},s.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<A?Math.floor(1e3/A):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(A){switch(E){case 1:case 2:case 3:var P=3;break;default:P=E}var ee=E;E=P;try{return A()}finally{E=ee}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(A,P){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var ee=E;E=A;try{return P()}finally{E=ee}},s.unstable_scheduleCallback=function(A,P,ee){var we=s.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?we+ee:we):ee=we,A){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ee+le,A={id:b++,callback:P,priorityLevel:A,startTime:ee,expirationTime:le,sortIndex:-1},ee>we?(A.sortIndex=ee,n(p,A),r(v)===null&&A===r(p)&&(O?(T(Z),Z=-1):O=!0,de(ne,ee-we))):(A.sortIndex=le,n(v,A),S||k||(S=!0,J||(J=!0,te()))),A},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(A){var P=E;return function(){var ee=E;E=P;try{return A.apply(this,arguments)}finally{E=ee}}}})(Wc)),Wc}var $m;function vv(){return $m||($m=1,Zc.exports=pv()),Zc.exports}var Fc={exports:{}},At={};var Gm;function yv(){if(Gm)return At;Gm=1;var s=Su();function n(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(v,p,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:v,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,At.createPortal=function(v,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return h(v,p,null,b)},At.flushSync=function(v){var p=f.T,b=l.p;try{if(f.T=null,l.p=2,v)return v()}finally{f.T=p,l.p=b,l.d.f()}},At.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(v,p))},At.prefetchDNS=function(v){typeof v=="string"&&l.d.D(v)},At.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var b=p.as,x=g(b,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:k}):b==="script"&&l.d.X(v,{crossOrigin:x,integrity:E,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},At.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);l.d.M(v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(v)},At.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,x=g(b,p.crossOrigin);l.d.L(v,b,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},At.preloadModule=function(v,p){if(typeof v=="string")if(p){var b=g(p.as,p.crossOrigin);l.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(v)},At.requestFormReset=function(v){l.d.r(v)},At.unstable_batchedUpdates=function(v,p){return v(p)},At.useFormState=function(v,p,b){return f.H.useFormState(v,p,b)},At.useFormStatus=function(){return f.H.useHostTransitionStatus()},At.version="19.2.4",At}var Km;function bv(){if(Km)return Fc.exports;Km=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Fc.exports=yv(),Fc.exports}var Pm;function _v(){if(Pm)return qi;Pm=1;var s=vv(),n=Su(),r=bv();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,i=t;;){var c=a.return;if(c===null)break;var u=c.alternate;if(u===null){if(i=c.return,i!==null){a=i;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===a)return v(c),e;if(u===i)return v(c),t;u=u.sibling}throw Error(l(188))}if(a.return!==i.return)a=c,i=u;else{for(var m=!1,y=c.child;y;){if(y===a){m=!0,a=c,i=u;break}if(y===i){m=!0,i=c,a=u;break}y=y.sibling}if(!m){for(y=u.child;y;){if(y===a){m=!0,a=u,i=c;break}if(y===i){m=!0,i=u,a=c;break}y=y.sibling}if(!m)throw Error(l(189))}}if(a.alternate!==i)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),D=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),ke=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var X=Symbol.for("react.client.reference");function me(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===X?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case G:return"Profiler";case z:return"StrictMode";case ne:return"Suspense";case J:return"SuspenseList";case ke:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case D:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case K:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case _e:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}var de=Array.isArray,A=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},we=[],le=-1;function w(e){return{current:e}}function q(e){0>le||(e.current=we[le],we[le]=null,le--)}function Q(e,t){le++,we[le]=e.current,e.current=t}var W=w(null),oe=w(null),pe=w(null),ve=w(null);function V(e,t){switch(Q(pe,t),Q(oe,e),Q(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?im(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=im(t),e=rm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(W),Q(W,e)}function ye(){q(W),q(oe),q(pe)}function tt(e){e.memoizedState!==null&&Q(ve,e);var t=W.current,a=rm(t,e.type);t!==a&&(Q(oe,e),Q(W,a))}function F(e){oe.current===e&&(q(W),q(oe)),ve.current===e&&(q(ve),Di._currentValue=ee)}var Ae,xe;function je(e){if(Ae===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ae=t&&t[1]||"",xe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+e+xe}var Te=!1;function st(e,t){if(!e||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(L){var M=L}Reflect.construct(e,[],H)}else{try{H.call()}catch(L){M=L}e.call(H.prototype)}}else{try{throw Error()}catch(L){M=L}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(L){if(L&&M&&typeof L.stack=="string")return[L.stack,M.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=i.DetermineComponentFrameRoot(),m=u[0],y=u[1];if(m&&y){var _=m.split(`
`),R=y.split(`
`);for(c=i=0;i<_.length&&!_[i].includes("DetermineComponentFrameRoot");)i++;for(;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;if(i===_.length||c===R.length)for(i=_.length-1,c=R.length-1;1<=i&&0<=c&&_[i]!==R[c];)c--;for(;1<=i&&0<=c;i--,c--)if(_[i]!==R[c]){if(i!==1||c!==1)do if(i--,c--,0>c||_[i]!==R[c]){var U=`
`+_[i].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=i&&0<=c);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?je(a):""}function $e(e,t){switch(e.tag){case 26:case 27:case 5:return je(e.type);case 16:return je("Lazy");case 13:return e.child!==t&&t!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return je("Activity");default:return""}}function ze(e){try{var t="",a=null;do t+=$e(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Mt=Object.prototype.hasOwnProperty,wa=s.unstable_scheduleCallback,Sa=s.unstable_cancelCallback,Ys=s.unstable_shouldYield,Vs=s.unstable_requestPaint,Ct=s.unstable_now,tr=s.unstable_getCurrentPriorityLevel,re=s.unstable_ImmediatePriority,be=s.unstable_UserBlockingPriority,ue=s.unstable_NormalPriority,at=s.unstable_LowPriority,De=s.unstable_IdlePriority,gt=s.log,Je=s.unstable_setDisableYieldValue,We=null,Ue=null;function xt(e){if(typeof gt=="function"&&Je(e),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(We,e)}catch{}}var Qe=Math.clz32?Math.clz32:ma,la=Math.log,Va=Math.LN2;function ma(e){return e>>>=0,e===0?32:31-(la(e)/Va|0)|0}var ga=256,Ia=262144,Qa=4194304;function wn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ar(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var c=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~u,i!==0?c=wn(i):(m&=y,m!==0?c=wn(m):a||(a=y&~e,a!==0&&(c=wn(a))))):(y=i&~u,y!==0?c=wn(y):m!==0?c=wn(m):a||(a=i&~e,a!==0&&(c=wn(a)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:c}function Is(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ep(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qu(){var e=Qa;return Qa<<=1,(Qa&62914560)===0&&(Qa=4194304),e}function Ll(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Qs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tp(e,t,a,i,c,u){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,_=e.expirationTimes,R=e.hiddenUpdates;for(a=m&~a;0<a;){var U=31-Qe(a),H=1<<U;y[U]=0,_[U]=-1;var M=R[U];if(M!==null)for(R[U]=null,U=0;U<M.length;U++){var L=M[U];L!==null&&(L.lane&=-536870913)}a&=~H}i!==0&&Hu(e,i,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~t))}function Hu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Qe(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function $u(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-Qe(a),c=1<<i;c&t|e[i]&t&&(e[i]|=t),a&=~c}}function Gu(e,t){var a=t&-t;return a=(a&42)!==0?1:Ul(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ul(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ku(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:Am(e.type))}function Pu(e,t){var a=P.p;try{return P.p=e,t()}finally{P.p=a}}var Xa=Math.random().toString(36).slice(2),wt="__reactFiber$"+Xa,Dt="__reactProps$"+Xa,In="__reactContainer$"+Xa,Bl="__reactEvents$"+Xa,ap="__reactListeners$"+Xa,np="__reactHandles$"+Xa,Yu="__reactResources$"+Xa,Xs="__reactMarker$"+Xa;function ql(e){delete e[wt],delete e[Dt],delete e[Bl],delete e[ap],delete e[np]}function Qn(e){var t=e[wt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[In]||a[wt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=fm(e);e!==null;){if(a=e[wt])return a;e=fm(e)}return t}e=a,a=e.parentNode}return null}function Xn(e){if(e=e[wt]||e[In]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Js(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Jn(e){var t=e[Yu];return t||(t=e[Yu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yt(e){e[Xs]=!0}var Vu=new Set,Iu={};function Sn(e,t){Zn(e,t),Zn(e+"Capture",t)}function Zn(e,t){for(Iu[e]=t,e=0;e<t.length;e++)Vu.add(t[e])}var sp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Xu={};function ip(e){return Mt.call(Xu,e)?!0:Mt.call(Qu,e)?!1:sp.test(e)?Xu[e]=!0:(Qu[e]=!0,!1)}function nr(e,t,a){if(ip(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function sr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ja(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function Jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ju(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rp(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hl(e){if(!e._valueTracker){var t=Ju(e)?"checked":"value";e._valueTracker=rp(e,t,""+e[t])}}function Zu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Ju(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function ir(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var lp=/[\n"\\]/g;function Zt(e){return e.replace(lp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function $l(e,t,a,i,c,u,m,y){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Jt(t)):e.value!==""+Jt(t)&&(e.value=""+Jt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Gl(e,m,Jt(t)):a!=null?Gl(e,m,Jt(a)):i!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Jt(y):e.removeAttribute("name")}function Wu(e,t,a,i,c,u,m,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Hl(e);return}a=a!=null?""+Jt(a):"",t=t!=null?""+Jt(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Hl(e)}function Gl(e,t,a){t==="number"&&ir(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Wn(e,t,a,i){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Jt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Fu(e,t,a){if(t!=null&&(t=""+Jt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Jt(a):""}function ed(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(l(92));if(de(i)){if(1<i.length)throw Error(l(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Jt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Hl(e)}function Fn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var op=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function td(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||op.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ad(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&a[c]!==i&&td(e,c,i)}else for(var u in t)t.hasOwnProperty(u)&&td(e,u,t[u])}function Kl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),up=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(e){return up.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ka(){}var Pl=null;function Yl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var es=null,ts=null;function nd(e){var t=Xn(e);if(t&&(e=t.stateNode)){var a=e[Dt]||null;e:switch(e=t.stateNode,t.type){case"input":if($l(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var c=i[Dt]||null;if(!c)throw Error(l(90));$l(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Zu(i)}break e;case"textarea":Fu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Wn(e,!!a.multiple,t,!1)}}}var Vl=!1;function sd(e,t,a){if(Vl)return e(t,a);Vl=!0;try{var i=e(t);return i}finally{if(Vl=!1,(es!==null||ts!==null)&&(Ir(),es&&(t=es,e=ts,ts=es=null,nd(t),e)))for(t=0;t<e.length;t++)nd(e[t])}}function Zs(e,t){var a=e.stateNode;if(a===null)return null;var i=a[Dt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Il=!1;if(Ea)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){Il=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{Il=!1}var Ja=null,Ql=null,lr=null;function id(){if(lr)return lr;var e,t=Ql,a=t.length,i,c="value"in Ja?Ja.value:Ja.textContent,u=c.length;for(e=0;e<a&&t[e]===c[e];e++);var m=a-e;for(i=1;i<=m&&t[a-i]===c[u-i];i++);return lr=c.slice(e,1<i?1-i:void 0)}function or(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cr(){return!0}function rd(){return!1}function Lt(e){function t(a,i,c,u,m){this._reactName=a,this._targetInst=c,this.type=i,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?cr:rd,this.isPropagationStopped=rd,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),t}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=Lt(jn),Fs=x({},jn,{view:0,detail:0}),dp=Lt(Fs),Xl,Jl,ei,dr=x({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&e.type==="mousemove"?(Xl=e.screenX-ei.screenX,Jl=e.screenY-ei.screenY):Jl=Xl=0,ei=e),Xl)},movementY:function(e){return"movementY"in e?e.movementY:Jl}}),ld=Lt(dr),hp=x({},dr,{dataTransfer:0}),fp=Lt(hp),mp=x({},Fs,{relatedTarget:0}),Zl=Lt(mp),gp=x({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),pp=Lt(gp),vp=x({},jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yp=Lt(vp),bp=x({},jn,{data:0}),od=Lt(bp),_p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wp[e])?!!t[e]:!1}function Wl(){return Sp}var jp=x({},Fs,{key:function(e){if(e.key){var t=_p[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(e){return e.type==="keypress"?or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kp=Lt(jp),Ep=x({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=Lt(Ep),Np=x({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),Tp=Lt(Np),Ap=x({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Op=Lt(Ap),Cp=x({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rp=Lt(Cp),Mp=x({},jn,{newState:0,oldState:0}),Dp=Lt(Mp),Lp=[9,13,27,32],Fl=Ea&&"CompositionEvent"in window,ti=null;Ea&&"documentMode"in document&&(ti=document.documentMode);var Up=Ea&&"TextEvent"in window&&!ti,ud=Ea&&(!Fl||ti&&8<ti&&11>=ti),dd=" ",hd=!1;function fd(e,t){switch(e){case"keyup":return Lp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function md(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var as=!1;function zp(e,t){switch(e){case"compositionend":return md(t);case"keypress":return t.which!==32?null:(hd=!0,dd);case"textInput":return e=t.data,e===dd&&hd?null:e;default:return null}}function Bp(e,t){if(as)return e==="compositionend"||!Fl&&fd(e,t)?(e=id(),lr=Ql=Ja=null,as=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ud&&t.locale!=="ko"?null:t.data;default:return null}}var qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qp[e.type]:t==="textarea"}function pd(e,t,a,i){es?ts?ts.push(i):ts=[i]:es=i,t=el(t,"onChange"),0<t.length&&(a=new ur("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var ai=null,ni=null;function Hp(e){Ff(e,0)}function hr(e){var t=Js(e);if(Zu(t))return e}function vd(e,t){if(e==="change")return t}var yd=!1;if(Ea){var eo;if(Ea){var to="oninput"in document;if(!to){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),to=typeof bd.oninput=="function"}eo=to}else eo=!1;yd=eo&&(!document.documentMode||9<document.documentMode)}function _d(){ai&&(ai.detachEvent("onpropertychange",xd),ni=ai=null)}function xd(e){if(e.propertyName==="value"&&hr(ni)){var t=[];pd(t,ni,e,Yl(e)),sd(Hp,t)}}function $p(e,t,a){e==="focusin"?(_d(),ai=t,ni=a,ai.attachEvent("onpropertychange",xd)):e==="focusout"&&_d()}function Gp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hr(ni)}function Kp(e,t){if(e==="click")return hr(t)}function Pp(e,t){if(e==="input"||e==="change")return hr(t)}function Yp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:Yp;function si(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var c=a[i];if(!Mt.call(t,c)||!$t(e[c],t[c]))return!1}return!0}function wd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sd(e,t){var a=wd(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wd(a)}}function jd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ir(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ir(e.document)}return t}function ao(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vp=Ea&&"documentMode"in document&&11>=document.documentMode,ns=null,no=null,ii=null,so=!1;function Ed(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;so||ns==null||ns!==ir(i)||(i=ns,"selectionStart"in i&&ao(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ii&&si(ii,i)||(ii=i,i=el(no,"onSelect"),0<i.length&&(t=new ur("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=ns)))}function kn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ss={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionrun:kn("Transition","TransitionRun"),transitionstart:kn("Transition","TransitionStart"),transitioncancel:kn("Transition","TransitionCancel"),transitionend:kn("Transition","TransitionEnd")},io={},Nd={};Ea&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function En(e){if(io[e])return io[e];if(!ss[e])return e;var t=ss[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Nd)return io[e]=t[a];return e}var Td=En("animationend"),Ad=En("animationiteration"),Od=En("animationstart"),Ip=En("transitionrun"),Qp=En("transitionstart"),Xp=En("transitioncancel"),Cd=En("transitionend"),Rd=new Map,ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ro.push("scrollEnd");function oa(e,t){Rd.set(e,t),Sn(t,[e])}var fr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wt=[],is=0,lo=0;function mr(){for(var e=is,t=lo=is=0;t<e;){var a=Wt[t];Wt[t++]=null;var i=Wt[t];Wt[t++]=null;var c=Wt[t];Wt[t++]=null;var u=Wt[t];if(Wt[t++]=null,i!==null&&c!==null){var m=i.pending;m===null?c.next=c:(c.next=m.next,m.next=c),i.pending=c}u!==0&&Md(a,c,u)}}function gr(e,t,a,i){Wt[is++]=e,Wt[is++]=t,Wt[is++]=a,Wt[is++]=i,lo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function oo(e,t,a,i){return gr(e,t,a,i),pr(e)}function Nn(e,t){return gr(e,null,null,t),pr(e)}function Md(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var c=!1,u=e.return;u!==null;)u.childLanes|=a,i=u.alternate,i!==null&&(i.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Qe(a),e=u.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=a|536870912),u):null}function pr(e){if(50<Ni)throw Ni=0,yc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rs={};function Jp(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,a,i){return new Jp(e,t,a,i)}function co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Na(e,t){var a=e.alternate;return a===null?(a=Gt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Dd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function vr(e,t,a,i,c,u){var m=0;if(i=e,typeof e=="function")co(e)&&(m=1);else if(typeof e=="string")m=tv(e,a,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ke:return e=Gt(31,a,t,c),e.elementType=ke,e.lanes=u,e;case O:return Tn(a.children,c,u,t);case z:m=8,c|=24;break;case G:return e=Gt(12,a,t,c|2),e.elementType=G,e.lanes=u,e;case ne:return e=Gt(13,a,t,c),e.elementType=ne,e.lanes=u,e;case J:return e=Gt(19,a,t,c),e.elementType=J,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:m=10;break e;case T:m=9;break e;case K:m=11;break e;case Z:m=14;break e;case _e:m=16,i=null;break e}m=29,a=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=Gt(m,a,t,c),t.elementType=e,t.type=i,t.lanes=u,t}function Tn(e,t,a,i){return e=Gt(7,e,i,t),e.lanes=a,e}function uo(e,t,a){return e=Gt(6,e,null,t),e.lanes=a,e}function Ld(e){var t=Gt(18,null,null,0);return t.stateNode=e,t}function ho(e,t,a){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ud=new WeakMap;function Ft(e,t){if(typeof e=="object"&&e!==null){var a=Ud.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ze(t)},Ud.set(e,t),t)}return{value:e,source:t,stack:ze(t)}}var ls=[],os=0,yr=null,ri=0,ea=[],ta=0,Za=null,pa=1,va="";function Ta(e,t){ls[os++]=ri,ls[os++]=yr,yr=e,ri=t}function zd(e,t,a){ea[ta++]=pa,ea[ta++]=va,ea[ta++]=Za,Za=e;var i=pa;e=va;var c=32-Qe(i)-1;i&=~(1<<c),a+=1;var u=32-Qe(t)+c;if(30<u){var m=c-c%5;u=(i&(1<<m)-1).toString(32),i>>=m,c-=m,pa=1<<32-Qe(t)+c|a<<c|i,va=u+e}else pa=1<<u|a<<c|i,va=e}function fo(e){e.return!==null&&(Ta(e,1),zd(e,1,0))}function mo(e){for(;e===yr;)yr=ls[--os],ls[os]=null,ri=ls[--os],ls[os]=null;for(;e===Za;)Za=ea[--ta],ea[ta]=null,va=ea[--ta],ea[ta]=null,pa=ea[--ta],ea[ta]=null}function Bd(e,t){ea[ta++]=pa,ea[ta++]=va,ea[ta++]=Za,pa=t.id,va=t.overflow,Za=e}var St=null,Fe=null,Le=!1,Wa=null,aa=!1,go=Error(l(519));function Fa(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw li(Ft(t,e)),go}function qd(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[wt]=e,t[Dt]=i,a){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(a=0;a<Ai.length;a++)Ce(Ai[a],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),Wu(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),ed(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||nm(t.textContent,a)?(i.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),i.onScroll!=null&&Ce("scroll",t),i.onScrollEnd!=null&&Ce("scrollend",t),i.onClick!=null&&(t.onclick=ka),t=!0):t=!1,t||Fa(e,!0)}function Hd(e){for(St=e.return;St;)switch(St.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:St=St.return}}function cs(e){if(e!==St)return!1;if(!Le)return Hd(e),Le=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Mc(e.type,e.memoizedProps)),a=!a),a&&Fe&&Fa(e),Hd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Fe=hm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Fe=hm(e)}else t===27?(t=Fe,mn(e.type)?(e=Bc,Bc=null,Fe=e):Fe=t):Fe=St?sa(e.stateNode.nextSibling):null;return!0}function An(){Fe=St=null,Le=!1}function po(){var e=Wa;return e!==null&&(qt===null?qt=e:qt.push.apply(qt,e),Wa=null),e}function li(e){Wa===null?Wa=[e]:Wa.push(e)}var vo=w(null),On=null,Aa=null;function en(e,t,a){Q(vo,t._currentValue),t._currentValue=a}function Oa(e){e._currentValue=vo.current,q(vo)}function yo(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function bo(e,t,a,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var m=c.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=c;for(var _=0;_<t.length;_++)if(y.context===t[_]){u.lanes|=a,y=u.alternate,y!==null&&(y.lanes|=a),yo(u.return,a,e),i||(m=null);break e}u=y.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(l(341));m.lanes|=a,u=m.alternate,u!==null&&(u.lanes|=a),yo(m,a,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function us(e,t,a,i){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(l(387));if(m=m.memoizedProps,m!==null){var y=c.type;$t(c.pendingProps.value,m.value)||(e!==null?e.push(y):e=[y])}}else if(c===ve.current){if(m=c.alternate,m===null)throw Error(l(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Di):e=[Di])}c=c.return}e!==null&&bo(t,e,a,i),t.flags|=262144}function br(e){for(e=e.firstContext;e!==null;){if(!$t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cn(e){On=e,Aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function jt(e){return $d(On,e)}function _r(e,t){return On===null&&Cn(e),$d(e,t)}function $d(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Aa===null){if(e===null)throw Error(l(308));Aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Aa=Aa.next=t;return a}var Zp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Wp=s.unstable_scheduleCallback,Fp=s.unstable_NormalPriority,ut={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _o(){return{controller:new Zp,data:new Map,refCount:0}}function oi(e){e.refCount--,e.refCount===0&&Wp(Fp,function(){e.controller.abort()})}var ci=null,xo=0,ds=0,hs=null;function e0(e,t){if(ci===null){var a=ci=[];xo=0,ds=jc(),hs={status:"pending",value:void 0,then:function(i){a.push(i)}}}return xo++,t.then(Gd,Gd),t}function Gd(){if(--xo===0&&ci!==null){hs!==null&&(hs.status="fulfilled");var e=ci;ci=null,ds=0,hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function t0(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),i}var Kd=A.S;A.S=function(e,t){Nf=Ct(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&e0(e,t),Kd!==null&&Kd(e,t)};var Rn=w(null);function wo(){var e=Rn.current;return e!==null?e:Xe.pooledCache}function xr(e,t){t===null?Q(Rn,Rn.current):Q(Rn,t.pool)}function Pd(){var e=wo();return e===null?null:{parent:ut._currentValue,pool:e}}var fs=Error(l(460)),So=Error(l(474)),wr=Error(l(542)),Sr={then:function(){}};function Yd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ka,ka),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Qd(e),e;default:if(typeof t.status=="string")t.then(ka,ka);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Qd(e),e}throw Dn=t,fs}}function Mn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Dn=a,fs):a}}var Dn=null;function Id(){if(Dn===null)throw Error(l(459));var e=Dn;return Dn=null,e}function Qd(e){if(e===fs||e===wr)throw Error(l(483))}var ms=null,ui=0;function jr(e){var t=ui;return ui+=1,ms===null&&(ms=[]),Vd(ms,e,t)}function di(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function kr(e,t){throw t.$$typeof===E?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xd(e){function t(N,j){if(e){var C=N.deletions;C===null?(N.deletions=[j],N.flags|=16):C.push(j)}}function a(N,j){if(!e)return null;for(;j!==null;)t(N,j),j=j.sibling;return null}function i(N){for(var j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function c(N,j){return N=Na(N,j),N.index=0,N.sibling=null,N}function u(N,j,C){return N.index=C,e?(C=N.alternate,C!==null?(C=C.index,C<j?(N.flags|=67108866,j):C):(N.flags|=67108866,j)):(N.flags|=1048576,j)}function m(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function y(N,j,C,B){return j===null||j.tag!==6?(j=uo(C,N.mode,B),j.return=N,j):(j=c(j,C),j.return=N,j)}function _(N,j,C,B){var ce=C.type;return ce===O?U(N,j,C.props.children,B,C.key):j!==null&&(j.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===_e&&Mn(ce)===j.type)?(j=c(j,C.props),di(j,C),j.return=N,j):(j=vr(C.type,C.key,C.props,null,N.mode,B),di(j,C),j.return=N,j)}function R(N,j,C,B){return j===null||j.tag!==4||j.stateNode.containerInfo!==C.containerInfo||j.stateNode.implementation!==C.implementation?(j=ho(C,N.mode,B),j.return=N,j):(j=c(j,C.children||[]),j.return=N,j)}function U(N,j,C,B,ce){return j===null||j.tag!==7?(j=Tn(C,N.mode,B,ce),j.return=N,j):(j=c(j,C),j.return=N,j)}function H(N,j,C){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=uo(""+j,N.mode,C),j.return=N,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return C=vr(j.type,j.key,j.props,null,N.mode,C),di(C,j),C.return=N,C;case S:return j=ho(j,N.mode,C),j.return=N,j;case _e:return j=Mn(j),H(N,j,C)}if(de(j)||te(j))return j=Tn(j,N.mode,C,null),j.return=N,j;if(typeof j.then=="function")return H(N,jr(j),C);if(j.$$typeof===D)return H(N,_r(N,j),C);kr(N,j)}return null}function M(N,j,C,B){var ce=j!==null?j.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return ce!==null?null:y(N,j,""+C,B);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case k:return C.key===ce?_(N,j,C,B):null;case S:return C.key===ce?R(N,j,C,B):null;case _e:return C=Mn(C),M(N,j,C,B)}if(de(C)||te(C))return ce!==null?null:U(N,j,C,B,null);if(typeof C.then=="function")return M(N,j,jr(C),B);if(C.$$typeof===D)return M(N,j,_r(N,C),B);kr(N,C)}return null}function L(N,j,C,B,ce){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return N=N.get(C)||null,y(j,N,""+B,ce);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case k:return N=N.get(B.key===null?C:B.key)||null,_(j,N,B,ce);case S:return N=N.get(B.key===null?C:B.key)||null,R(j,N,B,ce);case _e:return B=Mn(B),L(N,j,C,B,ce)}if(de(B)||te(B))return N=N.get(C)||null,U(j,N,B,ce,null);if(typeof B.then=="function")return L(N,j,C,jr(B),ce);if(B.$$typeof===D)return L(N,j,C,_r(j,B),ce);kr(j,B)}return null}function ae(N,j,C,B){for(var ce=null,Be=null,se=j,Ne=j=0,Me=null;se!==null&&Ne<C.length;Ne++){se.index>Ne?(Me=se,se=null):Me=se.sibling;var qe=M(N,se,C[Ne],B);if(qe===null){se===null&&(se=Me);break}e&&se&&qe.alternate===null&&t(N,se),j=u(qe,j,Ne),Be===null?ce=qe:Be.sibling=qe,Be=qe,se=Me}if(Ne===C.length)return a(N,se),Le&&Ta(N,Ne),ce;if(se===null){for(;Ne<C.length;Ne++)se=H(N,C[Ne],B),se!==null&&(j=u(se,j,Ne),Be===null?ce=se:Be.sibling=se,Be=se);return Le&&Ta(N,Ne),ce}for(se=i(se);Ne<C.length;Ne++)Me=L(se,N,Ne,C[Ne],B),Me!==null&&(e&&Me.alternate!==null&&se.delete(Me.key===null?Ne:Me.key),j=u(Me,j,Ne),Be===null?ce=Me:Be.sibling=Me,Be=Me);return e&&se.forEach(function(bn){return t(N,bn)}),Le&&Ta(N,Ne),ce}function he(N,j,C,B){if(C==null)throw Error(l(151));for(var ce=null,Be=null,se=j,Ne=j=0,Me=null,qe=C.next();se!==null&&!qe.done;Ne++,qe=C.next()){se.index>Ne?(Me=se,se=null):Me=se.sibling;var bn=M(N,se,qe.value,B);if(bn===null){se===null&&(se=Me);break}e&&se&&bn.alternate===null&&t(N,se),j=u(bn,j,Ne),Be===null?ce=bn:Be.sibling=bn,Be=bn,se=Me}if(qe.done)return a(N,se),Le&&Ta(N,Ne),ce;if(se===null){for(;!qe.done;Ne++,qe=C.next())qe=H(N,qe.value,B),qe!==null&&(j=u(qe,j,Ne),Be===null?ce=qe:Be.sibling=qe,Be=qe);return Le&&Ta(N,Ne),ce}for(se=i(se);!qe.done;Ne++,qe=C.next())qe=L(se,N,Ne,qe.value,B),qe!==null&&(e&&qe.alternate!==null&&se.delete(qe.key===null?Ne:qe.key),j=u(qe,j,Ne),Be===null?ce=qe:Be.sibling=qe,Be=qe);return e&&se.forEach(function(hv){return t(N,hv)}),Le&&Ta(N,Ne),ce}function Ie(N,j,C,B){if(typeof C=="object"&&C!==null&&C.type===O&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case k:e:{for(var ce=C.key;j!==null;){if(j.key===ce){if(ce=C.type,ce===O){if(j.tag===7){a(N,j.sibling),B=c(j,C.props.children),B.return=N,N=B;break e}}else if(j.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===_e&&Mn(ce)===j.type){a(N,j.sibling),B=c(j,C.props),di(B,C),B.return=N,N=B;break e}a(N,j);break}else t(N,j);j=j.sibling}C.type===O?(B=Tn(C.props.children,N.mode,B,C.key),B.return=N,N=B):(B=vr(C.type,C.key,C.props,null,N.mode,B),di(B,C),B.return=N,N=B)}return m(N);case S:e:{for(ce=C.key;j!==null;){if(j.key===ce)if(j.tag===4&&j.stateNode.containerInfo===C.containerInfo&&j.stateNode.implementation===C.implementation){a(N,j.sibling),B=c(j,C.children||[]),B.return=N,N=B;break e}else{a(N,j);break}else t(N,j);j=j.sibling}B=ho(C,N.mode,B),B.return=N,N=B}return m(N);case _e:return C=Mn(C),Ie(N,j,C,B)}if(de(C))return ae(N,j,C,B);if(te(C)){if(ce=te(C),typeof ce!="function")throw Error(l(150));return C=ce.call(C),he(N,j,C,B)}if(typeof C.then=="function")return Ie(N,j,jr(C),B);if(C.$$typeof===D)return Ie(N,j,_r(N,C),B);kr(N,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,j!==null&&j.tag===6?(a(N,j.sibling),B=c(j,C),B.return=N,N=B):(a(N,j),B=uo(C,N.mode,B),B.return=N,N=B),m(N)):a(N,j)}return function(N,j,C,B){try{ui=0;var ce=Ie(N,j,C,B);return ms=null,ce}catch(se){if(se===fs||se===wr)throw se;var Be=Gt(29,se,null,N.mode);return Be.lanes=B,Be.return=N,Be}}}var Ln=Xd(!0),Jd=Xd(!1),tn=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ko(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function an(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function nn(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(He&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=pr(e),Md(e,null,a),t}return gr(e,i,t,a),pr(e)}function hi(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,$u(e,a)}}function Eo(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var c=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?c=u=m:u=u.next=m,a=a.next}while(a!==null);u===null?c=u=t:u=u.next=t}else c=u=t;a={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var No=!1;function fi(){if(No){var e=hs;if(e!==null)throw e}}function mi(e,t,a,i){No=!1;var c=e.updateQueue;tn=!1;var u=c.firstBaseUpdate,m=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var _=y,R=_.next;_.next=null,m===null?u=R:m.next=R,m=_;var U=e.alternate;U!==null&&(U=U.updateQueue,y=U.lastBaseUpdate,y!==m&&(y===null?U.firstBaseUpdate=R:y.next=R,U.lastBaseUpdate=_))}if(u!==null){var H=c.baseState;m=0,U=R=_=null,y=u;do{var M=y.lane&-536870913,L=M!==y.lane;if(L?(Re&M)===M:(i&M)===M){M!==0&&M===ds&&(No=!0),U!==null&&(U=U.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var ae=e,he=y;M=t;var Ie=a;switch(he.tag){case 1:if(ae=he.payload,typeof ae=="function"){H=ae.call(Ie,H,M);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=he.payload,M=typeof ae=="function"?ae.call(Ie,H,M):ae,M==null)break e;H=x({},H,M);break e;case 2:tn=!0}}M=y.callback,M!==null&&(e.flags|=64,L&&(e.flags|=8192),L=c.callbacks,L===null?c.callbacks=[M]:L.push(M))}else L={lane:M,tag:y.tag,payload:y.payload,callback:y.callback,next:null},U===null?(R=U=L,_=H):U=U.next=L,m|=M;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;L=y,y=L.next,L.next=null,c.lastBaseUpdate=L,c.shared.pending=null}}while(!0);U===null&&(_=H),c.baseState=_,c.firstBaseUpdate=R,c.lastBaseUpdate=U,u===null&&(c.shared.lanes=0),cn|=m,e.lanes=m,e.memoizedState=H}}function Zd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Wd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Zd(a[e],t)}var gs=w(null),Er=w(0);function Fd(e,t){e=qa,Q(Er,e),Q(gs,t),qa=e|t.baseLanes}function To(){Q(Er,qa),Q(gs,gs.current)}function Ao(){qa=Er.current,q(gs),q(Er)}var Kt=w(null),na=null;function sn(e){var t=e.alternate;Q(ot,ot.current&1),Q(Kt,e),na===null&&(t===null||gs.current!==null||t.memoizedState!==null)&&(na=e)}function Oo(e){Q(ot,ot.current),Q(Kt,e),na===null&&(na=e)}function eh(e){e.tag===22?(Q(ot,ot.current),Q(Kt,e),na===null&&(na=e)):rn()}function rn(){Q(ot,ot.current),Q(Kt,Kt.current)}function Pt(e){q(Kt),na===e&&(na=null),q(ot)}var ot=w(0);function Nr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Uc(a)||zc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ca=0,Ee=null,Ye=null,dt=null,Tr=!1,ps=!1,Un=!1,Ar=0,gi=0,vs=null,a0=0;function it(){throw Error(l(321))}function Co(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!$t(e[a],t[a]))return!1;return!0}function Ro(e,t,a,i,c,u){return Ca=u,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?zh:Io,Un=!1,u=a(i,c),Un=!1,ps&&(u=ah(t,a,i,c)),th(e),u}function th(e){A.H=yi;var t=Ye!==null&&Ye.next!==null;if(Ca=0,dt=Ye=Ee=null,Tr=!1,gi=0,vs=null,t)throw Error(l(300));e===null||ht||(e=e.dependencies,e!==null&&br(e)&&(ht=!0))}function ah(e,t,a,i){Ee=e;var c=0;do{if(ps&&(vs=null),gi=0,ps=!1,25<=c)throw Error(l(301));if(c+=1,dt=Ye=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}A.H=Bh,u=t(a,i)}while(ps);return u}function n0(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?pi(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Ee.flags|=1024),t}function Mo(){var e=Ar!==0;return Ar=0,e}function Do(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Lo(e){if(Tr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Tr=!1}Ca=0,dt=Ye=Ee=null,ps=!1,gi=Ar=0,vs=null}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ee.memoizedState=dt=e:dt=dt.next=e,dt}function ct(){if(Ye===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=dt===null?Ee.memoizedState:dt.next;if(t!==null)dt=t,Ye=e;else{if(e===null)throw Ee.alternate===null?Error(l(467)):Error(l(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},dt===null?Ee.memoizedState=dt=e:dt=dt.next=e}return dt}function Or(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pi(e){var t=gi;return gi+=1,vs===null&&(vs=[]),e=Vd(vs,e,t),t=Ee,(dt===null?t.memoizedState:dt.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?zh:Io),e}function Cr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pi(e);if(e.$$typeof===D)return jt(e)}throw Error(l(438,String(e)))}function Uo(e){var t=null,a=Ee.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=Ee.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Or(),Ee.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=Y;return t.index++,a}function Ra(e,t){return typeof t=="function"?t(e):t}function Rr(e){var t=ct();return zo(t,Ye,e)}function zo(e,t,a){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=a;var c=e.baseQueue,u=i.pending;if(u!==null){if(c!==null){var m=c.next;c.next=u.next,u.next=m}t.baseQueue=c=u,i.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var y=m=null,_=null,R=t,U=!1;do{var H=R.lane&-536870913;if(H!==R.lane?(Re&H)===H:(Ca&H)===H){var M=R.revertLane;if(M===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),H===ds&&(U=!0);else if((Ca&M)===M){R=R.next,M===ds&&(U=!0);continue}else H={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},_===null?(y=_=H,m=u):_=_.next=H,Ee.lanes|=M,cn|=M;H=R.action,Un&&a(u,H),u=R.hasEagerState?R.eagerState:a(u,H)}else M={lane:H,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},_===null?(y=_=M,m=u):_=_.next=M,Ee.lanes|=H,cn|=H;R=R.next}while(R!==null&&R!==t);if(_===null?m=u:_.next=y,!$t(u,e.memoizedState)&&(ht=!0,U&&(a=hs,a!==null)))throw a;e.memoizedState=u,e.baseState=m,e.baseQueue=_,i.lastRenderedState=u}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Bo(e){var t=ct(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var i=a.dispatch,c=a.pending,u=t.memoizedState;if(c!==null){a.pending=null;var m=c=c.next;do u=e(u,m.action),m=m.next;while(m!==c);$t(u,t.memoizedState)||(ht=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,i]}function nh(e,t,a){var i=Ee,c=ct(),u=Le;if(u){if(a===void 0)throw Error(l(407));a=a()}else a=t();var m=!$t((Ye||c).memoizedState,a);if(m&&(c.memoizedState=a,ht=!0),c=c.queue,$o(rh.bind(null,i,c,e),[e]),c.getSnapshot!==t||m||dt!==null&&dt.memoizedState.tag&1){if(i.flags|=2048,ys(9,{destroy:void 0},ih.bind(null,i,c,a,t),null),Xe===null)throw Error(l(349));u||(Ca&127)!==0||sh(i,t,a)}return a}function sh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ee.updateQueue,t===null?(t=Or(),Ee.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function ih(e,t,a,i){t.value=a,t.getSnapshot=i,lh(t)&&oh(e)}function rh(e,t,a){return a(function(){lh(t)&&oh(e)})}function lh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!$t(e,a)}catch{return!0}}function oh(e){var t=Nn(e,2);t!==null&&Ht(t,e,2)}function qo(e){var t=Rt();if(typeof e=="function"){var a=e;if(e=a(),Un){xt(!0);try{a()}finally{xt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:e},t}function ch(e,t,a,i){return e.baseState=a,zo(e,Ye,typeof i=="function"?i:Ra)}function s0(e,t,a,i,c){if(Lr(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};A.T!==null?a(!0):u.isTransition=!1,i(u),a=t.pending,a===null?(u.next=t.pending=u,uh(t,u)):(u.next=a.next,t.pending=a.next=u)}}function uh(e,t){var a=t.action,i=t.payload,c=e.state;if(t.isTransition){var u=A.T,m={};A.T=m;try{var y=a(c,i),_=A.S;_!==null&&_(m,y),dh(e,t,y)}catch(R){Ho(e,t,R)}finally{u!==null&&m.types!==null&&(u.types=m.types),A.T=u}}else try{u=a(c,i),dh(e,t,u)}catch(R){Ho(e,t,R)}}function dh(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){hh(e,t,i)},function(i){return Ho(e,t,i)}):hh(e,t,a)}function hh(e,t,a){t.status="fulfilled",t.value=a,fh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,uh(e,a)))}function Ho(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,fh(t),t=t.next;while(t!==i)}e.action=null}function fh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function mh(e,t){return t}function gh(e,t){if(Le){var a=Xe.formState;if(a!==null){e:{var i=Ee;if(Le){if(Fe){t:{for(var c=Fe,u=aa;c.nodeType!==8;){if(!u){c=null;break t}if(c=sa(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){Fe=sa(c.nextSibling),i=c.data==="F!";break e}}Fa(i)}i=!1}i&&(t=a[0])}}return a=Rt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:t},a.queue=i,a=Dh.bind(null,Ee,i),i.dispatch=a,i=qo(!1),u=Vo.bind(null,Ee,!1,i.queue),i=Rt(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,a=s0.bind(null,Ee,c,u,a),c.dispatch=a,i.memoizedState=e,[t,a,!1]}function ph(e){var t=ct();return vh(t,Ye,e)}function vh(e,t,a){if(t=zo(e,t,mh)[0],e=Rr(Ra)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=pi(t)}catch(m){throw m===fs?wr:m}else i=t;t=ct();var c=t.queue,u=c.dispatch;return a!==t.memoizedState&&(Ee.flags|=2048,ys(9,{destroy:void 0},i0.bind(null,c,a),null)),[i,u,e]}function i0(e,t){e.action=t}function yh(e){var t=ct(),a=Ye;if(a!==null)return vh(t,a,e);ct(),t=t.memoizedState,a=ct();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function ys(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=Ee.updateQueue,t===null&&(t=Or(),Ee.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function bh(){return ct().memoizedState}function Mr(e,t,a,i){var c=Rt();Ee.flags|=e,c.memoizedState=ys(1|t,{destroy:void 0},a,i===void 0?null:i)}function Dr(e,t,a,i){var c=ct();i=i===void 0?null:i;var u=c.memoizedState.inst;Ye!==null&&i!==null&&Co(i,Ye.memoizedState.deps)?c.memoizedState=ys(t,u,a,i):(Ee.flags|=e,c.memoizedState=ys(1|t,u,a,i))}function _h(e,t){Mr(8390656,8,e,t)}function $o(e,t){Dr(2048,8,e,t)}function r0(e){Ee.flags|=4;var t=Ee.updateQueue;if(t===null)t=Or(),Ee.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function xh(e){var t=ct().memoizedState;return r0({ref:t,nextImpl:e}),function(){if((He&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function wh(e,t){return Dr(4,2,e,t)}function Sh(e,t){return Dr(4,4,e,t)}function jh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kh(e,t,a){a=a!=null?a.concat([e]):null,Dr(4,4,jh.bind(null,t,e),a)}function Go(){}function Eh(e,t){var a=ct();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Co(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Nh(e,t){var a=ct();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Co(t,i[1]))return i[0];if(i=e(),Un){xt(!0);try{e()}finally{xt(!1)}}return a.memoizedState=[i,t],i}function Ko(e,t,a){return a===void 0||(Ca&1073741824)!==0&&(Re&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Af(),Ee.lanes|=e,cn|=e,a)}function Th(e,t,a,i){return $t(a,t)?a:gs.current!==null?(e=Ko(e,a,i),$t(e,t)||(ht=!0),e):(Ca&42)===0||(Ca&1073741824)!==0&&(Re&261930)===0?(ht=!0,e.memoizedState=a):(e=Af(),Ee.lanes|=e,cn|=e,t)}function Ah(e,t,a,i,c){var u=P.p;P.p=u!==0&&8>u?u:8;var m=A.T,y={};A.T=y,Vo(e,!1,t,a);try{var _=c(),R=A.S;if(R!==null&&R(y,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var U=t0(_,i);vi(e,t,U,It(e))}else vi(e,t,i,It(e))}catch(H){vi(e,t,{then:function(){},status:"rejected",reason:H},It())}finally{P.p=u,m!==null&&y.types!==null&&(m.types=y.types),A.T=m}}function l0(){}function Po(e,t,a,i){if(e.tag!==5)throw Error(l(476));var c=Oh(e).queue;Ah(e,c,t,ee,a===null?l0:function(){return Ch(e),a(i)})}function Oh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:ee},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ch(e){var t=Oh(e);t.next===null&&(t=e.alternate.memoizedState),vi(e,t.next.queue,{},It())}function Yo(){return jt(Di)}function Rh(){return ct().memoizedState}function Mh(){return ct().memoizedState}function o0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=It();e=an(a);var i=nn(t,e,a);i!==null&&(Ht(i,t,a),hi(i,t,a)),t={cache:_o()},e.payload=t;return}t=t.return}}function c0(e,t,a){var i=It();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Lr(e)?Lh(t,a):(a=oo(e,t,a,i),a!==null&&(Ht(a,e,i),Uh(a,t,i)))}function Dh(e,t,a){var i=It();vi(e,t,a,i)}function vi(e,t,a,i){var c={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lr(e))Lh(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,y=u(m,a);if(c.hasEagerState=!0,c.eagerState=y,$t(y,m))return gr(e,t,c,0),Xe===null&&mr(),!1}catch{}if(a=oo(e,t,c,i),a!==null)return Ht(a,e,i),Uh(a,t,i),!0}return!1}function Vo(e,t,a,i){if(i={lane:2,revertLane:jc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Lr(e)){if(t)throw Error(l(479))}else t=oo(e,a,i,2),t!==null&&Ht(t,e,2)}function Lr(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Lh(e,t){ps=Tr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Uh(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,$u(e,a)}}var yi={readContext:jt,use:Cr,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};yi.useEffectEvent=it;var zh={readContext:jt,use:Cr,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:_h,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Mr(4194308,4,jh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Mr(4194308,4,e,t)},useInsertionEffect:function(e,t){Mr(4,2,e,t)},useMemo:function(e,t){var a=Rt();t=t===void 0?null:t;var i=e();if(Un){xt(!0);try{e()}finally{xt(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=Rt();if(a!==void 0){var c=a(t);if(Un){xt(!0);try{a(t)}finally{xt(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=c0.bind(null,Ee,e),[i.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:function(e){e=qo(e);var t=e.queue,a=Dh.bind(null,Ee,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Go,useDeferredValue:function(e,t){var a=Rt();return Ko(a,e,t)},useTransition:function(){var e=qo(!1);return e=Ah.bind(null,Ee,e.queue,!0,!1),Rt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=Ee,c=Rt();if(Le){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),Xe===null)throw Error(l(349));(Re&127)!==0||sh(i,t,a)}c.memoizedState=a;var u={value:a,getSnapshot:t};return c.queue=u,_h(rh.bind(null,i,u,e),[e]),i.flags|=2048,ys(9,{destroy:void 0},ih.bind(null,i,u,a,t),null),a},useId:function(){var e=Rt(),t=Xe.identifierPrefix;if(Le){var a=va,i=pa;a=(i&~(1<<32-Qe(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ar++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=a0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Yo,useFormState:gh,useActionState:gh,useOptimistic:function(e){var t=Rt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Vo.bind(null,Ee,!0,a),a.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return Rt().memoizedState=o0.bind(null,Ee)},useEffectEvent:function(e){var t=Rt(),a={impl:e};return t.memoizedState=a,function(){if((He&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Io={readContext:jt,use:Cr,useCallback:Eh,useContext:jt,useEffect:$o,useImperativeHandle:kh,useInsertionEffect:wh,useLayoutEffect:Sh,useMemo:Nh,useReducer:Rr,useRef:bh,useState:function(){return Rr(Ra)},useDebugValue:Go,useDeferredValue:function(e,t){var a=ct();return Th(a,Ye.memoizedState,e,t)},useTransition:function(){var e=Rr(Ra)[0],t=ct().memoizedState;return[typeof e=="boolean"?e:pi(e),t]},useSyncExternalStore:nh,useId:Rh,useHostTransitionStatus:Yo,useFormState:ph,useActionState:ph,useOptimistic:function(e,t){var a=ct();return ch(a,Ye,e,t)},useMemoCache:Uo,useCacheRefresh:Mh};Io.useEffectEvent=xh;var Bh={readContext:jt,use:Cr,useCallback:Eh,useContext:jt,useEffect:$o,useImperativeHandle:kh,useInsertionEffect:wh,useLayoutEffect:Sh,useMemo:Nh,useReducer:Bo,useRef:bh,useState:function(){return Bo(Ra)},useDebugValue:Go,useDeferredValue:function(e,t){var a=ct();return Ye===null?Ko(a,e,t):Th(a,Ye.memoizedState,e,t)},useTransition:function(){var e=Bo(Ra)[0],t=ct().memoizedState;return[typeof e=="boolean"?e:pi(e),t]},useSyncExternalStore:nh,useId:Rh,useHostTransitionStatus:Yo,useFormState:yh,useActionState:yh,useOptimistic:function(e,t){var a=ct();return Ye!==null?ch(a,Ye,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:Mh};Bh.useEffectEvent=xh;function Qo(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:x({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xo={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=It(),c=an(i);c.payload=t,a!=null&&(c.callback=a),t=nn(e,c,i),t!==null&&(Ht(t,e,i),hi(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=It(),c=an(i);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=nn(e,c,i),t!==null&&(Ht(t,e,i),hi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=It(),i=an(a);i.tag=2,t!=null&&(i.callback=t),t=nn(e,i,a),t!==null&&(Ht(t,e,a),hi(t,e,a))}};function qh(e,t,a,i,c,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,m):t.prototype&&t.prototype.isPureReactComponent?!si(a,i)||!si(c,u):!0}function Hh(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&Xo.enqueueReplaceState(t,t.state,null)}function zn(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=x({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function $h(e){fr(e)}function Gh(e){console.error(e)}function Kh(e){fr(e)}function Ur(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ph(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Jo(e,t,a){return a=an(a),a.tag=3,a.payload={element:null},a.callback=function(){Ur(e,t)},a}function Yh(e){return e=an(e),e.tag=3,e}function Vh(e,t,a,i){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var u=i.value;e.payload=function(){return c(u)},e.callback=function(){Ph(t,a,i)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Ph(t,a,i),typeof c!="function"&&(un===null?un=new Set([this]):un.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function u0(e,t,a,i,c){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&us(t,a,c,!0),a=Kt.current,a!==null){switch(a.tag){case 31:case 13:return na===null?Qr():a.alternate===null&&rt===0&&(rt=3),a.flags&=-257,a.flags|=65536,a.lanes=c,i===Sr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),xc(e,i,c)),!1;case 22:return a.flags|=65536,i===Sr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),xc(e,i,c)),!1}throw Error(l(435,a.tag))}return xc(e,i,c),Qr(),!1}if(Le)return t=Kt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==go&&(e=Error(l(422),{cause:i}),li(Ft(e,a)))):(i!==go&&(t=Error(l(423),{cause:i}),li(Ft(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=Ft(i,a),c=Jo(e.stateNode,i,c),Eo(e,c),rt!==4&&(rt=2)),!1;var u=Error(l(520),{cause:i});if(u=Ft(u,a),Ei===null?Ei=[u]:Ei.push(u),rt!==4&&(rt=2),t===null)return!0;i=Ft(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Jo(a.stateNode,i,e),Eo(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(un===null||!un.has(u))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Yh(c),Vh(c,e,a,i),Eo(a,c),!1}a=a.return}while(a!==null);return!1}var Zo=Error(l(461)),ht=!1;function kt(e,t,a,i){t.child=e===null?Jd(t,null,a,i):Ln(t,e.child,a,i)}function Ih(e,t,a,i,c){a=a.render;var u=t.ref;if("ref"in i){var m={};for(var y in i)y!=="ref"&&(m[y]=i[y])}else m=i;return Cn(t),i=Ro(e,t,a,m,u,c),y=Mo(),e!==null&&!ht?(Do(e,t,c),Ma(e,t,c)):(Le&&y&&fo(t),t.flags|=1,kt(e,t,i,c),t.child)}function Qh(e,t,a,i,c){if(e===null){var u=a.type;return typeof u=="function"&&!co(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Xh(e,t,u,i,c)):(e=vr(a.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!ic(e,c)){var m=u.memoizedProps;if(a=a.compare,a=a!==null?a:si,a(m,i)&&e.ref===t.ref)return Ma(e,t,c)}return t.flags|=1,e=Na(u,i),e.ref=t.ref,e.return=t,t.child=e}function Xh(e,t,a,i,c){if(e!==null){var u=e.memoizedProps;if(si(u,i)&&e.ref===t.ref)if(ht=!1,t.pendingProps=i=u,ic(e,c))(e.flags&131072)!==0&&(ht=!0);else return t.lanes=e.lanes,Ma(e,t,c)}return Wo(e,t,a,i,c)}function Jh(e,t,a,i){var c=i.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~u}else i=0,t.child=null;return Zh(e,t,u,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&xr(t,u!==null?u.cachePool:null),u!==null?Fd(t,u):To(),eh(t);else return i=t.lanes=536870912,Zh(e,t,u!==null?u.baseLanes|a:a,a,i)}else u!==null?(xr(t,u.cachePool),Fd(t,u),rn(),t.memoizedState=null):(e!==null&&xr(t,null),To(),rn());return kt(e,t,c,a),t.child}function bi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Zh(e,t,a,i,c){var u=wo();return u=u===null?null:{parent:ut._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&xr(t,null),To(),eh(t),e!==null&&us(e,t,i,!0),t.childLanes=c,null}function zr(e,t){return t=qr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Wh(e,t,a){return Ln(t,e.child,null,a),e=zr(t,t.pendingProps),e.flags|=2,Pt(t),t.memoizedState=null,e}function d0(e,t,a){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Le){if(i.mode==="hidden")return e=zr(t,i),t.lanes=536870912,bi(null,e);if(Oo(t),(e=Fe)?(e=dm(e,aa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Za!==null?{id:pa,overflow:va}:null,retryLane:536870912,hydrationErrors:null},a=Ld(e),a.return=t,t.child=a,St=t,Fe=null)):e=null,e===null)throw Fa(t);return t.lanes=536870912,null}return zr(t,i)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(Oo(t),c)if(t.flags&256)t.flags&=-257,t=Wh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(ht||us(e,t,a,!1),c=(a&e.childLanes)!==0,ht||c){if(i=Xe,i!==null&&(m=Gu(i,a),m!==0&&m!==u.retryLane))throw u.retryLane=m,Nn(e,m),Ht(i,e,m),Zo;Qr(),t=Wh(e,t,a)}else e=u.treeContext,Fe=sa(m.nextSibling),St=t,Le=!0,Wa=null,aa=!1,e!==null&&Bd(t,e),t=zr(t,i),t.flags|=4096;return t}return e=Na(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Br(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Wo(e,t,a,i,c){return Cn(t),a=Ro(e,t,a,i,void 0,c),i=Mo(),e!==null&&!ht?(Do(e,t,c),Ma(e,t,c)):(Le&&i&&fo(t),t.flags|=1,kt(e,t,a,c),t.child)}function Fh(e,t,a,i,c,u){return Cn(t),t.updateQueue=null,a=ah(t,i,a,c),th(e),i=Mo(),e!==null&&!ht?(Do(e,t,u),Ma(e,t,u)):(Le&&i&&fo(t),t.flags|=1,kt(e,t,a,u),t.child)}function ef(e,t,a,i,c){if(Cn(t),t.stateNode===null){var u=rs,m=a.contextType;typeof m=="object"&&m!==null&&(u=jt(m)),u=new a(i,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Xo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=i,u.state=t.memoizedState,u.refs={},jo(t),m=a.contextType,u.context=typeof m=="object"&&m!==null?jt(m):rs,u.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Qo(t,a,m,i),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&Xo.enqueueReplaceState(u,u.state,null),mi(t,i,u,c),fi(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,_=zn(a,y);u.props=_;var R=u.context,U=a.contextType;m=rs,typeof U=="object"&&U!==null&&(m=jt(U));var H=a.getDerivedStateFromProps;U=typeof H=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,U||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||R!==m)&&Hh(t,u,i,m),tn=!1;var M=t.memoizedState;u.state=M,mi(t,i,u,c),fi(),R=t.memoizedState,y||M!==R||tn?(typeof H=="function"&&(Qo(t,a,H,i),R=t.memoizedState),(_=tn||qh(t,a,_,i,M,R,m))?(U||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=R),u.props=i,u.state=R,u.context=m,i=_):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,ko(e,t),m=t.memoizedProps,U=zn(a,m),u.props=U,H=t.pendingProps,M=u.context,R=a.contextType,_=rs,typeof R=="object"&&R!==null&&(_=jt(R)),y=a.getDerivedStateFromProps,(R=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==H||M!==_)&&Hh(t,u,i,_),tn=!1,M=t.memoizedState,u.state=M,mi(t,i,u,c),fi();var L=t.memoizedState;m!==H||M!==L||tn||e!==null&&e.dependencies!==null&&br(e.dependencies)?(typeof y=="function"&&(Qo(t,a,y,i),L=t.memoizedState),(U=tn||qh(t,a,U,i,M,L,_)||e!==null&&e.dependencies!==null&&br(e.dependencies))?(R||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,L,_),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,L,_)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=L),u.props=i,u.state=L,u.context=_,i=U):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),i=!1)}return u=i,Br(e,t),i=(t.flags&128)!==0,u||i?(u=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&i?(t.child=Ln(t,e.child,null,c),t.child=Ln(t,null,a,c)):kt(e,t,a,c),t.memoizedState=u.state,e=t.child):e=Ma(e,t,c),e}function tf(e,t,a,i){return An(),t.flags|=256,kt(e,t,a,i),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ec(e){return{baseLanes:e,cachePool:Pd()}}function tc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Vt),e}function af(e,t,a){var i=t.pendingProps,c=!1,u=(t.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:(ot.current&2)!==0),m&&(c=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(c?sn(t):rn(),(e=Fe)?(e=dm(e,aa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Za!==null?{id:pa,overflow:va}:null,retryLane:536870912,hydrationErrors:null},a=Ld(e),a.return=t,t.child=a,St=t,Fe=null)):e=null,e===null)throw Fa(t);return zc(e)?t.lanes=32:t.lanes=536870912,null}var y=i.children;return i=i.fallback,c?(rn(),c=t.mode,y=qr({mode:"hidden",children:y},c),i=Tn(i,c,a,null),y.return=t,i.return=t,y.sibling=i,t.child=y,i=t.child,i.memoizedState=ec(a),i.childLanes=tc(e,m,a),t.memoizedState=Fo,bi(null,i)):(sn(t),ac(t,y))}var _=e.memoizedState;if(_!==null&&(y=_.dehydrated,y!==null)){if(u)t.flags&256?(sn(t),t.flags&=-257,t=nc(e,t,a)):t.memoizedState!==null?(rn(),t.child=e.child,t.flags|=128,t=null):(rn(),y=i.fallback,c=t.mode,i=qr({mode:"visible",children:i.children},c),y=Tn(y,c,a,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,Ln(t,e.child,null,a),i=t.child,i.memoizedState=ec(a),i.childLanes=tc(e,m,a),t.memoizedState=Fo,t=bi(null,i));else if(sn(t),zc(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var R=m.dgst;m=R,i=Error(l(419)),i.stack="",i.digest=m,li({value:i,source:null,stack:null}),t=nc(e,t,a)}else if(ht||us(e,t,a,!1),m=(a&e.childLanes)!==0,ht||m){if(m=Xe,m!==null&&(i=Gu(m,a),i!==0&&i!==_.retryLane))throw _.retryLane=i,Nn(e,i),Ht(m,e,i),Zo;Uc(y)||Qr(),t=nc(e,t,a)}else Uc(y)?(t.flags|=192,t.child=e.child,t=null):(e=_.treeContext,Fe=sa(y.nextSibling),St=t,Le=!0,Wa=null,aa=!1,e!==null&&Bd(t,e),t=ac(t,i.children),t.flags|=4096);return t}return c?(rn(),y=i.fallback,c=t.mode,_=e.child,R=_.sibling,i=Na(_,{mode:"hidden",children:i.children}),i.subtreeFlags=_.subtreeFlags&65011712,R!==null?y=Na(R,y):(y=Tn(y,c,a,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,bi(null,i),i=t.child,y=e.child.memoizedState,y===null?y=ec(a):(c=y.cachePool,c!==null?(_=ut._currentValue,c=c.parent!==_?{parent:_,pool:_}:c):c=Pd(),y={baseLanes:y.baseLanes|a,cachePool:c}),i.memoizedState=y,i.childLanes=tc(e,m,a),t.memoizedState=Fo,bi(e.child,i)):(sn(t),a=e.child,e=a.sibling,a=Na(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function ac(e,t){return t=qr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qr(e,t){return e=Gt(22,e,null,t),e.lanes=0,e}function nc(e,t,a){return Ln(t,e.child,null,a),e=ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nf(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),yo(e.return,t,a)}function sc(e,t,a,i,c,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:c,treeForkCount:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=i,m.tail=a,m.tailMode=c,m.treeForkCount=u)}function sf(e,t,a){var i=t.pendingProps,c=i.revealOrder,u=i.tail;i=i.children;var m=ot.current,y=(m&2)!==0;if(y?(m=m&1|2,t.flags|=128):m&=1,Q(ot,m),kt(e,t,i,a),i=Le?ri:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nf(e,a,t);else if(e.tag===19)nf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&Nr(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),sc(t,!1,c,a,u,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Nr(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}sc(t,!0,a,null,u,i);break;case"together":sc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Ma(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),cn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(us(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=Na(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Na(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ic(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&br(e)))}function h0(e,t,a){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),en(t,ut,e.memoizedState.cache),An();break;case 27:case 5:tt(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:en(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Oo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(sn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?af(e,t,a):(sn(t),e=Ma(e,t,a),e!==null?e.sibling:null);sn(t);break;case 19:var c=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(us(e,t,a,!1),i=(a&t.childLanes)!==0),c){if(i)return sf(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(ot,ot.current),i)break;return null;case 22:return t.lanes=0,Jh(e,t,a,t.pendingProps);case 24:en(t,ut,e.memoizedState.cache)}return Ma(e,t,a)}function rf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ht=!0;else{if(!ic(e,a)&&(t.flags&128)===0)return ht=!1,h0(e,t,a);ht=(e.flags&131072)!==0}else ht=!1,Le&&(t.flags&1048576)!==0&&zd(t,ri,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Mn(t.elementType),t.type=e,typeof e=="function")co(e)?(i=zn(e,i),t.tag=1,t=ef(null,t,e,i,a)):(t.tag=0,t=Wo(null,t,e,i,a));else{if(e!=null){var c=e.$$typeof;if(c===K){t.tag=11,t=Ih(null,t,e,i,a);break e}else if(c===Z){t.tag=14,t=Qh(null,t,e,i,a);break e}}throw t=me(e)||e,Error(l(306,t,""))}}return t;case 0:return Wo(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,c=zn(i,t.pendingProps),ef(e,t,i,c,a);case 3:e:{if(V(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var u=t.memoizedState;c=u.element,ko(e,t),mi(t,i,null,a);var m=t.memoizedState;if(i=m.cache,en(t,ut,i),i!==u.cache&&bo(t,[ut],a,!0),fi(),i=m.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=tf(e,t,i,a);break e}else if(i!==c){c=Ft(Error(l(424)),t),li(c),t=tf(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Fe=sa(e.firstChild),St=t,Le=!0,Wa=null,aa=!0,a=Jd(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(An(),i===c){t=Ma(e,t,a);break e}kt(e,t,i,a)}t=t.child}return t;case 26:return Br(e,t),e===null?(a=vm(t.type,null,t.pendingProps,null))?t.memoizedState=a:Le||(a=t.type,e=t.pendingProps,i=tl(pe.current).createElement(a),i[wt]=t,i[Dt]=e,Et(i,a,e),yt(i),t.stateNode=i):t.memoizedState=vm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return tt(t),e===null&&Le&&(i=t.stateNode=mm(t.type,t.pendingProps,pe.current),St=t,aa=!0,c=Fe,mn(t.type)?(Bc=c,Fe=sa(i.firstChild)):Fe=c),kt(e,t,t.pendingProps.children,a),Br(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((c=i=Fe)&&(i=G0(i,t.type,t.pendingProps,aa),i!==null?(t.stateNode=i,St=t,Fe=sa(i.firstChild),aa=!1,c=!0):c=!1),c||Fa(t)),tt(t),c=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,i=u.children,Mc(c,u)?i=null:m!==null&&Mc(c,m)&&(t.flags|=32),t.memoizedState!==null&&(c=Ro(e,t,n0,null,null,a),Di._currentValue=c),Br(e,t),kt(e,t,i,a),t.child;case 6:return e===null&&Le&&((e=a=Fe)&&(a=K0(a,t.pendingProps,aa),a!==null?(t.stateNode=a,St=t,Fe=null,e=!0):e=!1),e||Fa(t)),null;case 13:return af(e,t,a);case 4:return V(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ln(t,null,i,a):kt(e,t,i,a),t.child;case 11:return Ih(e,t,t.type,t.pendingProps,a);case 7:return kt(e,t,t.pendingProps,a),t.child;case 8:return kt(e,t,t.pendingProps.children,a),t.child;case 12:return kt(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,en(t,t.type,i.value),kt(e,t,i.children,a),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,Cn(t),c=jt(c),i=i(c),t.flags|=1,kt(e,t,i,a),t.child;case 14:return Qh(e,t,t.type,t.pendingProps,a);case 15:return Xh(e,t,t.type,t.pendingProps,a);case 19:return sf(e,t,a);case 31:return d0(e,t,a);case 22:return Jh(e,t,a,t.pendingProps);case 24:return Cn(t),i=jt(ut),e===null?(c=wo(),c===null&&(c=Xe,u=_o(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=a),c=u),t.memoizedState={parent:i,cache:c},jo(t),en(t,ut,c)):((e.lanes&a)!==0&&(ko(e,t),mi(t,null,null,a),fi()),c=e.memoizedState,u=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),en(t,ut,i)):(i=u.cache,en(t,ut,i),i!==c.cache&&bo(t,[ut],a,!0))),kt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Da(e){e.flags|=4}function rc(e,t,a,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Mf())e.flags|=8192;else throw Dn=Sr,So}else e.flags&=-16777217}function lf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wm(t))if(Mf())e.flags|=8192;else throw Dn=Sr,So}function Hr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?qu():536870912,e.lanes|=t,ws|=t)}function _i(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function f0(e,t,a){var i=t.pendingProps;switch(mo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return et(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Oa(ut),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(cs(t)?Da(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,po())),et(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Da(t),u!==null?(et(t),lf(t,u)):(et(t),rc(t,c,null,i,a))):u?u!==e.memoizedState?(Da(t),et(t),lf(t,u)):(et(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Da(t),et(t),rc(t,c,e,i,a)),null;case 27:if(F(t),a=pe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Da(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return et(t),null}e=W.current,cs(t)?qd(t):(e=mm(c,i,a),t.stateNode=e,Da(t))}return et(t),null;case 5:if(F(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Da(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return et(t),null}if(u=W.current,cs(t))qd(t);else{var m=tl(pe.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof i.is=="string"?m.createElement("select",{is:i.is}):m.createElement("select"),i.multiple?u.multiple=!0:i.size&&(u.size=i.size);break;default:u=typeof i.is=="string"?m.createElement(c,{is:i.is}):m.createElement(c)}}u[wt]=t,u[Dt]=i;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=u;e:switch(Et(u,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Da(t)}}return et(t),rc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Da(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=pe.current,cs(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,c=St,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[wt]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||nm(e.nodeValue,a)),e||Fa(t,!0)}else e=tl(e).createTextNode(i),e[wt]=t,t.stateNode=e}return et(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=cs(t),a!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[wt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),e=!1}else a=po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Pt(t),t):(Pt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return et(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=cs(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[wt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),c=!1}else c=po(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Pt(t),t):(Pt(t),null)}return Pt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==c&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Hr(t,t.updateQueue),et(t),null);case 4:return ye(),e===null&&Tc(t.stateNode.containerInfo),et(t),null;case 10:return Oa(t.type),et(t),null;case 19:if(q(ot),i=t.memoizedState,i===null)return et(t),null;if(c=(t.flags&128)!==0,u=i.rendering,u===null)if(c)_i(i,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Nr(e),u!==null){for(t.flags|=128,_i(i,!1),e=u.updateQueue,t.updateQueue=e,Hr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Dd(a,e),a=a.sibling;return Q(ot,ot.current&1|2),Le&&Ta(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Ct()>Yr&&(t.flags|=128,c=!0,_i(i,!1),t.lanes=4194304)}else{if(!c)if(e=Nr(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Hr(t,e),_i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!Le)return et(t),null}else 2*Ct()-i.renderingStartTime>Yr&&a!==536870912&&(t.flags|=128,c=!0,_i(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(e=i.last,e!==null?e.sibling=u:t.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ct(),e.sibling=null,a=ot.current,Q(ot,c?a&1|2:a&1),Le&&Ta(t,i.treeForkCount),e):(et(t),null);case 22:case 23:return Pt(t),Ao(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),a=t.updateQueue,a!==null&&Hr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&q(Rn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Oa(ut),et(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function m0(e,t){switch(mo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(ut),ye(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return F(t),null;case 31:if(t.memoizedState!==null){if(Pt(t),t.alternate===null)throw Error(l(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Pt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return q(ot),null;case 4:return ye(),null;case 10:return Oa(t.type),null;case 22:case 23:return Pt(t),Ao(),e!==null&&q(Rn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Oa(ut),null;case 25:return null;default:return null}}function of(e,t){switch(mo(t),t.tag){case 3:Oa(ut),ye();break;case 26:case 27:case 5:F(t);break;case 4:ye();break;case 31:t.memoizedState!==null&&Pt(t);break;case 13:Pt(t);break;case 19:q(ot);break;case 10:Oa(t.type);break;case 22:case 23:Pt(t),Ao(),e!==null&&q(Rn);break;case 24:Oa(ut)}}function xi(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var c=i.next;a=c;do{if((a.tag&e)===e){i=void 0;var u=a.create,m=a.inst;i=u(),m.destroy=i}a=a.next}while(a!==c)}}catch(y){Ke(t,t.return,y)}}function ln(e,t,a){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&e)===e){var m=i.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,c=t;var _=a,R=y;try{R()}catch(U){Ke(c,_,U)}}}i=i.next}while(i!==u)}}catch(U){Ke(t,t.return,U)}}function cf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Wd(t,a)}catch(i){Ke(e,e.return,i)}}}function uf(e,t,a){a.props=zn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Ke(e,t,i)}}function wi(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(c){Ke(e,t,c)}}function ya(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(c){Ke(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ke(e,t,c)}else a.current=null}function df(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(c){Ke(e,e.return,c)}}function lc(e,t,a){try{var i=e.stateNode;U0(i,e.type,a,t),i[Dt]=t}catch(c){Ke(e,e.return,c)}}function hf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mn(e.type)||e.tag===4}function oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cc(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ka));else if(i!==4&&(i===27&&mn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(cc(e,t,a),e=e.sibling;e!==null;)cc(e,t,a),e=e.sibling}function $r(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&mn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for($r(e,t,a),e=e.sibling;e!==null;)$r(e,t,a),e=e.sibling}function ff(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Et(t,i,a),t[wt]=e,t[Dt]=a}catch(u){Ke(e,e.return,u)}}var La=!1,ft=!1,uc=!1,mf=typeof WeakSet=="function"?WeakSet:Set,bt=null;function g0(e,t){if(e=e.containerInfo,Cc=ol,e=kd(e),ao(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var c=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var m=0,y=-1,_=-1,R=0,U=0,H=e,M=null;t:for(;;){for(var L;H!==a||c!==0&&H.nodeType!==3||(y=m+c),H!==u||i!==0&&H.nodeType!==3||(_=m+i),H.nodeType===3&&(m+=H.nodeValue.length),(L=H.firstChild)!==null;)M=H,H=L;for(;;){if(H===e)break t;if(M===a&&++R===c&&(y=m),M===u&&++U===i&&(_=m),(L=H.nextSibling)!==null)break;H=M,M=H.parentNode}H=L}a=y===-1||_===-1?null:{start:y,end:_}}else a=null}a=a||{start:0,end:0}}else a=null;for(Rc={focusedElem:e,selectionRange:a},ol=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,c=u.memoizedProps,u=u.memoizedState,i=a.stateNode;try{var ae=zn(a.type,c);e=i.getSnapshotBeforeUpdate(ae,u),i.__reactInternalSnapshotBeforeUpdate=e}catch(he){Ke(a,a.return,he)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Lc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Lc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function gf(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:za(e,a),i&4&&xi(5,a);break;case 1:if(za(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){Ke(a,a.return,m)}else{var c=zn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Ke(a,a.return,m)}}i&64&&cf(a),i&512&&wi(a,a.return);break;case 3:if(za(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Wd(e,t)}catch(m){Ke(a,a.return,m)}}break;case 27:t===null&&i&4&&ff(a);case 26:case 5:za(e,a),t===null&&i&4&&df(a),i&512&&wi(a,a.return);break;case 12:za(e,a);break;case 31:za(e,a),i&4&&yf(e,a);break;case 13:za(e,a),i&4&&bf(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=j0.bind(null,a),P0(e,a))));break;case 22:if(i=a.memoizedState!==null||La,!i){t=t!==null&&t.memoizedState!==null||ft,c=La;var u=ft;La=i,(ft=t)&&!u?Ba(e,a,(a.subtreeFlags&8772)!==0):za(e,a),La=c,ft=u}break;case 30:break;default:za(e,a)}}function pf(e){var t=e.alternate;t!==null&&(e.alternate=null,pf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ql(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Ut=!1;function Ua(e,t,a){for(a=a.child;a!==null;)vf(e,t,a),a=a.sibling}function vf(e,t,a){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(We,a)}catch{}switch(a.tag){case 26:ft||ya(a,t),Ua(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||ya(a,t);var i=nt,c=Ut;mn(a.type)&&(nt=a.stateNode,Ut=!1),Ua(e,t,a),Ci(a.stateNode),nt=i,Ut=c;break;case 5:ft||ya(a,t);case 6:if(i=nt,c=Ut,nt=null,Ua(e,t,a),nt=i,Ut=c,nt!==null)if(Ut)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(a.stateNode)}catch(u){Ke(a,t,u)}else try{nt.removeChild(a.stateNode)}catch(u){Ke(a,t,u)}break;case 18:nt!==null&&(Ut?(e=nt,cm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Os(e)):cm(nt,a.stateNode));break;case 4:i=nt,c=Ut,nt=a.stateNode.containerInfo,Ut=!0,Ua(e,t,a),nt=i,Ut=c;break;case 0:case 11:case 14:case 15:ln(2,a,t),ft||ln(4,a,t),Ua(e,t,a);break;case 1:ft||(ya(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&uf(a,t,i)),Ua(e,t,a);break;case 21:Ua(e,t,a);break;case 22:ft=(i=ft)||a.memoizedState!==null,Ua(e,t,a),ft=i;break;default:Ua(e,t,a)}}function yf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Os(e)}catch(a){Ke(t,t.return,a)}}}function bf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Os(e)}catch(a){Ke(t,t.return,a)}}function p0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new mf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new mf),t;default:throw Error(l(435,e.tag))}}function Gr(e,t){var a=p0(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var c=k0.bind(null,e,i);i.then(c,c)}})}function zt(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var c=a[i],u=e,m=t,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(mn(y.type)){nt=y.stateNode,Ut=!1;break e}break;case 5:nt=y.stateNode,Ut=!1;break e;case 3:case 4:nt=y.stateNode.containerInfo,Ut=!0;break e}y=y.return}if(nt===null)throw Error(l(160));vf(u,m,c),nt=null,Ut=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_f(t,e),t=t.sibling}var ca=null;function _f(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zt(t,e),Bt(e),i&4&&(ln(3,e,e.return),xi(3,e),ln(5,e,e.return));break;case 1:zt(t,e),Bt(e),i&512&&(ft||a===null||ya(a,a.return)),i&64&&La&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var c=ca;if(zt(t,e),Bt(e),i&512&&(ft||a===null||ya(a,a.return)),i&4){var u=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":u=c.getElementsByTagName("title")[0],(!u||u[Xs]||u[wt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(i),c.head.insertBefore(u,c.querySelector("head > title"))),Et(u,i,a),u[wt]=e,yt(u),i=u;break e;case"link":var m=_m("link","href",c).get(i+(a.href||""));if(m){for(var y=0;y<m.length;y++)if(u=m[y],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(y,1);break t}}u=c.createElement(i),Et(u,i,a),c.head.appendChild(u);break;case"meta":if(m=_m("meta","content",c).get(i+(a.content||""))){for(y=0;y<m.length;y++)if(u=m[y],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(y,1);break t}}u=c.createElement(i),Et(u,i,a),c.head.appendChild(u);break;default:throw Error(l(468,i))}u[wt]=e,yt(u),i=u}e.stateNode=i}else xm(c,e.type,e.stateNode);else e.stateNode=bm(c,i,e.memoizedProps);else u!==i?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,i===null?xm(c,e.type,e.stateNode):bm(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&lc(e,e.memoizedProps,a.memoizedProps)}break;case 27:zt(t,e),Bt(e),i&512&&(ft||a===null||ya(a,a.return)),a!==null&&i&4&&lc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(zt(t,e),Bt(e),i&512&&(ft||a===null||ya(a,a.return)),e.flags&32){c=e.stateNode;try{Fn(c,"")}catch(ae){Ke(e,e.return,ae)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,lc(e,c,a!==null?a.memoizedProps:c)),i&1024&&(uc=!0);break;case 6:if(zt(t,e),Bt(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(ae){Ke(e,e.return,ae)}}break;case 3:if(sl=null,c=ca,ca=al(t.containerInfo),zt(t,e),ca=c,Bt(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{Os(t.containerInfo)}catch(ae){Ke(e,e.return,ae)}uc&&(uc=!1,xf(e));break;case 4:i=ca,ca=al(e.stateNode.containerInfo),zt(t,e),Bt(e),ca=i;break;case 12:zt(t,e),Bt(e);break;case 31:zt(t,e),Bt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gr(e,i)));break;case 13:zt(t,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pr=Ct()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gr(e,i)));break;case 22:c=e.memoizedState!==null;var _=a!==null&&a.memoizedState!==null,R=La,U=ft;if(La=R||c,ft=U||_,zt(t,e),ft=U,La=R,Bt(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||_||La||ft||Bn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){_=a=t;try{if(u=_.stateNode,c)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=_.stateNode;var H=_.memoizedProps.style,M=H!=null&&H.hasOwnProperty("display")?H.display:null;y.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(ae){Ke(_,_.return,ae)}}}else if(t.tag===6){if(a===null){_=t;try{_.stateNode.nodeValue=c?"":_.memoizedProps}catch(ae){Ke(_,_.return,ae)}}}else if(t.tag===18){if(a===null){_=t;try{var L=_.stateNode;c?um(L,!0):um(_.stateNode,!1)}catch(ae){Ke(_,_.return,ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Gr(e,a))));break;case 19:zt(t,e),Bt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Gr(e,i)));break;case 30:break;case 21:break;default:zt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(hf(i)){a=i;break}i=i.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var c=a.stateNode,u=oc(e);$r(e,u,c);break;case 5:var m=a.stateNode;a.flags&32&&(Fn(m,""),a.flags&=-33);var y=oc(e);$r(e,y,m);break;case 3:case 4:var _=a.stateNode.containerInfo,R=oc(e);cc(e,R,_);break;default:throw Error(l(161))}}catch(U){Ke(e,e.return,U)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function za(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)gf(e,t.alternate,t),t=t.sibling}function Bn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ln(4,t,t.return),Bn(t);break;case 1:ya(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&uf(t,t.return,a),Bn(t);break;case 27:Ci(t.stateNode);case 26:case 5:ya(t,t.return),Bn(t);break;case 22:t.memoizedState===null&&Bn(t);break;case 30:Bn(t);break;default:Bn(t)}e=e.sibling}}function Ba(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,u=t,m=u.flags;switch(u.tag){case 0:case 11:case 15:Ba(c,u,a),xi(4,u);break;case 1:if(Ba(c,u,a),i=u,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(R){Ke(i,i.return,R)}if(i=u,c=i.updateQueue,c!==null){var y=i.stateNode;try{var _=c.shared.hiddenCallbacks;if(_!==null)for(c.shared.hiddenCallbacks=null,c=0;c<_.length;c++)Zd(_[c],y)}catch(R){Ke(i,i.return,R)}}a&&m&64&&cf(u),wi(u,u.return);break;case 27:ff(u);case 26:case 5:Ba(c,u,a),a&&i===null&&m&4&&df(u),wi(u,u.return);break;case 12:Ba(c,u,a);break;case 31:Ba(c,u,a),a&&m&4&&yf(c,u);break;case 13:Ba(c,u,a),a&&m&4&&bf(c,u);break;case 22:u.memoizedState===null&&Ba(c,u,a),wi(u,u.return);break;case 30:break;default:Ba(c,u,a)}t=t.sibling}}function dc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&oi(a))}function hc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&oi(e))}function ua(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wf(e,t,a,i),t=t.sibling}function wf(e,t,a,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:ua(e,t,a,i),c&2048&&xi(9,t);break;case 1:ua(e,t,a,i);break;case 3:ua(e,t,a,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&oi(e)));break;case 12:if(c&2048){ua(e,t,a,i),e=t.stateNode;try{var u=t.memoizedProps,m=u.id,y=u.onPostCommit;typeof y=="function"&&y(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){Ke(t,t.return,_)}}else ua(e,t,a,i);break;case 31:ua(e,t,a,i);break;case 13:ua(e,t,a,i);break;case 23:break;case 22:u=t.stateNode,m=t.alternate,t.memoizedState!==null?u._visibility&2?ua(e,t,a,i):Si(e,t):u._visibility&2?ua(e,t,a,i):(u._visibility|=2,bs(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&dc(m,t);break;case 24:ua(e,t,a,i),c&2048&&hc(t.alternate,t);break;default:ua(e,t,a,i)}}function bs(e,t,a,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,m=t,y=a,_=i,R=m.flags;switch(m.tag){case 0:case 11:case 15:bs(u,m,y,_,c),xi(8,m);break;case 23:break;case 22:var U=m.stateNode;m.memoizedState!==null?U._visibility&2?bs(u,m,y,_,c):Si(u,m):(U._visibility|=2,bs(u,m,y,_,c)),c&&R&2048&&dc(m.alternate,m);break;case 24:bs(u,m,y,_,c),c&&R&2048&&hc(m.alternate,m);break;default:bs(u,m,y,_,c)}t=t.sibling}}function Si(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,c=i.flags;switch(i.tag){case 22:Si(a,i),c&2048&&dc(i.alternate,i);break;case 24:Si(a,i),c&2048&&hc(i.alternate,i);break;default:Si(a,i)}t=t.sibling}}var ji=8192;function _s(e,t,a){if(e.subtreeFlags&ji)for(e=e.child;e!==null;)Sf(e,t,a),e=e.sibling}function Sf(e,t,a){switch(e.tag){case 26:_s(e,t,a),e.flags&ji&&e.memoizedState!==null&&av(a,ca,e.memoizedState,e.memoizedProps);break;case 5:_s(e,t,a);break;case 3:case 4:var i=ca;ca=al(e.stateNode.containerInfo),_s(e,t,a),ca=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ji,ji=16777216,_s(e,t,a),ji=i):_s(e,t,a));break;default:_s(e,t,a)}}function jf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ki(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];bt=i,Ef(i,e)}jf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kf(e),e=e.sibling}function kf(e){switch(e.tag){case 0:case 11:case 15:ki(e),e.flags&2048&&ln(9,e,e.return);break;case 3:ki(e);break;case 12:ki(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Kr(e)):ki(e);break;default:ki(e)}}function Kr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];bt=i,Ef(i,e)}jf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ln(8,t,t.return),Kr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Kr(t));break;default:Kr(t)}e=e.sibling}}function Ef(e,t){for(;bt!==null;){var a=bt;switch(a.tag){case 0:case 11:case 15:ln(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:oi(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,bt=i;else e:for(a=e;bt!==null;){i=bt;var c=i.sibling,u=i.return;if(pf(i),i===a){bt=null;break e}if(c!==null){c.return=u,bt=c;break e}bt=u}}}var v0={getCacheForType:function(e){var t=jt(ut),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return jt(ut).controller.signal}},y0=typeof WeakMap=="function"?WeakMap:Map,He=0,Xe=null,Oe=null,Re=0,Ge=0,Yt=null,on=!1,xs=!1,fc=!1,qa=0,rt=0,cn=0,qn=0,mc=0,Vt=0,ws=0,Ei=null,qt=null,gc=!1,Pr=0,Nf=0,Yr=1/0,Vr=null,un=null,pt=0,dn=null,Ss=null,Ha=0,pc=0,vc=null,Tf=null,Ni=0,yc=null;function It(){return(He&2)!==0&&Re!==0?Re&-Re:A.T!==null?jc():Ku()}function Af(){if(Vt===0)if((Re&536870912)===0||Le){var e=Ia;Ia<<=1,(Ia&3932160)===0&&(Ia=262144),Vt=e}else Vt=536870912;return e=Kt.current,e!==null&&(e.flags|=32),Vt}function Ht(e,t,a){(e===Xe&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)&&(js(e,0),hn(e,Re,Vt,!1)),Qs(e,a),((He&2)===0||e!==Xe)&&(e===Xe&&((He&2)===0&&(qn|=a),rt===4&&hn(e,Re,Vt,!1)),ba(e))}function Of(e,t,a){if((He&6)!==0)throw Error(l(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Is(e,t),c=i?x0(e,t):_c(e,t,!0),u=i;do{if(c===0){xs&&!i&&hn(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!b0(a)){c=_c(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var y=e;c=Ei;var _=y.current.memoizedState.isDehydrated;if(_&&(js(y,m).flags|=256),m=_c(y,m,!1),m!==2){if(fc&&!_){y.errorRecoveryDisabledLanes|=u,qn|=u,c=4;break e}u=qt,qt=c,u!==null&&(qt===null?qt=u:qt.push.apply(qt,u))}c=m}if(u=!1,c!==2)continue}}if(c===1){js(e,0),hn(e,t,0,!0);break}e:{switch(i=e,u=c,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:hn(i,t,Vt,!on);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=Pr+300-Ct(),10<c)){if(hn(i,t,Vt,!on),ar(i,0,!0)!==0)break e;Ha=t,i.timeoutHandle=lm(Cf.bind(null,i,a,qt,Vr,gc,t,Vt,qn,ws,on,u,"Throttled",-0,0),c);break e}Cf(i,a,qt,Vr,gc,t,Vt,qn,ws,on,u,null,-0,0)}}break}while(!0);ba(e)}function Cf(e,t,a,i,c,u,m,y,_,R,U,H,M,L){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},Sf(t,u,H);var ae=(u&62914560)===u?Pr-Ct():(u&4194048)===u?Nf-Ct():0;if(ae=nv(H,ae),ae!==null){Ha=u,e.cancelPendingCommit=ae(qf.bind(null,e,t,u,a,i,c,m,y,_,U,H,null,M,L)),hn(e,u,m,!R);return}}qf(e,t,u,a,i,c,m,y,_)}function b0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var c=a[i],u=c.getSnapshot;c=c.value;try{if(!$t(u(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hn(e,t,a,i){t&=~mc,t&=~qn,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var u=31-Qe(c),m=1<<u;i[u]=-1,c&=~m}a!==0&&Hu(e,a,t)}function Ir(){return(He&6)===0?(Ti(0),!1):!0}function bc(){if(Oe!==null){if(Ge===0)var e=Oe.return;else e=Oe,Aa=On=null,Lo(e),ms=null,ui=0,e=Oe;for(;e!==null;)of(e.alternate,e),e=e.return;Oe=null}}function js(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,q0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ha=0,bc(),Xe=e,Oe=a=Na(e.current,null),Re=t,Ge=0,Yt=null,on=!1,xs=Is(e,t),fc=!1,ws=Vt=mc=qn=cn=rt=0,qt=Ei=null,gc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-Qe(i),u=1<<c;t|=e[c],i&=~u}return qa=t,mr(),a}function Rf(e,t){Ee=null,A.H=yi,t===fs||t===wr?(t=Id(),Ge=3):t===So?(t=Id(),Ge=4):Ge=t===Zo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Yt=t,Oe===null&&(rt=1,Ur(e,Ft(t,e.current)))}function Mf(){var e=Kt.current;return e===null?!0:(Re&4194048)===Re?na===null:(Re&62914560)===Re||(Re&536870912)!==0?e===na:!1}function Df(){var e=A.H;return A.H=yi,e===null?yi:e}function Lf(){var e=A.A;return A.A=v0,e}function Qr(){rt=4,on||(Re&4194048)!==Re&&Kt.current!==null||(xs=!0),(cn&134217727)===0&&(qn&134217727)===0||Xe===null||hn(Xe,Re,Vt,!1)}function _c(e,t,a){var i=He;He|=2;var c=Df(),u=Lf();(Xe!==e||Re!==t)&&(Vr=null,js(e,t)),t=!1;var m=rt;e:do try{if(Ge!==0&&Oe!==null){var y=Oe,_=Yt;switch(Ge){case 8:bc(),m=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(t=!0);var R=Ge;if(Ge=0,Yt=null,ks(e,y,_,R),a&&xs){m=0;break e}break;default:R=Ge,Ge=0,Yt=null,ks(e,y,_,R)}}_0(),m=rt;break}catch(U){Rf(e,U)}while(!0);return t&&e.shellSuspendCounter++,Aa=On=null,He=i,A.H=c,A.A=u,Oe===null&&(Xe=null,Re=0,mr()),m}function _0(){for(;Oe!==null;)Uf(Oe)}function x0(e,t){var a=He;He|=2;var i=Df(),c=Lf();Xe!==e||Re!==t?(Vr=null,Yr=Ct()+500,js(e,t)):xs=Is(e,t);e:do try{if(Ge!==0&&Oe!==null){t=Oe;var u=Yt;t:switch(Ge){case 1:Ge=0,Yt=null,ks(e,t,u,1);break;case 2:case 9:if(Yd(u)){Ge=0,Yt=null,zf(t);break}t=function(){Ge!==2&&Ge!==9||Xe!==e||(Ge=7),ba(e)},u.then(t,t);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Yd(u)?(Ge=0,Yt=null,zf(t)):(Ge=0,Yt=null,ks(e,t,u,7));break;case 5:var m=null;switch(Oe.tag){case 26:m=Oe.memoizedState;case 5:case 27:var y=Oe;if(m?wm(m):y.stateNode.complete){Ge=0,Yt=null;var _=y.sibling;if(_!==null)Oe=_;else{var R=y.return;R!==null?(Oe=R,Xr(R)):Oe=null}break t}}Ge=0,Yt=null,ks(e,t,u,5);break;case 6:Ge=0,Yt=null,ks(e,t,u,6);break;case 8:bc(),rt=6;break e;default:throw Error(l(462))}}w0();break}catch(U){Rf(e,U)}while(!0);return Aa=On=null,A.H=i,A.A=c,He=a,Oe!==null?0:(Xe=null,Re=0,mr(),rt)}function w0(){for(;Oe!==null&&!Ys();)Uf(Oe)}function Uf(e){var t=rf(e.alternate,e,qa);e.memoizedProps=e.pendingProps,t===null?Xr(e):Oe=t}function zf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Fh(a,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=Fh(a,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:Lo(t);default:of(a,t),t=Oe=Dd(t,qa),t=rf(a,t,qa)}e.memoizedProps=e.pendingProps,t===null?Xr(e):Oe=t}function ks(e,t,a,i){Aa=On=null,Lo(t),ms=null,ui=0;var c=t.return;try{if(u0(e,c,t,a,Re)){rt=1,Ur(e,Ft(a,e.current)),Oe=null;return}}catch(u){if(c!==null)throw Oe=c,u;rt=1,Ur(e,Ft(a,e.current)),Oe=null;return}t.flags&32768?(Le||i===1?e=!0:xs||(Re&536870912)!==0?e=!1:(on=e=!0,(i===2||i===9||i===3||i===6)&&(i=Kt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Bf(t,e)):Xr(t)}function Xr(e){var t=e;do{if((t.flags&32768)!==0){Bf(t,on);return}e=t.return;var a=f0(t.alternate,t,qa);if(a!==null){Oe=a;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);rt===0&&(rt=5)}function Bf(e,t){do{var a=m0(e.alternate,e);if(a!==null){a.flags&=32767,Oe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=a}while(e!==null);rt=6,Oe=null}function qf(e,t,a,i,c,u,m,y,_){e.cancelPendingCommit=null;do Jr();while(pt!==0);if((He&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=lo,tp(e,a,u,m,y,_),e===Xe&&(Oe=Xe=null,Re=0),Ss=t,dn=e,Ha=a,pc=u,vc=c,Tf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,E0(ue,function(){return Pf(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=A.T,A.T=null,c=P.p,P.p=2,m=He,He|=4;try{g0(e,t,a)}finally{He=m,P.p=c,A.T=i}}pt=1,Hf(),$f(),Gf()}}function Hf(){if(pt===1){pt=0;var e=dn,t=Ss,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var i=P.p;P.p=2;var c=He;He|=4;try{_f(t,e);var u=Rc,m=kd(e.containerInfo),y=u.focusedElem,_=u.selectionRange;if(m!==y&&y&&y.ownerDocument&&jd(y.ownerDocument.documentElement,y)){if(_!==null&&ao(y)){var R=_.start,U=_.end;if(U===void 0&&(U=R),"selectionStart"in y)y.selectionStart=R,y.selectionEnd=Math.min(U,y.value.length);else{var H=y.ownerDocument||document,M=H&&H.defaultView||window;if(M.getSelection){var L=M.getSelection(),ae=y.textContent.length,he=Math.min(_.start,ae),Ie=_.end===void 0?he:Math.min(_.end,ae);!L.extend&&he>Ie&&(m=Ie,Ie=he,he=m);var N=Sd(y,he),j=Sd(y,Ie);if(N&&j&&(L.rangeCount!==1||L.anchorNode!==N.node||L.anchorOffset!==N.offset||L.focusNode!==j.node||L.focusOffset!==j.offset)){var C=H.createRange();C.setStart(N.node,N.offset),L.removeAllRanges(),he>Ie?(L.addRange(C),L.extend(j.node,j.offset)):(C.setEnd(j.node,j.offset),L.addRange(C))}}}}for(H=[],L=y;L=L.parentNode;)L.nodeType===1&&H.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<H.length;y++){var B=H[y];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}ol=!!Cc,Rc=Cc=null}finally{He=c,P.p=i,A.T=a}}e.current=t,pt=2}}function $f(){if(pt===2){pt=0;var e=dn,t=Ss,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var i=P.p;P.p=2;var c=He;He|=4;try{gf(e,t.alternate,t)}finally{He=c,P.p=i,A.T=a}}pt=3}}function Gf(){if(pt===4||pt===3){pt=0,Vs();var e=dn,t=Ss,a=Ha,i=Tf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?pt=5:(pt=0,Ss=dn=null,Kf(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(un=null),zl(a),t=t.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(We,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=A.T,c=P.p,P.p=2,A.T=null;try{for(var u=e.onRecoverableError,m=0;m<i.length;m++){var y=i[m];u(y.value,{componentStack:y.stack})}}finally{A.T=t,P.p=c}}(Ha&3)!==0&&Jr(),ba(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===yc?Ni++:(Ni=0,yc=e):Ni=0,Ti(0)}}function Kf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,oi(t)))}function Jr(){return Hf(),$f(),Gf(),Pf()}function Pf(){if(pt!==5)return!1;var e=dn,t=pc;pc=0;var a=zl(Ha),i=A.T,c=P.p;try{P.p=32>a?32:a,A.T=null,a=vc,vc=null;var u=dn,m=Ha;if(pt=0,Ss=dn=null,Ha=0,(He&6)!==0)throw Error(l(331));var y=He;if(He|=4,kf(u.current),wf(u,u.current,m,a),He=y,Ti(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(We,u)}catch{}return!0}finally{P.p=c,A.T=i,Kf(e,t)}}function Yf(e,t,a){t=Ft(a,t),t=Jo(e.stateNode,t,2),e=nn(e,t,2),e!==null&&(Qs(e,2),ba(e))}function Ke(e,t,a){if(e.tag===3)Yf(e,e,a);else for(;t!==null;){if(t.tag===3){Yf(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(un===null||!un.has(i))){e=Ft(a,e),a=Yh(2),i=nn(t,a,2),i!==null&&(Vh(a,i,t,e),Qs(i,2),ba(i));break}}t=t.return}}function xc(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new y0;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(a)||(fc=!0,c.add(a),e=S0.bind(null,e,t,a),t.then(e,e))}function S0(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Xe===e&&(Re&a)===a&&(rt===4||rt===3&&(Re&62914560)===Re&&300>Ct()-Pr?(He&2)===0&&js(e,0):mc|=a,ws===Re&&(ws=0)),ba(e)}function Vf(e,t){t===0&&(t=qu()),e=Nn(e,t),e!==null&&(Qs(e,t),ba(e))}function j0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Vf(e,a)}function k0(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Vf(e,a)}function E0(e,t){return wa(e,t)}var Zr=null,Es=null,wc=!1,Wr=!1,Sc=!1,fn=0;function ba(e){e!==Es&&e.next===null&&(Es===null?Zr=Es=e:Es=Es.next=e),Wr=!0,wc||(wc=!0,T0())}function Ti(e,t){if(!Sc&&Wr){Sc=!0;do for(var a=!1,i=Zr;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var u=0;else{var m=i.suspendedLanes,y=i.pingedLanes;u=(1<<31-Qe(42|e)+1)-1,u&=c&~(m&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Jf(i,u))}else u=Re,u=ar(i,i===Xe?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(u&3)===0||Is(i,u)||(a=!0,Jf(i,u));i=i.next}while(a);Sc=!1}}function N0(){If()}function If(){Wr=wc=!1;var e=0;fn!==0&&B0()&&(e=fn);for(var t=Ct(),a=null,i=Zr;i!==null;){var c=i.next,u=Qf(i,t);u===0?(i.next=null,a===null?Zr=c:a.next=c,c===null&&(Es=a)):(a=i,(e!==0||(u&3)!==0)&&(Wr=!0)),i=c}pt!==0&&pt!==5||Ti(e),fn!==0&&(fn=0)}function Qf(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-Qe(u),y=1<<m,_=c[m];_===-1?((y&a)===0||(y&i)!==0)&&(c[m]=ep(y,t)):_<=t&&(e.expiredLanes|=y),u&=~y}if(t=Xe,a=Re,a=ar(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Sa(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Is(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&Sa(i),zl(a)){case 2:case 8:a=be;break;case 32:a=ue;break;case 268435456:a=De;break;default:a=ue}return i=Xf.bind(null,e),a=wa(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&Sa(i),e.callbackPriority=2,e.callbackNode=null,2}function Xf(e,t){if(pt!==0&&pt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Jr()&&e.callbackNode!==a)return null;var i=Re;return i=ar(e,e===Xe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Of(e,i,t),Qf(e,Ct()),e.callbackNode!=null&&e.callbackNode===a?Xf.bind(null,e):null)}function Jf(e,t){if(Jr())return null;Of(e,t,!0)}function T0(){H0(function(){(He&6)!==0?wa(re,N0):If()})}function jc(){if(fn===0){var e=ds;e===0&&(e=ga,ga<<=1,(ga&261888)===0&&(ga=256)),fn=e}return fn}function Zf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:rr(""+e)}function Wf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function A0(e,t,a,i,c){if(t==="submit"&&a&&a.stateNode===c){var u=Zf((c[Dt]||null).action),m=i.submitter;m&&(t=(t=m[Dt]||null)?Zf(t.formAction):m.getAttribute("formAction"),t!==null&&(u=t,m=null));var y=new ur("action","action",null,i,c);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fn!==0){var _=m?Wf(c,m):new FormData(c);Po(a,{pending:!0,data:_,method:c.method,action:u},null,_)}}else typeof u=="function"&&(y.preventDefault(),_=m?Wf(c,m):new FormData(c),Po(a,{pending:!0,data:_,method:c.method,action:u},u,_))},currentTarget:c}]})}}for(var kc=0;kc<ro.length;kc++){var Ec=ro[kc],O0=Ec.toLowerCase(),C0=Ec[0].toUpperCase()+Ec.slice(1);oa(O0,"on"+C0)}oa(Td,"onAnimationEnd"),oa(Ad,"onAnimationIteration"),oa(Od,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(Ip,"onTransitionRun"),oa(Qp,"onTransitionStart"),oa(Xp,"onTransitionCancel"),oa(Cd,"onTransitionEnd"),Zn("onMouseEnter",["mouseout","mouseover"]),Zn("onMouseLeave",["mouseout","mouseover"]),Zn("onPointerEnter",["pointerout","pointerover"]),Zn("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ai));function Ff(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],c=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var m=i.length-1;0<=m;m--){var y=i[m],_=y.instance,R=y.currentTarget;if(y=y.listener,_!==u&&c.isPropagationStopped())break e;u=y,c.currentTarget=R;try{u(c)}catch(U){fr(U)}c.currentTarget=null,u=_}else for(m=0;m<i.length;m++){if(y=i[m],_=y.instance,R=y.currentTarget,y=y.listener,_!==u&&c.isPropagationStopped())break e;u=y,c.currentTarget=R;try{u(c)}catch(U){fr(U)}c.currentTarget=null,u=_}}}}function Ce(e,t){var a=t[Bl];a===void 0&&(a=t[Bl]=new Set);var i=e+"__bubble";a.has(i)||(em(t,e,2,!1),a.add(i))}function Nc(e,t,a){var i=0;t&&(i|=4),em(a,e,i,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Tc(e){if(!e[Fr]){e[Fr]=!0,Vu.forEach(function(a){a!=="selectionchange"&&(R0.has(a)||Nc(a,!1,e),Nc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fr]||(t[Fr]=!0,Nc("selectionchange",!1,t))}}function em(e,t,a,i){switch(Am(t)){case 2:var c=rv;break;case 8:c=lv;break;default:c=Kc}a=c.bind(null,t,a,e),c=void 0,!Il||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Ac(e,t,a,i,c){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var y=i.stateNode.containerInfo;if(y===c)break;if(m===4)for(m=i.return;m!==null;){var _=m.tag;if((_===3||_===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;y!==null;){if(m=Qn(y),m===null)return;if(_=m.tag,_===5||_===6||_===26||_===27){i=u=m;continue e}y=y.parentNode}}i=i.return}sd(function(){var R=u,U=Yl(a),H=[];e:{var M=Rd.get(e);if(M!==void 0){var L=ur,ae=e;switch(e){case"keypress":if(or(a)===0)break e;case"keydown":case"keyup":L=kp;break;case"focusin":ae="focus",L=Zl;break;case"focusout":ae="blur",L=Zl;break;case"beforeblur":case"afterblur":L=Zl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=fp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Tp;break;case Td:case Ad:case Od:L=pp;break;case Cd:L=Op;break;case"scroll":case"scrollend":L=dp;break;case"wheel":L=Rp;break;case"copy":case"cut":case"paste":L=yp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=cd;break;case"toggle":case"beforetoggle":L=Dp}var he=(t&4)!==0,Ie=!he&&(e==="scroll"||e==="scrollend"),N=he?M!==null?M+"Capture":null:M;he=[];for(var j=R,C;j!==null;){var B=j;if(C=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||C===null||N===null||(B=Zs(j,N),B!=null&&he.push(Oi(j,B,C))),Ie)break;j=j.return}0<he.length&&(M=new L(M,ae,null,a,U),H.push({event:M,listeners:he}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",M&&a!==Pl&&(ae=a.relatedTarget||a.fromElement)&&(Qn(ae)||ae[In]))break e;if((L||M)&&(M=U.window===U?U:(M=U.ownerDocument)?M.defaultView||M.parentWindow:window,L?(ae=a.relatedTarget||a.toElement,L=R,ae=ae?Qn(ae):null,ae!==null&&(Ie=h(ae),he=ae.tag,ae!==Ie||he!==5&&he!==27&&he!==6)&&(ae=null)):(L=null,ae=R),L!==ae)){if(he=ld,B="onMouseLeave",N="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(he=cd,B="onPointerLeave",N="onPointerEnter",j="pointer"),Ie=L==null?M:Js(L),C=ae==null?M:Js(ae),M=new he(B,j+"leave",L,a,U),M.target=Ie,M.relatedTarget=C,B=null,Qn(U)===R&&(he=new he(N,j+"enter",ae,a,U),he.target=C,he.relatedTarget=Ie,B=he),Ie=B,L&&ae)t:{for(he=M0,N=L,j=ae,C=0,B=N;B;B=he(B))C++;B=0;for(var ce=j;ce;ce=he(ce))B++;for(;0<C-B;)N=he(N),C--;for(;0<B-C;)j=he(j),B--;for(;C--;){if(N===j||j!==null&&N===j.alternate){he=N;break t}N=he(N),j=he(j)}he=null}else he=null;L!==null&&tm(H,M,L,he,!1),ae!==null&&Ie!==null&&tm(H,Ie,ae,he,!0)}}e:{if(M=R?Js(R):window,L=M.nodeName&&M.nodeName.toLowerCase(),L==="select"||L==="input"&&M.type==="file")var Be=vd;else if(gd(M))if(yd)Be=Pp;else{Be=Gp;var se=$p}else L=M.nodeName,!L||L.toLowerCase()!=="input"||M.type!=="checkbox"&&M.type!=="radio"?R&&Kl(R.elementType)&&(Be=vd):Be=Kp;if(Be&&(Be=Be(e,R))){pd(H,Be,a,U);break e}se&&se(e,M,R),e==="focusout"&&R&&M.type==="number"&&R.memoizedProps.value!=null&&Gl(M,"number",M.value)}switch(se=R?Js(R):window,e){case"focusin":(gd(se)||se.contentEditable==="true")&&(ns=se,no=R,ii=null);break;case"focusout":ii=no=ns=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,Ed(H,a,U);break;case"selectionchange":if(Vp)break;case"keydown":case"keyup":Ed(H,a,U)}var Ne;if(Fl)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else as?fd(e,a)&&(Me="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(ud&&a.locale!=="ko"&&(as||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&as&&(Ne=id()):(Ja=U,Ql="value"in Ja?Ja.value:Ja.textContent,as=!0)),se=el(R,Me),0<se.length&&(Me=new od(Me,e,null,a,U),H.push({event:Me,listeners:se}),Ne?Me.data=Ne:(Ne=md(a),Ne!==null&&(Me.data=Ne)))),(Ne=Up?zp(e,a):Bp(e,a))&&(Me=el(R,"onBeforeInput"),0<Me.length&&(se=new od("onBeforeInput","beforeinput",null,a,U),H.push({event:se,listeners:Me}),se.data=Ne)),A0(H,e,R,a,U)}Ff(H,t)})}function Oi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function el(e,t){for(var a=t+"Capture",i=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=Zs(e,a),c!=null&&i.unshift(Oi(e,c,u)),c=Zs(e,t),c!=null&&i.push(Oi(e,c,u))),e.tag===3)return i;e=e.return}return[]}function M0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tm(e,t,a,i,c){for(var u=t._reactName,m=[];a!==null&&a!==i;){var y=a,_=y.alternate,R=y.stateNode;if(y=y.tag,_!==null&&_===i)break;y!==5&&y!==26&&y!==27||R===null||(_=R,c?(R=Zs(a,u),R!=null&&m.unshift(Oi(a,R,_))):c||(R=Zs(a,u),R!=null&&m.push(Oi(a,R,_)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var D0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function am(e){return(typeof e=="string"?e:""+e).replace(D0,`
`).replace(L0,"")}function nm(e,t){return t=am(t),am(e)===t}function Ve(e,t,a,i,c,u){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Fn(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Fn(e,""+i);break;case"className":sr(e,"class",i);break;case"tabIndex":sr(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(e,a,i);break;case"style":ad(e,i,u);break;case"data":if(t!=="object"){sr(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=rr(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Ve(e,t,"name",c.name,c,null),Ve(e,t,"formEncType",c.formEncType,c,null),Ve(e,t,"formMethod",c.formMethod,c,null),Ve(e,t,"formTarget",c.formTarget,c,null)):(Ve(e,t,"encType",c.encType,c,null),Ve(e,t,"method",c.method,c,null),Ve(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=rr(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=ka);break;case"onScroll":i!=null&&Ce("scroll",e);break;case"onScrollEnd":i!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(a=i.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=rr(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),nr(e,"popover",i);break;case"xlinkActuate":ja(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ja(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ja(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ja(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ja(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ja(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ja(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ja(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ja(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":nr(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cp.get(a)||a,nr(e,a,i))}}function Oc(e,t,a,i,c,u){switch(a){case"style":ad(e,i,u);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(a=i.__html,a!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof i=="string"?Fn(e,i):(typeof i=="number"||typeof i=="bigint")&&Fn(e,""+i);break;case"onScroll":i!=null&&Ce("scroll",e);break;case"onScrollEnd":i!=null&&Ce("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),u=e[Dt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof i=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,c);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):nr(e,a,i)}}}function Et(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var i=!1,c=!1,u;for(u in a)if(a.hasOwnProperty(u)){var m=a[u];if(m!=null)switch(u){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ve(e,t,u,m,a,null)}}c&&Ve(e,t,"srcSet",a.srcSet,a,null),i&&Ve(e,t,"src",a.src,a,null);return;case"input":Ce("invalid",e);var y=u=m=c=null,_=null,R=null;for(i in a)if(a.hasOwnProperty(i)){var U=a[i];if(U!=null)switch(i){case"name":c=U;break;case"type":m=U;break;case"checked":_=U;break;case"defaultChecked":R=U;break;case"value":u=U;break;case"defaultValue":y=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,t));break;default:Ve(e,t,i,U,a,null)}}Wu(e,u,y,_,R,m,c,!1);return;case"select":Ce("invalid",e),i=m=u=null;for(c in a)if(a.hasOwnProperty(c)&&(y=a[c],y!=null))switch(c){case"value":u=y;break;case"defaultValue":m=y;break;case"multiple":i=y;default:Ve(e,t,c,y,a,null)}t=u,a=m,e.multiple=!!i,t!=null?Wn(e,!!i,t,!1):a!=null&&Wn(e,!!i,a,!0);return;case"textarea":Ce("invalid",e),u=c=i=null;for(m in a)if(a.hasOwnProperty(m)&&(y=a[m],y!=null))switch(m){case"value":i=y;break;case"defaultValue":c=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(l(91));break;default:Ve(e,t,m,y,a,null)}ed(e,i,c,u);return;case"option":for(_ in a)a.hasOwnProperty(_)&&(i=a[_],i!=null)&&(_==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":Ve(e,t,_,i,a,null));return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(i=0;i<Ai.length;i++)Ce(Ai[i],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(i=a[R],i!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ve(e,t,R,i,a,null)}return;default:if(Kl(t)){for(U in a)a.hasOwnProperty(U)&&(i=a[U],i!==void 0&&Oc(e,t,U,i,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(i=a[y],i!=null&&Ve(e,t,y,i,a,null))}function U0(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,m=null,y=null,_=null,R=null,U=null;for(L in a){var H=a[L];if(a.hasOwnProperty(L)&&H!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":_=H;default:i.hasOwnProperty(L)||Ve(e,t,L,null,i,H)}}for(var M in i){var L=i[M];if(H=a[M],i.hasOwnProperty(M)&&(L!=null||H!=null))switch(M){case"type":u=L;break;case"name":c=L;break;case"checked":R=L;break;case"defaultChecked":U=L;break;case"value":m=L;break;case"defaultValue":y=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(l(137,t));break;default:L!==H&&Ve(e,t,M,L,i,H)}}$l(e,m,y,_,R,U,u,c);return;case"select":L=m=y=M=null;for(u in a)if(_=a[u],a.hasOwnProperty(u)&&_!=null)switch(u){case"value":break;case"multiple":L=_;default:i.hasOwnProperty(u)||Ve(e,t,u,null,i,_)}for(c in i)if(u=i[c],_=a[c],i.hasOwnProperty(c)&&(u!=null||_!=null))switch(c){case"value":M=u;break;case"defaultValue":y=u;break;case"multiple":m=u;default:u!==_&&Ve(e,t,c,u,i,_)}t=y,a=m,i=L,M!=null?Wn(e,!!a,M,!1):!!i!=!!a&&(t!=null?Wn(e,!!a,t,!0):Wn(e,!!a,a?[]:"",!1));return;case"textarea":L=M=null;for(y in a)if(c=a[y],a.hasOwnProperty(y)&&c!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ve(e,t,y,null,i,c)}for(m in i)if(c=i[m],u=a[m],i.hasOwnProperty(m)&&(c!=null||u!=null))switch(m){case"value":M=c;break;case"defaultValue":L=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==u&&Ve(e,t,m,c,i,u)}Fu(e,M,L);return;case"option":for(var ae in a)M=a[ae],a.hasOwnProperty(ae)&&M!=null&&!i.hasOwnProperty(ae)&&(ae==="selected"?e.selected=!1:Ve(e,t,ae,null,i,M));for(_ in i)M=i[_],L=a[_],i.hasOwnProperty(_)&&M!==L&&(M!=null||L!=null)&&(_==="selected"?e.selected=M&&typeof M!="function"&&typeof M!="symbol":Ve(e,t,_,M,i,L));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in a)M=a[he],a.hasOwnProperty(he)&&M!=null&&!i.hasOwnProperty(he)&&Ve(e,t,he,null,i,M);for(R in i)if(M=i[R],L=a[R],i.hasOwnProperty(R)&&M!==L&&(M!=null||L!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(l(137,t));break;default:Ve(e,t,R,M,i,L)}return;default:if(Kl(t)){for(var Ie in a)M=a[Ie],a.hasOwnProperty(Ie)&&M!==void 0&&!i.hasOwnProperty(Ie)&&Oc(e,t,Ie,void 0,i,M);for(U in i)M=i[U],L=a[U],!i.hasOwnProperty(U)||M===L||M===void 0&&L===void 0||Oc(e,t,U,M,i,L);return}}for(var N in a)M=a[N],a.hasOwnProperty(N)&&M!=null&&!i.hasOwnProperty(N)&&Ve(e,t,N,null,i,M);for(H in i)M=i[H],L=a[H],!i.hasOwnProperty(H)||M===L||M==null&&L==null||Ve(e,t,H,M,i,L)}function sm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function z0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var c=a[i],u=c.transferSize,m=c.initiatorType,y=c.duration;if(u&&y&&sm(m)){for(m=0,y=c.responseEnd,i+=1;i<a.length;i++){var _=a[i],R=_.startTime;if(R>y)break;var U=_.transferSize,H=_.initiatorType;U&&sm(H)&&(_=_.responseEnd,m+=U*(_<y?1:(y-R)/(_-R)))}if(--i,t+=8*(u+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cc=null,Rc=null;function tl(e){return e.nodeType===9?e:e.ownerDocument}function im(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Mc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dc=null;function B0(){var e=window.event;return e&&e.type==="popstate"?e===Dc?!1:(Dc=e,!0):(Dc=null,!1)}var lm=typeof setTimeout=="function"?setTimeout:void 0,q0=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,H0=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(e){return om.resolve(null).then(e).catch($0)}:lm;function $0(e){setTimeout(function(){throw e})}function mn(e){return e==="head"}function cm(e,t){var a=t,i=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(c),Os(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")Ci(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ci(a);for(var u=a.firstChild;u;){var m=u.nextSibling,y=u.nodeName;u[Xs]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=m}}else a==="body"&&Ci(e.ownerDocument.body);a=c}while(a);Os(t)}function um(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function Lc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Lc(a),ql(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function G0(e,t,a,i){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Xs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=sa(e.nextSibling),e===null)break}return null}function K0(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=sa(e.nextSibling),e===null))return null;return e}function dm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=sa(e.nextSibling),e===null))return null;return e}function Uc(e){return e.data==="$?"||e.data==="$~"}function zc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function P0(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Bc=null;function hm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return sa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function fm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function mm(e,t,a){switch(t=tl(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Ci(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ql(e)}var ia=new Map,gm=new Set;function al(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $a=P.d;P.d={f:Y0,r:V0,D:I0,C:Q0,L:X0,m:J0,X:W0,S:Z0,M:F0};function Y0(){var e=$a.f(),t=Ir();return e||t}function V0(e){var t=Xn(e);t!==null&&t.tag===5&&t.type==="form"?Ch(t):$a.r(e)}var Ns=typeof document>"u"?null:document;function pm(e,t,a){var i=Ns;if(i&&typeof t=="string"&&t){var c=Zt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),gm.has(c)||(gm.add(c),e={rel:e,crossOrigin:a,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),Et(t,"link",e),yt(t),i.head.appendChild(t)))}}function I0(e){$a.D(e),pm("dns-prefetch",e,null)}function Q0(e,t){$a.C(e,t),pm("preconnect",e,t)}function X0(e,t,a){$a.L(e,t,a);var i=Ns;if(i&&e&&t){var c='link[rel="preload"][as="'+Zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Zt(a.imageSizes)+'"]')):c+='[href="'+Zt(e)+'"]';var u=c;switch(t){case"style":u=Ts(e);break;case"script":u=As(e)}ia.has(u)||(e=x({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ia.set(u,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(Ri(u))||t==="script"&&i.querySelector(Mi(u))||(t=i.createElement("link"),Et(t,"link",e),yt(t),i.head.appendChild(t)))}}function J0(e,t){$a.m(e,t);var a=Ns;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Zt(i)+'"][href="'+Zt(e)+'"]',u=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=As(e)}if(!ia.has(u)&&(e=x({rel:"modulepreload",href:e},t),ia.set(u,e),a.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mi(u)))return}i=a.createElement("link"),Et(i,"link",e),yt(i),a.head.appendChild(i)}}}function Z0(e,t,a){$a.S(e,t,a);var i=Ns;if(i&&e){var c=Jn(i).hoistableStyles,u=Ts(e);t=t||"default";var m=c.get(u);if(!m){var y={loading:0,preload:null};if(m=i.querySelector(Ri(u)))y.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ia.get(u))&&qc(e,a);var _=m=i.createElement("link");yt(_),Et(_,"link",e),_._p=new Promise(function(R,U){_.onload=R,_.onerror=U}),_.addEventListener("load",function(){y.loading|=1}),_.addEventListener("error",function(){y.loading|=2}),y.loading|=4,nl(m,t,i)}m={type:"stylesheet",instance:m,count:1,state:y},c.set(u,m)}}}function W0(e,t){$a.X(e,t);var a=Ns;if(a&&e){var i=Jn(a).hoistableScripts,c=As(e),u=i.get(c);u||(u=a.querySelector(Mi(c)),u||(e=x({src:e,async:!0},t),(t=ia.get(c))&&Hc(e,t),u=a.createElement("script"),yt(u),Et(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(c,u))}}function F0(e,t){$a.M(e,t);var a=Ns;if(a&&e){var i=Jn(a).hoistableScripts,c=As(e),u=i.get(c);u||(u=a.querySelector(Mi(c)),u||(e=x({src:e,async:!0,type:"module"},t),(t=ia.get(c))&&Hc(e,t),u=a.createElement("script"),yt(u),Et(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(c,u))}}function vm(e,t,a,i){var c=(c=pe.current)?al(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Ts(a.href),a=Jn(c).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ts(a.href);var u=Jn(c).hoistableStyles,m=u.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=c.querySelector(Ri(e)))&&!u._p&&(m.instance=u,m.state.loading=5),ia.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ia.set(e,a),u||ev(c,e,a,m.state))),t&&i===null)throw Error(l(528,""));return m}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=As(a),a=Jn(c).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Ts(e){return'href="'+Zt(e)+'"'}function Ri(e){return'link[rel="stylesheet"]['+e+"]"}function ym(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function ev(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Et(t,"link",a),yt(t),e.head.appendChild(t))}function As(e){return'[src="'+Zt(e)+'"]'}function Mi(e){return"script[async]"+e}function bm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Zt(a.href)+'"]');if(i)return t.instance=i,yt(i),i;var c=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),yt(i),Et(i,"style",c),nl(i,a.precedence,e),t.instance=i;case"stylesheet":c=Ts(a.href);var u=e.querySelector(Ri(c));if(u)return t.state.loading|=4,t.instance=u,yt(u),u;i=ym(a),(c=ia.get(c))&&qc(i,c),u=(e.ownerDocument||e).createElement("link"),yt(u);var m=u;return m._p=new Promise(function(y,_){m.onload=y,m.onerror=_}),Et(u,"link",i),t.state.loading|=4,nl(u,a.precedence,e),t.instance=u;case"script":return u=As(a.src),(c=e.querySelector(Mi(u)))?(t.instance=c,yt(c),c):(i=a,(c=ia.get(u))&&(i=x({},a),Hc(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),yt(c),Et(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,nl(i,a.precedence,e));return t.instance}function nl(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,u=c,m=0;m<i.length;m++){var y=i[m];if(y.dataset.precedence===t)u=y;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function qc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Hc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var sl=null;function _m(e,t,a){if(sl===null){var i=new Map,c=sl=new Map;c.set(a,i)}else c=sl,i=c.get(a),i||(i=new Map,c.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var u=a[c];if(!(u[Xs]||u[wt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(t)||"";m=e+m;var y=i.get(m);y?y.push(u):i.set(m,[u])}}return i}function xm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function tv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function wm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function av(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Ts(i.href),u=t.querySelector(Ri(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=il.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,yt(u);return}u=t.ownerDocument||t,i=ym(i),(c=ia.get(c))&&qc(i,c),u=u.createElement("link"),yt(u);var m=u;m._p=new Promise(function(y,_){m.onload=y,m.onerror=_}),Et(u,"link",i),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=il.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var $c=0;function nv(e,t){return e.stylesheets&&e.count===0&&ll(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&ll(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&$c===0&&($c=62500*z0());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ll(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>$c?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ll(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rl=null;function ll(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rl=new Map,t.forEach(sv,e),rl=null,il.call(e))}function sv(e,t){if(!(t.state.loading&4)){var a=rl.get(e);if(a)var i=a.get(null);else{a=new Map,rl.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var m=c[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),i=m)}i&&a.set(null,i)}c=t.instance,m=c.getAttribute("data-precedence"),u=a.get(m)||i,u===i&&a.set(null,c),a.set(m,c),this.count++,i=il.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Di={$$typeof:D,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function iv(e,t,a,i,c,u,m,y,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.hiddenUpdates=Ll(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Sm(e,t,a,i,c,u,m,y,_,R,U,H){return e=new iv(e,t,a,m,_,R,U,H,y),t=1,u===!0&&(t|=24),u=Gt(3,null,null,t),e.current=u,u.stateNode=e,t=_o(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:i,isDehydrated:a,cache:t},jo(u),e}function jm(e){return e?(e=rs,e):rs}function km(e,t,a,i,c,u){c=jm(c),i.context===null?i.context=c:i.pendingContext=c,i=an(t),i.payload={element:a},u=u===void 0?null:u,u!==null&&(i.callback=u),a=nn(e,i,t),a!==null&&(Ht(a,e,t),hi(a,e,t))}function Em(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Gc(e,t){Em(e,t),(e=e.alternate)&&Em(e,t)}function Nm(e){if(e.tag===13||e.tag===31){var t=Nn(e,67108864);t!==null&&Ht(t,e,67108864),Gc(e,67108864)}}function Tm(e){if(e.tag===13||e.tag===31){var t=It();t=Ul(t);var a=Nn(e,t);a!==null&&Ht(a,e,t),Gc(e,t)}}var ol=!0;function rv(e,t,a,i){var c=A.T;A.T=null;var u=P.p;try{P.p=2,Kc(e,t,a,i)}finally{P.p=u,A.T=c}}function lv(e,t,a,i){var c=A.T;A.T=null;var u=P.p;try{P.p=8,Kc(e,t,a,i)}finally{P.p=u,A.T=c}}function Kc(e,t,a,i){if(ol){var c=Pc(i);if(c===null)Ac(e,t,i,cl,a),Om(e,i);else if(cv(c,e,t,a,i))i.stopPropagation();else if(Om(e,i),t&4&&-1<ov.indexOf(e)){for(;c!==null;){var u=Xn(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=wn(u.pendingLanes);if(m!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var _=1<<31-Qe(m);y.entanglements[1]|=_,m&=~_}ba(u),(He&6)===0&&(Yr=Ct()+500,Ti(0))}}break;case 31:case 13:y=Nn(u,2),y!==null&&Ht(y,u,2),Ir(),Gc(u,2)}if(u=Pc(i),u===null&&Ac(e,t,i,cl,a),u===c)break;c=u}c!==null&&i.stopPropagation()}else Ac(e,t,i,null,a)}}function Pc(e){return e=Yl(e),Yc(e)}var cl=null;function Yc(e){if(cl=null,e=Qn(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cl=e,null}function Am(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tr()){case re:return 2;case be:return 8;case ue:case at:return 32;case De:return 268435456;default:return 32}default:return 32}}var Vc=!1,gn=null,pn=null,vn=null,Li=new Map,Ui=new Map,yn=[],ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Om(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Li.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ui.delete(t.pointerId)}}function zi(e,t,a,i,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Xn(t),t!==null&&Nm(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function cv(e,t,a,i,c){switch(t){case"focusin":return gn=zi(gn,e,t,a,i,c),!0;case"dragenter":return pn=zi(pn,e,t,a,i,c),!0;case"mouseover":return vn=zi(vn,e,t,a,i,c),!0;case"pointerover":var u=c.pointerId;return Li.set(u,zi(Li.get(u)||null,e,t,a,i,c)),!0;case"gotpointercapture":return u=c.pointerId,Ui.set(u,zi(Ui.get(u)||null,e,t,a,i,c)),!0}return!1}function Cm(e){var t=Qn(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Pu(e.priority,function(){Tm(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Pu(e.priority,function(){Tm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Pc(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);Pl=i,a.target.dispatchEvent(i),Pl=null}else return t=Xn(a),t!==null&&Nm(t),e.blockedOn=a,!1;t.shift()}return!0}function Rm(e,t,a){ul(e)&&a.delete(t)}function uv(){Vc=!1,gn!==null&&ul(gn)&&(gn=null),pn!==null&&ul(pn)&&(pn=null),vn!==null&&ul(vn)&&(vn=null),Li.forEach(Rm),Ui.forEach(Rm)}function dl(e,t){e.blockedOn===t&&(e.blockedOn=null,Vc||(Vc=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,uv)))}var hl=null;function Mm(e){hl!==e&&(hl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){hl===e&&(hl=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(Yc(i||a)===null)continue;break}var u=Xn(a);u!==null&&(e.splice(t,3),t-=3,Po(u,{pending:!0,data:c,method:a.method,action:i},i,c))}}))}function Os(e){function t(_){return dl(_,e)}gn!==null&&dl(gn,e),pn!==null&&dl(pn,e),vn!==null&&dl(vn,e),Li.forEach(t),Ui.forEach(t);for(var a=0;a<yn.length;a++){var i=yn[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<yn.length&&(a=yn[0],a.blockedOn===null);)Cm(a),a.blockedOn===null&&yn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var c=a[i],u=a[i+1],m=c[Dt]||null;if(typeof u=="function")m||Mm(a);else if(m){var y=null;if(u&&u.hasAttribute("formAction")){if(c=u,m=u[Dt]||null)y=m.formAction;else if(Yc(c)!==null)continue}else y=m.action;typeof y=="function"?a[i+1]=y:(a.splice(i,3),i-=3),Mm(a)}}}function Dm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Ic(e){this._internalRoot=e}fl.prototype.render=Ic.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,i=It();km(a,i,e,t,null,null)},fl.prototype.unmount=Ic.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;km(e.current,2,null,e,null,null),Ir(),t[In]=null}};function fl(e){this._internalRoot=e}fl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ku();e={blockedOn:null,target:e,priority:t};for(var a=0;a<yn.length&&t!==0&&t<yn[a].priority;a++);yn.splice(a,0,e),a===0&&Cm(e)}};var Lm=n.version;if(Lm!=="19.2.4")throw Error(l(527,Lm,"19.2.4"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var dv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{We=ml.inject(dv),Ue=ml}catch{}}return qi.createRoot=function(e,t){if(!d(e))throw Error(l(299));var a=!1,i="",c=$h,u=Gh,m=Kh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Sm(e,1,!1,null,null,a,i,null,c,u,m,Dm),e[In]=t.current,Tc(e),new Ic(t)},qi.hydrateRoot=function(e,t,a){if(!d(e))throw Error(l(299));var i=!1,c="",u=$h,m=Gh,y=Kh,_=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(_=a.formState)),t=Sm(e,1,!0,t,a??null,i,c,_,u,m,y,Dm),t.context=jm(null),a=t.current,i=It(),i=Ul(i),c=an(i),c.callback=null,nn(a,c,i),a=i,t.current.lanes=a,Qs(t,a),ba(t),e[In]=t.current,Tc(e),new fl(t)},qi.version="19.2.4",qi}var Ym;function xv(){if(Ym)return Jc.exports;Ym=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Jc.exports=_v(),Jc.exports}var wv=xv();const jg=$.createContext(null);function ra(){const s=$.useContext(jg);if(!s)throw new Error("useApp must be used within AppProvider");return s}const kg=$.createContext(null);function Ol(){const s=$.useContext(kg);if(!s)throw new Error("useAuth must be used within AuthProvider");return s}const _a={DASHBOARD:"dashboard",DAILY_LOG:"daily_log",KITCHEN:"kitchen",PROFILE:"profile"};function Sv(){const{signIn:s,signUp:n}=Ol(),[r,l]=$.useState("signin"),[d,h]=$.useState(""),[f,g]=$.useState(""),[v,p]=$.useState(""),[b,x]=$.useState(!1),[E,k]=$.useState("");async function S(z){z.preventDefault(),p(""),k(""),x(!0);try{r==="signup"?(await n(d,f),k("Check your email for a confirmation link!")):await s(d,f)}catch(G){p(G.message)}finally{x(!1)}}function O(){l(r==="signin"?"signup":"signin"),p(""),k("")}return o.jsx("div",{className:"auth",children:o.jsxs("div",{className:"auth-content",children:[o.jsx("h1",{className:"auth-title",children:"myfitnesscoach"}),o.jsx("p",{className:"auth-subtitle",children:r==="signin"?"Welcome back":"Create your account"}),o.jsx("div",{className:"auth-card",children:o.jsxs("form",{onSubmit:S,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"auth-email",children:"Email"}),o.jsx("input",{id:"auth-email",type:"email",value:d,onChange:z=>h(z.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"auth-password",children:"Password"}),o.jsx("input",{id:"auth-password",type:"password",value:f,onChange:z=>g(z.target.value),placeholder:"",required:!0,minLength:6,autoComplete:r==="signup"?"new-password":"current-password"})]}),v&&o.jsx("p",{className:"auth-error",children:v}),E&&o.jsx("p",{className:"auth-confirm",children:E}),o.jsx("button",{type:"submit",className:"btn-primary",disabled:b,children:b?"Loading...":r==="signin"?"Sign In":"Sign Up"})]})}),o.jsx("button",{type:"button",className:"auth-toggle",onClick:O,children:r==="signin"?"Don't have an account? Sign Up":"Already have an account? Sign In"})]})})}function Pa(s){return s.reduce((n,r)=>({kcal:n.kcal+(r.kcal||0),protein:n.protein+(r.protein||0)}),{kcal:0,protein:0})}const jv={sedentary:1.2,light:1.375,moderate:1.55,very:1.725,extreme:1.9};function kv(s,n,r,l){const d=10*s+6.25*n-5*r;return l==="male"?d+5:d-161}function Ev(s,n,r,l,d){const h=kv(s,n,r,l),f=jv[d]||1.2;return Math.round(h*f)}const Nv=7700;function Eg(s,n,r){const l=r.maintenanceKcal||r.kcal,d=r.goal||"maintain",h=r.weightLossTarget||5;if(!l||l<=0)return{deltaKcal:0,deltaKg:0,goalKg:h,goal:d,pct:0,daysTracked:0,firstDate:null};const f={};for(const k of s)f[k.dateKey]||(f[k.dateKey]=[]),f[k.dateKey].push(k);const g={};for(const k of n||[])g[k.dateKey]=(g[k.dateKey]||0)+(k.caloriesBurned||0);let v=0,p=0,b=null;for(const[k,S]of Object.entries(f)){const O=Pa(S),z=g[k]||0;v+=l-(O.kcal-z),p++,(!b||k<b)&&(b=k)}const x=v/Nv;let E=0;return d==="lose"&&h>0?E=Math.min(Math.max(x,0)/h,1):d==="gain"&&h>0&&(E=Math.min(Math.max(-x,0)/h,1)),{deltaKcal:Math.round(v),deltaKg:x,goalKg:h,goal:d,pct:E,daysTracked:p,firstDate:b}}function Tv(s){return Math.round(s*35/100)/10}const Av=[{id:1,name:"Chicken breast",kcalPer100g:165,proteinPer100g:31,portions:[{label:"breast",grams:120}]},{id:2,name:"Chicken thigh",kcalPer100g:209,proteinPer100g:26,portions:[{label:"thigh",grams:115}]},{id:3,name:"Turkey breast",kcalPer100g:135,proteinPer100g:30,portions:[{label:"slice",grams:28}]},{id:4,name:"Ground turkey",kcalPer100g:170,proteinPer100g:21,portions:[{label:"cup",grams:130}]},{id:5,name:"Ground beef (90% lean)",kcalPer100g:176,proteinPer100g:20,portions:[{label:"patty",grams:113}]},{id:6,name:"Ground beef (80% lean)",kcalPer100g:254,proteinPer100g:17,portions:[{label:"patty",grams:113}]},{id:7,name:"Beef steak (sirloin)",kcalPer100g:206,proteinPer100g:26,portions:[{label:"steak",grams:200}]},{id:8,name:"Lamb chop",kcalPer100g:258,proteinPer100g:24,portions:[{label:"chop",grams:100}]},{id:9,name:"Pork chop",kcalPer100g:231,proteinPer100g:26,portions:[{label:"chop",grams:120}]},{id:10,name:"Pork tenderloin",kcalPer100g:143,proteinPer100g:26,portions:[{label:"piece",grams:120}]},{id:11,name:"Bacon",kcalPer100g:541,proteinPer100g:37,portions:[{label:"slice",grams:8}]},{id:12,name:"Salmon",kcalPer100g:208,proteinPer100g:20,portions:[{label:"fillet",grams:150}]},{id:13,name:"Tuna (canned)",kcalPer100g:116,proteinPer100g:26,portions:[{label:"can",grams:85}]},{id:14,name:"Shrimp",kcalPer100g:99,proteinPer100g:24,portions:[{label:"piece",grams:6},{label:"cup",grams:145}]},{id:15,name:"Cod",kcalPer100g:82,proteinPer100g:18,portions:[{label:"fillet",grams:150}]},{id:16,name:"Tilapia",kcalPer100g:96,proteinPer100g:20,portions:[{label:"fillet",grams:115}]},{id:17,name:"Egg (whole)",kcalPer100g:155,proteinPer100g:13,portions:[{label:"egg",grams:50}]},{id:18,name:"Egg white",kcalPer100g:52,proteinPer100g:11,portions:[{label:"white",grams:33}]},{id:19,name:"Milk (whole)",kcalPer100g:61,proteinPer100g:3.2,portions:[{label:"cup",grams:244},{label:"tbsp",grams:15}]},{id:20,name:"Milk (skim)",kcalPer100g:34,proteinPer100g:3.4,portions:[{label:"cup",grams:245},{label:"tbsp",grams:15}]},{id:21,name:"Greek yogurt",kcalPer100g:73,proteinPer100g:10,portions:[{label:"cup",grams:170},{label:"tbsp",grams:15}]},{id:22,name:"Yogurt (plain)",kcalPer100g:61,proteinPer100g:3.5,portions:[{label:"cup",grams:245}]},{id:23,name:"Cottage cheese",kcalPer100g:84,proteinPer100g:11,portions:[{label:"cup",grams:226},{label:"tbsp",grams:14}]},{id:24,name:"Cheddar cheese",kcalPer100g:403,proteinPer100g:25,portions:[{label:"slice",grams:28},{label:"cup shredded",grams:113}]},{id:25,name:"Mozzarella",kcalPer100g:280,proteinPer100g:28,portions:[{label:"slice",grams:28},{label:"cup shredded",grams:113}]},{id:26,name:"Parmesan",kcalPer100g:431,proteinPer100g:38,portions:[{label:"tbsp",grams:5}]},{id:27,name:"Cream cheese",kcalPer100g:342,proteinPer100g:6,portions:[{label:"tbsp",grams:14.5}]},{id:28,name:"Butter",kcalPer100g:717,proteinPer100g:.9,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:29,name:"Heavy cream",kcalPer100g:340,proteinPer100g:2.1,portions:[{label:"tbsp",grams:15},{label:"cup",grams:240}]},{id:30,name:"Whey protein powder",kcalPer100g:400,proteinPer100g:80,portions:[{label:"scoop",grams:30}]},{id:31,name:"White rice (cooked)",kcalPer100g:130,proteinPer100g:2.7,portions:[{label:"cup",grams:186}]},{id:32,name:"Brown rice (cooked)",kcalPer100g:112,proteinPer100g:2.3,portions:[{label:"cup",grams:195}]},{id:33,name:"Pasta (cooked)",kcalPer100g:131,proteinPer100g:5,portions:[{label:"cup",grams:140}]},{id:34,name:"Bread (white)",kcalPer100g:265,proteinPer100g:9,portions:[{label:"slice",grams:25}]},{id:35,name:"Bread (whole wheat)",kcalPer100g:247,proteinPer100g:13,portions:[{label:"slice",grams:28}]},{id:36,name:"Oats (dry)",kcalPer100g:389,proteinPer100g:17,portions:[{label:"cup",grams:80},{label:"tbsp",grams:5}]},{id:37,name:"Oatmeal (cooked)",kcalPer100g:71,proteinPer100g:2.5,portions:[{label:"cup",grams:234}]},{id:38,name:"Tortilla (flour)",kcalPer100g:312,proteinPer100g:8,portions:[{label:"tortilla",grams:45}]},{id:39,name:"Quinoa (cooked)",kcalPer100g:120,proteinPer100g:4.4,portions:[{label:"cup",grams:185}]},{id:40,name:"Couscous (cooked)",kcalPer100g:112,proteinPer100g:3.8,portions:[{label:"cup",grams:157}]},{id:41,name:"Potato",kcalPer100g:77,proteinPer100g:2,portions:[{label:"medium",grams:150}]},{id:42,name:"Sweet potato",kcalPer100g:86,proteinPer100g:1.6,portions:[{label:"medium",grams:130}]},{id:43,name:"Corn",kcalPer100g:86,proteinPer100g:3.3,portions:[{label:"ear",grams:90},{label:"cup",grams:145}]},{id:44,name:"Lentils (cooked)",kcalPer100g:116,proteinPer100g:9,portions:[{label:"cup",grams:198}]},{id:45,name:"Chickpeas (cooked)",kcalPer100g:164,proteinPer100g:8.9,portions:[{label:"cup",grams:164}]},{id:46,name:"Black beans (cooked)",kcalPer100g:132,proteinPer100g:8.9,portions:[{label:"cup",grams:172}]},{id:47,name:"Kidney beans (cooked)",kcalPer100g:127,proteinPer100g:8.7,portions:[{label:"cup",grams:177}]},{id:48,name:"Edamame",kcalPer100g:121,proteinPer100g:11,portions:[{label:"cup",grams:155}]},{id:49,name:"Tofu (firm)",kcalPer100g:76,proteinPer100g:8,portions:[{label:"block",grams:252},{label:"cup",grams:126}]},{id:50,name:"Broccoli",kcalPer100g:34,proteinPer100g:2.8,portions:[{label:"cup",grams:91},{label:"head",grams:600}]},{id:51,name:"Spinach",kcalPer100g:23,proteinPer100g:2.9,portions:[{label:"cup raw",grams:30},{label:"cup cooked",grams:180}]},{id:52,name:"Tomato",kcalPer100g:18,proteinPer100g:.9,portions:[{label:"medium",grams:123},{label:"cup",grams:180}]},{id:53,name:"Onion",kcalPer100g:40,proteinPer100g:1.1,portions:[{label:"medium",grams:110},{label:"cup",grams:160}]},{id:54,name:"Bell pepper",kcalPer100g:31,proteinPer100g:1,portions:[{label:"medium",grams:120},{label:"cup",grams:150}]},{id:55,name:"Carrot",kcalPer100g:41,proteinPer100g:.9,portions:[{label:"medium",grams:61},{label:"cup",grams:128}]},{id:56,name:"Cucumber",kcalPer100g:15,proteinPer100g:.7,portions:[{label:"medium",grams:200},{label:"cup",grams:119}]},{id:57,name:"Lettuce",kcalPer100g:15,proteinPer100g:1.4,portions:[{label:"cup",grams:36},{label:"leaf",grams:5}]},{id:58,name:"Mushrooms",kcalPer100g:22,proteinPer100g:3.1,portions:[{label:"cup",grams:70},{label:"piece",grams:18}]},{id:59,name:"Zucchini",kcalPer100g:17,proteinPer100g:1.2,portions:[{label:"medium",grams:196},{label:"cup",grams:113}]},{id:60,name:"Avocado",kcalPer100g:160,proteinPer100g:2,portions:[{label:"avocado",grams:150},{label:"half",grams:75}]},{id:61,name:"Green beans",kcalPer100g:31,proteinPer100g:1.8,portions:[{label:"cup",grams:125}]},{id:62,name:"Cauliflower",kcalPer100g:25,proteinPer100g:1.9,portions:[{label:"cup",grams:107}]},{id:63,name:"Cabbage",kcalPer100g:25,proteinPer100g:1.3,portions:[{label:"cup",grams:89}]},{id:64,name:"Banana",kcalPer100g:89,proteinPer100g:1.1,portions:[{label:"medium",grams:118}]},{id:65,name:"Apple",kcalPer100g:52,proteinPer100g:.3,portions:[{label:"medium",grams:182}]},{id:66,name:"Orange",kcalPer100g:47,proteinPer100g:.9,portions:[{label:"medium",grams:131}]},{id:67,name:"Strawberries",kcalPer100g:32,proteinPer100g:.7,portions:[{label:"cup",grams:152},{label:"piece",grams:12}]},{id:68,name:"Blueberries",kcalPer100g:57,proteinPer100g:.7,portions:[{label:"cup",grams:148}]},{id:69,name:"Grapes",kcalPer100g:69,proteinPer100g:.7,portions:[{label:"cup",grams:151}]},{id:70,name:"Mango",kcalPer100g:60,proteinPer100g:.8,portions:[{label:"cup",grams:165},{label:"mango",grams:200}]},{id:71,name:"Watermelon",kcalPer100g:30,proteinPer100g:.6,portions:[{label:"cup",grams:152},{label:"slice",grams:280}]},{id:72,name:"Almonds",kcalPer100g:579,proteinPer100g:21,portions:[{label:"handful",grams:28},{label:"cup",grams:143}]},{id:73,name:"Peanuts",kcalPer100g:567,proteinPer100g:26,portions:[{label:"handful",grams:28},{label:"cup",grams:146}]},{id:74,name:"Walnuts",kcalPer100g:654,proteinPer100g:15,portions:[{label:"handful",grams:28},{label:"cup",grams:117}]},{id:75,name:"Cashews",kcalPer100g:553,proteinPer100g:18,portions:[{label:"handful",grams:28},{label:"cup",grams:137}]},{id:76,name:"Peanut butter",kcalPer100g:588,proteinPer100g:25,portions:[{label:"tbsp",grams:16}]},{id:77,name:"Chia seeds",kcalPer100g:486,proteinPer100g:17,portions:[{label:"tbsp",grams:12}]},{id:78,name:"Flax seeds",kcalPer100g:534,proteinPer100g:18,portions:[{label:"tbsp",grams:7}]},{id:79,name:"Sunflower seeds",kcalPer100g:584,proteinPer100g:21,portions:[{label:"tbsp",grams:9},{label:"cup",grams:140}]},{id:80,name:"Olive oil",kcalPer100g:884,proteinPer100g:0,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:81,name:"Coconut oil",kcalPer100g:862,proteinPer100g:0,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:82,name:"Vegetable oil",kcalPer100g:884,proteinPer100g:0,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:83,name:"Honey",kcalPer100g:304,proteinPer100g:.3,portions:[{label:"tbsp",grams:21},{label:"tsp",grams:7}]},{id:84,name:"Sugar",kcalPer100g:387,proteinPer100g:0,portions:[{label:"tbsp",grams:12.5},{label:"tsp",grams:4}]},{id:85,name:"Flour (all-purpose)",kcalPer100g:364,proteinPer100g:10,portions:[{label:"cup",grams:125},{label:"tbsp",grams:8}]},{id:86,name:"Dark chocolate",kcalPer100g:546,proteinPer100g:5,portions:[{label:"square",grams:10},{label:"bar",grams:40}]},{id:87,name:"Hummus",kcalPer100g:166,proteinPer100g:8,portions:[{label:"tbsp",grams:15},{label:"cup",grams:246}]},{id:88,name:"Sour cream",kcalPer100g:193,proteinPer100g:2.4,portions:[{label:"tbsp",grams:12}]},{id:89,name:"Mayonnaise",kcalPer100g:680,proteinPer100g:1,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:90,name:"Ketchup",kcalPer100g:112,proteinPer100g:1.7,portions:[{label:"tbsp",grams:17},{label:"tsp",grams:6}]},{id:91,name:"Soy sauce",kcalPer100g:53,proteinPer100g:8.1,portions:[{label:"tbsp",grams:18},{label:"tsp",grams:6}]}],Ng="nt_schema_version",ju="nt_targets",ku="nt_entries",Ov="nt_exercise_logs",Cv="nt_water_logs",Rv="nt_custom_meals",Eu="nt_recipes",Nu="nt_leftovers",Tu="nt_personal_ingredients",Tg=3;function Fi(s){try{const n=localStorage.getItem(s);return n?JSON.parse(n):null}catch{return null}}function zs(s,n){try{localStorage.setItem(s,JSON.stringify(n))}catch(r){console.error(`Failed to save ${s}:`,r)}}function Mv(){return Fi(ju)||{kcal:2e3,protein:120,maintenanceKcal:2e3,userName:"",weightLossTarget:5,onboardingComplete:!1}}function Dv(){return Fi(ku)||[]}function Lv(){return Fi(Eu)||[]}function Uv(){return Fi(Nu)||[]}function Au(){return Fi(Tu)||[]}function jl(s){zs(Tu,s)}function zv(){try{localStorage.removeItem(ju),localStorage.removeItem(ku),localStorage.removeItem(Ov),localStorage.removeItem(Cv),localStorage.removeItem(Rv),localStorage.removeItem(Eu),localStorage.removeItem(Nu),localStorage.removeItem(Tu),localStorage.removeItem(Ng)}catch(s){console.error("Failed to clear data:",s)}}function Bv(){return JSON.stringify({schemaVersion:Tg,targets:Mv(),entries:Dv(),recipes:Lv(),leftovers:Uv(),exportedAt:new Date().toISOString()},null,2)}function qv(s){const n=JSON.parse(s);if(!n.targets||!Array.isArray(n.entries))throw new Error("Invalid data format");return zs(ju,n.targets),zs(ku,n.entries),Array.isArray(n.recipes)&&zs(Eu,n.recipes),Array.isArray(n.leftovers)&&zs(Nu,n.leftovers),zs(Ng,n.schemaVersion||Tg),{targets:n.targets,entries:n.entries,recipes:n.recipes||[],leftovers:n.leftovers||[]}}function gl(s,n){return(Number(s)||0)*n}const ou={label:"g",grams:1},Yi=[{label:"g",grams:1},{label:"tbsp",grams:15},{label:"tsp",grams:5},{label:"cup",grams:240},{label:"piece",grams:100},{label:"slice",grams:30},{label:"serving",grams:100}],Hv=["Egg","Chicken breast","Rice","Bread","Oats","Banana","Greek yogurt","Milk","Pasta","Salmon","Avocado","Potato"];function cu(s){return s?.portions?[...s.portions,ou]:[ou]}function $v(s,n){if(s.refAmount&&s.refUnit){const r=Yi.find(g=>g.label===s.refUnit)||Yi[0],l=s.refAmount*r.grams,d=l>0?Math.round(s.refKcal/l*100):0,h=l>0?Math.round(s.refProtein/l*100*10)/10:0,f=r.label!=="g"?[{label:r.label,grams:r.grams}]:[];return{...s,kcalPer100g:d,proteinPer100g:h,portions:f,id:`p_${n}`,isPersonal:!0}}return{...s,id:`p_${n}`,isPersonal:!0}}function Gv(){const s=Au();return[...Av,...s.map($v)]}function Ag(s,n){const r=s.length,l=n.length;if(r===0)return l;if(l===0)return r;let d=Array.from({length:l+1},(h,f)=>f);for(let h=1;h<=r;h++){const f=[h];for(let g=1;g<=l;g++)f[g]=s[h-1]===n[g-1]?d[g-1]:1+Math.min(d[g-1],d[g],f[g-1]);d=f}return d[l]}function Kv(s,n){const r=s.toLowerCase().trim();if(!r)return null;const l=n.find(v=>v.name.toLowerCase()===r);if(l)return l;const d=n.find(v=>v.name.toLowerCase().includes(r)||r.includes(v.name.toLowerCase()));if(d)return d;let h=null,f=1/0;const g=r.split(/\s+/);for(const v of n){const p=v.name.toLowerCase().split(/\s+/);for(const b of g)if(!(b.length<3))for(const x of p){if(x.length<3)continue;const E=Math.floor(Math.max(b.length,x.length)*.35),k=Ag(b,x);k<=E&&k<f&&(f=k,h=v)}}return h}function Pv(s,n){const r=s.toLowerCase().trim();if(r.length<2)return[];const l=n.filter(f=>f.name.toLowerCase().includes(r));if(l.length>0)return l.slice(0,6);const d=r.split(/\s+/).filter(f=>f.length>=2);if(d.length===0)return[];const h=[];for(const f of n){const g=f.name.toLowerCase().split(/\s+/);let v=1/0;for(const b of d)for(const x of g){const E=Ag(b,x);E<v&&(v=E)}const p=Math.floor(r.length*.4);v<=p&&h.push({ing:f,dist:v})}return h.sort((f,g)=>f.dist-g.dist),h.slice(0,6).map(f=>f.ing)}function Hn(){return{key:Date.now()+Math.random(),query:"",name:"",amount:1,portionLabel:"g",portionGrams:1,portions:Yi,kcalPer100g:0,proteinPer100g:0,totalKcal:0,totalProtein:0,matched:!1,isNew:!1,saveToDb:!0,editing:!1}}function Vm(s){const n=cu(s),r=n[0];return{key:Date.now()+Math.random(),query:s.name,name:s.name,amount:1,portionLabel:r.label,portionGrams:r.grams,portions:n,kcalPer100g:s.kcalPer100g,proteinPer100g:s.proteinPer100g,matched:!0,isNew:!1,isPersonal:!!s.isPersonal,saveToDb:!1,editing:!0}}function Yv({value:s,onChange:n,onSelect:r,onConfirm:l,allDb:d,disabled:h}){const[f,g]=$.useState(!1),v=$.useMemo(()=>Pv(s,d),[s,d]);function p(b){b.key==="Enter"&&(b.preventDefault(),g(!1),l())}return o.jsxs("div",{className:"ilf-name-wrap",children:[o.jsx("input",{type:"text",className:"ilf-field ilf-field-name",value:s,onChange:b=>{n(b.target.value),g(!0)},onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),150),onKeyDown:p,placeholder:"Ingredient name",disabled:h}),f&&s.trim().length>=2&&o.jsxs("div",{className:"ilf-dropdown",children:[v.slice(0,3).map(b=>o.jsxs("button",{type:"button",className:"ilf-dropdown-item",onMouseDown:x=>x.preventDefault(),onClick:()=>{r(b),g(!1)},children:[o.jsx("span",{className:"ilf-dropdown-name",children:b.name}),o.jsxs("span",{className:"ilf-dropdown-meta",children:[b.kcalPer100g," cal  ",b.proteinPer100g,"g per 100g"]})]},b.id)),o.jsx("button",{type:"button",className:"ilf-dropdown-item ilf-dropdown-new",onMouseDown:b=>b.preventDefault(),onClick:()=>{g(!1),l(!0)},children:o.jsxs("span",{className:"ilf-dropdown-name",children:["Add ",s.trim()," as new"]})})]})]})}function Vv({row:s,rowKcal:n,rowProtein:r,onEdit:l,onRemove:d,disabled:h}){return o.jsxs("div",{className:`ilf-compact${h?" ilf-compact--locked":""}`,children:[o.jsx("span",{className:"ilf-compact-name",children:s.name}),o.jsxs("span",{className:"ilf-compact-detail",children:[s.amount," ",s.portionLabel,n!==null&&o.jsxs(o.Fragment,{children:["  ",n," cal  ",r,"g"]})]}),o.jsx("button",{type:"button",className:"ilf-compact-edit",onClick:l,disabled:h,"aria-label":"Edit",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})})}),o.jsx("button",{type:"button",className:"ilf-compact-remove",onClick:d,"aria-label":"Remove",children:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}function El({onSave:s,onCancel:n,initialData:r}){const{state:l,dispatch:d}=ra(),[h,f]=$.useState(()=>r?.ingredients?.length>0?[...r.ingredients.map(I=>({key:Date.now()+Math.random(),query:I.name,name:I.name,amount:I.grams,portionLabel:"g",portionGrams:1,portions:Yi,kcalPer100g:I.grams>0?I.kcal/I.grams*100:0,proteinPer100g:I.grams>0?I.protein/I.grams*100:0,totalKcal:0,totalProtein:0,matched:!0,isNew:!1,saveToDb:!1,editing:!0})),Hn()]:[Hn()]),[g,v]=$.useState(r?.name||""),[p,b]=$.useState(!1),[x,E]=$.useState(!0),k=$.useMemo(()=>Gv(),[]),S=h.findIndex(Y=>(Y.matched||Y.isNew)&&Y.editing),O=S>=0;function z(Y,I){f(te=>te.map((X,me)=>me===Y?{...X,...I}:X))}function G(Y,I){z(Y,{query:I,name:I,matched:!1,isNew:!1})}function T(Y,I){const te=cu(I),X=te[0];f(me=>{const de=me.map((P,ee)=>ee===Y?{...P,query:I.name,name:I.name,amount:1,portionLabel:X.label,portionGrams:X.grams,portions:te,kcalPer100g:I.kcalPer100g,proteinPer100g:I.proteinPer100g,matched:!0,isNew:!1,isPersonal:!!I.isPersonal,saveToDb:!1,editing:!0}:P),A=de[de.length-1];return A&&(A.matched||A.isNew)?[...de,Hn()]:de})}function D(Y,I){f(te=>{const X=te.map((de,A)=>{if(A!==Y||de.matched||!de.query.trim())return de;const P=I?null:Kv(de.query,k);if(P){const le=cu(P),w=le[0];return{...de,name:P.name,query:P.name,portionLabel:w.label,portionGrams:w.grams,portions:le,kcalPer100g:P.kcalPer100g,proteinPer100g:P.proteinPer100g,matched:!0,isNew:!1,isPersonal:!!P.isPersonal,saveToDb:!1,editing:!0}}const ee=de.query.trim(),we=ee.charAt(0).toUpperCase()+ee.slice(1);return{...de,name:we,query:we,isNew:!0,matched:!1,saveToDb:!0,portions:Yi,editing:!0}}),me=X[X.length-1];return me&&(me.matched||me.isNew)?[...X,Hn()]:X})}function K(Y,I){f(te=>te.map((X,me)=>{if(me!==Y)return X;const de=X.portions.find(A=>A.label===I)||ou;return{...X,portionLabel:de.label,portionGrams:de.grams}}))}function ne(Y){f(I=>{const te=I.filter((X,me)=>me!==Y);return te.length===0?[Hn()]:te})}function J(Y){if(O)return;const I=k.find(te=>te.name.toLowerCase().includes(Y.toLowerCase()));I&&f(te=>{const X=te[te.length-1];return X&&!X.matched&&!X.isNew&&!X.query.trim()?[...te.slice(0,-1),Vm(I),Hn()]:[...te,Vm(I),Hn()]})}const Z=h.filter(Y=>Y.name.trim()&&Number(Y.amount)>0&&(Y.matched||Y.isNew)),_e=$.useMemo(()=>{let Y=0,I=0;for(const te of Z)if(te.isNew)Y+=te.totalKcal||0,I+=te.totalProtein||0;else{const X=gl(te.amount,te.portionGrams);Y+=X*(te.kcalPer100g||0)/100,I+=X*(te.proteinPer100g||0)/100}return{kcal:Math.round(Y),protein:Math.round(I*10)/10}},[Z]);function ke(){if(Z.length===0)return;const Y=Au();for(const X of h)X.isNew&&X.saveToDb&&X.totalKcal>0&&(Y.find(de=>de.name.toLowerCase()===X.name.toLowerCase())||Y.push({name:X.name,refAmount:Number(X.amount)||0,refUnit:X.portionLabel,refKcal:Math.round(X.totalKcal),refProtein:Math.round(X.totalProtein*10)/10}));jl(Y);const I=Z.map(X=>{if(X.isNew){const de=gl(X.amount,X.portionGrams);return{name:X.name,grams:Math.round(de),kcal:Math.round(X.totalKcal),protein:Math.round(X.totalProtein*10)/10}}const me=gl(X.amount,X.portionGrams);return{name:X.name,grams:Math.round(me),kcal:Math.round(me*X.kcalPer100g/100),protein:Math.round(me*X.proteinPer100g/100*10)/10}}),te=g.trim();if(!te){b(!0);return}if(x&&te){const X=(l.customMeals||[]).find(de=>de.name.toLowerCase()===te.toLowerCase()),me={...X?{id:X.id}:{id:crypto.randomUUID()},name:te,kcal:_e.kcal,protein:_e.protein,ingredients:I};d({type:X?"UPDATE_CUSTOM_MEAL":"ADD_CUSTOM_MEAL",payload:me})}s({name:te,kcal:_e.kcal,protein:_e.protein,ingredients:I})}return o.jsxs("div",{className:"add-mode-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:n,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"add-mode-title",children:"New Meal"})]}),o.jsxs("div",{className:"ilf-meal-card",children:[o.jsxs("div",{className:"ilf-meal-name-group",children:[o.jsx("span",{className:"ilf-meal-name-label",children:"What are we having?"}),o.jsx("input",{type:"text",className:`ilf-meal-title${p?" ilf-meal-title--error":""}`,value:g,onChange:Y=>{v(Y.target.value),b(!1)},placeholder:"e.g. Morning Omelette"}),p&&o.jsx("span",{className:"ilf-name-error",children:"Give your meal a name first!"})]}),o.jsxs("div",{className:"ilf-ingredients-section",children:[o.jsxs("div",{className:"ilf-ingredients-header",children:[o.jsxs("span",{className:"ilf-ingredients-label",children:[o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 5v14"}),o.jsx("path",{d:"M5 12h14"})]}),"Ingredients"]}),o.jsx("span",{className:"ilf-ingredients-hint",children:"Tap or type your own"})]}),o.jsx("div",{className:`ilf-chips${O?" ilf-chips--locked":""}`,children:Hv.map(Y=>o.jsx("button",{type:"button",className:"ilf-chip",disabled:O,onClick:()=>J(Y),children:Y},Y))}),o.jsx("div",{className:"ilf-rows",children:h.map((Y,I)=>{const te=gl(Y.amount,Y.portionGrams);let X=null,me=null;Y.isNew&&(Y.totalKcal>0||Y.totalProtein>0)?(X=Math.round(Y.totalKcal),me=Math.round(Y.totalProtein*10)/10):Y.kcalPer100g>0&&Number(Y.amount)>0&&(X=Math.round(te*Y.kcalPer100g/100),me=Math.round(te*Y.proteinPer100g/100*10)/10);const de=Y.matched||Y.isNew;return de&&!Y.editing?o.jsx(Vv,{row:Y,rowKcal:X,rowProtein:me,onEdit:()=>z(I,{editing:!0}),onRemove:()=>ne(I),disabled:O},Y.key):o.jsxs("div",{className:`ilf-row ${Y.isNew?"ilf-row--new":""}`,children:[o.jsxs("div",{className:"ilf-row-top",children:[o.jsx(Yv,{value:Y.query,onChange:A=>G(I,A),onSelect:A=>T(I,A),onConfirm:A=>D(I,A),allDb:k,disabled:O&&S!==I}),de&&o.jsx("button",{type:"button",className:"ilf-row-action ilf-row-action--remove",onClick:()=>ne(I),"aria-label":"Remove",children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),de&&o.jsxs("div",{className:"ilf-row-fields",children:[o.jsx("input",{type:"number",inputMode:"decimal",className:"ilf-field ilf-field-amount",value:Y.amount,onChange:A=>z(I,{amount:A.target.value}),placeholder:"0"}),o.jsx("select",{className:"ilf-field ilf-field-unit",value:Y.portionLabel,onChange:A=>K(I,A.target.value),children:Y.portions.map(A=>o.jsx("option",{value:A.label,children:A.label},A.label))}),X!==null&&o.jsxs("span",{className:"ilf-row-calc",children:[X," cal  ",me,"g"]}),Y.matched&&Y.editing&&o.jsx("button",{type:"button",className:"ilf-done-btn",onClick:()=>z(I,{editing:!1}),children:"Done"})]}),Y.isNew&&Y.editing&&o.jsxs("div",{className:"ilf-new-fields",children:[o.jsx("p",{className:"ilf-new-hint",children:"New ingredient  enter total nutrition"}),o.jsxs("div",{className:"ilf-new-row",children:[o.jsx("label",{className:"ilf-new-label",children:"cal"}),o.jsx("input",{type:"number",inputMode:"decimal",className:"ilf-field ilf-field-sm",value:Y.totalKcal||"",onChange:A=>z(I,{totalKcal:Number(A.target.value)||0}),placeholder:"0"})]}),o.jsxs("div",{className:"ilf-new-row",children:[o.jsx("label",{className:"ilf-new-label",children:"protein (g)"}),o.jsx("input",{type:"number",inputMode:"decimal",className:"ilf-field ilf-field-sm",value:Y.totalProtein||"",onChange:A=>z(I,{totalProtein:Number(A.target.value)||0}),placeholder:"0"})]}),o.jsxs("label",{className:"ilf-save-toggle",children:[o.jsx("input",{type:"checkbox",checked:Y.saveToDb,onChange:A=>z(I,{saveToDb:A.target.checked})}),o.jsx("span",{children:"Save to my ingredients"})]}),o.jsx("button",{type:"button",className:"ilf-done-btn",onClick:()=>z(I,{editing:!1}),children:"Done"})]})]},Y.key)})})]}),Z.length>0&&o.jsxs("div",{className:"ilf-totals",children:[o.jsx("span",{className:"ilf-totals-label",children:"Total"}),o.jsxs("span",{className:"ilf-totals-value",children:[o.jsx("svg",{className:"ilf-totals-icon",width:"11",height:"11",viewBox:"0 0 16 16",fill:"#ff6b2b",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),_e.kcal," cal",o.jsx("span",{className:"ilf-totals-sep"}),o.jsxs("svg",{className:"ilf-totals-icon",width:"11",height:"11",viewBox:"0 0 24 24",fill:"#9575cd",stroke:"#9575cd",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),_e.protein,"g"]})]}),o.jsxs("div",{className:"ilf-footer",children:[o.jsxs("div",{className:"ilf-my-meals-wrap",children:[o.jsxs("button",{type:"button",className:`ilf-my-meals-toggle ${x?"ilf-my-meals-toggle--on":""}`,onClick:()=>E(!x),children:[o.jsx("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:x?"#fff":"none",stroke:x?"#fff":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),o.jsx("span",{children:x?"Saved to My Meals":"Save to My Meals"})]}),x&&o.jsx("span",{className:"ilf-my-meals-hint",children:"One tap to log next time"})]}),o.jsx("button",{type:"button",className:"ilf-meal-save-btn",disabled:Z.length===0,onClick:ke,children:"Done"})]})]})]})}const Ot=(s,n)=>({width:s,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),_t={user:o.jsxs("svg",{...Ot(24,24),children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),activity:o.jsx("svg",{...Ot(24,24),children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),target:o.jsxs("svg",{...Ot(24,24),children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("circle",{cx:"12",cy:"12",r:"6"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),sliders:o.jsxs("svg",{...Ot(24,24),children:[o.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),o.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),o.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),o.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),o.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),o.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),o.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),utensils:o.jsxs("svg",{...Ot(24,24),children:[o.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),o.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),o.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3zm0 0v7"})]}),couch:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3"}),o.jsx("path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0z"}),o.jsx("path",{d:"M4 18v2"}),o.jsx("path",{d:"M20 18v2"})]}),walk:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("circle",{cx:"14",cy:"4",r:"2"}),o.jsx("path",{d:"M10 22l2-6 4 2v-8l-4-2-4 4 2 4"})]}),run:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("circle",{cx:"14",cy:"4",r:"2"}),o.jsx("path",{d:"M4 17l3-3 2 2 4-6 4 2"}),o.jsx("path",{d:"M14 22l-2-6"})]}),dumbbell:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("path",{d:"M6.5 6.5h11"}),o.jsx("path",{d:"M6.5 17.5h11"}),o.jsx("path",{d:"M6.5 6.5v11"}),o.jsx("path",{d:"M17.5 6.5v11"}),o.jsx("path",{d:"M2 9.5h4v5H2z"}),o.jsx("path",{d:"M18 9.5h4v5h-4z"}),o.jsx("line",{x1:"6.5",y1:"12",x2:"2",y2:"12"}),o.jsx("line",{x1:"22",y1:"12",x2:"17.5",y2:"12"})]}),flame:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.5-.5-2-1-3-.5 1-2 2-2 4a2.5 2.5 0 0 0 .5 1.5z"}),o.jsx("path",{d:"M12 22c4-2 8-6 8-12C20 5 15 2 12 2S4 5 4 10c0 6 4 10 8 12z"})]}),trendDown:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("polyline",{points:"23 18 13.5 8.5 8.5 13.5 1 6"}),o.jsx("polyline",{points:"17 18 23 18 23 12"})]}),balance:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("polyline",{points:"8 8 3 12 8 16"}),o.jsx("polyline",{points:"16 8 21 12 16 16"})]}),trendUp:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),o.jsx("polyline",{points:"17 6 23 6 23 12"})]}),feather:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"}),o.jsx("line",{x1:"16",y1:"8",x2:"2",y2:"22"}),o.jsx("line",{x1:"17.5",y1:"15",x2:"9",y2:"15"})]}),zap:o.jsx("svg",{...Ot(18,18),children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),rocket:o.jsxs("svg",{...Ot(18,18),children:[o.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),o.jsx("path",{d:"M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),o.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),o.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),fireFill:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.5-.5-2-1-3-.5 1-2 2-2 4a2.5 2.5 0 0 0 .5 1.5z"}),o.jsx("path",{d:"M12 22c4-2 8-6 8-12C20 5 15 2 12 2S4 5 4 10c0 6 4 10 8 12z"})]}),check:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})})},Iv=[{key:"sedentary",icon:_t.couch,label:"Sedentary",desc:"Little or no exercise"},{key:"light",icon:_t.walk,label:"Lightly active",desc:"13 days / week"},{key:"moderate",icon:_t.run,label:"Moderately active",desc:"35 days / week"},{key:"very",icon:_t.dumbbell,label:"Very active",desc:"67 days / week"},{key:"extreme",icon:_t.flame,label:"Extremely active",desc:"Physical job or intense training"}],Qv=[{key:"lose",icon:_t.trendDown,label:"Lose weight",desc:"Calorie deficit"},{key:"maintain",icon:_t.balance,label:"Maintain weight",desc:"Eat at maintenance"},{key:"gain",icon:_t.trendUp,label:"Gain weight",desc:"Calorie surplus"}],Im=[{key:"slow",icon:_t.feather,label:"Slow & steady",desc:"~0.25 kg/week",deficit:250},{key:"moderate",icon:_t.zap,label:"Moderate",desc:"~0.5 kg/week",deficit:500},{key:"aggressive",icon:_t.rocket,label:"Aggressive",desc:"~0.75 kg/week",deficit:750}],Xv=[{icon:_t.user,title:"Tell us about yourself"},{icon:_t.activity,title:"How active are you?"},{icon:_t.target,title:"Whats your goal?"},{icon:_t.sliders,title:"Your daily targets"},{icon:_t.utensils,title:"Add your go-to meals"}];function Jv(){const{state:s,dispatch:n}=ra(),[r,l]=$.useState(1),[d,h]=$.useState({}),[f,g]=$.useState(""),[v,p]=$.useState(""),[b,x]=$.useState("male"),[E,k]=$.useState(""),[S,O]=$.useState(""),[z,G]=$.useState("moderate"),[T,D]=$.useState("lose"),[K,ne]=$.useState(""),[J,Z]=$.useState("moderate"),[_e,ke]=$.useState(""),[Y,I]=$.useState(""),[te,X]=$.useState(""),[me,de]=$.useState("intro"),[A,P]=$.useState([]),ee=$.useMemo(()=>{const V=Number(S),ye=Number(E),tt=Number(v);return V>0&&ye>0&&tt>0?Ev(V,ye,tt,b,z):null},[S,E,v,b,z]),we=$.useMemo(()=>{if(ee&&Number(S)>0){const V=Im.find(F=>F.key===J)?.deficit||500;let ye=ee;T==="lose"?ye=ee-V:T==="gain"&&(ye=ee+V);const tt=Math.round(1.6*Number(S));return{kcal:Math.round(ye),protein:tt}}return{kcal:2e3,protein:120}},[ee,S,T,J]),le=$.useMemo(()=>{const V=Number(S);return V>0?Tv(V):2.5},[S]);function w(){const V={};f.trim()||(V.userName="Enter your name");const ye=Number(v);(!ye||ye<10||ye>120)&&(V.age="10120");const tt=Number(E);(!tt||tt<100||tt>250)&&(V.height="100250 cm");const F=Number(S);return(!F||F<30||F>300)&&(V.weight="30300 kg"),h(V),Object.keys(V).length===0}function q(){const V={},ye=Number(_e||we.kcal),tt=Number(Y||we.protein);return(ye<500||ye>1e4)&&(V.kcal="50010,000"),(tt<10||tt>500)&&(V.protein="10500"),h(V),Object.keys(V).length===0}function Q(){if(r===1&&w())h({}),l(2);else if(r===2)h({}),l(3);else if(r===3)h({}),l(4);else if(r===4){if(!q())return;h({}),l(5)}}function W(){if(h({}),r===5&&me==="build"){de("intro");return}if(r===5&&me==="done"){de("intro");return}l(r-1)}function oe(){P(s.customMeals||[]),de("done")}function pe(){const V=Number(_e||we.kcal),ye=Number(Y||we.protein),tt=Number(te||le),F=Number(K),Ae=Number(S),xe=T!=="maintain"&&F>0&&Ae>0?Math.abs(Ae-F):0;n({type:"SET_TARGETS",payload:{userName:f.trim(),age:Number(v),sex:b,height:Number(E),weight:Number(S),activityLevel:z,goal:T,maintenanceKcal:ee,kcal:V,protein:ye,waterTargetLiters:tt,weightLossTarget:xe,onboardingComplete:!0}})}const ve=Xv[r-1];return o.jsx("div",{className:"onboarding",children:o.jsxs("div",{className:"onboarding-content",children:[o.jsx("h1",{className:"onboarding-title",children:"myfitnesscoach"}),o.jsxs("div",{className:"ob-progress",children:[o.jsx("div",{className:"ob-progress-track",children:o.jsx("div",{className:"ob-progress-fill",style:{width:`${(r-1)/4*100}%`}})}),o.jsx("div",{className:"ob-progress-dots",children:[1,2,3,4,5].map(V=>o.jsx("div",{className:`ob-dot${V===r?" ob-dot--active":""}${V<r?" ob-dot--done":""}`,children:V<r?_t.check:V},V))})]}),o.jsxs("div",{className:"ob-hero",children:[o.jsx("div",{className:"ob-hero-icon",children:ve.icon}),o.jsx("p",{className:"ob-hero-title",children:ve.title})]}),r===1&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsxs("div",{className:"onboarding-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-name",children:"Your name"}),o.jsx("input",{id:"ob-name",type:"text",value:f,onChange:V=>g(V.target.value),placeholder:"e.g. Alex"}),d.userName&&o.jsx("span",{className:"form-error",children:d.userName})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-age",children:"Age"}),o.jsx("input",{id:"ob-age",type:"number",inputMode:"numeric",value:v,onChange:V=>p(V.target.value),placeholder:"25"}),d.age&&o.jsx("span",{className:"form-error",children:d.age})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Sex"}),o.jsxs("div",{className:"sex-toggle",children:[o.jsx("button",{type:"button",className:`sex-btn ${b==="male"?"sex-btn--active":""}`,onClick:()=>x("male"),children:"Male"}),o.jsx("button",{type:"button",className:`sex-btn ${b==="female"?"sex-btn--active":""}`,onClick:()=>x("female"),children:"Female"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-height",children:"Height (cm)"}),o.jsx("input",{id:"ob-height",type:"number",inputMode:"numeric",value:E,onChange:V=>k(V.target.value),placeholder:"175"}),d.height&&o.jsx("span",{className:"form-error",children:d.height})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-weight",children:"Weight (kg)"}),o.jsx("input",{id:"ob-weight",type:"number",inputMode:"decimal",value:S,onChange:V=>O(V.target.value),placeholder:"70"}),d.weight&&o.jsx("span",{className:"form-error",children:d.weight})]})]})]})}),o.jsx("button",{type:"button",className:"btn-primary",onClick:Q,children:"Continue"})]}),r===2&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsx("div",{className:"option-list",children:Iv.map(V=>o.jsxs("button",{type:"button",className:`option-card ${z===V.key?"option-card--active":""}`,onClick:()=>G(V.key),children:[o.jsx("span",{className:"option-icon",children:V.icon}),o.jsxs("div",{className:"option-text",children:[o.jsx("span",{className:"option-label",children:V.label}),o.jsx("span",{className:"option-desc",children:V.desc})]})]},V.key))})}),ee&&o.jsxs("div",{className:"maintenance-result",children:[o.jsx("div",{className:"maintenance-icon",children:_t.fireFill}),o.jsxs("div",{className:"maintenance-text",children:[o.jsx("span",{className:"maintenance-label",children:"Your maintenance"}),o.jsxs("span",{className:"maintenance-value",children:[ee," cal/day"]})]})]}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:W,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:Q,children:"Continue"})]})]}),r===3&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsxs("div",{className:"onboarding-form",children:[o.jsx("div",{className:"option-list",children:Qv.map(V=>o.jsxs("button",{type:"button",className:`option-card ${T===V.key?"option-card--active":""}`,onClick:()=>{D(V.key),ke("")},children:[o.jsx("span",{className:"option-icon",children:V.icon}),o.jsxs("div",{className:"option-text",children:[o.jsx("span",{className:"option-label",children:V.label}),o.jsx("span",{className:"option-desc",children:V.desc})]})]},V.key))}),T!=="maintain"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Target weight"}),o.jsxs("div",{className:"ob-input-row",children:[o.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:K,onChange:V=>ne(V.target.value),placeholder:String(Math.round(T==="lose"?Number(S)*.9:Number(S)*1.1))}),o.jsx("span",{className:"ob-input-unit",children:"kg"})]})]}),o.jsx("p",{className:"form-hint",children:"How fast do you want to get there?"}),o.jsx("div",{className:"option-list option-list--compact",children:Im.map(V=>o.jsxs("button",{type:"button",className:`option-card ${J===V.key?"option-card--active":""}`,onClick:()=>{Z(V.key),ke("")},children:[o.jsx("span",{className:"option-icon",children:V.icon}),o.jsxs("div",{className:"option-text",children:[o.jsx("span",{className:"option-label",children:V.label}),o.jsx("span",{className:"option-desc",children:V.desc})]})]},V.key))})]})]})}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:W,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:Q,children:"Continue"})]})]}),r===4&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsxs("div",{className:"onboarding-form",children:[o.jsxs("div",{className:"ob-target-card",children:[o.jsx("div",{className:"ob-target-icon",style:{background:"rgba(255,107,43,0.12)",color:"#ff6b2b"},children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 23c-1.1 0-1.99-.89-1.99-1.99h3.98c0 1.1-.89 1.99-1.99 1.99zm7-3H5v-1l2-2v-5c0-2.8 1.6-5.2 4-6.1V5c0-.6.4-1 1-1s1 .4 1 1v.9c2.4.9 4 3.3 4 6.1v5l2 2v1z"})})}),o.jsx("div",{className:"ob-target-info",children:o.jsx("span",{className:"ob-target-label",children:"Calories"})}),o.jsxs("div",{className:"ob-target-value",children:[o.jsx("input",{type:"number",inputMode:"numeric",value:_e||we.kcal,onChange:V=>ke(V.target.value)}),o.jsx("span",{className:"ob-target-unit",children:"cal"})]})]}),d.kcal&&o.jsx("span",{className:"form-error",children:d.kcal}),o.jsxs("div",{className:"ob-target-card",children:[o.jsx("div",{className:"ob-target-icon",style:{background:"rgba(149,117,205,0.12)",color:"#9575cd"},children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"}),o.jsx("line",{x1:"16",y1:"8",x2:"2",y2:"22"})]})}),o.jsx("div",{className:"ob-target-info",children:o.jsx("span",{className:"ob-target-label",children:"Protein"})}),o.jsxs("div",{className:"ob-target-value",children:[o.jsx("input",{type:"number",inputMode:"numeric",value:Y||we.protein,onChange:V=>I(V.target.value)}),o.jsx("span",{className:"ob-target-unit",children:"g/day"})]})]}),d.protein&&o.jsx("span",{className:"form-error",children:d.protein}),o.jsxs("div",{className:"ob-target-card",children:[o.jsx("div",{className:"ob-target-icon",style:{background:"rgba(80,191,232,0.12)",color:"#50bfe8"},children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})}),o.jsx("div",{className:"ob-target-info",children:o.jsx("span",{className:"ob-target-label",children:"Water"})}),o.jsxs("div",{className:"ob-target-value",children:[o.jsx("input",{type:"number",inputMode:"decimal",step:"0.1",value:te||le,onChange:V=>X(V.target.value)}),o.jsx("span",{className:"ob-target-unit",children:"L/day"})]})]}),o.jsx("p",{className:"form-hint",children:"Auto-calculated from your profile. Tap to adjust."})]})}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:W,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:Q,children:"Continue"})]})]}),r===5&&o.jsxs("div",{className:"onboarding-step",children:[me==="intro"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"tut-intro",children:[o.jsx("p",{className:"tut-tagline",children:"Here is how you will log meals"}),o.jsxs("div",{className:"tut-steps",children:[o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"1"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Name your meal"}),o.jsx("span",{className:"tut-step-desc",children:"Give it a name like Morning Omelette"})]})]}),o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"2"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Add ingredients"}),o.jsx("span",{className:"tut-step-desc",children:"Tap a suggestion or type your own"})]})]}),o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"3"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Set amounts"}),o.jsx("span",{className:"tut-step-desc",children:"Pick a unit (g, tbsp, cup...) and enter how much"})]})]}),o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"4"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Done!"}),o.jsx("span",{className:"tut-step-desc",children:"We calculate calories & protein automatically"})]})]})]})]}),o.jsx("button",{type:"button",className:"btn-primary tut-build-btn",onClick:()=>de("build"),children:"Build my first meal"}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:W,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:pe,children:"Skip & Start"})]})]}),me==="build"&&o.jsx(El,{onSave:oe,onCancel:()=>de("intro")}),me==="done"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"tut-success",children:[o.jsx("span",{className:"tut-success-emoji",children:""}),o.jsx("span",{className:"tut-success-title",children:"Meal saved!"}),o.jsx("span",{className:"tut-success-desc",children:"You can find it in your Happy Kitchen anytime"})]}),A.length>0&&o.jsx("div",{className:"qm-list",children:A.map((V,ye)=>o.jsx("div",{className:"qm-card",children:o.jsxs("div",{className:"qm-card-info",children:[o.jsx("span",{className:"qm-card-name",children:V.name}),o.jsxs("span",{className:"qm-card-macros",children:[V.kcal," cal  ",V.protein,"g protein",V.ingredients?`  ${V.ingredients.length} ingredients`:""]})]})},ye))}),o.jsx("button",{type:"button",className:"tut-add-more",onClick:()=>de("build"),children:"+ Add another meal"}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:W,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:pe,children:"Start Tracking"})]})]})]})]})})}function xa(){return Gi(new Date)}function Gi(s){const n=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0");return`${n}-${r}-${l}`}function Og(){const s=new Date,n=[];for(let r=6;r>=0;r--){const l=new Date(s);l.setDate(s.getDate()-r),n.push(Gi(l))}return n}function Ou(){const{state:s}=ra(),n=xa(),r=$.useMemo(()=>s.entries.filter(p=>p.dateKey===n),[s.entries,n]),l=$.useMemo(()=>Pa(r),[r]),d=$.useMemo(()=>(s.exerciseLogs||[]).filter(p=>p.dateKey===n),[s.exerciseLogs,n]),h=$.useMemo(()=>d.reduce((p,b)=>p+(b.caloriesBurned||0),0),[d]),f=$.useMemo(()=>(s.waterLogs||[]).filter(p=>p.dateKey===n),[s.waterLogs,n]),g=$.useMemo(()=>f.reduce((p,b)=>p+(b.amountLiters||0),0),[f]),v=$.useMemo(()=>Og().map(b=>{const x=s.entries.filter(S=>S.dateKey===b),k=(s.exerciseLogs||[]).filter(S=>S.dateKey===b).reduce((S,O)=>S+(O.caloriesBurned||0),0);return{dateKey:b,...Pa(x),burned:k,entryCount:x.length}}),[s.entries,s.exerciseLogs]);return{todayEntries:r,todayTotals:l,todayExerciseLogs:d,caloriesBurned:h,todayWaterLogs:f,todayWaterTotal:g,weekSummary:v}}function Gs(){return crypto.randomUUID()}const Ga=120,uu=7,du=(Ga-uu)/2,eu=2*Math.PI*du;function Zv({weekData:s,targets:n}){const r=Math.max(...s.map(f=>f.kcalPct),1.2),l=Math.max(...s.map(f=>f.proteinPct),1.2),d=1/r*100,h=1/l*100;return o.jsxs("div",{className:"ov-bars",children:[o.jsxs("div",{className:"ov-bar-section",children:[o.jsx("div",{className:"ov-bar-header",children:o.jsxs("span",{className:"ov-bar-label",style:{color:"#ff6b2b"},children:[o.jsx("svg",{width:"9",height:"9",viewBox:"0 0 16 16",fill:"#ff6b2b",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),"Calories"]})}),o.jsxs("div",{className:"ov-bar-chart-wrap",children:[o.jsxs("div",{className:"ov-bar-chart",children:[o.jsx("div",{className:"ov-bar-goal",style:{bottom:`${d}%`,borderColor:"rgba(255,107,43,0.45)"}}),s.map(f=>{const g=f.hasData?f.kcalPct/r*100:0,v=f.hasData&&f.kcalPct>0&&f.kcalPct<=1;return o.jsxs("div",{className:"ov-bar-col",children:[o.jsx("div",{className:"ov-bar",style:{height:`${Math.max(g,f.hasData?5:0)}%`,background:f.hasData?v?"#ff6b2b":"rgba(255,107,43,0.35)":"transparent"}}),f.hasData&&o.jsx("span",{className:"ov-bar-tip",style:{color:"#ff6b2b"},children:f.kcal})]},f.dateKey)})]}),o.jsxs("div",{className:"ov-bar-goal-label",style:{bottom:`${d}%`,color:"#ff6b2b"},children:[o.jsx("span",{children:"Goal"}),o.jsx("span",{children:n.kcal})]})]})]}),o.jsxs("div",{className:"ov-bar-section",children:[o.jsx("div",{className:"ov-bar-header",children:o.jsxs("span",{className:"ov-bar-label",style:{color:"#9575cd"},children:[o.jsxs("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"#9575cd",stroke:"#9575cd",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),"Protein"]})}),o.jsxs("div",{className:"ov-bar-chart-wrap",children:[o.jsxs("div",{className:"ov-bar-chart",children:[o.jsx("div",{className:"ov-bar-goal",style:{bottom:`${h}%`,borderColor:"rgba(149,117,205,0.45)"}}),s.map(f=>{const g=f.hasData?f.proteinPct/l*100:0,v=f.hasData&&f.proteinPct>=1;return o.jsxs("div",{className:"ov-bar-col",children:[o.jsx("div",{className:"ov-bar",style:{height:`${Math.max(g,f.hasData?5:0)}%`,background:f.hasData?v?"#9575cd":"rgba(149,117,205,0.35)":"transparent"}}),f.hasData&&o.jsxs("span",{className:"ov-bar-tip",style:{color:"#9575cd"},children:[f.protein,"g"]})]},f.dateKey)})]}),o.jsxs("div",{className:"ov-bar-goal-label",style:{bottom:`${h}%`,color:"#9575cd"},children:[o.jsx("span",{children:"Goal"}),o.jsxs("span",{children:[Math.round(n.protein),"g"]})]})]})]}),o.jsx("div",{className:"ov-bar-days-row",children:s.map(f=>o.jsx("span",{className:`ov-bar-day-label${f.isToday?" ov-bar-day-label--today":""}`,children:f.label},f.dateKey))})]})}function Qm({pct:s,gradId:n,gradStart:r,gradEnd:l,label:d,value:h,unit:f,isOver:g,mounted:v,icon:p}){const b=v?eu*(1-Math.min(s,1)):eu;return o.jsxs("div",{className:"ov-hero-ring",children:[o.jsxs("div",{className:"ov-hero-ring-wrap",style:{"--ring-glow":r},children:[o.jsxs("svg",{width:Ga,height:Ga,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:r}),o.jsx("stop",{offset:"100%",stopColor:l})]})}),o.jsx("circle",{cx:Ga/2,cy:Ga/2,r:du,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:uu,opacity:"0.06"}),o.jsx("circle",{cx:Ga/2,cy:Ga/2,r:du,fill:"none",stroke:`url(#${n})`,strokeWidth:uu,strokeDasharray:eu,strokeDashoffset:b,strokeLinecap:"round",className:"ov-ring-anim",transform:`rotate(-90 ${Ga/2} ${Ga/2})`})]}),o.jsxs("div",{className:"ov-hero-ring-inner",children:[o.jsx("span",{className:`ov-hero-ring-num ${g?"ov-hero-ring-num--over":""}`,children:h}),o.jsx("span",{className:"ov-hero-ring-unit",children:f})]})]}),o.jsxs("span",{className:"ov-hero-ring-label",children:[p,d]})]})}function Xm(){const{state:s,dispatch:n}=ra(),{targets:r,entries:l}=s,{todayTotals:d,caloriesBurned:h,todayWaterTotal:f}=Ou(),[g,v]=$.useState(!1),[p,b]=$.useState(!1),[x,E]=$.useState(!1),[k,S]=$.useState(null);$.useEffect(()=>{requestAnimationFrame(()=>v(!0))},[]);const O=r.waterTargetLiters||2.5,z=$.useCallback(F=>{const Ae=f>=O;n({type:"ADD_WATER",payload:{id:Gs(),amountLiters:F,dateKey:xa(),timestamp:Date.now()}}),S(F),b(!0),Ae&&E(!0),setTimeout(()=>{b(!1),E(!1),S(null)},Ae?1400:700)},[n,f,O]),G=Math.round(d.kcal),T=G>r.kcal,D=Math.min(G/r.kcal,1),K=Math.round(d.protein),ne=Math.round(r.protein),J=Math.min(K/ne,1),Z=T?"#e55a5a":(D>.85,"#ff6b2b"),_e=T||D>.85?"#e55a5a":"#e8a840",ke=J>=1?"#34b87a":"#9575cd",Y=J>=1?"#34b87a":"#b39ddb",I=new Date().getHours(),te=I<12?"Good morning":I<17?"Good afternoon":"Good evening",X=(r.userName||"").split(" ")[0],me=G>0,de=me&&!T&&J>=1,A=$.useMemo(()=>{const F=Og(),Ae=xa(),xe=s.exerciseLogs||[],je={};for(const Te of xe)je[Te.dateKey]=(je[Te.dateKey]||0)+(Te.caloriesBurned||0);return F.map(Te=>{const st=l.filter(Sa=>Sa.dateKey===Te),$e=Pa(st),ze=je[Te]||0,Mt=$e.kcal-ze,wa=new Date(Te+"T00:00:00");return{dateKey:Te,label:wa.toLocaleDateString("en-US",{weekday:"narrow"}),kcalPct:r.kcal>0?Mt/r.kcal:0,proteinPct:r.protein>0?$e.protein/r.protein:0,kcal:Math.round(Mt),protein:Math.round($e.protein),isToday:Te===Ae,hasData:st.length>0}})},[l,s.exerciseLogs,r]),P=$.useMemo(()=>{const F=xa(),Ae=s.exerciseLogs||[],xe={};for(const st of Ae)xe[st.dateKey]=(xe[st.dateKey]||0)+(st.caloriesBurned||0);let je=0;const Te=new Date(F+"T00:00:00");for(let st=0;st<365;st++){const $e=Te.toISOString().slice(0,10),ze=l.filter(Vs=>Vs.dateKey===$e);if(ze.length===0){if(st===0){Te.setDate(Te.getDate()-1);continue}break}const Mt=Pa(ze),wa=Mt.kcal-(xe[$e]||0),Sa=r.kcal>0&&wa<=r.kcal,Ys=r.protein>0&&Mt.protein>=r.protein;if(Sa&&Ys)je++;else break;Te.setDate(Te.getDate()-1)}return je},[l,s.exerciseLogs,r]),ee=$.useMemo(()=>{const F=A.filter(xe=>xe.hasData),Ae=F.filter(xe=>xe.kcalPct>0&&xe.kcalPct<=1.05&&xe.proteinPct>=.9);return{tracked:F.length,onTrack:Ae.length}},[A]),we=$.useMemo(()=>de?"All targets hit today!":P>=5?`${P}-day streak  unstoppable!`:P>=3?`${P}-day streak  keep it going!`:J>=1&&me?"Protein goal hit!":ee.onTrack>=5?"Strong week so far!":!me&&P>=1?"Keep your streak alive today!":null,[de,P,J,me,ee]),le=$.useMemo(()=>Eg(l,s.exerciseLogs,r),[l,s.exerciseLogs,r]),w=$.useMemo(()=>{const F=[];if(d.kcal===0)return F.push({tag:"Getting Started",text:"Start logging to see your progress come alive.",level:"alert"}),F.push({tag:"Hydration",text:"No water logged yet  stay hydrated!",level:"alert"}),F;const Ae=r.kcal-G;T?F.push({tag:"Calories",text:"You've gone a bit over on calories  no stress, just be mindful.",level:"alert"}):Ae<r.kcal*.15?F.push({tag:"Calories",text:"Almost at your calorie limit  you're doing great.",level:"good"}):F.push({tag:"Calories",text:`${Ae.toLocaleString()} kcal left  good calorie control so far.`,level:"good"}),J>=1?F.push({tag:"Protein",text:"Protein target hit  nice work!",level:"good"}):J<.5?F.push({tag:"Protein",text:"Try adding more protein to your next meal.",level:"alert"}):F.push({tag:"Protein",text:`${ne-K}g of protein left to hit your target.`,level:"alert"});const xe=f/O;xe>=1?F.push({tag:"Hydration",text:"Water goal reached  well hydrated today!",level:"good"}):xe<.3?F.push({tag:"Hydration",text:"You're behind on water  try to catch up.",level:"alert"}):xe<.6?F.push({tag:"Hydration",text:`${(O-f).toFixed(1)}L of water left  keep sipping.`,level:"alert"}):F.push({tag:"Hydration",text:`${(O-f).toFixed(1)}L left  almost there.`,level:"good"}),h>200?F.push({tag:"Activity",text:`Great workout! ${h} kcal burned today.`,level:"good"}):h>0?F.push({tag:"Activity",text:`${h} kcal burned  every bit counts.`,level:"good"}):I>16&&F.push({tag:"Activity",text:"Still time for a walk or workout today.",level:"alert"});const je=A.filter(Te=>Te.hasData&&Te.kcalPct<=1.1&&Te.kcalPct>0).length;if(je>=5?F.push({tag:"Weekly",text:`${je}/7 days on track this week  strong consistency!`,level:"good"}):je>=3&&F.push({tag:"Weekly",text:`${je}/7 days on track  keep building momentum.`,level:"alert"}),le.daysTracked>=3&&le.goal!=="maintain"){const Te=Math.round(le.pct*100);le.goal==="lose"&&le.deltaKg>0?Te>=100?F.push({tag:"Weight Goal",text:`You've reached your ${le.goalKg} kg goal  amazing work!`,level:"good"}):F.push({tag:"Weight Goal",text:`~${le.deltaKg.toFixed(1)} kg lost  ${Te}% toward your ${le.goalKg} kg goal.`,level:"good"}):le.goal==="gain"&&le.deltaKg<0&&(Te>=100?F.push({tag:"Weight Goal",text:`You've reached your ${le.goalKg} kg gain goal  great work!`,level:"good"}):F.push({tag:"Weight Goal",text:`~${Math.abs(le.deltaKg).toFixed(1)} kg gained  ${Te}% toward your ${le.goalKg} kg goal.`,level:"good"}))}return F},[d,T,G,r,J,K,ne,f,O,I,h,A,le]),[q,Q]=$.useState(0),[W,oe]=$.useState("none"),pe=$.useRef({x:0,y:0}),ve=Math.min(q,Math.max(0,w.length-1));function V(F){pe.current.x=F.touches[0].clientX,pe.current.y=F.touches[0].clientY}function ye(F){const Ae=F.changedTouches[0].clientX-pe.current.x,xe=F.changedTouches[0].clientY-pe.current.y;Math.abs(Ae)>50&&Math.abs(Ae)>Math.abs(xe)*1.5&&(Ae<0&&ve<w.length-1?(oe("left"),setTimeout(()=>{Q(je=>je+1),oe("none")},250)):Ae>0&&ve>0&&(oe("right"),setTimeout(()=>{Q(je=>je-1),oe("none")},250)))}function tt(){ve>0&&(oe("right"),setTimeout(()=>{Q(F=>F-1),oe("none")},250))}return o.jsxs("div",{className:"overview",children:[o.jsxs("div",{className:`ov-streak${P>0?" ov-streak--active":""}`,children:[o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:P>0?"var(--color-success)":"var(--color-text-secondary)",stroke:"none",opacity:P>0?1:.35,children:o.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),o.jsx("span",{className:"ov-streak-num",style:P===0?{color:"var(--color-text-secondary)",opacity:.4}:void 0,children:P})]}),o.jsxs("div",{className:"ov-greeting-wrap ov-enter ov-enter--1",children:[o.jsxs("p",{className:"ov-greeting",children:[te,X?`, ${X}`:"","!"]}),we&&o.jsx("p",{className:"ov-greeting-sub",children:we})]}),o.jsx("div",{className:"ov-week ov-enter ov-enter--2",children:o.jsx(Zv,{weekData:A,targets:r})}),le.daysTracked>=3&&le.goal!=="maintain"&&(()=>{const F=le.goal==="lose",Ae=Math.abs(le.deltaKg).toFixed(1),xe=Math.round(le.pct*100);let je="";xe>=100?je=`${Ae} kg ${F?"lost":"gained"}  you did it!`:!me&&xe>0?je="Keep your momentum going!":me?T&&F?je="One day doesnt define you.":xe>=75?je="Almost there  so close!":xe>=25?je=`${Ae} kg ${F?"down":"up"}  real progress!`:xe>0?je="Youre on your way!":je=F?"Great start!":"Keep fueling!":je="Log your first meal to start.";const Te=[{pct:25,label:"Started",color:"#2e8bc0"},{pct:50,label:"Halfway",color:"#1a6fa0"},{pct:75,label:"Almost",color:"#4db8d9"},{pct:100,label:"Goal",color:"#34b87a",isGoal:!0}],st=Te.find($e=>xe<$e.pct);return o.jsxs("div",{className:`ov-wc ov-enter ov-enter--2${xe>=100?" ov-wc--done":""}`,children:[o.jsx("p",{className:"ov-wc-msg",children:je}),o.jsxs("div",{className:"ov-wc-path",children:[o.jsx("div",{className:"ov-wc-track",children:o.jsx("div",{className:"ov-wc-track-fill",style:{width:`${Math.min(xe,100)}%`}})}),xe>0&&xe<100&&o.jsxs("span",{className:"ov-wc-pct-flag",style:{left:`${xe}%`},children:[xe,"%"]}),Te.map($e=>{const ze=xe>=$e.pct,Mt=$e===st;return $e.isGoal?o.jsxs("div",{className:`ov-wc-ms ov-wc-ms--goal${ze?" ov-wc-ms--done":""}${Mt?" ov-wc-ms--next":""}`,style:{left:`${$e.pct}%`},children:[o.jsx("span",{className:"ov-wc-goal-emoji",children:ze?"":""}),o.jsxs("span",{className:"ov-wc-ms-label ov-wc-goal-label",children:[F?"-":"+",le.goalKg,"kg"]})]},$e.pct):o.jsxs("div",{className:`ov-wc-ms${ze?" ov-wc-ms--done":""}${Mt?" ov-wc-ms--next":""}`,style:{left:`${$e.pct}%`},children:[o.jsx("div",{className:"ov-wc-ms-dot",style:ze?{background:$e.color,borderColor:$e.color}:void 0,children:ze&&o.jsx("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})})}),o.jsx("span",{className:"ov-wc-ms-label",style:ze?{color:$e.color,opacity:.9}:void 0,children:$e.label})]},$e.pct)})]})]})})(),o.jsxs("div",{className:"ov-today-strip ov-enter ov-enter--3",children:[o.jsx("span",{className:"ov-today-label",children:"Today"}),me?o.jsxs("span",{className:"ov-today-remaining",children:[T?"Over target":`${(r.kcal-G).toLocaleString()} cal`,"  ",J>=1?"Protein hit":`${ne-K}g protein`,o.jsx("span",{className:"ov-today-suffix",children:" left"})]}):o.jsx("span",{className:"ov-today-remaining",children:"Start logging to see your day"})]}),o.jsxs("div",{className:`ov-heroes ov-enter ov-enter--3${de?" ov-heroes--perfect":""}`,children:[o.jsx(Qm,{pct:D,gradId:"kcal-grad",gradStart:Z,gradEnd:_e,label:"Calories",mounted:g,isOver:T,value:`${G.toLocaleString()}`,unit:`/ ${r.kcal.toLocaleString()}`,icon:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:Z,stroke:"none",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})})}),o.jsx(Qm,{pct:J,gradId:"prot-grad",gradStart:ke,gradEnd:Y,label:"Protein",mounted:g,isOver:!1,value:`${K}`,unit:`/ ${ne}g`,icon:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:ke,stroke:ke,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]})})]}),de&&o.jsxs("div",{className:"ov-perfect ov-enter ov-enter--4",children:[o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#34b87a",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})}),o.jsx("span",{children:"All targets hit"})]}),(()=>{const F=Math.min(f/O,1),Ae=f>=O,xe=Ae?"done":F>=.65?"good":F>=.3?"mid":"low",je={low:{top:"#b0b8c1",bot:"#8e99a4",wave1:"rgba(176,184,193,0.3)",wave2:"rgba(142,153,164,0.2)",stroke:"#8e99a4"},mid:{top:"#78d0ee",bot:"#50bfe8",wave1:"rgba(120,208,238,0.3)",wave2:"rgba(80,191,232,0.2)",stroke:"#50bfe8"},good:{top:"#50bfe8",bot:"#3aacd4",wave1:"rgba(80,191,232,0.35)",wave2:"rgba(58,172,212,0.25)",stroke:"#3aacd4"},done:{top:"#50bfe8",bot:"#3aacd4",wave1:"rgba(80,191,232,0.35)",wave2:"rgba(58,172,212,0.25)",stroke:"#3aacd4"}}[xe],Te={low:"Dont forget to drink water!",mid:"Keep sipping, youre getting there!",good:"Almost there  great job!",done:"Hydration goal smashed!"}[xe];return o.jsxs("div",{className:`ov-water-wrap${p?" ov-water-wrap--splash":""}${x?" ov-water-wrap--flood":""}`,children:[o.jsxs("div",{className:`ov-water-float ov-water-float--${xe}`,children:[o.jsxs("div",{className:"ov-water-left",children:[o.jsxs("svg",{className:"ov-water-glass",width:"28",height:"38",viewBox:"0 0 24 32",fill:"none",children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"water-grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:je.top}),o.jsx("stop",{offset:"100%",stopColor:je.bot})]}),o.jsx("clipPath",{id:"glass-clip",children:o.jsx("path",{d:"M5 4 L5 25 Q5 30 12 30 Q19 30 19 25 L19 4Z"})})]}),(()=>{const $e=26*F,ze=4+(26-$e);return o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"4",y:ze,width:"16",height:$e+2,fill:"url(#water-grad)",clipPath:"url(#glass-clip)",className:"ov-water-fill"}),F>0&&F<1&&o.jsxs(o.Fragment,{children:[o.jsx("path",{d:`M4 ${ze+1} Q8 ${ze-1.5} 12 ${ze+1} Q16 ${ze+3} 20 ${ze+1} L20 ${ze+4} L4 ${ze+4}Z`,fill:je.wave1,clipPath:"url(#glass-clip)",className:"ov-water-wave ov-water-wave--1"}),o.jsx("path",{d:`M4 ${ze+1.5} Q9 ${ze+3} 12 ${ze+1} Q15 ${ze-1} 20 ${ze+1.5} L20 ${ze+4} L4 ${ze+4}Z`,fill:je.wave2,clipPath:"url(#glass-clip)",className:"ov-water-wave ov-water-wave--2"})]})]})})(),o.jsx("path",{d:"M5 4 L5 25 Q5 30 12 30 Q19 30 19 25 L19 4",stroke:je.stroke,strokeWidth:"1.2",fill:"none",opacity:"0.4",strokeLinejoin:"round"}),o.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4",stroke:je.stroke,strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.5"}),o.jsx("line",{x1:"7.5",y1:"7",x2:"7.5",y2:"25",stroke:"rgba(255,255,255,0.4)",strokeWidth:"1.2",strokeLinecap:"round"}),x&&o.jsx("path",{d:"M5 4 Q8 0.5 12 2 Q16 0.5 19 4",fill:"url(#water-grad)",className:"ov-water-overflow"})]}),x&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"ov-flood-drop ov-flood-drop--1"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--2"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--3"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--4"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--5"})]}),o.jsxs("div",{className:"ov-water-controls",children:[o.jsx("button",{className:"ov-water-ctrl","aria-label":"Add 0.25L",onClick:()=>z(.25),children:o.jsxs("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"18"}),o.jsx("line",{x1:"6",y1:"12",x2:"18",y2:"12"})]})}),o.jsx("button",{className:"ov-water-ctrl","aria-label":"Remove 0.25L",disabled:f<=0,onClick:()=>{const st=(s.waterLogs||[]).filter($e=>$e.dateKey===xa());st.length>0&&n({type:"DELETE_WATER",payload:st[st.length-1].id})},children:o.jsx("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:o.jsx("line",{x1:"6",y1:"12",x2:"18",y2:"12"})})})]})]}),o.jsxs("div",{className:"ov-water-right",children:[o.jsxs("div",{className:`ov-water-hint ov-water-hint--${xe}`,"aria-label":Te,children:[Ae?o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#50bfe8",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})}):xe==="good"?o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#50bfe8",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2c-5.33 8-10 11.33-10 16a10 10 0 0 0 20 0C22 13.33 17.33 8 12 2z"})}):xe==="mid"?o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#78d0ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2c-5.33 8-10 11.33-10 16a10 10 0 0 0 20 0C22 13.33 17.33 8 12 2z"})}):o.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#e55a5a",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"13"}),o.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),o.jsx("span",{className:"ov-water-hint-msg",children:Te})]}),o.jsxs("div",{className:"ov-water-float-info",children:[Ae?o.jsxs("span",{className:"ov-water-float-amt",children:[f.toFixed(1),"L"]}):o.jsxs("span",{className:"ov-water-float-amt",children:[f===0?`${O}`:`${(O-f).toFixed(1)}`,"L"]}),o.jsx("span",{className:"ov-water-float-sub",children:Ae?"done!":"left"})]})]})]}),p&&o.jsxs("span",{className:"ov-water-splash",children:["+",k===1?"1L":`${k*1e3}ml`]})]})})(),w.length>0&&o.jsxs("div",{className:"ov-insights ov-enter ov-enter--4",onTouchStart:V,onTouchEnd:ye,children:[o.jsxs("div",{className:`ov-insight-card ov-insight-card--${w[ve].level} ${W==="left"?"ov-insight-card--exit-left":W==="right"?"ov-insight-card--exit-right":"ov-insight-card--enter"}`,children:[o.jsxs("div",{className:"ov-insight-top",children:[o.jsxs("span",{className:"ov-insight-tag",children:[w[ve].level==="good"?o.jsx("span",{className:"ov-insight-badge ov-insight-badge--good",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})})}):w[ve].level==="alert"?o.jsx("span",{className:"ov-insight-badge ov-insight-badge--alert",children:o.jsx("span",{className:"ov-insight-badge-text",children:"!"})}):o.jsx("span",{className:"ov-insight-badge ov-insight-badge--neutral",children:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"#fff",stroke:"none",children:[o.jsx("circle",{cx:"12",cy:"7.5",r:"1.4"}),o.jsx("rect",{x:"10.75",y:"10.5",width:"2.5",height:"7",rx:"1.25"})]})}),w[ve].tag]}),ve>0&&o.jsx("button",{className:"ov-insight-back",onClick:tt,"aria-label":"Previous insight",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),o.jsx("p",{className:"ov-insight-text",children:w[ve].text})]},ve),w.length>1&&o.jsx("div",{className:"ov-insight-dots",children:w.map((F,Ae)=>o.jsx("span",{className:`ov-insight-dot ${Ae===ve?"ov-insight-dot--active":""}`},Ae))})]})]})}function Cu(s){const n=s.toLowerCase();return/oat|porridge/.test(n)?"":/chicken/.test(n)?"":/salad|greens/.test(n)?"":/rice/.test(n)?"":/egg/.test(n)?"":/sandwich|wrap/.test(n)?"":/pasta|noodle/.test(n)?"":/steak|beef/.test(n)?"":/fish|salmon/.test(n)?"":/coffee/.test(n)?"":/smoothie|shake/.test(n)?"":/pizza/.test(n)?"":/soup/.test(n)?"":/bread|toast/.test(n)?"":/yogurt/.test(n)?"":/fruit|apple|banana/.test(n)?"":""}function Wv({entry:s,onDelete:n}){const{dispatch:r}=ra();function l(){r({type:"SET_EDITING_ENTRY",payload:s})}return o.jsxs("button",{className:"fec-card",onClick:l,children:[o.jsx("span",{className:"fec-delete",role:"button",tabIndex:0,onClick:d=>{d.stopPropagation(),n(s)},onKeyDown:d=>{d.key==="Enter"&&(d.stopPropagation(),n(s))},children:o.jsx("svg",{width:"8",height:"8",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:o.jsx("path",{d:"M2 2l8 8M10 2l-8 8"})})}),o.jsx("span",{className:"fec-emoji",children:Cu(s.name)}),o.jsx("span",{className:"fec-name",children:s.name}),o.jsxs("span",{className:"fec-macros",children:[Math.round(s.kcal)," cal  ",Math.round(s.protein),"g"]})]})}const kl=[{key:"walking",label:"Walking",met:3.5},{key:"jogging",label:"Jogging",met:7},{key:"running",label:"Running",met:10},{key:"cycling",label:"Cycling",met:8},{key:"swimming",label:"Swimming",met:8},{key:"weight_training",label:"Weight Training",met:6},{key:"hiit",label:"HIIT",met:10},{key:"yoga",label:"Yoga",met:3},{key:"basketball",label:"Basketball",met:8},{key:"soccer",label:"Soccer",met:10},{key:"jump_rope",label:"Jump Rope",met:11},{key:"rowing",label:"Rowing",met:7},{key:"dancing",label:"Dancing",met:5},{key:"hiking",label:"Hiking",met:6},{key:"elliptical",label:"Elliptical",met:5}],hu={light:{label:"Light",factor:.75},moderate:{label:"Moderate",factor:1},intense:{label:"Intense",factor:1.25}};function Fv(s,n="moderate"){const r=kl.find(d=>d.key===s);if(!r)return 0;const l=hu[n]||hu.moderate;return r.met*l.factor}function Jm(s,n,r,l="moderate"){const d=Fv(s,l),h=n/60;return Math.round(d*r*h)}function Cg({title:s,children:n,onClose:r}){return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:s}),o.jsx("button",{className:"modal-close",onClick:r,children:""})]}),o.jsx("div",{className:"modal-body",children:n})]})})}function ey(){const{state:s,dispatch:n}=ra(),{todayExerciseLogs:r,caloriesBurned:l}=Ou(),[d,h]=$.useState(!1),[f,g]=$.useState(kl[0].key),[v,p]=$.useState(""),[b,x]=$.useState("moderate"),[E,k]=$.useState(null),S=s.targets.weight||70;function O(T){T.preventDefault();const D=Number(v);if(!D||D<=0)return;const K=Jm(f,D,S,b),ne=kl.find(J=>J.key===f);n({type:"ADD_EXERCISE",payload:{id:Gs(),type:f,label:ne?.label||f,durationMinutes:D,intensity:b,weightUsed:S,caloriesBurned:K,dateKey:xa(),timestamp:Date.now()}}),p(""),h(!1)}function z(){n({type:"DELETE_EXERCISE",payload:E}),k(null)}const G=v>0?Jm(f,Number(v),S,b):null;return o.jsxs("div",{className:"exercise-panel",children:[o.jsxs("button",{className:`exercise-add-btn ${d?"exercise-add-btn--active":""}`,onClick:()=>h(!d),children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:d?o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),d?"Cancel":"Add Workout"]}),d&&o.jsxs("form",{className:"exercise-form",onSubmit:O,children:[o.jsxs("div",{className:"exercise-form-row",children:[o.jsxs("div",{className:"exercise-field",children:[o.jsx("label",{className:"exercise-label",children:"Exercise"}),o.jsx("select",{className:"exercise-select",value:f,onChange:T=>g(T.target.value),children:kl.map(T=>o.jsx("option",{value:T.key,children:T.label},T.key))})]}),o.jsxs("div",{className:"exercise-field exercise-field--duration",children:[o.jsx("label",{className:"exercise-label",children:"Minutes"}),o.jsx("input",{type:"number",className:"exercise-input",placeholder:"30",min:"1",max:"600",value:v,onChange:T=>p(T.target.value)})]})]}),o.jsx("div",{className:"exercise-intensity",children:Object.entries(hu).map(([T,{label:D}])=>o.jsx("button",{type:"button",className:`exercise-intensity-btn ${b===T?"exercise-intensity-btn--active":""}`,onClick:()=>x(T),children:D},T))}),G!==null&&o.jsxs("div",{className:"exercise-preview",children:["~",G," cal burn"]}),o.jsx("button",{type:"submit",className:"btn-primary exercise-submit",disabled:!v||Number(v)<=0,children:"Log Exercise"})]}),r.length>0&&o.jsxs("div",{className:"exercise-log-section",children:[o.jsxs("div",{className:"exercise-log-header",children:[o.jsx("span",{className:"exercise-log-title",children:"Today's Exercise"}),o.jsxs("span",{className:"exercise-log-total",children:[o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})}),l," cal burned"]})]}),o.jsx("div",{className:"exercise-log-list",children:r.map(T=>o.jsxs("div",{className:"exercise-log-item",children:[o.jsxs("div",{className:"exercise-log-info",children:[o.jsx("span",{className:"exercise-log-name",children:T.label}),o.jsxs("span",{className:"exercise-log-detail",children:[T.durationMinutes," min",o.jsx("span",{className:"exercise-log-dot"}),T.intensity,o.jsx("span",{className:"exercise-log-dot"}),T.caloriesBurned," cal"]})]}),o.jsx("button",{className:"exercise-log-delete",onClick:()=>k(T.id),"aria-label":"Delete exercise",children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},T.id))})]}),E&&o.jsxs(Cg,{title:"Delete Exercise",onClose:()=>k(null),children:[o.jsx("p",{style:{marginBottom:16},children:"Delete this exercise entry?"}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-danger)",padding:"10px"},onClick:z,children:"Delete"}),o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-text-secondary)",padding:"10px"},onClick:()=>k(null),children:"Cancel"})]})]})]})}function Rg({children:s,className:n}){const r=$.useRef(null),[l,d]=$.useState(!1),[h,f]=$.useState(!1),g=$.useCallback(()=>{const p=r.current;p&&(d(p.scrollLeft>8),f(p.scrollLeft+p.clientWidth<p.scrollWidth-8))},[]);function v(p){const b=r.current;b&&b.scrollBy({left:p*140,behavior:"smooth"})}return $.useEffect(()=>{const p=r.current;if(!p)return;p.scrollLeft=0,requestAnimationFrame(g),p.addEventListener("scroll",g,{passive:!0});const b=new ResizeObserver(g);b.observe(p);function x(K){Math.abs(K.deltaY)<=Math.abs(K.deltaX)||(K.preventDefault(),p.scrollLeft+=K.deltaY)}let E=!1,k=!1,S=0,O=0;function z(K){K.button===0&&(E=!0,k=!1,S=K.clientX,O=p.scrollLeft,document.addEventListener("mousemove",G),document.addEventListener("mouseup",T,{once:!0}))}function G(K){if(!E)return;const ne=K.clientX-S;Math.abs(ne)>5&&(k=!0),k&&(p.scrollLeft=O-ne)}function T(){document.removeEventListener("mousemove",G),E&&(E=!1,k&&p.addEventListener("click",D,{capture:!0,once:!0}))}function D(K){K.stopPropagation(),K.preventDefault()}return p.addEventListener("wheel",x,{passive:!1}),p.addEventListener("mousedown",z),()=>{p.removeEventListener("scroll",g),b.disconnect(),p.removeEventListener("wheel",x),p.removeEventListener("mousedown",z),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",T)}},[g]),o.jsxs("div",{className:"ss-wrap",children:[l&&o.jsx("button",{className:"ss-arrow ss-arrow--left",onClick:()=>v(-1),"aria-label":"Scroll left",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("div",{ref:r,className:n,children:s}),h&&o.jsx("button",{className:"ss-arrow ss-arrow--right",onClick:()=>v(1),"aria-label":"Scroll right",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]})}function ty({onSelect:s}){const{state:n}=ra(),r=n.customMeals||[],l=(n.leftovers||[]).filter(f=>f.remainingServings>0).map(f=>({type:"leftover",id:f.id,name:f.name,kcal:f.perServing.kcal,protein:f.perServing.protein,remaining:f.remainingServings,leftover:f})),d=r.map((f,g)=>({type:"meal",id:f.id||`meal-${g}`,name:f.name,kcal:f.kcal,protein:f.protein,ingredients:f.ingredients})),h=[...l,...d];return h.length===0?null:o.jsxs("div",{className:"qmr",children:[o.jsx("span",{className:"qmr-label",children:"Quick Add"}),o.jsx(Rg,{className:"qmr-scroll",children:h.map(f=>o.jsxs("button",{className:`qmr-card ${f.type==="leftover"?"qmr-card--kitchen":"qmr-card--meal"}`,onClick:()=>s(f),children:[o.jsx("span",{className:"qmr-add-btn","aria-hidden":"true",children:o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:o.jsx("path",{d:"M6 1v10M1 6h10"})})}),o.jsx("span",{className:"qmr-card-emoji",children:Cu(f.name)}),o.jsx("span",{className:"qmr-card-name",children:f.name}),f.type==="leftover"?o.jsxs("span",{className:"qmr-card-tag",children:["In Kitchen  ",f.remaining," left"]}):o.jsxs("span",{className:"qmr-card-macros",children:[Math.round(f.kcal)," cal  ",Math.round(f.protein),"g"]})]},f.id))})]})}const Zm=[{key:"Breakfast",label:"Breakfast"},{key:"Lunch",label:"Lunch"},{key:"Dinner",label:"Dinner"},{key:"Snack",label:"Snacks"}];function ay(){const{state:s,dispatch:n}=ra(),{todayEntries:r,caloriesBurned:l}=Ou(),[d,h]=$.useState("food"),[f,g]=$.useState(null),[v,p]=$.useState(null);function b(T){if(n({type:"DELETE_ENTRY",payload:T.id}),T.fromLeftoverId){const D=s.leftovers.find(K=>K.id===T.fromLeftoverId);n(D?{type:"UPDATE_LEFTOVER",payload:{...D,remainingServings:D.remainingServings+1}}:{type:"ADD_LEFTOVER",payload:{id:T.fromLeftoverId,recipeId:T.recipeId,name:T.name,perServing:{kcal:T.kcal,protein:T.protein},remainingServings:1,totalServings:1,dateCooked:T.dateKey,timestamp:Date.now()}})}}function x(T){if(T.type==="leftover"){p({name:T.name,kcal:T.kcal,protein:T.protein,servingsYield:T.remaining,servingsConsumed:1,mealSlot:E(),isLeftover:!0,leftover:T.leftover}),g("confirm");return}p({name:T.name,kcal:T.kcal,protein:T.protein,ingredients:T.ingredients,servingsYield:1,servingsConsumed:1,mealSlot:E()}),g("confirm")}function E(){const T=new Date().getHours();return T<11?"Breakfast":T<15?"Lunch":T<20?"Dinner":"Snack"}function k(T){p({name:T.name,kcal:T.kcal,protein:T.protein,ingredients:T.ingredients,servingsYield:1,servingsConsumed:1,mealSlot:E()}),g("confirm")}function S(){if(!v||!v.mealSlot)return;const{name:T,kcal:D,protein:K,ingredients:ne,servingsYield:J,servingsConsumed:Z,mealSlot:_e}=v,ke=Math.max(1,J),Y=Math.min(Math.max(0,Z),ke);if(v.isLeftover){const I=v.leftover;if(Y>0){n({type:"ADD_ENTRY",payload:{id:Gs(),name:T,kcal:Math.round(D*Y),protein:Math.round(K*Y*10)/10,meal:_e,servingSize:Y,servingUnit:"serving",timestamp:Date.now(),dateKey:xa(),fromLeftoverId:I.id}});const te=I.remainingServings-Y;te>0?n({type:"UPDATE_LEFTOVER",payload:{...I,remainingServings:te}}):n({type:"DELETE_LEFTOVER",payload:I.id})}}else{const I={kcal:Math.round(D/ke),protein:Math.round(K/ke*10)/10};Y>0&&n({type:"ADD_ENTRY",payload:{id:Gs(),name:T,kcal:Math.round(I.kcal*Y),protein:Math.round(I.protein*Y*10)/10,meal:_e,servingSize:Y,servingUnit:"serving",timestamp:Date.now(),dateKey:xa(),...ne?{ingredients:ne}:{}}});const te=ke-Y;te>0&&n({type:"ADD_LEFTOVER",payload:{id:Gs(),name:T,perServing:I,remainingServings:te,totalServings:ke,dateCooked:xa(),timestamp:Date.now()}})}g(null),p(null)}function O(){const T=v?.name?.trim(),D=Number(v?.kcal),K=Number(v?.protein)||0;!T||!D||D<=0||(p({name:T,kcal:D,protein:K,servingsYield:1,servingsConsumed:1,mealSlot:E()}),g("confirm"))}function z(){g(null),p(null)}if(!!s.editingEntry){const T=s.editingEntry;return o.jsx("div",{className:"today",children:o.jsx(El,{initialData:T.ingredients?T:{name:T.name,ingredients:[]},onSave:D=>{n({type:"UPDATE_ENTRY",payload:{...T,name:D.name,kcal:D.kcal,protein:D.protein,ingredients:D.ingredients}}),n({type:"SET_EDITING_ENTRY",payload:null})},onCancel:()=>n({type:"SET_EDITING_ENTRY",payload:null})})})}return f?o.jsxs("div",{className:"today",children:[f==="choose"&&o.jsxs("div",{className:"add-mode-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:z,children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),o.jsx("span",{className:"add-mode-title",children:"Add Meal"})]}),o.jsxs("div",{className:"add-choose-options",children:[o.jsxs("button",{className:"add-choose-card",onClick:()=>{p({name:"",kcal:"",protein:""}),g("direct")},children:[o.jsx("span",{className:"add-choose-card-icon",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})})}),o.jsx("span",{className:"add-choose-card-title",children:"Direct Add"}),o.jsx("span",{className:"add-choose-card-desc",children:"Enter name & macros"})]}),o.jsxs("button",{className:"add-choose-card",onClick:()=>g("list"),children:[o.jsx("span",{className:"add-choose-card-icon",children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M3 12h18"}),o.jsx("path",{d:"M3 18h18"}),o.jsx("circle",{cx:"19",cy:"6",r:"1.5",fill:"currentColor"}),o.jsx("circle",{cx:"19",cy:"12",r:"1.5",fill:"currentColor"}),o.jsx("circle",{cx:"19",cy:"18",r:"1.5",fill:"currentColor"})]})}),o.jsx("span",{className:"add-choose-card-title",children:"Add Ingredients"}),o.jsx("span",{className:"add-choose-card-desc",children:"Build meal step by step"})]})]})]}),f==="direct"&&o.jsxs("div",{className:"add-mode-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:()=>g("choose"),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"add-mode-title",children:"Direct Add"})]}),o.jsxs("div",{className:"direct-form",children:[o.jsxs("div",{className:"direct-form-group",children:[o.jsx("label",{className:"confirm-label",children:"Meal name"}),o.jsx("input",{className:"direct-input",type:"text",placeholder:"e.g. Chicken rice bowl",value:v?.name||"",onChange:T=>p(D=>({...D,name:T.target.value})),autoFocus:!0})]}),o.jsxs("div",{className:"direct-form-row",children:[o.jsxs("div",{className:"direct-form-group",children:[o.jsx("label",{className:"confirm-label",children:"Calories"}),o.jsx("input",{className:"direct-input",type:"number",inputMode:"numeric",placeholder:"0",value:v?.kcal||"",onChange:T=>p(D=>({...D,kcal:T.target.value}))})]}),o.jsxs("div",{className:"direct-form-group",children:[o.jsx("label",{className:"confirm-label",children:"Protein (g)"}),o.jsx("input",{className:"direct-input",type:"number",inputMode:"numeric",placeholder:"0",value:v?.protein||"",onChange:T=>p(D=>({...D,protein:T.target.value}))})]})]}),o.jsx("button",{className:"confirm-log-btn",onClick:O,disabled:!v?.name?.trim()||!Number(v?.kcal),children:"Next"})]})]}),f==="list"&&o.jsx(El,{onSave:k,onCancel:v?.servingsYield?()=>g("confirm"):()=>g("choose"),initialData:v?.servingsYield?v:void 0}),f==="confirm"&&v&&(()=>{const T=v.servingsYield>1?{kcal:Math.round(v.kcal/v.servingsYield),protein:Math.round(v.protein/v.servingsYield*10)/10}:{kcal:Math.round(v.kcal),protein:Math.round(v.protein*10)/10},D=v.servingsYield-v.servingsConsumed;return o.jsxs("div",{className:"add-mode-view confirm-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:z,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"add-mode-title",children:"Log Meal"})]}),o.jsxs("div",{className:"confirm-hero",children:[o.jsx("span",{className:"confirm-hero-emoji",children:Cu(v.name)}),o.jsx("span",{className:"confirm-hero-name",children:v.name}),o.jsxs("div",{className:"confirm-hero-macros",children:[o.jsxs("span",{className:"confirm-hero-macro confirm-hero-macro--kcal",children:[o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"#ff6b2b",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),Math.round(v.kcal)," cal"]}),o.jsx("span",{className:"confirm-hero-sep"}),o.jsxs("span",{className:"confirm-hero-macro confirm-hero-macro--protein",children:[o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"#9575cd",stroke:"#9575cd",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),Math.round(v.protein),"g"]})]})]}),v.ingredients&&v.ingredients.length>0&&o.jsxs("div",{className:"confirm-ingredients",children:[o.jsxs("div",{className:"confirm-ingredients-header",children:[o.jsx("span",{className:"confirm-ingredients-title",children:"Ingredients"}),o.jsxs("button",{type:"button",className:"confirm-ingredients-edit",onClick:()=>g("list"),children:[o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})}),"Edit"]})]}),o.jsx("div",{className:"confirm-ingredients-list",children:v.ingredients.map((K,ne)=>o.jsxs("div",{className:"confirm-ingredient-row",children:[o.jsx("span",{className:"confirm-ingredient-name",children:K.name}),o.jsxs("span",{className:"confirm-ingredient-detail",children:[K.grams,"g  ",K.kcal," cal  ",K.protein,"g"]})]},ne))})]}),o.jsxs("div",{className:"confirm-card",children:[o.jsxs("div",{className:"confirm-servings-row",children:[o.jsxs("div",{className:"confirm-serving-group",children:[o.jsx("label",{className:"confirm-label",children:v.isLeftover?"Available":"Servings prepped"}),v.isLeftover?o.jsx("span",{className:"confirm-input confirm-input--static",children:v.servingsYield}):o.jsx("input",{type:"number",inputMode:"numeric",className:"confirm-input",min:"1",value:v.servingsYield,onChange:K=>p(ne=>{const J=Math.max(1,Number(K.target.value)||1);return{...ne,servingsYield:J,servingsConsumed:Math.min(ne.servingsConsumed,J)}})})]}),o.jsxs("div",{className:"confirm-serving-group",children:[o.jsx("label",{className:"confirm-label",children:v.isLeftover?"Eating now":"Having now"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"confirm-input",min:"0",max:v.servingsYield,value:v.servingsConsumed,onChange:K=>p(ne=>({...ne,servingsConsumed:Math.min(Math.max(0,Number(K.target.value)||0),ne.servingsYield)}))})]})]}),v.servingsYield>1&&o.jsxs("div",{className:"confirm-breakdown",children:[o.jsxs("span",{className:"confirm-breakdown-item",children:[T.kcal," cal  ",T.protein,"g per serving"]}),!v.isLeftover&&D>0&&o.jsxs("span",{className:"confirm-breakdown-kitchen",children:[o.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"}),o.jsx("path",{d:"M3 9V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3"})]}),D," serving",D!==1?"s":""," saved to kitchen"]})]})]}),o.jsxs("div",{className:"confirm-field",children:[o.jsx("label",{className:"confirm-label",children:"Meal"}),o.jsx("div",{className:"confirm-meal-picker",children:Zm.map(({key:K,label:ne})=>o.jsx("button",{type:"button",className:`confirm-meal-btn${v.mealSlot===K?" confirm-meal-btn--active":""}`,onClick:()=>p(J=>({...J,mealSlot:K})),children:ne},K))})]}),o.jsx("button",{className:"confirm-log-btn",onClick:S,children:"Log it"})]})})()]}):o.jsxs("div",{className:"today",children:[o.jsxs("div",{className:"today-tabs",children:[o.jsxs("button",{className:`today-tab ${d==="food"?"today-tab--active":""}`,onClick:()=>h("food"),children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),o.jsx("path",{d:"M7 2v20"}),o.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),"Food"]}),o.jsxs("button",{className:`today-tab ${d==="exercise"?"today-tab--active":""}`,onClick:()=>h("exercise"),children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6.5 6.5h11"}),o.jsx("path",{d:"M6.5 17.5h11"}),o.jsx("path",{d:"M12 6.5v11"}),o.jsx("rect",{x:"2",y:"4",width:"4",height:"16",rx:"1"}),o.jsx("rect",{x:"18",y:"4",width:"4",height:"16",rx:"1"})]}),"Exercise",l>0&&o.jsxs("span",{className:"today-tab-burned",children:["-",l]})]})]}),d==="food"&&(()=>{const T=E(),D=Pa(r),K=s.targets?.calories||2e3,ne=s.targets?.protein||120;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"daily-summary",children:[o.jsxs("span",{className:"daily-summary-item",children:[o.jsx("span",{className:"daily-summary-value",children:Math.round(D.kcal)})," / ",K," cal"]}),o.jsx("span",{className:"daily-summary-sep"}),o.jsxs("span",{className:"daily-summary-item",children:[o.jsx("span",{className:"daily-summary-value",children:Math.round(D.protein)})," / ",ne,"g protein"]})]}),o.jsx(ty,{onSelect:x}),o.jsx("div",{className:"meals-section",children:Zm.map(({key:J,label:Z})=>{const _e=r.filter(X=>X.meal===J),ke=Pa(_e),Y=J===T,I=_e.length>0,te=["meal-row",I&&"meal-row--filled",Y&&"meal-row--active"].filter(Boolean).join(" ");return o.jsxs("div",{className:te,children:[o.jsxs("div",{className:"meal-row-header",children:[o.jsx("span",{className:"meal-label",children:Z}),I&&o.jsxs("span",{className:"meal-totals-compact",children:[Math.round(ke.kcal)," cal  ",Math.round(ke.protein),"g"]})]}),I&&o.jsx(Rg,{className:"meal-entries-scroll",children:_e.map(X=>o.jsx(Wv,{entry:X,onDelete:b},X.id))}),!I&&o.jsxs("p",{className:"meal-empty-prompt",children:["What did you have for ",Z.toLowerCase(),"?"]})]},J)})})]})})(),d==="food"&&o.jsx("button",{className:"food-fab",onClick:()=>g("choose"),children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),d==="exercise"&&o.jsx(ey,{})]})}function Ru(){return o.jsx("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})})}function Mu(){return o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function Mg(){return o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}function ny(){const s=new Date().getHours();return s<6?{text:"Late-night cravings?",emoji:""}:s<12?{text:"Good morning, chef!",emoji:""}:s<17?{text:"What are we cooking?",emoji:""}:s<21?{text:"Dinner time vibes!",emoji:""}:{text:"Cozy evening snack?",emoji:""}}function sy({onEditMeal:s,onAddMeal:n,meals:r,onDeleteMeal:l}){function d(h){const f=r[h];f?.id&&l(f.id)}return o.jsxs("div",{className:"kitchen-section kitchen-section--meals",children:[o.jsxs("div",{className:"kitchen-section-header",children:[o.jsx("span",{className:"kitchen-section-emoji",children:""}),o.jsx("h2",{children:"My Meals"}),o.jsx("button",{type:"button",className:"kitchen-add-btn",onClick:n,"aria-label":"Add meal",children:o.jsx(Mg,{})})]}),r.length===0?o.jsxs("div",{className:"kitchen-empty",children:[o.jsx("span",{className:"kitchen-empty-emoji",children:""}),o.jsx("p",{children:"No saved meals yet"}),o.jsx("p",{className:"kitchen-empty-hint",children:"Tap + to build your first meal!"})]}):o.jsx("div",{className:"kitchen-list",children:r.map((h,f)=>o.jsxs("div",{className:"kitchen-list-item",children:[o.jsxs("button",{type:"button",className:"kitchen-list-info kitchen-list-info--tap",onClick:()=>s(f,h),children:[o.jsx("span",{className:"kitchen-list-name",children:h.name}),o.jsxs("span",{className:"kitchen-list-meta",children:[h.kcal," cal  ",h.protein,"g protein",h.ingredients?`  ${h.ingredients.length} ingredient${h.ingredients.length!==1?"s":""}`:""]})]}),o.jsxs("div",{className:"kitchen-list-actions",children:[o.jsx("button",{type:"button",className:"kitchen-list-edit",onClick:()=>s(f,h),"aria-label":"Edit meal",children:o.jsx(Ru,{})}),o.jsx("button",{type:"button",className:"kitchen-list-delete",onClick:()=>d(f),"aria-label":"Delete meal",children:o.jsx(Mu,{})})]})]},`${h.name}-${f}`))})]})}const iy=[{label:"g",grams:1},{label:"tbsp",grams:15},{label:"tsp",grams:5},{label:"cup",grams:240},{label:"piece",grams:100},{label:"slice",grams:30},{label:"serving",grams:100}];function Wm({form:s,setForm:n,onSave:r,onCancel:l,saveLabel:d}){return o.jsxs("div",{className:"kitchen-edit-form kitchen-edit-form--add",children:[o.jsx("input",{className:"kitchen-edit-input",value:s.name,onChange:h=>n({...s,name:h.target.value}),placeholder:"Ingredient name",autoFocus:!0}),o.jsxs("div",{className:"kitchen-edit-row",children:[o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Amount"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",inputMode:"decimal",value:s.amount,onChange:h=>n({...s,amount:h.target.value}),placeholder:"0"})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Unit"}),o.jsx("select",{className:"kitchen-edit-select",value:s.unit,onChange:h=>n({...s,unit:h.target.value}),children:iy.map(h=>o.jsx("option",{value:h.label,children:h.label},h.label))})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Calories"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",inputMode:"decimal",value:s.kcal,onChange:h=>n({...s,kcal:h.target.value}),placeholder:"0"})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Protein (g)"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",inputMode:"decimal",value:s.protein,onChange:h=>n({...s,protein:h.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{className:"kitchen-edit-actions",children:[o.jsx("button",{type:"button",className:"kitchen-edit-save",onClick:r,children:d}),o.jsx("button",{type:"button",className:"kitchen-edit-cancel",onClick:l,children:"Cancel"})]})]})}function ry(){const[s,n]=$.useState(()=>Au()),[r,l]=$.useState(null),[d,h]=$.useState(!1),f={name:"",amount:"",unit:"g",kcal:"",protein:""},[g,v]=$.useState(f);function p(S){const O=s.filter((z,G)=>G!==S);jl(O),n(O),r===S&&l(null)}function b(S){const O=s[S];v({name:O.name,amount:String(O.refAmount||100),unit:O.refUnit||"g",kcal:String(O.refKcal||0),protein:String(O.refProtein||0)}),l(S),h(!1)}function x(){if(!g.name.trim())return;const S=[...s];S[r]={name:g.name.trim(),refAmount:Number(g.amount)||0,refUnit:g.unit,refKcal:Math.round(Number(g.kcal)||0),refProtein:Math.round(Number(g.protein)*10)/10},jl(S),n(S),l(null)}function E(){v(f),h(!0),l(null)}function k(){if(!g.name.trim())return;const O=[{name:g.name.trim(),refAmount:Number(g.amount)||0,refUnit:g.unit,refKcal:Math.round(Number(g.kcal)||0),refProtein:Math.round(Number(g.protein)*10)/10},...s];jl(O),n(O),h(!1)}return o.jsxs("div",{className:"kitchen-section kitchen-section--ingredients",children:[o.jsxs("div",{className:"kitchen-section-header",children:[o.jsx("span",{className:"kitchen-section-emoji",children:""}),o.jsx("h2",{children:"My Ingredients"}),o.jsx("button",{type:"button",className:"kitchen-add-btn",onClick:E,"aria-label":"Add ingredient",children:o.jsx(Mg,{})})]}),d&&o.jsx(Wm,{form:g,setForm:v,onSave:k,onCancel:()=>h(!1),saveLabel:"Add"}),!d&&s.length===0?o.jsxs("div",{className:"kitchen-empty",children:[o.jsx("span",{className:"kitchen-empty-emoji",children:""}),o.jsx("p",{children:"No custom ingredients yet"}),o.jsx("p",{className:"kitchen-empty-hint",children:"Tap + to add your first ingredient!"})]}):o.jsx("div",{className:"kitchen-list",children:s.map((S,O)=>o.jsx("div",{className:"kitchen-list-item",children:r===O?o.jsx(Wm,{form:g,setForm:v,onSave:x,onCancel:()=>l(null),saveLabel:"Save"}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"kitchen-list-info kitchen-list-info--tap",onClick:()=>b(O),children:[o.jsx("span",{className:"kitchen-list-name",children:S.name}),o.jsxs("span",{className:"kitchen-list-meta",children:[S.refAmount?`${S.refAmount} ${S.refUnit}`:"","  ",S.refKcal??0," cal  ",S.refProtein??0,"g protein"]})]}),o.jsxs("div",{className:"kitchen-list-actions",children:[o.jsx("button",{type:"button",className:"kitchen-list-edit",onClick:()=>b(O),"aria-label":"Edit ingredient",children:o.jsx(Ru,{})}),o.jsx("button",{type:"button",className:"kitchen-list-delete",onClick:()=>p(O),"aria-label":"Delete ingredient",children:o.jsx(Mu,{})})]})]})},`${S.name}-${O}`))})]})}function ly(){const{state:s,dispatch:n}=ra(),r=(s.leftovers||[]).filter(S=>S.remainingServings>0),[l,d]=$.useState(null),[h,f]=$.useState(null),[g,v]=$.useState({name:"",remainingServings:"",kcal:"",protein:""}),p=ny();function b(S,O){d({index:S,meal:O})}function x(S){if(l.index>=0){const O=l.meal?.name?.toLowerCase(),z=S.name.toLowerCase();if(O&&O!==z){const G=(s.customMeals||[]).find(T=>T.name.toLowerCase()===O);G?.id&&n({type:"DELETE_CUSTOM_MEAL",payload:G.id})}}d(null)}function E(S){v({name:S.name,remainingServings:String(S.remainingServings),kcal:String(S.perServing.kcal),protein:String(S.perServing.protein)}),f(S.id)}function k(S){g.name.trim()&&(n({type:"UPDATE_LEFTOVER",payload:{...S,name:g.name.trim(),remainingServings:Math.max(1,Math.round(Number(g.remainingServings)||1)),perServing:{kcal:Math.round(Number(g.kcal)||0),protein:Math.round(Number(g.protein)*10)/10}}}),f(null))}return l?o.jsx(El,{initialData:l.index===-1?void 0:l.meal,onSave:x,onCancel:()=>d(null)}):o.jsxs("div",{className:"kitchen",children:[o.jsxs("div",{className:"kitchen-hero",children:[o.jsx("div",{className:"kitchen-hero-glow"}),o.jsx("span",{className:"kitchen-hero-emoji",children:p.emoji}),o.jsx("span",{className:"kitchen-hero-title",children:"My Happy Kitchen"}),o.jsx("span",{className:"kitchen-hero-greeting",children:p.text})]}),o.jsx(sy,{meals:s.customMeals||[],onEditMeal:b,onAddMeal:()=>d({index:-1,meal:null}),onDeleteMeal:S=>n({type:"DELETE_CUSTOM_MEAL",payload:S})}),o.jsx(ry,{}),o.jsxs("div",{className:"kitchen-section kitchen-section--leftovers",children:[o.jsxs("div",{className:"kitchen-section-header",children:[o.jsx("span",{className:"kitchen-section-emoji",children:""}),o.jsx("h2",{children:"Leftovers"})]}),r.length===0?o.jsxs("div",{className:"kitchen-empty",children:[o.jsx("span",{className:"kitchen-empty-emoji",children:""}),o.jsx("p",{children:"Nothing in the fridge"}),o.jsx("p",{className:"kitchen-empty-hint",children:"When you prep extra servings, they will be waiting for you here"})]}):o.jsx("div",{className:"kitchen-list",children:r.map(S=>o.jsx("div",{className:"kitchen-list-item",children:h===S.id?o.jsxs("div",{className:"kitchen-edit-form",children:[o.jsx("input",{className:"kitchen-edit-input",value:g.name,onChange:O=>v({...g,name:O.target.value}),placeholder:"Name"}),o.jsxs("div",{className:"kitchen-edit-row",children:[o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Servings left"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",value:g.remainingServings,onChange:O=>v({...g,remainingServings:O.target.value})})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"cal / serving"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",value:g.kcal,onChange:O=>v({...g,kcal:O.target.value})})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"protein / srv"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",value:g.protein,onChange:O=>v({...g,protein:O.target.value})})]})]}),o.jsxs("div",{className:"kitchen-edit-actions",children:[o.jsx("button",{type:"button",className:"kitchen-edit-save",onClick:()=>k(S),children:"Save"}),o.jsx("button",{type:"button",className:"kitchen-edit-cancel",onClick:()=>f(null),children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"kitchen-list-info kitchen-list-info--tap",onClick:()=>E(S),children:[o.jsx("span",{className:"kitchen-list-name",children:S.name}),o.jsxs("span",{className:"kitchen-list-meta",children:[S.remainingServings," / ",S.totalServings," servings  ",S.perServing.kcal," cal  ",S.perServing.protein,"g per serving"]})]}),o.jsxs("div",{className:"kitchen-list-actions",children:[o.jsx("button",{type:"button",className:"kitchen-list-edit",onClick:()=>E(S),"aria-label":"Edit leftover",children:o.jsx(Ru,{})}),o.jsx("button",{type:"button",className:"kitchen-list-delete",onClick:()=>n({type:"DELETE_LEFTOVER",payload:S.id}),"aria-label":"Delete leftover",children:o.jsx(Mu,{})})]})]})},S.id))})]})]})}const oy=["M","T","W","T","F","S","S"];function cy(s,n){const r=new Date(s,n,1),l=new Date(s,n+1,0);let d=r.getDay()-1;d<0&&(d=6);const h=[];for(let g=0;g<d;g++)h.push(null);for(let g=1;g<=l.getDate();g++)h.push(g);for(;h.length%7!==0;)h.push(null);const f=[];for(let g=0;g<h.length;g+=7)f.push(h.slice(g,g+7));return f}function uy(s,n){return new Date(s,n,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}function pl({type:s}){return s==="weight"?o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3v18"}),o.jsx("path",{d:"m8 7 4-4 4 4"}),o.jsx("path",{d:"m8 17 4 4 4-4"})]}):s==="calories"?o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})}):s==="protein"?o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2C9 2 7 4.2 7 7c0 2 1.2 3.8 3 4.6V20a2 2 0 0 0 2 2v0a2 2 0 0 0 2-2v-8.4c1.8-.8 3-2.6 3-4.6 0-2.8-2-5-5-5z"})}):s==="water"?o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"})}):null}function dy(){const{state:s,dispatch:n}=ra(),{signOut:r}=Ol(),{entries:l,targets:d}=s,h=xa(),f=$.useRef(null),g=new Date,[v,p]=$.useState(g.getFullYear()),[b,x]=$.useState(g.getMonth()),E=$.useMemo(()=>{const re={};for(const be of l)re[be.dateKey]||(re[be.dateKey]=[]),re[be.dateKey].push(be);return re},[l]),k=$.useMemo(()=>{const re={};for(const be of s.exerciseLogs||[])re[be.dateKey]=(re[be.dateKey]||0)+(be.caloriesBurned||0);return re},[s.exerciseLogs]),S=cy(v,b);function O(){b===0?(p(v-1),x(11)):x(b-1)}function z(){b===11?(p(v+1),x(0)):x(b+1)}function G(re){if(!re)return null;const be=Gi(new Date(v,b,re)),ue=E[be];if(!ue||ue.length===0)return{dateKey:be,hasData:!1};const at=Pa(ue),De=k[be]||0,gt=at.kcal-De;return{dateKey:be,hasData:!0,kcalPct:d.kcal>0?gt/d.kcal:0,proteinPct:d.protein>0?at.protein/d.protein:0}}const T=$.useMemo(()=>{let re=0,be=0,ue=0;const at=new Date(v,b+1,0).getDate();for(let De=1;De<=at;De++){const gt=Gi(new Date(v,b,De)),Je=E[gt];if(!Je||Je.length===0)continue;re++;const We=Pa(Je),Ue=k[gt]||0;d.kcal>0&&We.kcal-Ue<=d.kcal&&be++,d.protein>0&&We.protein>=d.protein&&ue++}return{tracked:re,calOkDays:be,protOkDays:ue}},[v,b,E,k,d]),D=$.useMemo(()=>Eg(l,s.exerciseLogs,d),[l,s.exerciseLogs,d]),[K,ne]=$.useState(!1),[J,Z]=$.useState(d.userName||""),[_e,ke]=$.useState(String(d.weightLossTarget||5)),[Y,I]=$.useState(String(d.kcal)),[te,X]=$.useState(String(d.protein)),[me,de]=$.useState(String(d.waterTargetLiters||2.5)),[A,P]=$.useState({}),[ee,we]=$.useState(!1),[le,w]=$.useState(!1),[q,Q]=$.useState(""),[W,oe]=$.useState(!1),[pe,ve]=$.useState(""),[V,ye]=$.useState(""),[tt,F]=$.useState(!1),[Ae,xe]=$.useState(""),[je,Te]=$.useState("");function st(){Z(d.userName||""),ke(String(d.weightLossTarget||5)),I(String(d.kcal)),X(String(d.protein)),de(String(d.waterTargetLiters||2.5)),P({}),ne(!0)}function $e(){ne(!1),P({})}function ze(re){re.preventDefault();const be={},ue=Number(Y),at=Number(te),De=Number(_e),gt=Number(me);J.trim()||(be.userName="Enter your name"),(!ue||ue<500||ue>1e4)&&(be.kcal="50010,000"),(!at||at<10||at>500)&&(be.protein="10500"),(!De||De<.5||De>100)&&(be.weightLossTarget="0.5100"),(!gt||gt<.5||gt>15)&&(be.water="0.515"),P(be),!(Object.keys(be).length>0)&&(n({type:"SET_TARGETS",payload:{userName:J.trim(),kcal:ue,protein:at,waterTargetLiters:gt,maintenanceKcal:d.maintenanceKcal||d.kcal,weightLossTarget:De}}),ne(!1),we(!0),setTimeout(()=>we(!1),2e3))}function Mt(){const re=Bv(),be=new Blob([re],{type:"application/json"}),ue=URL.createObjectURL(be),at=document.createElement("a");at.href=ue,at.download=`myfitnesscoach-export-${new Date().toISOString().slice(0,10)}.json`,at.click(),URL.revokeObjectURL(ue)}function wa(re){const be=re.target.files?.[0];if(!be)return;const ue=new FileReader;ue.onload=at=>{try{const De=qv(at.target.result);n({type:"IMPORT_DATA",payload:De}),Q("Data imported successfully!"),ne(!1)}catch{Q("Failed to import. Invalid file format.")}setTimeout(()=>Q(""),3e3)},ue.readAsText(be),re.target.value=""}function Sa(){zv(),window.location.reload()}function Ys(){const re=pe.trim().split(`
`).filter(De=>De.trim());if(re.length===0){ye("No data found");return}const be=[];let ue=0;for(const De of re){const gt=De.trim().split(/[\t,|]|\s{2,}/).map(Qe=>Qe.trim()).filter(Boolean);if(gt.length<3){ue++;continue}let Je=null,We=[];for(const Qe of gt){if(!Je){const Va=Qe.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(Va){Je=`${Va[1]}-${Va[2].padStart(2,"0")}-${Va[3].padStart(2,"0")}`;continue}const ma=Qe.match(/^(\d{1,2})[/.](\d{1,2})[/.](\d{2,4})$/);if(ma){Je=`${ma[3].length===2?`20${ma[3]}`:ma[3]}-${ma[2].padStart(2,"0")}-${ma[1].padStart(2,"0")}`;continue}const ga=new Date(Qe);if(!isNaN(ga.getTime())&&Qe.length>4){Je=Gi(ga);continue}}const la=parseFloat(Qe.replace(/[^\d.]/g,""));isNaN(la)||We.push(la)}if(!Je||We.length<2){ue++;continue}const Ue=Math.round(We[0]),xt=Math.round(We[1]*10)/10;if(Ue<=0){ue++;continue}be.push({id:Gs(),name:"Daily Total",kcal:Ue,protein:xt,meal:"Breakfast",servingSize:1,servingUnit:"serving",timestamp:new Date(Je+"T12:00:00").getTime(),dateKey:Je})}if(be.length===0){ye(`Could not parse any rows.${ue>0?` ${ue} skipped.`:""} Check the format.`);return}const at=new Set(be.map(De=>De.dateKey));for(const De of l)De.name==="Daily Total"&&at.has(De.dateKey)&&n({type:"DELETE_ENTRY",payload:De.id});for(const De of be)n({type:"ADD_ENTRY",payload:De});ye(`Imported ${be.length} day${be.length!==1?"s":""}${ue>0?`, ${ue} skipped`:""}`),ve(""),setTimeout(()=>{ye(""),oe(!1)},3e3)}function Vs(){const re={};for(const ue of l)re[ue.dateKey]||(re[ue.dateKey]={kcal:0,protein:0}),re[ue.dateKey].kcal+=ue.kcal||0,re[ue.dateKey].protein+=ue.protein||0;const be=Object.keys(re).sort().map(ue=>`${ue}, ${Math.round(re[ue].kcal)}, ${Math.round(re[ue].protein*10)/10}`).join(`
`);xe(be||"No data to export."),F(!0),oe(!1)}function Ct(){navigator.clipboard.writeText(Ae).then(()=>{Te("Copied!"),setTimeout(()=>Te(""),2e3)})}const tr=d.maintenanceKcal||d.kcal;return o.jsxs("div",{className:"profile",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"profile-avatar",children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"8",r:"4"}),o.jsx("path",{d:"M20 21a8 8 0 1 0-16 0"})]})}),K?o.jsxs("div",{className:"profile-name-group",children:[o.jsx("input",{className:"profile-name-input",type:"text",value:J,onChange:re=>Z(re.target.value),placeholder:"Your name",autoFocus:!0}),A.userName&&o.jsx("span",{className:"form-error",children:A.userName})]}):o.jsx("span",{className:"profile-name-display",children:d.userName||"Your name"})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"progress-header",children:[o.jsx("button",{className:"progress-nav-btn",onClick:O,"aria-label":"Previous month",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"progress-month-label",children:uy(v,b)}),o.jsx("button",{className:"progress-nav-btn",onClick:z,"aria-label":"Next month",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]}),T.tracked>0&&o.jsxs("div",{className:"progress-summary",children:[o.jsxs("span",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:T.tracked})," tracked"]}),o.jsx("span",{className:"progress-stat-sep"}),o.jsxs("span",{className:"progress-stat",children:[o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"var(--color-success)",stroke:"none",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{className:"progress-stat-value",children:T.calOkDays})]}),o.jsx("span",{className:"progress-stat-sep"}),o.jsxs("span",{className:"progress-stat",children:[o.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"var(--color-success)",stroke:"var(--color-success)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),o.jsx("span",{className:"progress-stat-value",children:T.protOkDays})]})]}),o.jsxs("div",{className:"progress-grid",children:[o.jsx("div",{className:"progress-week-row progress-weekday-row",children:oy.map((re,be)=>o.jsx("div",{className:"progress-weekday",children:re},be))}),S.map((re,be)=>o.jsx("div",{className:"progress-week-row",children:re.map((ue,at)=>{if(ue===null)return o.jsx("div",{className:"progress-card progress-card--pad"},`pad-${at}`);const De=G(ue),gt=De?.dateKey,Je=gt===h,We=gt>h;if(We||!De?.hasData)return o.jsxs("div",{className:`progress-card progress-card--empty${Je?" progress-card--today":""}${We?" progress-card--future":""}`,children:[o.jsx("span",{className:`progress-card-day${Je?" progress-card-day--today":""}`,children:ue}),o.jsx("div",{className:"progress-card-body"})]},ue);const Ue=De.kcalPct<=1,xt=De.proteinPct>=1,Qe=Ue?"var(--color-success)":"var(--color-danger)",la=xt?"var(--color-success)":"var(--color-danger)";return o.jsxs("div",{className:`progress-card${Je?" progress-card--today":""}`,children:[o.jsx("span",{className:`progress-card-day${Je?" progress-card-day--today":""}`,children:ue}),o.jsxs("div",{className:"progress-card-body",children:[o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 16 16",fill:Qe,opacity:Ue?.85:.45,children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{className:"progress-card-divider"}),o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:la,stroke:la,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:xt?.85:.45,children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]})]})]},ue)})},be))]}),o.jsxs("div",{className:"progress-legend",children:[o.jsxs("div",{className:"progress-legend-row",children:[o.jsx("span",{className:"progress-legend-label",children:"Calories"}),o.jsxs("div",{className:"progress-legend-pair",children:[o.jsxs("div",{className:"progress-legend-item",children:[o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"var(--color-success)",stroke:"none",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{children:"On target"})]}),o.jsxs("div",{className:"progress-legend-item",children:[o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"var(--color-danger)",stroke:"none",opacity:"0.45",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{children:"Over target"})]})]})]}),o.jsxs("div",{className:"progress-legend-row",children:[o.jsx("span",{className:"progress-legend-label",children:"Protein"}),o.jsxs("div",{className:"progress-legend-pair",children:[o.jsxs("div",{className:"progress-legend-item",children:[o.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"var(--color-success)",stroke:"var(--color-success)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),o.jsx("span",{children:"Goal met"})]}),o.jsxs("div",{className:"progress-legend-item",children:[o.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"var(--color-danger)",stroke:"var(--color-danger)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.45",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),o.jsx("span",{children:"Under target"})]})]})]})]})]}),D.daysTracked>0&&(()=>{const re=D.goal==="lose",be=D.goal==="gain",ue=re||be,at=D.deltaKg>0?"":"+",De=Math.abs(D.deltaKg).toFixed(1),gt=D.firstDate?new Date(D.firstDate+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Je=Math.round(D.pct*100);let We="";ue?Je>=100?We=re?"Goal reached! Incredible discipline.":"Goal reached! Amazing commitment.":Je>=75?We="So close! The finish line is within reach.":Je>=50?We="Halfway there! Your consistency is paying off.":Je>=25?We="Great progress  real momentum building!":D.daysTracked>=7?We="Every day counts. Keep showing up!":We="Just getting started. You've got this!":We=`${D.daysTracked} days of tracking. Keep it going!`;const Ue=120,xt=7,Qe=(Ue-xt)/2,la=2*Math.PI*Qe,Va=ue?la*(1-Math.min(D.pct,1)):la,ma=[25,50,75,100],ga=re?"#34c759":"#007aff",Ia=re?"#30d158":"#5856d6";return o.jsxs("div",{className:"wc-card",style:{"--wc-accent":ga,"--wc-accent-end":Ia},children:[o.jsx("div",{className:"wc-hero",children:ue?o.jsxs("div",{className:"wc-ring-wrap",children:[o.jsxs("svg",{width:Ue,height:Ue,viewBox:`0 0 ${Ue} ${Ue}`,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"wc-grad",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:ga}),o.jsx("stop",{offset:"100%",stopColor:Ia})]})}),o.jsx("circle",{cx:Ue/2,cy:Ue/2,r:Qe,fill:"none",stroke:"rgba(0,0,0,0.05)",strokeWidth:xt}),o.jsx("circle",{cx:Ue/2,cy:Ue/2,r:Qe,fill:"none",stroke:"url(#wc-grad)",strokeWidth:xt,strokeDasharray:la,strokeDashoffset:Va,strokeLinecap:"round",transform:`rotate(-90 ${Ue/2} ${Ue/2})`,className:"wc-ring-anim"})]}),o.jsxs("div",{className:"wc-ring-center",children:[o.jsxs("span",{className:"wc-delta",children:[at,De]}),o.jsx("span",{className:"wc-delta-unit",children:"kg"})]})]}):o.jsxs("div",{className:"wc-num-only",children:[o.jsxs("span",{className:"wc-delta",children:[at,De]}),o.jsx("span",{className:"wc-delta-unit",children:"kg estimated change"})]})}),ue&&o.jsxs("div",{className:"wc-milestones",children:[o.jsx("div",{className:"wc-milestone-track",children:o.jsx("div",{className:"wc-milestone-fill",style:{width:`${Math.min(Je,100)}%`}})}),o.jsx("div",{className:"wc-milestone-labels",children:ma.map(Qa=>o.jsxs("div",{className:`wc-milestone${Je>=Qa?" wc-milestone--reached":""}`,children:[o.jsx("div",{className:"wc-milestone-dot"}),o.jsxs("span",{className:"wc-milestone-text",children:[Qa,"%"]})]},Qa))})]}),o.jsx("p",{className:"wc-message",children:We}),o.jsxs("div",{className:"wc-stats",children:[o.jsxs("div",{className:"wc-stat",children:[o.jsx("span",{className:"wc-stat-num",children:D.daysTracked}),o.jsx("span",{className:"wc-stat-label",children:"days tracked"})]}),o.jsx("div",{className:"wc-stat-sep"}),ue&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"wc-stat",children:[o.jsxs("span",{className:"wc-stat-num",children:[Je,"%"]}),o.jsx("span",{className:"wc-stat-label",children:"of goal"})]}),o.jsx("div",{className:"wc-stat-sep"}),o.jsxs("div",{className:"wc-stat",children:[o.jsx("span",{className:"wc-stat-num",children:D.goalKg}),o.jsxs("span",{className:"wc-stat-label",children:["kg ",re?"to lose":"to gain"]})]})]})]}),o.jsxs("span",{className:"wc-footnote",children:["Estimated from food log  since ",gt]})]})})(),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:"Targets"}),!K&&o.jsxs("button",{type:"button",className:"edit-btn",onClick:st,children:[o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),o.jsx("path",{d:"m15 5 4 4"})]}),"Edit"]})]}),K?o.jsxs("form",{onSubmit:ze,className:"targets-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-weight-loss",children:"Weight loss goal (kg)"}),o.jsx("input",{id:"settings-weight-loss",type:"number",inputMode:"decimal",value:_e,onChange:re=>ke(re.target.value),step:"0.5"}),A.weightLossTarget&&o.jsx("span",{className:"form-error",children:A.weightLossTarget})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("div",{className:"form-group-header",children:[o.jsx("label",{htmlFor:"settings-kcal",children:"Calorie target (cal)"}),o.jsxs("span",{className:"form-annotation",children:["Maintenance: ",tr]})]}),o.jsx("input",{id:"settings-kcal",type:"number",inputMode:"numeric",value:Y,onChange:re=>I(re.target.value),placeholder:"e.g. 1500"}),A.kcal&&o.jsx("span",{className:"form-error",children:A.kcal})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-protein",children:"Protein target (g / day)"}),o.jsx("input",{id:"settings-protein",type:"number",inputMode:"numeric",value:te,onChange:re=>X(re.target.value),placeholder:"e.g. 120"}),A.protein&&o.jsx("span",{className:"form-error",children:A.protein})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-water",children:"Water target (L / day)"}),o.jsx("input",{id:"settings-water",type:"number",inputMode:"decimal",step:"0.1",value:me,onChange:re=>de(re.target.value),placeholder:"e.g. 2.5"}),A.water&&o.jsx("span",{className:"form-error",children:A.water})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"submit",className:"btn-primary settings-save-btn",children:"Save"}),o.jsx("button",{type:"button",className:"btn-cancel",onClick:$e,children:"Cancel"})]})]}):o.jsxs("div",{className:"targets-display",children:[o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(pl,{type:"weight"})}),o.jsx("span",{className:"target-label",children:"Weight loss goal"})]}),o.jsxs("span",{className:"target-value",children:[d.weightLossTarget||5," kg"]})]}),o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(pl,{type:"calories"})}),o.jsxs("div",{className:"target-label-group",children:[o.jsx("span",{className:"target-label",children:"Calorie target"}),o.jsxs("span",{className:"target-sub",children:["Maintenance: ",tr," cal"]})]})]}),o.jsxs("span",{className:"target-value",children:[d.kcal," cal"]})]}),o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(pl,{type:"protein"})}),o.jsx("span",{className:"target-label",children:"Protein target"})]}),o.jsxs("span",{className:"target-value",children:[d.protein," g / day"]})]}),o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(pl,{type:"water"})}),o.jsx("span",{className:"target-label",children:"Water target"})]}),o.jsxs("span",{className:"target-value",children:[d.waterTargetLiters||2.5," L / day"]})]})]}),ee&&o.jsx("p",{className:"settings-message",children:"Saved!"})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h2",{children:"Data"}),o.jsxs("div",{className:"historical-cards",children:[o.jsxs("button",{className:`historical-card${W?" historical-card--active":""}`,onClick:()=>{oe(!W),F(!1)},children:[o.jsx("span",{className:"historical-card-icon historical-card-icon--import",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),o.jsx("span",{className:"historical-card-title",children:"Import Logs"}),o.jsx("span",{className:"historical-card-desc",children:"Paste day-by-day data"})]}),o.jsxs("button",{className:`historical-card${tt?" historical-card--active":""}`,onClick:Vs,children:[o.jsx("span",{className:"historical-card-icon historical-card-icon--export",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"17 8 12 3 7 8"}),o.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),o.jsx("span",{className:"historical-card-title",children:"Export Logs"}),o.jsx("span",{className:"historical-card-desc",children:"Copy your daily totals"})]})]}),W&&o.jsxs("div",{className:"historical-import",children:[o.jsxs("p",{className:"historical-hint",children:["Paste your data below  one line per day.",o.jsx("br",{}),"Format: ",o.jsx("strong",{children:"date, calories, protein"})]}),o.jsxs("p",{className:"historical-example",children:["2025-01-20, 1500, 120",o.jsx("br",{}),"2025-01-21, 1800, 95",o.jsx("br",{}),"Jan 22 2025, 1650, 110"]}),o.jsx("textarea",{className:"historical-textarea",rows:6,value:pe,onChange:re=>ve(re.target.value),placeholder:`2025-01-20, 1500, 120
2025-01-21, 1800, 95`}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn-primary settings-save-btn",onClick:Ys,disabled:!pe.trim(),children:"Import"}),o.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>{oe(!1),ye("")},children:"Cancel"})]}),V&&o.jsx("p",{className:"settings-message",children:V})]}),tt&&o.jsxs("div",{className:"historical-import",children:[o.jsxs("p",{className:"historical-hint",children:["Your daily totals  ",o.jsx("strong",{children:"date, calories, protein"})]}),o.jsx("textarea",{className:"historical-textarea",rows:6,value:Ae,readOnly:!0}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn-primary settings-save-btn",onClick:Ct,children:"Copy to clipboard"}),o.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>{F(!1),Te("")},children:"Close"})]}),je&&o.jsx("p",{className:"settings-message",children:je})]}),o.jsxs("div",{className:"settings-actions",children:[o.jsx("button",{type:"button",className:"btn-secondary",onClick:Mt,children:"Export (JSON)"}),o.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>f.current?.click(),children:"Import (JSON)"}),o.jsx("input",{ref:f,type:"file",accept:".json",onChange:wa,style:{display:"none"}}),o.jsx("button",{type:"button",className:"btn-secondary btn-danger-outline",onClick:()=>w(!0),children:"Clear all data"})]}),q&&o.jsx("p",{className:"settings-message",children:q})]}),o.jsx("div",{className:"settings-section",children:o.jsx("button",{type:"button",className:"btn-secondary btn-danger-outline",style:{width:"100%"},onClick:r,children:"Sign Out"})}),o.jsx("div",{className:"settings-section settings-about",children:o.jsx("p",{children:"myfitnesscoach v1.3  Data synced to cloud."})}),le&&o.jsxs(Cg,{title:"Clear All Data",onClose:()=>w(!1),children:[o.jsx("p",{style:{marginBottom:16},children:"This will permanently delete all your entries and targets. This cannot be undone."}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-danger)",padding:"10px"},onClick:Sa,children:"Clear Everything"}),o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-text-secondary)",padding:"10px"},onClick:()=>w(!1),children:"Cancel"})]})]})]})}function hy(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),o.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})}function fy(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),o.jsx("path",{d:"M7 2v20"}),o.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]})}function my(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 10.5V21a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V10.5"}),o.jsx("path",{d:"m2 9 10-7 10 7"}),o.jsx("path",{d:"M12 14.5c-1.5 0-2.5 1-2.5 2.5s1 2.5 2.5 2.5 2.5-1 2.5-2.5-1-2.5-2.5-2.5z"})]})}function gy(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"8",r:"4"}),o.jsx("path",{d:"M20 21a8 8 0 1 0-16 0"})]})}const py=[{view:_a.DASHBOARD,label:"Dashboard",icon:o.jsx(hy,{})},{view:_a.DAILY_LOG,label:"Daily Log",icon:o.jsx(fy,{})},{view:_a.KITCHEN,label:"Kitchen",icon:o.jsx(my,{})},{view:_a.PROFILE,label:"Profile",icon:o.jsx(gy,{})}];function vy(){const{state:s,dispatch:n}=ra(),{currentView:r}=s;return o.jsx("div",{className:"navbar-wrapper",children:o.jsx("nav",{className:"navbar",children:py.map(l=>o.jsxs("button",{className:`navbar-tab ${r===l.view?"active":""}`,onClick:()=>n({type:"SET_VIEW",payload:l.view}),children:[o.jsx("span",{className:"navbar-icon",children:l.icon}),o.jsx("span",{className:"navbar-label",children:l.label})]},l.view))})})}function yy(){return o.jsx("div",{className:"goal-bar goal-bar--compact",children:o.jsx("span",{className:"goal-bar-brand",children:"myfitnesscoach"})})}function by(){const{user:s,loading:n}=Ol(),{state:r,loading:l}=ra();if(n||l)return o.jsx("div",{className:"app-loading",children:o.jsx("div",{className:"app-loading-spinner"})});if(!s)return o.jsx(Sv,{});if(!r.targets.onboardingComplete)return o.jsx(Jv,{});const d=()=>{switch(r.currentView){case _a.DASHBOARD:return o.jsx(Xm,{});case _a.DAILY_LOG:return o.jsx(ay,{});case _a.KITCHEN:return o.jsx(ly,{});case _a.PROFILE:return o.jsx(dy,{});default:return o.jsx(Xm,{})}};return o.jsxs("div",{className:"app-shell",children:[o.jsx("header",{className:"app-header",children:o.jsx(yy,{})}),o.jsx("main",{className:"app-main",children:d()}),o.jsx(vy,{})]})}function Cl(s,n){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&n.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(s);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(s,l[d])&&(r[l[d]]=s[l[d]]);return r}function _y(s,n,r,l){function d(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function g(b){try{p(l.next(b))}catch(x){f(x)}}function v(b){try{p(l.throw(b))}catch(x){f(x)}}function p(b){b.done?h(b.value):d(b.value).then(g,v)}p((l=l.apply(s,n||[])).next())})}const xy=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class Du extends Error{constructor(n,r="FunctionsError",l){super(n),this.name=r,this.context=l}}class wy extends Du{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Fm extends Du{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class eg extends Du{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var fu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(fu||(fu={}));class Sy{constructor(n,{headers:r={},customFetch:l,region:d=fu.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=xy(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return _y(this,arguments,void 0,function*(r,l={}){var d;let h,f;try{const{headers:g,method:v,body:p,signal:b,timeout:x}=l;let E={},{region:k}=l;k||(k=this.region);const S=new URL(`${this.url}/${r}`);k&&k!=="any"&&(E["x-region"]=k,S.searchParams.set("forceFunctionRegion",k));let O;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",O=p):typeof p=="string"?(E["Content-Type"]="text/plain",O=p):typeof FormData<"u"&&p instanceof FormData?O=p:(E["Content-Type"]="application/json",O=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?O=JSON.stringify(p):O=p;let z=b;x&&(f=new AbortController,h=setTimeout(()=>f.abort(),x),b?(z=f.signal,b.addEventListener("abort",()=>f.abort())):z=f.signal);const G=yield this.fetch(S.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),g),body:O,signal:z}).catch(ne=>{throw new wy(ne)}),T=G.headers.get("x-relay-error");if(T&&T==="true")throw new Fm(G);if(!G.ok)throw new eg(G);let D=((d=G.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),K;return D==="application/json"?K=yield G.json():D==="application/octet-stream"||D==="application/pdf"?K=yield G.blob():D==="text/event-stream"?K=G:D==="multipart/form-data"?K=yield G.formData():K=yield G.text(),{data:K,error:null,response:G}}catch(g){return{data:null,error:g,response:g instanceof eg||g instanceof Fm?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var jy=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},ky=class{constructor(s){var n,r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(l=s.urlLengthLimit)!==null&&l!==void 0?l:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,g=null,v=null,p=h.status,b=h.statusText;if(h.ok){var x,E;if(r.method!=="HEAD"){var k;const G=await h.text();G===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((k=r.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?g=G:g=JSON.parse(G))}const O=(x=r.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),z=(E=h.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");O&&z&&z.length>1&&(v=parseInt(z[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,p=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var S;const O=await h.text();try{f=JSON.parse(O),Array.isArray(f)&&h.status===404&&(g=[],f=null,p=200,b="OK")}catch{h.status===404&&O===""?(p=204,b="No Content"):f={message:O}}if(f&&r.isMaybeSingle&&(!(f==null||(S=f.details)===null||S===void 0)&&S.includes("0 rows"))&&(f=null,p=200,b="OK"),f&&r.shouldThrowOnError)throw new jy(f)}return{error:f,data:g,count:v,status:p,statusText:b}});return this.shouldThrowOnError||(d=d.catch(h=>{var f;let g="",v="",p="";const b=h?.cause;if(b){var x,E,k,S;const G=(x=b?.message)!==null&&x!==void 0?x:"",T=(E=b?.code)!==null&&E!==void 0?E:"";g=`${(k=h?.name)!==null&&k!==void 0?k:"FetchError"}: ${h?.message}`,g+=`

Caused by: ${(S=b?.name)!==null&&S!==void 0?S:"Error"}: ${G}`,T&&(g+=` (${T})`),b?.stack&&(g+=`
${b.stack}`)}else{var O;g=(O=h?.stack)!==null&&O!==void 0?O:""}const z=this.url.toString().length;return h?.name==="AbortError"||h?.code==="ABORT_ERR"?(p="",v="Request was aborted (timeout or manual cancellation)",z>this.urlLengthLimit&&(v+=`. Note: Your request URL is ${z} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(b?.name==="HeadersOverflowError"||b?.code==="UND_ERR_HEADERS_OVERFLOW")&&(p="",v="HTTP headers exceeded server limits (typically 16KB)",z>this.urlLengthLimit&&(v+=`. Your request URL is ${z} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:g,hint:v,code:p},data:null,count:null,status:0,statusText:""}})),d.then(s,n)}returns(){return this}overrideTypes(){return this}},Ey=class extends ky{select(s){let n=!1;const r=(s??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const g=[s?"analyze":null,n?"verbose":null,r?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const tg=new RegExp("[,()]");var Bs=class extends Ey{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&tg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&tg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${d}fts${h}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},Ny=class{constructor(s,{headers:n={},schema:r,fetch:l,urlLengthLimit:d=8e3}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=l,this.urlLengthLimit=d}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:l}=n??{},d=r?"HEAD":"GET";let h=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join(""),{url:g,headers:v}=this.cloneRequestState();return g.searchParams.set("select",f),l&&v.append("Prefer",`count=${l}`),new Bs({method:d,url:g,headers:v,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:n,defaultToNull:r=!0}={}){var l;const d="POST",{url:h,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((v,p)=>v.concat(Object.keys(p)),[]);if(g.length>0){const v=[...new Set(g)].map(p=>`"${p}"`);h.searchParams.set("columns",v.join(","))}}return new Bs({method:d,url:h,headers:f,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:l,defaultToNull:d=!0}={}){var h;const f="POST",{url:g,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&g.searchParams.set("on_conflict",n),l&&v.append("Prefer",`count=${l}`),d||v.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((b,x)=>b.concat(Object.keys(x)),[]);if(p.length>0){const b=[...new Set(p)].map(x=>`"${x}"`);g.searchParams.set("columns",b.join(","))}}return new Bs({method:f,url:g,headers:v,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:n}={}){var r;const l="PATCH",{url:d,headers:h}=this.cloneRequestState();return n&&h.append("Prefer",`count=${n}`),new Bs({method:l,url:d,headers:h,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var n;const r="DELETE",{url:l,headers:d}=this.cloneRequestState();return s&&d.append("Prefer",`count=${s}`),new Bs({method:r,url:l,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function Vi(s){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vi(s)}function Ty(s,n){if(Vi(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Vi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Ay(s){var n=Ty(s,"string");return Vi(n)=="symbol"?n:n+""}function Oy(s,n,r){return(n=Ay(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function ag(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function vl(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ag(Object(r),!0).forEach(function(l){Oy(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):ag(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}var Cy=class Dg{constructor(n,{headers:r={},schema:l,fetch:d,timeout:h,urlLengthLimit:f=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=l,this.urlLengthLimit=f;const g=d??globalThis.fetch;h!==void 0&&h>0?this.fetch=(v,p)=>{const b=new AbortController,x=setTimeout(()=>b.abort(),h),E=p?.signal;if(E){if(E.aborted)return clearTimeout(x),g(v,p);const k=()=>{clearTimeout(x),b.abort()};return E.addEventListener("abort",k,{once:!0}),g(v,vl(vl({},p),{},{signal:b.signal})).finally(()=>{clearTimeout(x),E.removeEventListener("abort",k)})}return g(v,vl(vl({},p),{},{signal:b.signal})).finally(()=>clearTimeout(x))}:this.fetch=g}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ny(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Dg(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:l=!1,get:d=!1,count:h}={}){var f;let g;const v=new URL(`${this.url}/rpc/${n}`);let p;const b=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(b)),x=l&&Object.values(r).some(b);x?(g="POST",p=r):l||d?(g=l?"HEAD":"GET",Object.entries(r).filter(([k,S])=>S!==void 0).map(([k,S])=>[k,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([k,S])=>{v.searchParams.append(k,S)})):(g="POST",p=r);const E=new Headers(this.headers);return x?E.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&E.set("Prefer",`count=${h}`),new Bs({method:g,url:v,headers:E,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class Ry{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const d=l.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const l=this.getWebSocketConstructor();return new l(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const My="2.97.0",Dy=`realtime-js/${My}`,Ly="1.0.0",Lg="2.0.0",ng=Lg,mu=1e4,Uy=1e3,zy=100;var _n;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(_n||(_n={}));var vt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(vt||(vt={}));var fa;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(fa||(fa={}));var gu;(function(s){s.websocket="websocket"})(gu||(gu={}));var Pn;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Pn||(Pn={}));class By{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,l){var d,h;const f=n.topic,g=(d=n.ref)!==null&&d!==void 0?d:"",v=(h=n.join_ref)!==null&&h!==void 0?h:"",p=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},x=Object.keys(b).length===0?"":JSON.stringify(b);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+g.length+f.length+p.length+x.length,k=new ArrayBuffer(this.HEADER_LENGTH+E);let S=new DataView(k),O=0;S.setUint8(O++,this.KINDS.userBroadcastPush),S.setUint8(O++,v.length),S.setUint8(O++,g.length),S.setUint8(O++,f.length),S.setUint8(O++,p.length),S.setUint8(O++,x.length),S.setUint8(O++,r),Array.from(v,G=>S.setUint8(O++,G.charCodeAt(0))),Array.from(g,G=>S.setUint8(O++,G.charCodeAt(0))),Array.from(f,G=>S.setUint8(O++,G.charCodeAt(0))),Array.from(p,G=>S.setUint8(O++,G.charCodeAt(0))),Array.from(x,G=>S.setUint8(O++,G.charCodeAt(0)));var z=new Uint8Array(k.byteLength+l.byteLength);return z.set(new Uint8Array(k),0),z.set(new Uint8Array(l),k.byteLength),z.buffer}decode(n,r){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return r(l)}if(typeof n=="string"){const l=JSON.parse(n),[d,h,f,g,v]=l;return r({join_ref:d,ref:h,topic:f,event:g,payload:v})}return r({})}_binaryDecode(n){const r=new DataView(n),l=r.getUint8(0),d=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,d)}_decodeUserBroadcast(n,r,l){const d=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let v=this.HEADER_LENGTH+4;const p=l.decode(n.slice(v,v+d));v=v+d;const b=l.decode(n.slice(v,v+h));v=v+h;const x=l.decode(n.slice(v,v+f));v=v+f;const E=n.slice(v,n.byteLength),k=g===this.JSON_ENCODING?JSON.parse(l.decode(E)):E,S={type:this.BROADCAST_EVENT,event:b,payload:k};return f>0&&(S.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>r.includes(l)))}}class Ug{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ze||(Ze={}));const sg=(s,n,r={})=>{var l;const d=(l=r.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((h,f)=>(h[f]=qy(f,s,n,d),h),{}):{}},qy=(s,n,r,l)=>{const d=n.find(g=>g.name===s),h=d?.type,f=r[s];return h&&!l.includes(h)?zg(h,f):pu(f)},zg=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Ky(n,r)}switch(s){case Ze.bool:return Hy(n);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return $y(n);case Ze.json:case Ze.jsonb:return Gy(n);case Ze.timestamp:return Py(n);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return pu(n);default:return pu(n)}},pu=s=>s,Hy=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},$y=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Gy=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Ky=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,l=s[r];if(s[0]==="{"&&l==="}"){let h;const f=s.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>zg(n,g))}return s},Py=s=>typeof s=="string"?s.replace(" ","T"):s,Bg=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class tu{constructor(n,r,l={},d=mu){this.channel=n,this.event=r,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var l;return this._hasReceived(n)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var ig;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(ig||(ig={}));class Ki{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ki.syncState(this.state,d,h,f),this.pendingDiffs.forEach(v=>{this.state=Ki.syncDiff(this.state,v,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Ki.syncDiff(this.state,d,h,f),g())}),this.onJoin((d,h,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:f})}),this.onLeave((d,h,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,l,d){const h=this.cloneDeep(n),f=this.transformState(r),g={},v={};return this.map(h,(p,b)=>{f[p]||(v[p]=b)}),this.map(f,(p,b)=>{const x=h[p];if(x){const E=b.map(z=>z.presence_ref),k=x.map(z=>z.presence_ref),S=b.filter(z=>k.indexOf(z.presence_ref)<0),O=x.filter(z=>E.indexOf(z.presence_ref)<0);S.length>0&&(g[p]=S),O.length>0&&(v[p]=O)}else g[p]=b}),this.syncDiff(h,{joins:g,leaves:v},l,d)}static syncDiff(n,r,l,d){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(h,(g,v)=>{var p;const b=(p=n[g])!==null&&p!==void 0?p:[];if(n[g]=this.cloneDeep(v),b.length>0){const x=n[g].map(k=>k.presence_ref),E=b.filter(k=>x.indexOf(k.presence_ref)<0);n[g].unshift(...E)}l(g,b,v)}),this.map(f,(g,v)=>{let p=n[g];if(!p)return;const b=v.map(x=>x.presence_ref);p=p.filter(x=>b.indexOf(x.presence_ref)<0),n[g]=p,d(g,p,v),p.length===0&&delete n[g]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(l=>r(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,l)=>{const d=n[l];return"metas"in d?r[l]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[l]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rg;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(rg||(rg={}));var Pi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Pi||(Pi={}));var Ka;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Ka||(Ka={}));class $s{constructor(n,r={config:{}},l){var d,h;if(this.topic=n,this.params=r,this.socket=l,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new tu(this,fa.join,this.params,this.timeout),this.rejoinTimer=new Ug(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fa.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Ki(this),this.broadcastEndpointURL=Bg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var l,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:f,presence:g,private:v}}=this.params,p=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(k=>k.filter))!==null&&d!==void 0?d:[],b=!!this.bindings[Pi.PRESENCE]&&this.bindings[Pi.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,x={},E={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:v};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(k=>n?.(Ka.CHANNEL_ERROR,k)),this._onClose(()=>n?.(Ka.CLOSED)),this.updateJoinPayload(Object.assign({config:E},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:k})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){n?.(Ka.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,z=(S=O?.length)!==null&&S!==void 0?S:0,G=[];for(let T=0;T<z;T++){const D=O[T],{filter:{event:K,schema:ne,table:J,filter:Z}}=D,_e=k&&k[T];if(_e&&_e.event===K&&$s.isFilterValueEqual(_e.schema,ne)&&$s.isFilterValueEqual(_e.table,J)&&$s.isFilterValueEqual(_e.filter,Z))G.push(Object.assign(Object.assign({},D),{id:_e.id}));else{this.unsubscribe(),this.state=vt.errored,n?.(Ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,n&&n(Ka.SUBSCRIBED);return}}).receive("error",k=>{this.state=vt.errored,n?.(Ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{n?.(Ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,l){return this.state===vt.joined&&n===Pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,l)}async httpSend(n,r,l={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let v=g.statusText;try{const p=await g.json();v=p.error||p.message||v}catch{}return Promise.reject(new Error(v))}async send(n,r={}){var l,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=n,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,v;const p=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||v===void 0)&&v.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=vt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fa.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new tu(this,fa.leave,{},n),l.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(n,r,l){const d=new AbortController,h=setTimeout(()=>d.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),f}_push(n,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new tu(this,n,r,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>zy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,l){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,l){var d,h;const f=n.toLocaleLowerCase(),{close:g,error:v,leave:p,join:b}=fa;if(l&&[g,v,p,b].indexOf(f)>=0&&l!==this._joinRef())return;let E=this._onMessage(f,r,l);if(r&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(k=>{var S,O,z;return((S=k.filter)===null||S===void 0?void 0:S.event)==="*"||((z=(O=k.filter)===null||O===void 0?void 0:O.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===f}).map(k=>k.callback(E,l)):(h=this.bindings[f])===null||h===void 0||h.filter(k=>{var S,O,z,G,T,D;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in k){const K=k.id,ne=(S=k.filter)===null||S===void 0?void 0:S.event;return K&&((O=r.ids)===null||O===void 0?void 0:O.includes(K))&&(ne==="*"||ne?.toLocaleLowerCase()===((z=r.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))}else{const K=(T=(G=k?.filter)===null||G===void 0?void 0:G.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return K==="*"||K===((D=r?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===f}).map(k=>{if(typeof E=="object"&&"ids"in E){const S=E.data,{schema:O,table:z,commit_timestamp:G,type:T,errors:D}=S;E=Object.assign(Object.assign({},{schema:O,table:z,commit_timestamp:G,eventType:T,new:{},old:{},errors:D}),this._getPayloadRecords(S))}k.callback(E,l)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,l){const d=n.toLocaleLowerCase(),h={type:d,filter:r,callback:l};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(n,r){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===l&&$s.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const l in n)if(n[l]!==r[l])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(fa.close,{},n)}_onError(n){this._on(fa.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=sg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=sg(n.columns,n.old_record)),r}}const au=()=>{},yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yy=[1e3,2e3,5e3,1e4],Vy=1e4,Iy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qy{constructor(n,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mu,this.transport=null,this.heartbeatIntervalMs=yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=au,this.ref=0,this.reconnectTimer=null,this.vsn=ng,this.logger=au,this.conn=null,this.sendBuffer=[],this.serializer=new By,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${gu.websocket}`,this.httpEndpoint=Bg(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ry.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,l){this.logger(n,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case _n.connecting:return Pn.Connecting;case _n.open:return Pn.Open;case _n.closing:return Pn.Closing;default:return Pn.Closed}}isConnected(){return this.connectionState()===Pn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const l=`realtime:${n}`,d=this.getChannels().find(h=>h.topic===l);if(d)return d;{const h=new $s(`realtime:${n}`,r,this);return this.channels.push(h),h}}push(n){const{topic:r,event:l,payload:d,ref:h}=n,f=()=>{this.encode(n,g=>{var v;(v=this.conn)===null||v===void 0||v.send(g)})};this.log("push",`${r} ${l} (${h})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Uy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",p)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:d,payload:h,ref:f}=r,g=f?`(${f})`:"",v=h.status||"";this.log("receive",`${v} ${l} ${d} ${g}`.trim(),h),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(d,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===_n.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===_n.open||this.conn.readyState===_n.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(fa.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const l=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${l}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const l=new Blob([Iy],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,l=!1;if(n)r=n,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const h={access_token:r,version:Dy};r&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(fa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Ug(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,l,d,h,f,g,v,p,b,x,E,k;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:mu,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:yl.HEARTBEAT_INTERVAL,this.worker=(h=n?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:au,this.vsn=(v=n?.vsn)!==null&&v!==void 0?v:ng,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(S=>Yy[S-1]||Vy),this.vsn){case Ly:this.encode=(b=n?.encode)!==null&&b!==void 0?b:((S,O)=>O(JSON.stringify(S))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:((S,O)=>O(JSON.parse(S)));break;case Lg:this.encode=(E=n?.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(k=n?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Ii=class extends Error{constructor(s,n){super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Xy(s,n,r){const l=new URL(n,s);if(r)for(const[d,h]of Object.entries(r))h!==void 0&&l.searchParams.set(d,h);return l.toString()}async function Jy(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Zy(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:d,body:h,headers:f}){const g=Xy(s.baseUrl,l,d),v=await Jy(s.auth),p=await n(g,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...v,...f},body:h?JSON.stringify(h):void 0}),b=await p.text(),x=(p.headers.get("content-type")||"").includes("application/json"),E=x&&b?JSON.parse(b):b;if(!p.ok){const k=x?E:void 0,S=k?.error;throw new Ii(S?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:S?.type,icebergCode:S?.code,details:k})}return{status:p.status,headers:p.headers,data:E}}}}function bl(s){return s.join("")}var Wy=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:bl(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bl(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bl(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bl(s.namespace)}`}),!0}catch(n){if(n instanceof Ii&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof Ii&&r.status===409)return;throw r}}};function Cs(s){return s.join("")}var Fy=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cs(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cs(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof Ii&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof Ii&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},e1=class{constructor(s){let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Zy({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new Wy(this.client,n),this.tableOps=new Fy(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},Rl=class extends Error{constructor(s,n="storage",r,l){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=l}};function Ml(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var _l=class extends Rl{constructor(s,n,r,l="storage"){super(s,l,n,r),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qg=class extends Rl{constructor(s,n,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const t1=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),a1=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},vu=s=>{if(Array.isArray(s))return s.map(r=>vu(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,l])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));n[d]=vu(l)}),n},n1=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Qi(s){"@babel/helpers - typeof";return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Qi(s)}function s1(s,n){if(Qi(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Qi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function i1(s){var n=s1(s,"string");return Qi(n)=="symbol"?n:n+""}function r1(s,n,r){return(n=i1(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function lg(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function fe(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lg(Object(r),!0).forEach(function(l){r1(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):lg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const og=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},l1=async(s,n,r,l)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const d=s,h=d.status||500;if(typeof d.json=="function")d.json().then(f=>{const g=f?.statusCode||f?.code||h+"";n(new _l(og(f),h,g,l))}).catch(()=>{if(l==="vectors"){const f=h+"";n(new _l(d.statusText||`HTTP ${h} error`,h,f,l))}else{const f=h+"";n(new _l(d.statusText||`HTTP ${h} error`,h,f,l))}});else{const f=h+"";n(new _l(d.statusText||`HTTP ${h} error`,h,f,l))}}else n(new qg(og(s),s,l))},o1=(s,n,r,l)=>{const d={method:s,headers:n?.headers||{}};return s==="GET"||s==="HEAD"||!l?fe(fe({},d),r):(a1(l)?(d.headers=fe({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,n?.duplex&&(d.duplex=n.duplex),fe(fe({},d),r))};async function Hi(s,n,r,l,d,h,f){return new Promise((g,v)=>{s(r,o1(n,l,d,h)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;if(f==="vectors"){const b=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!b||!b.includes("application/json"))return{}}return p.json()}).then(p=>g(p)).catch(p=>l1(p,v,l,f))})}function Hg(s="storage"){return{get:async(n,r,l,d)=>Hi(n,"GET",r,l,d,void 0,s),post:async(n,r,l,d,h)=>Hi(n,"POST",r,d,h,l,s),put:async(n,r,l,d,h)=>Hi(n,"PUT",r,d,h,l,s),head:async(n,r,l,d)=>Hi(n,"HEAD",r,fe(fe({},l),{},{noResolveJson:!0}),d,void 0,s),remove:async(n,r,l,d,h)=>Hi(n,"DELETE",r,d,h,l,s)}}const c1=Hg("storage"),{get:Xi,post:ha,put:yu,head:u1,remove:Lu}=c1,Xt=Hg("vectors");var Ps=class{constructor(s,n={},r,l="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=t1(r),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=fe(fe({},this.headers),{},{[s]:n}),this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ml(r))return{data:null,error:r};throw r}}},d1=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ml(n))return{data:null,error:n};throw n}}};let $g;$g=Symbol.toStringTag;var h1=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[$g]="BlobDownloadBuilder",this.promise=null}asStream(){return new d1(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ml(n))return{data:null,error:n};throw n}}};const f1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var m1=class extends Ps{constructor(s,n={},r,l){super(s,n,l,"storage"),this.bucketId=r}async uploadOrUpdate(s,n,r,l){var d=this;return d.handleOperation(async()=>{let h;const f=fe(fe({},cg),l);let g=fe(fe({},d.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const v=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),v&&h.append("metadata",d.encodeMetadata(v)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),v&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(v))):(h=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,v&&(g["x-metadata"]=d.toBase64(d.encodeMetadata(v))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),l?.headers&&(g=fe(fe({},g),l.headers));const p=d._removeEmptyFolders(n),b=d._getFinalPath(p),x=await(s=="PUT"?yu:ha)(d.fetch,`${d.url}/object/${b}`,h,fe({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{path:p,id:x.Id,fullPath:x.Key}})}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,l){var d=this;const h=d._removeEmptyFolders(s),f=d._getFinalPath(h),g=new URL(d.url+`/object/upload/sign/${f}`);return g.searchParams.set("token",n),d.handleOperation(async()=>{let v;const p=fe({upsert:cg.upsert},l),b=fe(fe({},d.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(v=new FormData,v.append("cacheControl",p.cacheControl),v.append("",r)):typeof FormData<"u"&&r instanceof FormData?(v=r,v.append("cacheControl",p.cacheControl)):(v=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{path:h,fullPath:(await yu(d.fetch,g.toString(),v,{headers:b})).Key}})}async createSignedUploadUrl(s,n){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(s);const d=fe({},r.headers);n?.upsert&&(d["x-upsert"]="true");const h=await ha(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:d}),f=new URL(r.url+h.url),g=f.searchParams.get("token");if(!g)throw new Rl("No token returned by API");return{signedUrl:f.toString(),path:s,token:g}})}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var l=this;return l.handleOperation(async()=>await ha(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers}))}async copy(s,n,r){var l=this;return l.handleOperation(async()=>({path:(await ha(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(s,n,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(s),h=await ha(l.fetch,`${l.url}/object/sign/${d}`,fe({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${l.url}${h.signedURL}${f}`)}})}async createSignedUrls(s,n,r){var l=this;return l.handleOperation(async()=>{const d=await ha(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:s},{headers:l.headers}),h=r?.download?`&download=${r.download===!0?"":r.download}`:"";return d.map(f=>fe(fe({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${h}`):null}))})}download(s,n,r){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(n?.transform||{}),h=d?`?${d}`:"",f=this._getFinalPath(s),g=()=>Xi(this.fetch,`${this.url}/${l}/${f}${h}`,{headers:this.headers,noResolveJson:!0},r);return new h1(g,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);return n.handleOperation(async()=>vu(await Xi(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await u1(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ml(l)&&l instanceof qg){const d=l.originalError;if([400,404].includes(d?.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,n){const r=this._getFinalPath(s),l=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&l.push(d);const h=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&l.push(f);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${g}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await Lu(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,r){var l=this;return l.handleOperation(async()=>{const d=fe(fe(fe({},f1),n),{},{prefix:s||""});return await ha(l.fetch,`${l.url}/object/list/${l.bucketId}`,d,{headers:l.headers},r)})}async listV2(s,n){var r=this;return r.handleOperation(async()=>{const l=fe({},s);return await ha(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const g1="2.97.0",er={"X-Client-Info":`storage-js/${g1}`};var p1=class extends Ps{constructor(s,n={},r,l){const d=new URL(s);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase."));const h=d.href.replace(/\/$/,""),f=fe(fe({},er),n);super(h,f,r,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(s);return await Xi(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await Xi(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var r=this;return r.handleOperation(async()=>await ha(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,n){var r=this;return r.handleOperation(async()=>await yu(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await ha(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Lu(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},v1=class extends Ps{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=fe(fe({},er),n);super(l,d,r,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await ha(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const l=r.toString(),d=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return await Xi(n.fetch,d,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Lu(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!n1(s))throw new Rl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new e1({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const f=d[h];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(d,g),error:null}}catch(v){if(l)throw v;return{data:null,error:v}}}}})}},y1=class extends Ps{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=fe(fe({},er),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var r=this;return r.handleOperation(async()=>await Xt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var r=this;return r.handleOperation(async()=>await Xt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{})}},b1=class extends Ps{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=fe(fe({},er),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},_1=class extends Ps{constructor(s,n={},r){const l=s.replace(/\/$/,""),d=fe(fe({},er),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Xt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},x1=class extends _1{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new w1(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},w1=class extends y1{constructor(s,n,r,l){super(s,n,l),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new S1(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},S1=class extends b1{constructor(s,n,r,l,d){super(s,n,d),this.vectorBucketName=r,this.indexName=l}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,fe(fe({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},j1=class extends p1{constructor(s,n={},r,l){super(s,n,r,l)}from(s){return new m1(this.url,this.headers,s,this.fetch)}get vectors(){return new x1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new v1(this.url+"/iceberg",this.headers,this.fetch)}};const Gg="2.97.0",qs=30*1e3,bu=3,nu=bu*qs,k1="http://localhost:9999",E1="supabase.auth.token",N1={"X-Client-Info":`gotrue-js/${Gg}`},_u="X-Supabase-Api-Version",Kg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},T1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,A1=600*1e3;class Ji extends Error{constructor(n,r,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function ie(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class O1 extends Ji{constructor(n,r,l){super(n,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function C1(s){return ie(s)&&s.name==="AuthApiError"}class Yn extends Ji{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Ya extends Ji{constructor(n,r,l,d){super(n,l,d),this.name=r,this.status=l}}class Qt extends Ya{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function su(s){return ie(s)&&s.name==="AuthSessionMissingError"}class Rs extends Ya{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xl extends Ya{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class wl extends Ya{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function R1(s){return ie(s)&&s.name==="AuthImplicitGrantRedirectError"}class ug extends Ya{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class M1 extends Ya{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xu extends Ya{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function iu(s){return ie(s)&&s.name==="AuthRetryableFetchError"}class dg extends Ya{constructor(n,r,l){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class wu extends Ya{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hg=` 	
\r=`.split(""),D1=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<hg.length;n+=1)s[hg[n].charCodeAt(0)]=-2;for(let n=0;n<Nl.length;n+=1)s[Nl[n].charCodeAt(0)]=n;return s})();function fg(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(Nl[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(Nl[l]),n.queuedBits-=6}}function Pg(s,n,r){const l=D1[s];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function mg(s){const n=[],r=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=f=>{z1(f,l,r)};for(let f=0;f<s.length;f+=1)Pg(s.charCodeAt(f),d,h);return n.join("")}function L1(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function U1(s,n){for(let r=0;r<s.length;r+=1){let l=s.charCodeAt(r);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(s.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}L1(l,n)}}function z1(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ks(s){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};for(let d=0;d<s.length;d+=1)Pg(s.charCodeAt(d),r,l);return new Uint8Array(n)}function B1(s){const n=[];return U1(s,r=>n.push(r)),new Uint8Array(n)}function Vn(s){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};return s.forEach(d=>fg(d,r,l)),fg(null,r,l),n.join("")}function q1(s){return Math.round(Date.now()/1e3)+s}function H1(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",$n={tested:!1,writable:!1},Yg=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($n.tested)return $n.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),$n.tested=!0,$n.writable=!0}catch{$n.tested=!0,$n.writable=!1}return $n.writable};function $1(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{n[h]=d})}catch{}return r.searchParams.forEach((l,d)=>{n[d]=l}),n}const Vg=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),G1=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Hs=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},Gn=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nt=async(s,n)=>{await s.removeItem(n)};class Dl{constructor(){this.promise=new Dl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Dl.promiseConstructor=Promise;function Sl(s){const n=s.split(".");if(n.length!==3)throw new wu("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!T1.test(n[l]))throw new wu("JWT not in base64url format");return{header:JSON.parse(mg(n[0])),payload:JSON.parse(mg(n[1])),signature:Ks(n[2]),raw:{header:n[0],payload:n[1]}}}async function K1(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function P1(s,n){return new Promise((l,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await s(h);if(!n(h,null,f)){l(f);return}}catch(f){if(!n(h,f)){d(f);return}}})()})}function Y1(s){return("0"+s.toString(16)).substr(-2)}function V1(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(n),Array.from(n,Y1).join("")}async function I1(s){const r=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(l);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function Q1(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await I1(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ms(s,n,r=!1){const l=V1();let d=l;r&&(d+="/PASSWORD_RECOVERY"),await Hs(s,`${n}-code-verifier`,d);const h=await Q1(l);return[h,l===h?"plain":"s256"]}const X1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function J1(s){const n=s.headers.get(_u);if(!n||!n.match(X1))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Z1(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function W1(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ds(s){if(!F1.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ru(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eb(s,n){return new Proxy(s,{get:(r,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,d)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,l,d)}})}function gg(s){return JSON.parse(JSON.stringify(s))}const Kn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),tb=[502,503,504];async function pg(s){var n;if(!G1(s))throw new xu(Kn(s),0);if(tb.includes(s.status))throw new xu(Kn(s),s.status);let r;try{r=await s.json()}catch(h){throw new Yn(Kn(h),h)}let l;const d=J1(s);if(d&&d.getTime()>=Kg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new dg(Kn(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new Qt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new dg(Kn(r),s.status,r.weak_password.reasons);throw new O1(Kn(r),s.status||500,l)}const ab=(s,n,r,l)=>{const d={method:s,headers:n?.headers||{}};return s==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),r))};async function ge(s,n,r,l){var d;const h=Object.assign({},l?.headers);h[_u]||(h[_u]=Kg["2024-01-01"].name),l?.jwt&&(h.Authorization=`Bearer ${l.jwt}`);const f=(d=l?.query)!==null&&d!==void 0?d:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",v=await nb(s,n,r+g,{headers:h,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(v):{data:Object.assign({},v),error:null}}async function nb(s,n,r,l,d,h){const f=ab(n,l,d,h);let g;try{g=await s(r,Object.assign({},f))}catch(v){throw console.error(v),new xu(Kn(v),0)}if(g.ok||await pg(g),l?.noResolveJson)return g;try{return await g.json()}catch(v){await pg(v)}}function da(s){var n;let r=null;rb(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=q1(s.expires_in)));const l=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:l},error:null}}function vg(s){const n=da(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(n.data.weak_password=s.weak_password),n}function xn(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function sb(s){return{data:s,error:null}}function ib(s){const{action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h}=s,f=Cl(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h},v=Object.assign({},f);return{data:{properties:g,user:v},error:null}}function yg(s){return s}function rb(s){return s.access_token&&s.refresh_token&&s.expires_in}const lu=["global","local","others"];class lb{constructor({url:n="",headers:r={},fetch:l}){this.url=n,this.headers=r,this.fetch=Vg(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=lu[0]){if(lu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lu.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ie(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,r={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:xn})}catch(l){if(ie(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:r}=n,l=Cl(n,["options"]),d=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(d.new_email=l?.newEmail,delete d.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:ib,redirectTo:r?.redirectTo})}catch(r){if(ie(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:xn})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,l,d,h,f,g,v;try{const p={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:yg});if(b.error)throw b.error;const x=await b.json(),E=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(v=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return k.length>0&&(k.forEach(S=>{const O=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(S.split(";")[1].split("=")[1]);p[`${z}Page`]=O}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ie(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){Ds(n);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:xn})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ds(n);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:xn})}catch(l){if(ie(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,r=!1){Ds(n);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:xn})}catch(l){if(ie(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){Ds(n.userId);try{const{data:r,error:l}=await ge(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:l}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ds(n.userId),Ds(n.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,l,d,h,f,g,v;try{const p={nextPage:null,lastPage:0,total:0},b=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:yg});if(b.error)throw b.error;const x=await b.json(),E=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(v=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return k.length>0&&(k.forEach(S=>{const O=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(S.split(";")[1].split("=")[1]);p[`${z}Page`]=O}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ie(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ie(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ie(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ie(r))return{data:null,error:r};throw r}}}function bg(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const Ls={debug:!!(globalThis&&Yg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ig extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class _g extends Ig{}async function ob(s,n,r){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const l=new globalThis.AbortController;n>0&&setTimeout(()=>{l.abort(),Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,d.name);try{return await r()}finally{Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,d.name)}}else{if(n===0)throw Ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new _g(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ls.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(d){throw d?.name==="AbortError"?new _g(`Acquiring an exclusive Navigator LockManager lock "${s}" timed out waiting ${n}ms`):d}}function cb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qg(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function ub(s){return parseInt(s,16)}function db(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function hb(s){var n;const{chainId:r,domain:l,expirationTime:d,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:v,resources:p,scheme:b,uri:x,version:E}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const k=Qg(s.address),S=b?`${b}://${l}`:l,O=s.statement?`${s.statement}
`:"",z=`${S} wants you to sign in with your Ethereum account:
${k}

${O}`;let G=`URI: ${x}
Version: ${E}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(d&&(G+=`
Expiration Time: ${d.toISOString()}`),g&&(G+=`
Not Before: ${g.toISOString()}`),v&&(G+=`
Request ID: ${v}`),p){let T=`
Resources:`;for(const D of p){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);T+=`
- ${D}`}G+=T}return`${z}
${G}`}class mt extends Error{constructor({message:n,code:r,cause:l,name:d}){var h;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(h=d??(l instanceof Error?l.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class Tl extends mt{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function fb({error:s,options:n}){var r,l,d;const{publicKey:h}=n;if(!h)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((l=h.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new mt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(Xg(f)){if(h.rp.id!==f)return new mt({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function mb({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new mt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(Xg(l)){if(r.rpId!==l)return new mt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class gb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const pb=new gb;function vb(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:l}=s,d=Cl(s,["challenge","user","excludeCredentials"]),h=Ks(n).buffer,f=Object.assign(Object.assign({},r),{id:Ks(r.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:h,user:f});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let v=0;v<l.length;v++){const p=l[v];g.excludeCredentials[v]=Object.assign(Object.assign({},p),{id:Ks(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function yb(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,l=Cl(s,["challenge","allowCredentials"]),d=Ks(n).buffer,h=Object.assign(Object.assign({},l),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Ks(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function bb(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Vn(new Uint8Array(s.response.attestationObject)),clientDataJSON:Vn(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function _b(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,l=s.getClientExtensionResults(),d=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Vn(new Uint8Array(d.authenticatorData)),clientDataJSON:Vn(new Uint8Array(d.clientDataJSON)),signature:Vn(new Uint8Array(d.signature)),userHandle:d.userHandle?Vn(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Xg(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function xg(){var s,n;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function xb(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Tl("Browser returned unexpected credential type",n)}:{data:null,error:new Tl("Empty credential response",n)}}catch(n){return{data:null,error:fb({error:n,options:s})}}}async function wb(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Tl("Browser returned unexpected credential type",n)}:{data:null,error:new Tl("Empty credential response",n)}}catch(n){return{data:null,error:mb({error:n,options:s})}}}const Sb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},jb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Al(...s){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of s)if(d)for(const h in d){const f=d[h];if(f!==void 0)if(Array.isArray(f))l[h]=f;else if(r(f))l[h]=f;else if(n(f)){const g=l[h];n(g)?l[h]=Al(g,f):l[h]=Al(f)}else l[h]=f}return l}function kb(s,n){return Al(Sb,s,n||{})}function Eb(s,n){return Al(jb,s,n||{})}class Nb{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:l,signal:d},h){var f;try{const{data:g,error:v}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!g)return{data:null,error:v};const p=d??pb.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:b}=g.webauthn.credential_options.publicKey;if(!b.name){const x=l;if(x)b.name=`${b.id}:${x}`;else{const k=(await this.client.getUser()).data.user,S=((f=k?.user_metadata)===null||f===void 0?void 0:f.name)||k?.email||k?.id||"User";b.name=`${b.id}:${S}`}}b.displayName||(b.displayName=b.name)}switch(g.webauthn.type){case"create":{const b=kb(g.webauthn.credential_options.publicKey,h?.create),{data:x,error:E}=await xb({publicKey:b,signal:p});return x?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:x}},error:null}:{data:null,error:E}}case"request":{const b=Eb(g.webauthn.credential_options.publicKey,h?.request),{data:x,error:E}=await wb(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:b,signal:p}));return x?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:x}},error:null}:{data:null,error:E}}}}catch(g){return ie(g)?{data:null,error:g}:{data:null,error:new Yn("Unexpected error in challenge",g)}}}async _verify({challengeId:n,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new Ji("rpId is required for WebAuthn authentication")};try{if(!xg())return{data:null,error:new Yn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:l},signal:d},{request:h});if(!f)return{data:null,error:g};const{webauthn:v}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:v.type,rpId:r,rpOrigins:l,credential_response:v.credential_response}})}catch(f){return ie(f)?{data:null,error:f}:{data:null,error:new Yn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new Ji("rpId is required for WebAuthn registration")};try{if(!xg())return{data:null,error:new Yn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var x;return(x=b.data)===null||x===void 0?void 0:x.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===n&&E.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:v,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:d},{create:h});return v?this._verify({factorId:f.id,challengeId:v.challengeId,webauthn:{rpId:r,rpOrigins:l,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:p}}catch(f){return ie(f)?{data:null,error:f}:{data:null,error:new Yn("Unexpected error in register",f)}}}}cb();const Tb={url:k1,storageKey:E1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:N1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function wg(s,n,r){return await r()}const Us={};class Zi{get jwks(){var n,r;return(r=(n=Us[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Us[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:n})}constructor(n){var r,l,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},Tb),n);if(this.storageKey=h.storageKey,this.instanceID=(r=Zi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Zi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&Tt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new lb({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=Vg(h.fetch),this.lock=h.lock||wg,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&Tt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=ob:this.lock=wg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Nb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:Yg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bg(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=bg(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}h.skipAutoInitialize||this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Gg}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},l="none";if(Tt()&&(r=$1(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),Tt()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,l);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),R1(h)){const v=(n=h.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ie(r)?this._returnResult({error:r}):this._returnResult({error:new Yn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,l,d;try{const h=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:da}),{data:f,error:g}=h;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const v=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(h){if(ie(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(n){var r,l,d;try{let h;if("email"in n){const{email:b,password:x,options:E}=n;let k=null,S=null;this.flowType==="pkce"&&([k,S]=await Ms(this.storage,this.storageKey)),h=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:b,password:x,data:(r=E?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:k,code_challenge_method:S},xform:da})}else if("phone"in n){const{phone:b,password:x,options:E}=n;h=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:x,data:(l=E?.data)!==null&&l!==void 0?l:{},channel:(d=E?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:da})}else throw new xl("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const v=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(n){try{let r;if("email"in n){const{email:h,password:f,options:g}=n;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:vg})}else if("phone"in n){const{phone:h,password:f,options:g}=n;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:vg})}else throw new xl("You must provide either an email or phone number and a password");const{data:l,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const h=new Rs;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,l,d,h;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=n.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,l,d,h,f,g,v,p,b,x,E;let k,S;if("message"in n)k=n.message,S=n.signature;else{const{chain:O,wallet:z,statement:G,options:T}=n;let D;if(Tt())if(typeof z=="object")D=z;else{const ke=window;if("ethereum"in ke&&typeof ke.ethereum=="object"&&"request"in ke.ethereum&&typeof ke.ethereum.request=="function")D=ke.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=z}const K=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href),ne=await D.request({method:"eth_requestAccounts"}).then(ke=>ke).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ne||ne.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=Qg(ne[0]);let Z=(l=T?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!Z){const ke=await D.request({method:"eth_chainId"});Z=ub(ke)}const _e={domain:K.host,address:J,statement:G,uri:K.href,version:"1",chainId:Z,nonce:(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(h=T?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=T?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(v=T?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(p=T?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=T?.signInWithEthereum)===null||b===void 0?void 0:b.resources};k=hb(_e),S=await D.request({method:"personal_sign",params:[db(k),J]})}try{const{data:O,error:z}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:S},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(E=n.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:da});if(z)throw z;if(!O||!O.session||!O.user){const G=new Rs;return this._returnResult({data:{user:null,session:null},error:G})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:z})}catch(O){if(ie(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(n){var r,l,d,h,f,g,v,p,b,x,E,k;let S,O;if("message"in n)S=n.message,O=n.signature;else{const{chain:z,wallet:G,statement:T,options:D}=n;let K;if(Tt())if(typeof G=="object")K=G;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))K=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=G}const ne=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in K&&K.signIn){const J=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),T?{statement:T}:null));let Z;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")Z=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)Z=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)S=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),O=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${ne.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(d=(l=D?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=D?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((f=D?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((v=D?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((p=D?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((x=(b=D?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||x===void 0)&&x.length?["Resources",...D.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const J=await K.signMessage(new TextEncoder().encode(S),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=J}}try{const{data:z,error:G}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Vn(O)},!((E=n.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:da});if(G)throw G;if(!z||!z.session||!z.user){const T=new Rs;return this._returnResult({data:{user:null,session:null},error:T})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:G})}catch(z){if(ie(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async _exchangeCodeForSession(n){const r=await Gn(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new M1;const{data:h,error:f}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:da});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const g=new Rs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:f})}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(n){try{const{options:r,provider:l,token:d,access_token:h,nonce:f}=n,g=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:da}),{data:v,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!v||!v.session||!v.user){const b=new Rs;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:p})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,l,d,h,f;try{if("email"in n){const{email:g,options:v}=n;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Ms(this.storage,this.storageKey));const{error:x}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=v?.data)!==null&&r!==void 0?r:{},create_user:(l=v?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in n){const{phone:g,options:v}=n,{data:p,error:b}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=v?.data)!==null&&d!==void 0?d:{},create_user:(h=v?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(f=v?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:b})}throw new xl("You must provide either an email or phone number.")}catch(g){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(n){var r,l;try{let d,h;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,h=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:g}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:da});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const v=f.session,p=f.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(d){if(ie(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,l,d,h,f;try{let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ms(this.storage,this.storageKey));const p=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:v}),headers:this.headers,xform:sb});return!((h=p.data)===null||h===void 0)&&h.url&&Tt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;if(l)throw l;if(!r)throw new Qt;const{error:d}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(ie(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:l,type:d,options:h}=n,{error:f}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:l,type:d,options:h}=n,{data:f,error:g}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new xl("You must provide either an email or phone number and a type")}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Gn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<nu:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await Gn(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=ru()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=eb(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:xn}):await this._useSession(async r=>{var l,d,h;const{data:f,error:g}=r;if(g)throw g;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qt}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:xn})})}catch(r){if(ie(r))return su(r)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async l=>{const{data:d,error:h}=l;if(h)throw h;if(!d.session)throw new Qt;const f=d.session;let g=null,v=null;this.flowType==="pkce"&&n.email!=null&&([g,v]=await Ms(this.storage,this.storageKey));const{data:p,error:b}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:v}),jwt:f.access_token,xform:xn});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Qt;const r=Date.now()/1e3;let l=r,d=!0,h=null;const{payload:f}=Sl(n.access_token);if(f.exp&&(l=f.exp,d=l<=r),d){const{data:g,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:v}=await this._getUser(n.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});h={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(ie(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var l;if(!n){const{data:f,error:g}=r;if(g)throw g;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new Qt;const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Tt())throw new wl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new wl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new ug("No code detected.");const{data:T,error:D}=await this._exchangeCodeForSession(n.code);if(D)throw D;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:h,refresh_token:f,expires_in:g,expires_at:v,token_type:p}=n;if(!h||!g||!f||!p)throw new wl("No session defined in URL");const b=Math.round(Date.now()/1e3),x=parseInt(g);let E=b+x;v&&(E=parseInt(v));const k=E-b;k*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${x}s`);const S=E-x;b-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,E,b):b-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,E,b);const{data:O,error:z}=await this._getUser(h);if(z)throw z;const G={provider_token:l,provider_refresh_token:d,access_token:h,expires_in:x,expires_at:E,refresh_token:f,token_type:p,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:G,redirectType:n.type},error:null})}catch(l){if(ie(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Gn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h&&!su(h))return this._returnResult({error:h});const f=(l=d.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:g}=await this.admin.signOut(f,n);if(g&&!(C1(g)&&(g.status===404||g.status===401||g.status===403)||su(g)))return this._returnResult({error:g})}return n!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=H1(),l={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async r=>{var l,d;try{const{data:{session:h},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",n,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",h),console.error(h)}})}async resetPasswordForEmail(n,r={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await Ms(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var n;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:l,error:d}=await this._useSession(async h=>{var f,g,v,p,b;const{data:x,error:E}=h;if(E)throw E;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",k,{headers:this.headers,jwt:(b=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(d)throw d;return Tt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:n.provider,url:l?.url},error:null})}catch(l){if(ie(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var l;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:f,provider:g,token:v,access_token:p,nonce:b}=n,x=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=h?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:v,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:da}),{data:E,error:k}=x;return k?this._returnResult({data:{user:null,session:null},error:k}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new Rs}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:k}))}catch(d){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ie(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)throw f;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await P1(async d=>(d>0&&await K1(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:da})),(d,h)=>{const f=200*Math.pow(2,d);return h&&iu(h)&&Date.now()+f-l<qs})}catch(l){if(this._debug(r,"error",l),ie(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",l),Tt()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await Gn(this.storage,this.storageKey);if(d&&this.userStorage){let f=await Gn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await Hs(this.userStorage,this.storageKey+"-user",f)),d.user=(n=f?.user)!==null&&n!==void 0?n:ru()}else if(d&&!d.user&&!d.user){const f=await Gn(this.storage,this.storageKey+"-user");f&&f?.user?(d.user=f.user,await Nt(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,d)):d.user=ru()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<nu;if(this._debug(l,`session has${h?"":" not"} expired with margin of ${nu}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),iu(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(d.access_token);!g&&f?.user?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var r,l;if(!n)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Dl;const{data:h,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!h.session)throw new Qt;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(d,"error",h),ie(h)){const f={data:null,error:h};return iu(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,l=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,r)}catch(v){h.push(v)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=gg(d);await Hs(this.storage,this.storageKey,h)}else{const d=gg(r);await Hs(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-n)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${qs}ms, refresh threshold is ${bu} ticks`),d<=bu&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ig)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,l){const d=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[h,f]=await Ms(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(g.toString())}if(l?.queryParams){const h=new URLSearchParams(l.queryParams);d.push(h.toString())}return l?.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await ge(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:p}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(n.factorType==="totp"&&v.type==="totp"&&(!((d=v?.totp)===null||d===void 0)&&d.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?bb(n.webauthn.credential_response):_b(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:v}=await ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:v}))})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:vb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:yb(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(n=r?.factors)!==null&&n!==void 0?n:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,l,d,h;if(n)try{const{payload:k}=Sl(n);let S=null;k.aal&&(S=k.aal);let O=S;const{data:{user:z},error:G}=await this.getUser(n);if(G)return this._returnResult({data:null,error:G});((l=(r=z?.factors)===null||r===void 0?void 0:r.filter(K=>K.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(O="aal2");const D=k.amr||[];return{data:{currentLevel:S,nextLevel:O,currentAuthenticationMethods:D},error:null}}catch(k){if(ie(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:f},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=Sl(f.access_token);let p=null;v.aal&&(p=v.aal);let b=p;((h=(d=f.user.factors)===null||d===void 0?void 0:d.filter(k=>k.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(b="aal2");const E=v.amr||[];return{data:{currentLevel:p,nextLevel:b,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Qt});const f=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&Tt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(ie(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Qt});const f=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&Tt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(ie(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;return l?this._returnResult({data:null,error:l}):r?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Qt})})}catch(r){if(ie(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let l=r.keys.find(g=>g.kid===n);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(g=>g.kid===n),l&&this.jwks_cached_at+A1>d)return l;const{data:h,error:f}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,l=h.keys.find(g=>g.kid===n),!l)?null:l}async getClaims(n,r={}){try{let l=n;if(!l){const{data:k,error:S}=await this.getSession();if(S||!k.session)return this._returnResult({data:null,error:S});l=k.session.access_token}const{header:d,payload:h,signature:f,raw:{header:g,payload:v}}=Sl(l);r?.allowExpired||Z1(h.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:k}=await this.getUser(l);if(k)throw k;return{data:{claims:h,header:d,signature:f},error:null}}const b=W1(d.alg),x=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,x,f,B1(`${g}.${v}`)))throw new wu("Invalid JWT signature");return{data:{claims:h,header:d,signature:f},error:null}}catch(l){if(ie(l))return this._returnResult({data:null,error:l});throw l}}}Zi.nextInstanceID={};const Ab=Zi,Ob="2.97.0";let $i="";typeof Deno<"u"?$i="deno":typeof document<"u"?$i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$i="react-native":$i="node";const Cb={"X-Client-Info":`supabase-js-${$i}/${Ob}`},Rb={headers:Cb},Mb={schema:"public"},Db={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Lb={};function Wi(s){"@babel/helpers - typeof";return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wi(s)}function Ub(s,n){if(Wi(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Wi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function zb(s){var n=Ub(s,"string");return Wi(n)=="symbol"?n:n+""}function Bb(s,n,r){return(n=zb(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Sg(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function lt(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Sg(Object(r),!0).forEach(function(l){Bb(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Sg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const qb=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Hb=()=>Headers,$b=(s,n,r)=>{const l=qb(r),d=Hb();return async(h,f)=>{var g;const v=(g=await n())!==null&&g!==void 0?g:s;let p=new d(f?.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${v}`),l(h,lt(lt({},f),{},{headers:p}))}};function Gb(s){return s.endsWith("/")?s:s+"/"}function Kb(s,n){var r,l;const{db:d,auth:h,realtime:f,global:g}=s,{db:v,auth:p,realtime:b,global:x}=n,E={db:lt(lt({},v),d),auth:lt(lt({},p),h),realtime:lt(lt({},b),f),storage:{},global:lt(lt(lt({},x),g),{},{headers:lt(lt({},(r=x?.headers)!==null&&r!==void 0?r:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?E.accessToken=s.accessToken:delete E.accessToken,E}function Pb(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Gb(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yb=class extends Ab{constructor(s){super(s)}},Vb=class{constructor(s,n,r){var l,d;this.supabaseUrl=s,this.supabaseKey=n;const h=Pb(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:Mb,realtime:Lb,auth:lt(lt({},Db),{},{storageKey:f}),global:Rb},v=Kb(r??{},g);if(this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(d=v.global.headers)!==null&&d!==void 0?d:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=v.auth)!==null&&p!==void 0?p:{},this.headers,v.global.fetch)}this.fetch=$b(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new Cy(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch,timeout:v.db.timeout,urlLengthLimit:v.db.urlLengthLimit}),this.storage=new j1(this.storageUrl.href,this.headers,this.fetch,r?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Sy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(n=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,storageKey:h,flowType:f,lock:g,debug:v,throwOnError:p},b,x){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yb({url:this.authUrl.href,headers:lt(lt({},E),b),storageKey:h,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,flowType:f,lock:g,debug:v,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Qy(this.realtimeUrl.href,lt(lt({},s),{},{params:lt(lt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ib=(s,n,r)=>new Vb(s,n,r);function Qb(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Qb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pe=Ib("https://uaplcqesvzvqljbqkthv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVhcGxjcWVzdnp2cWxqYnFrdGh2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0NjM5NTgsImV4cCI6MjA4NzAzOTk1OH0.JsFrrDvHqSpkrm3Qjk5E5w82JOTK3ZeBMtlPzD8Lahs");function Xb({children:s}){const[n,r]=$.useState(null),[l,d]=$.useState(!0);$.useEffect(()=>{Pe.auth.getSession().then(({data:{session:p}})=>{r(p?.user??null),d(!1)});const{data:{subscription:v}}=Pe.auth.onAuthStateChange((p,b)=>{r(b?.user??null)});return()=>v.unsubscribe()},[]);async function h(v,p){const{data:b,error:x}=await Pe.auth.signUp({email:v,password:p});if(x)throw x;return b}async function f(v,p){const{data:b,error:x}=await Pe.auth.signInWithPassword({email:v,password:p});if(x)throw x;return b}async function g(){const{error:v}=await Pe.auth.signOut();if(v)throw v}return o.jsx(kg.Provider,{value:{user:n,loading:l,signUp:h,signIn:f,signOut:g},children:s})}function Uu(s){return s?typeof s=="number"?new Date(s).toISOString():s:new Date().toISOString()}function zu(s){return s?typeof s=="string"?new Date(s).getTime():s:Date.now()}async function Jb(s){const{data:n,error:r}=await Pe.from("profiles").select("*").eq("id",s).single();return r?(console.error("fetchProfile:",r),null):Wb(n)}async function Zb(s,n){const r=Fb(s,n),{error:l}=await Pe.from("profiles").upsert(r);l&&console.error("upsertProfile:",l)}function Wb(s){return s?{kcal:s.calorie_target,protein:s.protein_target,maintenanceKcal:s.maintenance_kcal,userName:s.user_name,weightLossTarget:s.weight_loss_target,onboardingComplete:s.onboarding_complete,age:s.age,sex:s.sex,height:s.height,weight:s.weight,activityLevel:s.activity_level,goal:s.goal,intensity:s.intensity,waterTargetLiters:s.water_target_liters}:null}function Fb(s,n){return{id:s,calorie_target:n.kcal,protein_target:n.protein,maintenance_kcal:n.maintenanceKcal,user_name:n.userName,weight_loss_target:n.weightLossTarget,onboarding_complete:n.onboardingComplete,age:n.age,sex:n.sex,height:n.height,weight:n.weight,activity_level:n.activityLevel,goal:n.goal,intensity:n.intensity,water_target_liters:n.waterTargetLiters}}async function e_(s){const{data:n,error:r}=await Pe.from("entries").select("*").eq("user_id",s).order("timestamp",{ascending:!0});return r?(console.error("fetchEntries:",r),[]):n.map(s_)}async function t_(s,n){const r=Jg(s,n),{error:l}=await Pe.from("entries").insert(r);l&&console.error("insertEntry:",l)}async function a_(s){const{id:n,...r}=Jg(null,s),{error:l}=await Pe.from("entries").update(r).eq("id",n);l&&console.error("updateEntry:",l)}async function n_(s){const{error:n}=await Pe.from("entries").delete().eq("id",s);n&&console.error("deleteEntry:",n)}function s_(s){return{id:s.id,name:s.name,kcal:s.kcal,protein:s.protein,meal:s.meal,servingSize:s.serving_size,servingUnit:s.serving_unit,dateKey:s.date_key,timestamp:zu(s.timestamp),ingredients:s.ingredients,fromLeftoverId:s.from_leftover_id,recipeId:s.recipe_id}}function Jg(s,n){const r={id:n.id,name:n.name||"Food",kcal:n.kcal??0,protein:n.protein??0,meal:n.meal||"Snack",serving_size:n.servingSize??null,serving_unit:n.servingUnit||"g",date_key:n.dateKey||new Date().toISOString().slice(0,10),timestamp:Uu(n.timestamp),ingredients:n.ingredients||null,from_leftover_id:n.fromLeftoverId||null,recipe_id:n.recipeId||null};return s&&(r.user_id=s),r}async function i_(s){const{data:n,error:r}=await Pe.from("exercise_logs").select("*").eq("user_id",s).order("timestamp",{ascending:!0});return r?(console.error("fetchExerciseLogs:",r),[]):n.map(o_)}async function r_(s,n){const r=c_(s,n),{error:l}=await Pe.from("exercise_logs").insert(r);l&&console.error("insertExerciseLog:",l)}async function l_(s){const{error:n}=await Pe.from("exercise_logs").delete().eq("id",s);n&&console.error("deleteExerciseLog:",n)}function o_(s){return{id:s.id,name:s.name,caloriesBurned:s.calories_burned,duration:s.duration_minutes??s.duration,durationMinutes:s.duration_minutes,type:s.type,label:s.label||s.name,intensity:s.intensity,weightUsed:s.weight_used,dateKey:s.date_key,timestamp:zu(s.timestamp)}}function c_(s,n){const r={id:n.id,name:n.name||n.label||n.type||"Exercise",calories_burned:n.caloriesBurned??0,duration_minutes:n.durationMinutes??n.duration??null,type:n.type||null,label:n.label||null,intensity:n.intensity||null,weight_used:n.weightUsed||null,date_key:n.dateKey||new Date().toISOString().slice(0,10),timestamp:Uu(n.timestamp)};return s&&(r.user_id=s),r}async function u_(s){const{data:n,error:r}=await Pe.from("water_logs").select("*").eq("user_id",s).order("timestamp",{ascending:!0});return r?(console.error("fetchWaterLogs:",r),[]):n.map(f_)}async function d_(s,n){const r=m_(s,n),{error:l}=await Pe.from("water_logs").insert(r);l&&console.error("insertWaterLog:",l)}async function h_(s){const{error:n}=await Pe.from("water_logs").delete().eq("id",s);n&&console.error("deleteWaterLog:",n)}function f_(s){return{id:s.id,amountLiters:s.amount_ml!=null?s.amount_ml/1e3:0,dateKey:s.date_key,timestamp:zu(s.timestamp)}}function m_(s,n){const r={id:n.id,amount_ml:Math.round((n.amountLiters||0)*1e3),date_key:n.dateKey||new Date().toISOString().slice(0,10),timestamp:Uu(n.timestamp)};return s&&(r.user_id=s),r}async function g_(s){const{data:n,error:r}=await Pe.from("recipes").select("*").eq("user_id",s).order("created_at",{ascending:!1});return r?(console.error("fetchRecipes:",r),[]):n.map(b_)}async function p_(s,n){const r=Zg(s,n),{error:l}=await Pe.from("recipes").insert(r);l&&console.error("insertRecipe:",l)}async function v_(s){const{id:n,...r}=Zg(null,s),{error:l}=await Pe.from("recipes").update(r).eq("id",n);l&&console.error("updateRecipe:",l)}async function y_(s){const{error:n}=await Pe.from("recipes").delete().eq("id",s);n&&console.error("deleteRecipe:",n)}function b_(s){return{id:s.id,name:s.name,ingredients:s.ingredients,totalKcal:s.total_kcal,totalProtein:s.total_protein,servings:s.servings,servingsYield:s.servings_yield??s.servings,perServing:{kcal:s.per_serving_kcal??(s.servings?Math.round(s.total_kcal/s.servings):s.total_kcal),protein:s.per_serving_protein??(s.servings?Math.round(s.total_protein/s.servings*10)/10:s.total_protein)},notes:s.notes}}function Zg(s,n){const r={id:n.id,name:n.name||"Recipe",ingredients:n.ingredients||[],total_kcal:n.totalKcal??0,total_protein:n.totalProtein??0,servings:n.servings??n.servingsYield??1,servings_yield:n.servingsYield??n.servings??1,per_serving_kcal:n.perServing?.kcal??0,per_serving_protein:n.perServing?.protein??0,notes:n.notes||null};return s&&(r.user_id=s),r}async function __(s){const{data:n,error:r}=await Pe.from("leftovers").select("*").eq("user_id",s).order("created_at",{ascending:!1});return r?(console.error("fetchLeftovers:",r),[]):n.map(j_)}async function x_(s,n){const r=Wg(s,n),{error:l}=await Pe.from("leftovers").insert(r);l&&console.error("insertLeftover:",l)}async function w_(s){const{id:n,...r}=Wg(null,s),{error:l}=await Pe.from("leftovers").update(r).eq("id",n);l&&console.error("updateLeftover:",l)}async function S_(s){const{error:n}=await Pe.from("leftovers").delete().eq("id",s);n&&console.error("deleteLeftover:",n)}function j_(s){return{id:s.id,name:s.name,remainingServings:s.remaining_servings??s.servings_left,totalServings:s.total_servings??s.remaining_servings??s.servings_left,perServing:{kcal:s.per_serving_kcal??s.kcal,protein:s.per_serving_protein??s.protein},dateKey:s.date_key,dateCooked:s.date_cooked,recipeId:s.recipe_id}}function Wg(s,n){const r={id:n.id,name:n.name||"Leftover",kcal:n.perServing?.kcal??n.kcal??0,protein:n.perServing?.protein??n.protein??0,remaining_servings:n.remainingServings??1,total_servings:n.totalServings??n.remainingServings??1,servings_left:n.remainingServings??1,per_serving_kcal:n.perServing?.kcal??0,per_serving_protein:n.perServing?.protein??0,date_key:n.dateKey||n.dateCooked||new Date().toISOString().slice(0,10),date_cooked:n.dateCooked||null,recipe_id:n.recipeId||null};return s&&(r.user_id=s),r}async function k_(s){const{data:n,error:r}=await Pe.from("custom_meals").select("*").eq("user_id",s).order("created_at",{ascending:!1});return r?(console.error("fetchCustomMeals:",r),[]):n.map(A_)}async function E_(s,n){const r=Fg(s,n),{error:l}=await Pe.from("custom_meals").insert(r);l&&console.error("insertCustomMeal:",l)}async function N_(s){const{id:n,...r}=Fg(null,s),{error:l}=await Pe.from("custom_meals").update(r).eq("id",n);l&&console.error("updateCustomMeal:",l)}async function T_(s){const{error:n}=await Pe.from("custom_meals").delete().eq("id",s);n&&console.error("deleteCustomMeal:",n)}function A_(s){return{id:s.id,name:s.name,ingredients:s.ingredients,kcal:s.total_kcal,protein:s.total_protein}}function Fg(s,n){const r={name:n.name||"Meal",ingredients:n.ingredients||[],total_kcal:n.kcal??0,total_protein:n.protein??0};return n.id&&(r.id=n.id),s&&(r.user_id=s),r}const Bu={kcal:2e3,protein:120,maintenanceKcal:2e3,userName:"",weightLossTarget:5,onboardingComplete:!1};function O_(){return{targets:Bu,entries:[],exerciseLogs:[],waterLogs:[],recipes:[],leftovers:[],customMeals:[],currentView:_a.DASHBOARD,editingEntry:null}}function C_(s,n){switch(n.type){case"INIT_DATA":return{...s,targets:n.payload.targets||Bu,entries:n.payload.entries||[],exerciseLogs:n.payload.exerciseLogs||[],waterLogs:n.payload.waterLogs||[],recipes:n.payload.recipes||[],leftovers:n.payload.leftovers||[],customMeals:n.payload.customMeals||[],currentView:_a.DASHBOARD,editingEntry:null};case"SET_TARGETS":return{...s,targets:{...s.targets,...n.payload}};case"ADD_ENTRY":return{...s,entries:[...s.entries,n.payload]};case"UPDATE_ENTRY":return{...s,entries:s.entries.map(r=>r.id===n.payload.id?n.payload:r)};case"DELETE_ENTRY":return{...s,entries:s.entries.filter(r=>r.id!==n.payload)};case"SET_VIEW":return{...s,currentView:n.payload,editingEntry:null};case"SET_EDITING_ENTRY":return{...s,editingEntry:n.payload};case"ADD_EXERCISE":return{...s,exerciseLogs:[...s.exerciseLogs,n.payload]};case"DELETE_EXERCISE":return{...s,exerciseLogs:s.exerciseLogs.filter(r=>r.id!==n.payload)};case"ADD_WATER":return{...s,waterLogs:[...s.waterLogs,n.payload]};case"DELETE_WATER":return{...s,waterLogs:s.waterLogs.filter(r=>r.id!==n.payload)};case"ADD_RECIPE":return{...s,recipes:[...s.recipes,n.payload]};case"UPDATE_RECIPE":return{...s,recipes:s.recipes.map(r=>r.id===n.payload.id?n.payload:r)};case"DELETE_RECIPE":return{...s,recipes:s.recipes.filter(r=>r.id!==n.payload)};case"ADD_LEFTOVER":return{...s,leftovers:[...s.leftovers,n.payload]};case"UPDATE_LEFTOVER":return{...s,leftovers:s.leftovers.map(r=>r.id===n.payload.id?n.payload:r)};case"DELETE_LEFTOVER":return{...s,leftovers:s.leftovers.filter(r=>r.id!==n.payload)};case"SET_CUSTOM_MEALS":return{...s,customMeals:n.payload};case"ADD_CUSTOM_MEAL":return{...s,customMeals:[n.payload,...s.customMeals]};case"UPDATE_CUSTOM_MEAL":return{...s,customMeals:s.customMeals.map(r=>r.id===n.payload.id?n.payload:r)};case"DELETE_CUSTOM_MEAL":return{...s,customMeals:s.customMeals.filter(r=>r.id!==n.payload)};case"IMPORT_DATA":return{...s,targets:n.payload.targets,entries:n.payload.entries,recipes:n.payload.recipes||s.recipes,leftovers:n.payload.leftovers||s.leftovers};default:return s}}function R_({children:s}){const{user:n}=Ol(),[r,l]=$.useReducer(C_,null,O_),[d,h]=$.useState(!0),f=$.useRef(r),g=$.useRef(null);$.useEffect(()=>{f.current=r}),$.useEffect(()=>{let p=!1;return(async()=>{if(!n){h(!1);return}h(!0);const[b,x,E,k,S,O,z]=await Promise.all([Jb(n.id),e_(n.id),i_(n.id),u_(n.id),g_(n.id),__(n.id),k_(n.id)]);p||(l({type:"INIT_DATA",payload:{targets:b||Bu,entries:x,exerciseLogs:E,waterLogs:k,recipes:S,leftovers:O,customMeals:z}}),h(!1))})(),()=>{p=!0}},[n]);const v=$.useCallback(p=>{if(!n){l(p);return}switch(p.type){case"SET_TARGETS":{l(p),clearTimeout(g.current),g.current=setTimeout(()=>{Zb(n.id,f.current.targets)},500);break}case"ADD_ENTRY":{l(p),t_(n.id,p.payload);break}case"UPDATE_ENTRY":{l(p),a_(p.payload);break}case"DELETE_ENTRY":{l(p),n_(p.payload);break}case"ADD_EXERCISE":{l(p),r_(n.id,p.payload);break}case"DELETE_EXERCISE":{l(p),l_(p.payload);break}case"ADD_WATER":{l(p),d_(n.id,p.payload);break}case"DELETE_WATER":{l(p),h_(p.payload);break}case"ADD_RECIPE":{l(p),p_(n.id,p.payload);break}case"UPDATE_RECIPE":{l(p),v_(p.payload);break}case"DELETE_RECIPE":{l(p),y_(p.payload);break}case"ADD_LEFTOVER":{l(p),x_(n.id,p.payload);break}case"UPDATE_LEFTOVER":{l(p),w_(p.payload);break}case"DELETE_LEFTOVER":{l(p),S_(p.payload);break}case"ADD_CUSTOM_MEAL":{l(p),E_(n.id,p.payload);break}case"UPDATE_CUSTOM_MEAL":{l(p),N_(p.payload);break}case"DELETE_CUSTOM_MEAL":{l(p),T_(p.payload);break}default:l(p)}},[n]);return o.jsx(jg.Provider,{value:{state:r,dispatch:v,loading:d},children:s})}wv.createRoot(document.getElementById("root")).render(o.jsx($.StrictMode,{children:o.jsx(Xb,{children:o.jsx(R_,{children:o.jsx(by,{})})})}));
