(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();var au={exports:{}},Yi={};var Hm;function _v(){if(Hm)return Yi;Hm=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(l,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var g in d)g!=="key"&&(h[g]=d[g])}else h=d;return d=h.ref,{$$typeof:s,type:l,key:f,ref:d!==void 0?d:null,props:h}}return Yi.Fragment=a,Yi.jsx=r,Yi.jsxs=r,Yi}var $m;function xv(){return $m||($m=1,au.exports=_v()),au.exports}var o=xv(),su={exports:{}},Se={};var Pm;function wv(){if(Pm)return Se;Pm=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),k=Symbol.iterator;function S(_){return _===null||typeof _!="object"?null:(_=k&&_[k]||_["@@iterator"],typeof _=="function"?_:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function q(_,$,J){this.props=_,this.context=$,this.refs=T,this.updater=J||j}q.prototype.isReactComponent={},q.prototype.setState=function(_,$){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,$,"setState")},q.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function O(){}O.prototype=q.prototype;function B(_,$,J){this.props=_,this.context=$,this.refs=T,this.updater=J||j}var X=B.prototype=new O;X.constructor=B,A(X,q.prototype),X.isPureReactComponent=!0;var ce=Array.isArray;function F(){}var W={H:null,A:null,T:null,S:null},ue=Object.prototype.hasOwnProperty;function _e(_,$,J){var Q=J.ref;return{$$typeof:s,type:_,key:$,ref:Q!==void 0?Q:null,props:J}}function V(_,$){return _e(_.type,$,_.props)}function Z(_){return typeof _=="object"&&_!==null&&_.$$typeof===s}function L(_){var $={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(J){return $[J]})}var H=/\/+/g;function te(_,$){return typeof _=="object"&&_!==null&&_.key!=null?L(""+_.key):$.toString(36)}function ne(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(F,F):(_.status="pending",_.then(function($){_.status==="pending"&&(_.status="fulfilled",_.value=$)},function($){_.status==="pending"&&(_.status="rejected",_.reason=$)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function C(_,$,J,Q,ye){var xe=typeof _;(xe==="undefined"||xe==="boolean")&&(_=null);var de=!1;if(_===null)de=!0;else switch(xe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(_.$$typeof){case s:case a:de=!0;break;case b:return de=_._init,C(de(_._payload),$,J,Q,ye)}}if(de)return ye=ye(_),de=Q===""?"."+te(_,0):Q,ce(ye)?(J="",de!=null&&(J=de.replace(H,"$&/")+"/"),C(ye,$,J,"",function(ke){return ke})):ye!=null&&(Z(ye)&&(ye=V(ye,J+(ye.key==null||_&&_.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+de)),$.push(ye)),1;de=0;var Y=Q===""?".":Q+":";if(ce(_))for(var je=0;je<_.length;je++)Q=_[je],xe=Y+te(Q,je),de+=C(Q,$,J,xe,ye);else if(je=S(_),typeof je=="function")for(_=je.call(_),je=0;!(Q=_.next()).done;)Q=Q.value,xe=Y+te(Q,je++),de+=C(Q,$,J,xe,ye);else if(xe==="object"){if(typeof _.then=="function")return C(ne(_),$,J,Q,ye);throw $=String(_),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return de}function I(_,$,J){if(_==null)return _;var Q=[],ye=0;return C(_,Q,"","",function(xe){return $.call(J,xe,ye++)}),Q}function ee(_){if(_._status===-1){var $=_._result;$=$(),$.then(function(J){(_._status===0||_._status===-1)&&(_._status=1,_._result=J)},function(J){(_._status===0||_._status===-1)&&(_._status=2,_._result=J)}),_._status===-1&&(_._status=0,_._result=$)}if(_._status===1)return _._result.default;throw _._result}var ge=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},le={map:I,forEach:function(_,$,J){I(_,function(){$.apply(this,arguments)},J)},count:function(_){var $=0;return I(_,function(){$++}),$},toArray:function(_){return I(_,function($){return $})||[]},only:function(_){if(!Z(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Se.Activity=w,Se.Children=le,Se.Component=q,Se.Fragment=r,Se.Profiler=d,Se.PureComponent=B,Se.StrictMode=l,Se.Suspense=v,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Se.__COMPILER_RUNTIME={__proto__:null,c:function(_){return W.H.useMemoCache(_)}},Se.cache=function(_){return function(){return _.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(_,$,J){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var Q=A({},_.props),ye=_.key;if($!=null)for(xe in $.key!==void 0&&(ye=""+$.key),$)!ue.call($,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&$.ref===void 0||(Q[xe]=$[xe]);var xe=arguments.length-2;if(xe===1)Q.children=J;else if(1<xe){for(var de=Array(xe),Y=0;Y<xe;Y++)de[Y]=arguments[Y+2];Q.children=de}return _e(_.type,ye,Q)},Se.createContext=function(_){return _={$$typeof:f,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:h,_context:_},_},Se.createElement=function(_,$,J){var Q,ye={},xe=null;if($!=null)for(Q in $.key!==void 0&&(xe=""+$.key),$)ue.call($,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ye[Q]=$[Q]);var de=arguments.length-2;if(de===1)ye.children=J;else if(1<de){for(var Y=Array(de),je=0;je<de;je++)Y[je]=arguments[je+2];ye.children=Y}if(_&&_.defaultProps)for(Q in de=_.defaultProps,de)ye[Q]===void 0&&(ye[Q]=de[Q]);return _e(_,xe,ye)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(_){return{$$typeof:g,render:_}},Se.isValidElement=Z,Se.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:ee}},Se.memo=function(_,$){return{$$typeof:p,type:_,compare:$===void 0?null:$}},Se.startTransition=function(_){var $=W.T,J={};W.T=J;try{var Q=_(),ye=W.S;ye!==null&&ye(J,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(F,ge)}catch(xe){ge(xe)}finally{$!==null&&J.types!==null&&($.types=J.types),W.T=$}},Se.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Se.use=function(_){return W.H.use(_)},Se.useActionState=function(_,$,J){return W.H.useActionState(_,$,J)},Se.useCallback=function(_,$){return W.H.useCallback(_,$)},Se.useContext=function(_){return W.H.useContext(_)},Se.useDebugValue=function(){},Se.useDeferredValue=function(_,$){return W.H.useDeferredValue(_,$)},Se.useEffect=function(_,$){return W.H.useEffect(_,$)},Se.useEffectEvent=function(_){return W.H.useEffectEvent(_)},Se.useId=function(){return W.H.useId()},Se.useImperativeHandle=function(_,$,J){return W.H.useImperativeHandle(_,$,J)},Se.useInsertionEffect=function(_,$){return W.H.useInsertionEffect(_,$)},Se.useLayoutEffect=function(_,$){return W.H.useLayoutEffect(_,$)},Se.useMemo=function(_,$){return W.H.useMemo(_,$)},Se.useOptimistic=function(_,$){return W.H.useOptimistic(_,$)},Se.useReducer=function(_,$,J){return W.H.useReducer(_,$,J)},Se.useRef=function(_){return W.H.useRef(_)},Se.useState=function(_){return W.H.useState(_)},Se.useSyncExternalStore=function(_,$,J){return W.H.useSyncExternalStore(_,$,J)},Se.useTransition=function(){return W.H.useTransition()},Se.version="19.2.4",Se}var Km;function Ru(){return Km||(Km=1,su.exports=wv()),su.exports}var U=Ru(),iu={exports:{}},Vi={},ru={exports:{}},lu={};var Gm;function jv(){return Gm||(Gm=1,(function(s){function a(C,I){var ee=C.length;C.push(I);e:for(;0<ee;){var ge=ee-1>>>1,le=C[ge];if(0<d(le,I))C[ge]=I,C[ee]=le,ee=ge;else break e}}function r(C){return C.length===0?null:C[0]}function l(C){if(C.length===0)return null;var I=C[0],ee=C.pop();if(ee!==I){C[0]=ee;e:for(var ge=0,le=C.length,_=le>>>1;ge<_;){var $=2*(ge+1)-1,J=C[$],Q=$+1,ye=C[Q];if(0>d(J,ee))Q<le&&0>d(ye,J)?(C[ge]=ye,C[Q]=ee,ge=Q):(C[ge]=J,C[$]=ee,ge=$);else if(Q<le&&0>d(ye,ee))C[ge]=ye,C[Q]=ee,ge=Q;else break e}}return I}function d(C,I){var ee=C.sortIndex-I.sortIndex;return ee!==0?ee:C.id-I.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var v=[],p=[],b=1,w=null,k=3,S=!1,j=!1,A=!1,T=!1,q=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function X(C){for(var I=r(p);I!==null;){if(I.callback===null)l(p);else if(I.startTime<=C)l(p),I.sortIndex=I.expirationTime,a(v,I);else break;I=r(p)}}function ce(C){if(A=!1,X(C),!j)if(r(v)!==null)j=!0,F||(F=!0,L());else{var I=r(p);I!==null&&ne(ce,I.startTime-C)}}var F=!1,W=-1,ue=5,_e=-1;function V(){return T?!0:!(s.unstable_now()-_e<ue)}function Z(){if(T=!1,F){var C=s.unstable_now();_e=C;var I=!0;try{e:{j=!1,A&&(A=!1,O(W),W=-1),S=!0;var ee=k;try{t:{for(X(C),w=r(v);w!==null&&!(w.expirationTime>C&&V());){var ge=w.callback;if(typeof ge=="function"){w.callback=null,k=w.priorityLevel;var le=ge(w.expirationTime<=C);if(C=s.unstable_now(),typeof le=="function"){w.callback=le,X(C),I=!0;break t}w===r(v)&&l(v),X(C)}else l(v);w=r(v)}if(w!==null)I=!0;else{var _=r(p);_!==null&&ne(ce,_.startTime-C),I=!1}}break e}finally{w=null,k=ee,S=!1}I=void 0}}finally{I?L():F=!1}}}var L;if(typeof B=="function")L=function(){B(Z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,te=H.port2;H.port1.onmessage=Z,L=function(){te.postMessage(null)}}else L=function(){q(Z,0)};function ne(C,I){W=q(function(){C(s.unstable_now())},I)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(C){C.callback=null},s.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<C?Math.floor(1e3/C):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(C){switch(k){case 1:case 2:case 3:var I=3;break;default:I=k}var ee=k;k=I;try{return C()}finally{k=ee}},s.unstable_requestPaint=function(){T=!0},s.unstable_runWithPriority=function(C,I){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var ee=k;k=C;try{return I()}finally{k=ee}},s.unstable_scheduleCallback=function(C,I,ee){var ge=s.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ge+ee:ge):ee=ge,C){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ee+le,C={id:b++,callback:I,priorityLevel:C,startTime:ee,expirationTime:le,sortIndex:-1},ee>ge?(C.sortIndex=ee,a(p,C),r(v)===null&&C===r(p)&&(A?(O(W),W=-1):A=!0,ne(ce,ee-ge))):(C.sortIndex=le,a(v,C),j||S||(j=!0,F||(F=!0,L()))),C},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(C){var I=k;return function(){var ee=k;k=I;try{return C.apply(this,arguments)}finally{k=ee}}}})(lu)),lu}var Ym;function Sv(){return Ym||(Ym=1,ru.exports=jv()),ru.exports}var ou={exports:{}},Ot={};var Vm;function kv(){if(Vm)return Ot;Vm=1;var s=Ru();function a(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(v,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:v,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Ot.createPortal=function(v,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return h(v,p,null,b)},Ot.flushSync=function(v){var p=f.T,b=l.p;try{if(f.T=null,l.p=2,v)return v()}finally{f.T=p,l.p=b,l.d.f()}},Ot.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(v,p))},Ot.prefetchDNS=function(v){typeof v=="string"&&l.d.D(v)},Ot.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:k,fetchPriority:S}):b==="script"&&l.d.X(v,{crossOrigin:w,integrity:k,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ot.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);l.d.M(v,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(v)},Ot.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=g(b,p.crossOrigin);l.d.L(v,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ot.preloadModule=function(v,p){if(typeof v=="string")if(p){var b=g(p.as,p.crossOrigin);l.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(v)},Ot.requestFormReset=function(v){l.d.r(v)},Ot.unstable_batchedUpdates=function(v,p){return v(p)},Ot.useFormState=function(v,p,b){return f.H.useFormState(v,p,b)},Ot.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ot.version="19.2.4",Ot}var Im;function Ev(){if(Im)return ou.exports;Im=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),ou.exports=kv(),ou.exports}var Xm;function Tv(){if(Xm)return Vi;Xm=1;var s=Sv(),a=Ru(),r=Ev();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var u=c.alternate;if(u===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===n)return v(c),e;if(u===i)return v(c),t;u=u.sibling}throw Error(l(188))}if(n.return!==i.return)n=c,i=u;else{for(var m=!1,y=c.child;y;){if(y===n){m=!0,n=c,i=u;break}if(y===i){m=!0,i=c,n=u;break}y=y.sibling}if(!m){for(y=u.child;y;){if(y===n){m=!0,n=u,i=c;break}if(y===i){m=!0,i=u,n=c;break}y=y.sibling}if(!m)throw Error(l(189))}}if(n.alternate!==i)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),B=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),_e=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var H=Symbol.for("react.client.reference");function te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===H?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case q:return"Profiler";case T:return"StrictMode";case ce:return"Suspense";case F:return"SuspenseList";case _e:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case B:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case X:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return t=e.displayName||null,t!==null?t:te(e.type)||"Memo";case ue:t=e._payload,e=e._init;try{return te(e(t))}catch{}}return null}var ne=Array.isArray,C=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ge=[],le=-1;function _(e){return{current:e}}function $(e){0>le||(e.current=ge[le],ge[le]=null,le--)}function J(e,t){le++,ge[le]=e.current,e.current=t}var Q=_(null),ye=_(null),xe=_(null),de=_(null);function Y(e,t){switch(J(xe,t),J(ye,e),J(Q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?cm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=cm(t),e=um(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(Q),J(Q,e)}function je(){$(Q),$(ye),$(xe)}function ke(e){e.memoizedState!==null&&J(de,e);var t=Q.current,n=um(t,e.type);t!==n&&(J(ye,e),J(Q,n))}function ht(e){ye.current===e&&($(Q),$(ye)),de.current===e&&($(de),$i._currentValue=ee)}var Mt,tn;function ot(e){if(Mt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mt=t&&t[1]||"",tn=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+e+tn}var An=!1;function ea(e,t){if(!e||An)return"";An=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(z){var D=z}Reflect.construct(e,[],G)}else{try{G.call()}catch(z){D=z}e.call(G.prototype)}}else{try{throw Error()}catch(z){D=z}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(z){if(z&&D&&typeof z.stack=="string")return[z.stack,D.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=i.DetermineComponentFrameRoot(),m=u[0],y=u[1];if(m&&y){var x=m.split(`
`),M=y.split(`
`);for(c=i=0;i<x.length&&!x[i].includes("DetermineComponentFrameRoot");)i++;for(;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;if(i===x.length||c===M.length)for(i=x.length-1,c=M.length-1;1<=i&&0<=c&&x[i]!==M[c];)c--;for(;1<=i&&0<=c;i--,c--)if(x[i]!==M[c]){if(i!==1||c!==1)do if(i--,c--,0>c||x[i]!==M[c]){var P=`
`+x[i].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=i&&0<=c);break}}}finally{An=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ot(n):""}function Aa(e,t){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return e.child!==t&&t!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return ea(e.type,!1);case 11:return ea(e.type.render,!1);case 1:return ea(e.type,!0);case 31:return ot("Activity");default:return""}}function ie(e){try{var t="",n=null;do t+=Aa(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Me=Object.prototype.hasOwnProperty,we=s.unstable_scheduleCallback,Ae=s.unstable_cancelCallback,Ue=s.unstable_shouldYield,et=s.unstable_requestPaint,Ee=s.unstable_now,qe=s.unstable_getCurrentPriorityLevel,Bt=s.unstable_ImmediatePriority,ta=s.unstable_UserBlockingPriority,gn=s.unstable_NormalPriority,Ca=s.unstable_LowPriority,as=s.unstable_IdlePriority,Kl=s.log,Gl=s.unstable_setDisableYieldValue,Oa=null,Dt=null;function jn(e){if(typeof Kl=="function"&&Gl(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Oa,e)}catch{}}var Lt=Math.clz32?Math.clz32:or,Yl=Math.log,Vl=Math.LN2;function or(e){return e>>>=0,e===0?32:31-(Yl(e)/Vl|0)|0}var ae=256,he=262144,me=4194304;function Ge(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var c=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~u,i!==0?c=Ge(i):(m&=y,m!==0?c=Ge(m):n||(n=y&~e,n!==0&&(c=Ge(n))))):(y=i&~u,y!==0?c=Ge(y):m!==0?c=Ge(m):n||(n=i&~e,n!==0&&(c=Ge(n)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:c}function at(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function We(){var e=me;return me<<=1,(me&62914560)===0&&(me=4194304),e}function Je(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ft(e,t,n,i,c,u){var m=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var y=e.entanglements,x=e.expirationTimes,M=e.hiddenUpdates;for(n=m&~n;0<n;){var P=31-Lt(n),G=1<<P;y[P]=0,x[P]=-1;var D=M[P];if(D!==null)for(M[P]=null,P=0;P<D.length;P++){var z=D[P];z!==null&&(z.lane&=-536870913)}n&=~G}i!==0&&nn(e,i,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~t))}function nn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Lt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Cn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Lt(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}function pn(e,t){var n=t&-t;return n=(n&42)!==0?1:On(n),(n&(e.suspendedLanes|t))!==0?0:n}function On(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ra(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ss(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:Mm(e.type))}function Xu(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var na=Math.random().toString(36).slice(2),St="__reactFiber$"+na,qt="__reactProps$"+na,is="__reactContainer$"+na,Il="__reactEvents$"+na,cp="__reactListeners$"+na,up="__reactHandles$"+na,Qu="__reactResources$"+na,ni="__reactMarker$"+na;function Xl(e){delete e[St],delete e[qt],delete e[Il],delete e[cp],delete e[up]}function rs(e){var t=e[St];if(t)return t;for(var n=e.parentNode;n;){if(t=n[is]||n[St]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vm(e);e!==null;){if(n=e[St])return n;e=vm(e)}return t}e=n,n=e.parentNode}return null}function ls(e){if(e=e[St]||e[is]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ai(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function os(e){var t=e[Qu];return t||(t=e[Qu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xt(e){e[ni]=!0}var Ju=new Set,Zu={};function Ma(e,t){cs(e,t),cs(e+"Capture",t)}function cs(e,t){for(Zu[e]=t,e=0;e<t.length;e++)Ju.add(t[e])}var dp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wu={},Fu={};function hp(e){return Me.call(Fu,e)?!0:Me.call(Wu,e)?!1:dp.test(e)?Fu[e]=!0:(Wu[e]=!0,!1)}function cr(e,t,n){if(hp(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ur(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Rn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function an(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ed(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fp(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){n=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(m){n=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ql(e){if(!e._valueTracker){var t=ed(e)?"checked":"value";e._valueTracker=fp(e,t,""+e[t])}}function td(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ed(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function dr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mp=/[\n"\\]/g;function sn(e){return e.replace(mp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Jl(e,t,n,i,c,u,m,y){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+an(t)):e.value!==""+an(t)&&(e.value=""+an(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Zl(e,m,an(t)):n!=null?Zl(e,m,an(n)):i!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+an(y):e.removeAttribute("name")}function nd(e,t,n,i,c,u,m,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Ql(e);return}n=n!=null?""+an(n):"",t=t!=null?""+an(t):n,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Ql(e)}function Zl(e,t,n){t==="number"&&dr(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function us(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+an(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function ad(e,t,n){if(t!=null&&(t=""+an(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+an(n):""}function sd(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(l(92));if(ne(i)){if(1<i.length)throw Error(l(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=an(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Ql(e)}function ds(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||gp.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function rd(e,t,n){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&n[c]!==i&&id(e,c,i)}else for(var u in t)t.hasOwnProperty(u)&&id(e,u,t[u])}function Wl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hr(e){return vp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mn(){}var Fl=null;function eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hs=null,fs=null;function ld(e){var t=ls(e);if(t&&(e=t.stateNode)){var n=e[qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Jl(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+sn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=i[qt]||null;if(!c)throw Error(l(90));Jl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&td(i)}break e;case"textarea":ad(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&us(e,!!n.multiple,t,!1)}}}var to=!1;function od(e,t,n){if(to)return e(t,n);to=!0;try{var i=e(t);return i}finally{if(to=!1,(hs!==null||fs!==null)&&(Fr(),hs&&(t=hs,e=fs,fs=hs=null,ld(t),e)))for(t=0;t<e.length;t++)ld(e[t])}}function si(e,t){var n=e.stateNode;if(n===null)return null;var i=n[qt]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(Dn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){no=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{no=!1}var aa=null,ao=null,fr=null;function cd(){if(fr)return fr;var e,t=ao,n=t.length,i,c="value"in aa?aa.value:aa.textContent,u=c.length;for(e=0;e<n&&t[e]===c[e];e++);var m=n-e;for(i=1;i<=m&&t[n-i]===c[u-i];i++);return fr=c.slice(e,1<i?1-i:void 0)}function mr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gr(){return!0}function ud(){return!1}function Ht(e){function t(n,i,c,u,m){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?gr:ud,this.isPropagationStopped=ud,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),t}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=Ht(Da),ri=w({},Da,{view:0,detail:0}),yp=Ht(ri),so,io,li,vr=w({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==li&&(li&&e.type==="mousemove"?(so=e.screenX-li.screenX,io=e.screenY-li.screenY):io=so=0,li=e),so)},movementY:function(e){return"movementY"in e?e.movementY:io}}),dd=Ht(vr),bp=w({},vr,{dataTransfer:0}),_p=Ht(bp),xp=w({},ri,{relatedTarget:0}),ro=Ht(xp),wp=w({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),jp=Ht(wp),Sp=w({},Da,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kp=Ht(Sp),Ep=w({},Da,{data:0}),hd=Ht(Ep),Tp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ap[e])?!!t[e]:!1}function lo(){return Cp}var Op=w({},ri,{key:function(e){if(e.key){var t=Tp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Np[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(e){return e.type==="keypress"?mr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rp=Ht(Op),Mp=w({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=Ht(Mp),Dp=w({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),Lp=Ht(Dp),Up=w({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),zp=Ht(Up),Bp=w({},vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qp=Ht(Bp),Hp=w({},Da,{newState:0,oldState:0}),$p=Ht(Hp),Pp=[9,13,27,32],oo=Dn&&"CompositionEvent"in window,oi=null;Dn&&"documentMode"in document&&(oi=document.documentMode);var Kp=Dn&&"TextEvent"in window&&!oi,md=Dn&&(!oo||oi&&8<oi&&11>=oi),gd=" ",pd=!1;function vd(e,t){switch(e){case"keyup":return Pp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function Gp(e,t){switch(e){case"compositionend":return yd(t);case"keypress":return t.which!==32?null:(pd=!0,gd);case"textInput":return e=t.data,e===gd&&pd?null:e;default:return null}}function Yp(e,t){if(ms)return e==="compositionend"||!oo&&vd(e,t)?(e=cd(),fr=ao=aa=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return md&&t.locale!=="ko"?null:t.data;default:return null}}var Vp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vp[e.type]:t==="textarea"}function _d(e,t,n,i){hs?fs?fs.push(i):fs=[i]:hs=i,t=rl(t,"onChange"),0<t.length&&(n=new pr("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ci=null,ui=null;function Ip(e){am(e,0)}function yr(e){var t=ai(e);if(td(t))return e}function xd(e,t){if(e==="change")return t}var wd=!1;if(Dn){var co;if(Dn){var uo="oninput"in document;if(!uo){var jd=document.createElement("div");jd.setAttribute("oninput","return;"),uo=typeof jd.oninput=="function"}co=uo}else co=!1;wd=co&&(!document.documentMode||9<document.documentMode)}function Sd(){ci&&(ci.detachEvent("onpropertychange",kd),ui=ci=null)}function kd(e){if(e.propertyName==="value"&&yr(ui)){var t=[];_d(t,ui,e,eo(e)),od(Ip,t)}}function Xp(e,t,n){e==="focusin"?(Sd(),ci=t,ui=n,ci.attachEvent("onpropertychange",kd)):e==="focusout"&&Sd()}function Qp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yr(ui)}function Jp(e,t){if(e==="click")return yr(t)}function Zp(e,t){if(e==="input"||e==="change")return yr(t)}function Wp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:Wp;function di(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!Me.call(t,c)||!Vt(e[c],t[c]))return!1}return!0}function Ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Td(e,t){var n=Ed(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ed(n)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=dr(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dr(e.document)}return t}function ho(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Fp=Dn&&"documentMode"in document&&11>=document.documentMode,gs=null,fo=null,hi=null,mo=!1;function Cd(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mo||gs==null||gs!==dr(i)||(i=gs,"selectionStart"in i&&ho(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hi&&di(hi,i)||(hi=i,i=rl(fo,"onSelect"),0<i.length&&(t=new pr("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gs)))}function La(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ps={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionrun:La("Transition","TransitionRun"),transitionstart:La("Transition","TransitionStart"),transitioncancel:La("Transition","TransitionCancel"),transitionend:La("Transition","TransitionEnd")},go={},Od={};Dn&&(Od=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Ua(e){if(go[e])return go[e];if(!ps[e])return e;var t=ps[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Od)return go[e]=t[n];return e}var Rd=Ua("animationend"),Md=Ua("animationiteration"),Dd=Ua("animationstart"),e0=Ua("transitionrun"),t0=Ua("transitionstart"),n0=Ua("transitioncancel"),Ld=Ua("transitionend"),Ud=new Map,po="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");po.push("scrollEnd");function vn(e,t){Ud.set(e,t),Ma(t,[e])}var br=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},rn=[],vs=0,vo=0;function _r(){for(var e=vs,t=vo=vs=0;t<e;){var n=rn[t];rn[t++]=null;var i=rn[t];rn[t++]=null;var c=rn[t];rn[t++]=null;var u=rn[t];if(rn[t++]=null,i!==null&&c!==null){var m=i.pending;m===null?c.next=c:(c.next=m.next,m.next=c),i.pending=c}u!==0&&zd(n,c,u)}}function xr(e,t,n,i){rn[vs++]=e,rn[vs++]=t,rn[vs++]=n,rn[vs++]=i,vo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function yo(e,t,n,i){return xr(e,t,n,i),wr(e)}function za(e,t){return xr(e,null,null,t),wr(e)}function zd(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var c=!1,u=e.return;u!==null;)u.childLanes|=n,i=u.alternate,i!==null&&(i.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Lt(n),e=u.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=n|536870912),u):null}function wr(e){if(50<Di)throw Di=0,Tc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ys={};function a0(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,i){return new a0(e,t,n,i)}function bo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ln(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Bd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,n,i,c,u){var m=0;if(i=e,typeof e=="function")bo(e)&&(m=1);else if(typeof e=="string")m=ov(e,n,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _e:return e=It(31,n,t,c),e.elementType=_e,e.lanes=u,e;case A:return Ba(n.children,c,u,t);case T:m=8,c|=24;break;case q:return e=It(12,n,t,c|2),e.elementType=q,e.lanes=u,e;case ce:return e=It(13,n,t,c),e.elementType=ce,e.lanes=u,e;case F:return e=It(19,n,t,c),e.elementType=F,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:m=10;break e;case O:m=9;break e;case X:m=11;break e;case W:m=14;break e;case ue:m=16,i=null;break e}m=29,n=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=It(m,n,t,c),t.elementType=e,t.type=i,t.lanes=u,t}function Ba(e,t,n,i){return e=It(7,e,i,t),e.lanes=n,e}function _o(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function qd(e){var t=It(18,null,null,0);return t.stateNode=e,t}function xo(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hd=new WeakMap;function ln(e,t){if(typeof e=="object"&&e!==null){var n=Hd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ie(t)},Hd.set(e,t),t)}return{value:e,source:t,stack:ie(t)}}var bs=[],_s=0,Sr=null,fi=0,on=[],cn=0,sa=null,Sn=1,kn="";function Un(e,t){bs[_s++]=fi,bs[_s++]=Sr,Sr=e,fi=t}function $d(e,t,n){on[cn++]=Sn,on[cn++]=kn,on[cn++]=sa,sa=e;var i=Sn;e=kn;var c=32-Lt(i)-1;i&=~(1<<c),n+=1;var u=32-Lt(t)+c;if(30<u){var m=c-c%5;u=(i&(1<<m)-1).toString(32),i>>=m,c-=m,Sn=1<<32-Lt(t)+c|n<<c|i,kn=u+e}else Sn=1<<u|n<<c|i,kn=e}function wo(e){e.return!==null&&(Un(e,1),$d(e,1,0))}function jo(e){for(;e===Sr;)Sr=bs[--_s],bs[_s]=null,fi=bs[--_s],bs[_s]=null;for(;e===sa;)sa=on[--cn],on[cn]=null,kn=on[--cn],on[cn]=null,Sn=on[--cn],on[cn]=null}function Pd(e,t){on[cn++]=Sn,on[cn++]=kn,on[cn++]=sa,Sn=t.id,kn=t.overflow,sa=e}var kt=null,tt=null,Be=!1,ia=null,un=!1,So=Error(l(519));function ra(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mi(ln(t,e)),So}function Kd(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[St]=e,t[qt]=i,n){case"dialog":Re("cancel",t),Re("close",t);break;case"iframe":case"object":case"embed":Re("load",t);break;case"video":case"audio":for(n=0;n<Ui.length;n++)Re(Ui[n],t);break;case"source":Re("error",t);break;case"img":case"image":case"link":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"input":Re("invalid",t),nd(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Re("invalid",t);break;case"textarea":Re("invalid",t),sd(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||lm(t.textContent,n)?(i.popover!=null&&(Re("beforetoggle",t),Re("toggle",t)),i.onScroll!=null&&Re("scroll",t),i.onScrollEnd!=null&&Re("scrollend",t),i.onClick!=null&&(t.onclick=Mn),t=!0):t=!1,t||ra(e,!0)}function Gd(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 31:case 13:un=!1;return;case 27:case 3:un=!0;return;default:kt=kt.return}}function xs(e){if(e!==kt)return!1;if(!Be)return Gd(e),Be=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Pc(e.type,e.memoizedProps)),n=!n),n&&tt&&ra(e),Gd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));tt=pm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));tt=pm(e)}else t===27?(t=tt,_a(e.type)?(e=Ic,Ic=null,tt=e):tt=t):tt=kt?hn(e.stateNode.nextSibling):null;return!0}function qa(){tt=kt=null,Be=!1}function ko(){var e=ia;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),ia=null),e}function mi(e){ia===null?ia=[e]:ia.push(e)}var Eo=_(null),Ha=null,zn=null;function la(e,t,n){J(Eo,t._currentValue),t._currentValue=n}function Bn(e){e._currentValue=Eo.current,$(Eo)}function To(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function No(e,t,n,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var m=c.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=c;for(var x=0;x<t.length;x++)if(y.context===t[x]){u.lanes|=n,y=u.alternate,y!==null&&(y.lanes|=n),To(u.return,n,e),i||(m=null);break e}u=y.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(l(341));m.lanes|=n,u=m.alternate,u!==null&&(u.lanes|=n),To(m,n,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function ws(e,t,n,i){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(l(387));if(m=m.memoizedProps,m!==null){var y=c.type;Vt(c.pendingProps.value,m.value)||(e!==null?e.push(y):e=[y])}}else if(c===de.current){if(m=c.alternate,m===null)throw Error(l(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push($i):e=[$i])}c=c.return}e!==null&&No(t,e,n,i),t.flags|=262144}function kr(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $a(e){Ha=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Et(e){return Yd(Ha,e)}function Er(e,t){return Ha===null&&$a(e),Yd(e,t)}function Yd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},zn===null){if(e===null)throw Error(l(308));zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zn=zn.next=t;return n}var s0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},i0=s.unstable_scheduleCallback,r0=s.unstable_NormalPriority,mt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ao(){return{controller:new s0,data:new Map,refCount:0}}function gi(e){e.refCount--,e.refCount===0&&i0(r0,function(){e.controller.abort()})}var pi=null,Co=0,js=0,Ss=null;function l0(e,t){if(pi===null){var n=pi=[];Co=0,js=Mc(),Ss={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Co++,t.then(Vd,Vd),t}function Vd(){if(--Co===0&&pi!==null){Ss!==null&&(Ss.status="fulfilled");var e=pi;pi=null,js=0,Ss=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function o0(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(c){n.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<n.length;c++)(0,n[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<n.length;c++)(0,n[c])(void 0)}),i}var Id=C.S;C.S=function(e,t){Of=Ee(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&l0(e,t),Id!==null&&Id(e,t)};var Pa=_(null);function Oo(){var e=Pa.current;return e!==null?e:Ze.pooledCache}function Tr(e,t){t===null?J(Pa,Pa.current):J(Pa,t.pool)}function Xd(){var e=Oo();return e===null?null:{parent:mt._currentValue,pool:e}}var ks=Error(l(460)),Ro=Error(l(474)),Nr=Error(l(542)),Ar={then:function(){}};function Qd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Mn,Mn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wd(e),e;default:if(typeof t.status=="string")t.then(Mn,Mn);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wd(e),e}throw Ga=t,ks}}function Ka(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ga=n,ks):n}}var Ga=null;function Zd(){if(Ga===null)throw Error(l(459));var e=Ga;return Ga=null,e}function Wd(e){if(e===ks||e===Nr)throw Error(l(483))}var Es=null,vi=0;function Cr(e){var t=vi;return vi+=1,Es===null&&(Es=[]),Jd(Es,e,t)}function yi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Or(e,t){throw t.$$typeof===k?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Fd(e){function t(N,E){if(e){var R=N.deletions;R===null?(N.deletions=[E],N.flags|=16):R.push(E)}}function n(N,E){if(!e)return null;for(;E!==null;)t(N,E),E=E.sibling;return null}function i(N){for(var E=new Map;N!==null;)N.key!==null?E.set(N.key,N):E.set(N.index,N),N=N.sibling;return E}function c(N,E){return N=Ln(N,E),N.index=0,N.sibling=null,N}function u(N,E,R){return N.index=R,e?(R=N.alternate,R!==null?(R=R.index,R<E?(N.flags|=67108866,E):R):(N.flags|=67108866,E)):(N.flags|=1048576,E)}function m(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function y(N,E,R,K){return E===null||E.tag!==6?(E=_o(R,N.mode,K),E.return=N,E):(E=c(E,R),E.return=N,E)}function x(N,E,R,K){var fe=R.type;return fe===A?P(N,E,R.props.children,K,R.key):E!==null&&(E.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ue&&Ka(fe)===E.type)?(E=c(E,R.props),yi(E,R),E.return=N,E):(E=jr(R.type,R.key,R.props,null,N.mode,K),yi(E,R),E.return=N,E)}function M(N,E,R,K){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=xo(R,N.mode,K),E.return=N,E):(E=c(E,R.children||[]),E.return=N,E)}function P(N,E,R,K,fe){return E===null||E.tag!==7?(E=Ba(R,N.mode,K,fe),E.return=N,E):(E=c(E,R),E.return=N,E)}function G(N,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=_o(""+E,N.mode,R),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case S:return R=jr(E.type,E.key,E.props,null,N.mode,R),yi(R,E),R.return=N,R;case j:return E=xo(E,N.mode,R),E.return=N,E;case ue:return E=Ka(E),G(N,E,R)}if(ne(E)||L(E))return E=Ba(E,N.mode,R,null),E.return=N,E;if(typeof E.then=="function")return G(N,Cr(E),R);if(E.$$typeof===B)return G(N,Er(N,E),R);Or(N,E)}return null}function D(N,E,R,K){var fe=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return fe!==null?null:y(N,E,""+R,K);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return R.key===fe?x(N,E,R,K):null;case j:return R.key===fe?M(N,E,R,K):null;case ue:return R=Ka(R),D(N,E,R,K)}if(ne(R)||L(R))return fe!==null?null:P(N,E,R,K,null);if(typeof R.then=="function")return D(N,E,Cr(R),K);if(R.$$typeof===B)return D(N,E,Er(N,R),K);Or(N,R)}return null}function z(N,E,R,K,fe){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return N=N.get(R)||null,y(E,N,""+K,fe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return N=N.get(K.key===null?R:K.key)||null,x(E,N,K,fe);case j:return N=N.get(K.key===null?R:K.key)||null,M(E,N,K,fe);case ue:return K=Ka(K),z(N,E,R,K,fe)}if(ne(K)||L(K))return N=N.get(R)||null,P(E,N,K,fe,null);if(typeof K.then=="function")return z(N,E,R,Cr(K),fe);if(K.$$typeof===B)return z(N,E,R,Er(E,K),fe);Or(E,K)}return null}function se(N,E,R,K){for(var fe=null,He=null,re=E,Ne=E=0,Le=null;re!==null&&Ne<R.length;Ne++){re.index>Ne?(Le=re,re=null):Le=re.sibling;var $e=D(N,re,R[Ne],K);if($e===null){re===null&&(re=Le);break}e&&re&&$e.alternate===null&&t(N,re),E=u($e,E,Ne),He===null?fe=$e:He.sibling=$e,He=$e,re=Le}if(Ne===R.length)return n(N,re),Be&&Un(N,Ne),fe;if(re===null){for(;Ne<R.length;Ne++)re=G(N,R[Ne],K),re!==null&&(E=u(re,E,Ne),He===null?fe=re:He.sibling=re,He=re);return Be&&Un(N,Ne),fe}for(re=i(re);Ne<R.length;Ne++)Le=z(re,N,Ne,R[Ne],K),Le!==null&&(e&&Le.alternate!==null&&re.delete(Le.key===null?Ne:Le.key),E=u(Le,E,Ne),He===null?fe=Le:He.sibling=Le,He=Le);return e&&re.forEach(function(ka){return t(N,ka)}),Be&&Un(N,Ne),fe}function pe(N,E,R,K){if(R==null)throw Error(l(151));for(var fe=null,He=null,re=E,Ne=E=0,Le=null,$e=R.next();re!==null&&!$e.done;Ne++,$e=R.next()){re.index>Ne?(Le=re,re=null):Le=re.sibling;var ka=D(N,re,$e.value,K);if(ka===null){re===null&&(re=Le);break}e&&re&&ka.alternate===null&&t(N,re),E=u(ka,E,Ne),He===null?fe=ka:He.sibling=ka,He=ka,re=Le}if($e.done)return n(N,re),Be&&Un(N,Ne),fe;if(re===null){for(;!$e.done;Ne++,$e=R.next())$e=G(N,$e.value,K),$e!==null&&(E=u($e,E,Ne),He===null?fe=$e:He.sibling=$e,He=$e);return Be&&Un(N,Ne),fe}for(re=i(re);!$e.done;Ne++,$e=R.next())$e=z(re,N,Ne,$e.value,K),$e!==null&&(e&&$e.alternate!==null&&re.delete($e.key===null?Ne:$e.key),E=u($e,E,Ne),He===null?fe=$e:He.sibling=$e,He=$e);return e&&re.forEach(function(bv){return t(N,bv)}),Be&&Un(N,Ne),fe}function Qe(N,E,R,K){if(typeof R=="object"&&R!==null&&R.type===A&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case S:e:{for(var fe=R.key;E!==null;){if(E.key===fe){if(fe=R.type,fe===A){if(E.tag===7){n(N,E.sibling),K=c(E,R.props.children),K.return=N,N=K;break e}}else if(E.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===ue&&Ka(fe)===E.type){n(N,E.sibling),K=c(E,R.props),yi(K,R),K.return=N,N=K;break e}n(N,E);break}else t(N,E);E=E.sibling}R.type===A?(K=Ba(R.props.children,N.mode,K,R.key),K.return=N,N=K):(K=jr(R.type,R.key,R.props,null,N.mode,K),yi(K,R),K.return=N,N=K)}return m(N);case j:e:{for(fe=R.key;E!==null;){if(E.key===fe)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(N,E.sibling),K=c(E,R.children||[]),K.return=N,N=K;break e}else{n(N,E);break}else t(N,E);E=E.sibling}K=xo(R,N.mode,K),K.return=N,N=K}return m(N);case ue:return R=Ka(R),Qe(N,E,R,K)}if(ne(R))return se(N,E,R,K);if(L(R)){if(fe=L(R),typeof fe!="function")throw Error(l(150));return R=fe.call(R),pe(N,E,R,K)}if(typeof R.then=="function")return Qe(N,E,Cr(R),K);if(R.$$typeof===B)return Qe(N,E,Er(N,R),K);Or(N,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(N,E.sibling),K=c(E,R),K.return=N,N=K):(n(N,E),K=_o(R,N.mode,K),K.return=N,N=K),m(N)):n(N,E)}return function(N,E,R,K){try{vi=0;var fe=Qe(N,E,R,K);return Es=null,fe}catch(re){if(re===ks||re===Nr)throw re;var He=It(29,re,null,N.mode);return He.lanes=K,He.return=N,He}}}var Ya=Fd(!0),eh=Fd(!1),oa=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ua(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Pe&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=wr(e),zd(e,null,n),t}return xr(e,i,t,n),wr(e)}function bi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Cn(e,n)}}function Lo(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var m={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?c=u=m:u=u.next=m,n=n.next}while(n!==null);u===null?c=u=t:u=u.next=t}else c=u=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Uo=!1;function _i(){if(Uo){var e=Ss;if(e!==null)throw e}}function xi(e,t,n,i){Uo=!1;var c=e.updateQueue;oa=!1;var u=c.firstBaseUpdate,m=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var x=y,M=x.next;x.next=null,m===null?u=M:m.next=M,m=x;var P=e.alternate;P!==null&&(P=P.updateQueue,y=P.lastBaseUpdate,y!==m&&(y===null?P.firstBaseUpdate=M:y.next=M,P.lastBaseUpdate=x))}if(u!==null){var G=c.baseState;m=0,P=M=x=null,y=u;do{var D=y.lane&-536870913,z=D!==y.lane;if(z?(De&D)===D:(i&D)===D){D!==0&&D===js&&(Uo=!0),P!==null&&(P=P.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var se=e,pe=y;D=t;var Qe=n;switch(pe.tag){case 1:if(se=pe.payload,typeof se=="function"){G=se.call(Qe,G,D);break e}G=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=pe.payload,D=typeof se=="function"?se.call(Qe,G,D):se,D==null)break e;G=w({},G,D);break e;case 2:oa=!0}}D=y.callback,D!==null&&(e.flags|=64,z&&(e.flags|=8192),z=c.callbacks,z===null?c.callbacks=[D]:z.push(D))}else z={lane:D,tag:y.tag,payload:y.payload,callback:y.callback,next:null},P===null?(M=P=z,x=G):P=P.next=z,m|=D;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;z=y,y=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(!0);P===null&&(x=G),c.baseState=x,c.firstBaseUpdate=M,c.lastBaseUpdate=P,u===null&&(c.shared.lanes=0),ga|=m,e.lanes=m,e.memoizedState=G}}function th(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function nh(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)th(n[e],t)}var Ts=_(null),Rr=_(0);function ah(e,t){e=In,J(Rr,e),J(Ts,t),In=e|t.baseLanes}function zo(){J(Rr,In),J(Ts,Ts.current)}function Bo(){In=Rr.current,$(Ts),$(Rr)}var Xt=_(null),dn=null;function da(e){var t=e.alternate;J(ut,ut.current&1),J(Xt,e),dn===null&&(t===null||Ts.current!==null||t.memoizedState!==null)&&(dn=e)}function qo(e){J(ut,ut.current),J(Xt,e),dn===null&&(dn=e)}function sh(e){e.tag===22?(J(ut,ut.current),J(Xt,e),dn===null&&(dn=e)):ha()}function ha(){J(ut,ut.current),J(Xt,Xt.current)}function Qt(e){$(Xt),dn===e&&(dn=null),$(ut)}var ut=_(0);function Mr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Yc(n)||Vc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qn=0,Te=null,Ie=null,gt=null,Dr=!1,Ns=!1,Va=!1,Lr=0,wi=0,As=null,c0=0;function it(){throw Error(l(321))}function Ho(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function $o(e,t,n,i,c,u){return qn=u,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?$h:nc,Va=!1,u=n(i,c),Va=!1,Ns&&(u=rh(t,n,i,c)),ih(e),u}function ih(e){C.H=ki;var t=Ie!==null&&Ie.next!==null;if(qn=0,gt=Ie=Te=null,Dr=!1,wi=0,As=null,t)throw Error(l(300));e===null||pt||(e=e.dependencies,e!==null&&kr(e)&&(pt=!0))}function rh(e,t,n,i){Te=e;var c=0;do{if(Ns&&(As=null),wi=0,Ns=!1,25<=c)throw Error(l(301));if(c+=1,gt=Ie=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=Ph,u=t(n,i)}while(Ns);return u}function u0(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?ji(t):t,e=e.useState()[0],(Ie!==null?Ie.memoizedState:null)!==e&&(Te.flags|=1024),t}function Po(){var e=Lr!==0;return Lr=0,e}function Ko(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Go(e){if(Dr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dr=!1}qn=0,gt=Ie=Te=null,Ns=!1,wi=Lr=0,As=null}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Te.memoizedState=gt=e:gt=gt.next=e,gt}function dt(){if(Ie===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=gt===null?Te.memoizedState:gt.next;if(t!==null)gt=t,Ie=e;else{if(e===null)throw Te.alternate===null?Error(l(467)):Error(l(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},gt===null?Te.memoizedState=gt=e:gt=gt.next=e}return gt}function Ur(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ji(e){var t=wi;return wi+=1,As===null&&(As=[]),e=Jd(As,e,t),t=Te,(gt===null?t.memoizedState:gt.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?$h:nc),e}function zr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ji(e);if(e.$$typeof===B)return Et(e)}throw Error(l(438,String(e)))}function Yo(e){var t=null,n=Te.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Te.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Ur(),Te.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=V;return t.index++,n}function Hn(e,t){return typeof t=="function"?t(e):t}function Br(e){var t=dt();return Vo(t,Ie,e)}function Vo(e,t,n){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=n;var c=e.baseQueue,u=i.pending;if(u!==null){if(c!==null){var m=c.next;c.next=u.next,u.next=m}t.baseQueue=c=u,i.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var y=m=null,x=null,M=t,P=!1;do{var G=M.lane&-536870913;if(G!==M.lane?(De&G)===G:(qn&G)===G){var D=M.revertLane;if(D===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),G===js&&(P=!0);else if((qn&D)===D){M=M.next,D===js&&(P=!0);continue}else G={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},x===null?(y=x=G,m=u):x=x.next=G,Te.lanes|=D,ga|=D;G=M.action,Va&&n(u,G),u=M.hasEagerState?M.eagerState:n(u,G)}else D={lane:G,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},x===null?(y=x=D,m=u):x=x.next=D,Te.lanes|=G,ga|=G;M=M.next}while(M!==null&&M!==t);if(x===null?m=u:x.next=y,!Vt(u,e.memoizedState)&&(pt=!0,P&&(n=Ss,n!==null)))throw n;e.memoizedState=u,e.baseState=m,e.baseQueue=x,i.lastRenderedState=u}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Io(e){var t=dt(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,u=t.memoizedState;if(c!==null){n.pending=null;var m=c=c.next;do u=e(u,m.action),m=m.next;while(m!==c);Vt(u,t.memoizedState)||(pt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,i]}function lh(e,t,n){var i=Te,c=dt(),u=Be;if(u){if(n===void 0)throw Error(l(407));n=n()}else n=t();var m=!Vt((Ie||c).memoizedState,n);if(m&&(c.memoizedState=n,pt=!0),c=c.queue,Jo(uh.bind(null,i,c,e),[e]),c.getSnapshot!==t||m||gt!==null&&gt.memoizedState.tag&1){if(i.flags|=2048,Cs(9,{destroy:void 0},ch.bind(null,i,c,n,t),null),Ze===null)throw Error(l(349));u||(qn&127)!==0||oh(i,t,n)}return n}function oh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t=Ur(),Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ch(e,t,n,i){t.value=n,t.getSnapshot=i,dh(t)&&hh(e)}function uh(e,t,n){return n(function(){dh(t)&&hh(e)})}function dh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function hh(e){var t=za(e,2);t!==null&&Yt(t,e,2)}function Xo(e){var t=Ut();if(typeof e=="function"){var n=e;if(e=n(),Va){jn(!0);try{n()}finally{jn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t}function fh(e,t,n,i){return e.baseState=n,Vo(e,Ie,typeof i=="function"?i:Hn)}function d0(e,t,n,i,c){if($r(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};C.T!==null?n(!0):u.isTransition=!1,i(u),n=t.pending,n===null?(u.next=t.pending=u,mh(t,u)):(u.next=n.next,t.pending=n.next=u)}}function mh(e,t){var n=t.action,i=t.payload,c=e.state;if(t.isTransition){var u=C.T,m={};C.T=m;try{var y=n(c,i),x=C.S;x!==null&&x(m,y),gh(e,t,y)}catch(M){Qo(e,t,M)}finally{u!==null&&m.types!==null&&(u.types=m.types),C.T=u}}else try{u=n(c,i),gh(e,t,u)}catch(M){Qo(e,t,M)}}function gh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ph(e,t,i)},function(i){return Qo(e,t,i)}):ph(e,t,n)}function ph(e,t,n){t.status="fulfilled",t.value=n,vh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,mh(e,n)))}function Qo(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,vh(t),t=t.next;while(t!==i)}e.action=null}function vh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function yh(e,t){return t}function bh(e,t){if(Be){var n=Ze.formState;if(n!==null){e:{var i=Te;if(Be){if(tt){t:{for(var c=tt,u=un;c.nodeType!==8;){if(!u){c=null;break t}if(c=hn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){tt=hn(c.nextSibling),i=c.data==="F!";break e}}ra(i)}i=!1}i&&(t=n[0])}}return n=Ut(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yh,lastRenderedState:t},n.queue=i,n=Bh.bind(null,Te,i),i.dispatch=n,i=Xo(!1),u=tc.bind(null,Te,!1,i.queue),i=Ut(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,n=d0.bind(null,Te,c,u,n),c.dispatch=n,i.memoizedState=e,[t,n,!1]}function _h(e){var t=dt();return xh(t,Ie,e)}function xh(e,t,n){if(t=Vo(e,t,yh)[0],e=Br(Hn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ji(t)}catch(m){throw m===ks?Nr:m}else i=t;t=dt();var c=t.queue,u=c.dispatch;return n!==t.memoizedState&&(Te.flags|=2048,Cs(9,{destroy:void 0},h0.bind(null,c,n),null)),[i,u,e]}function h0(e,t){e.action=t}function wh(e){var t=dt(),n=Ie;if(n!==null)return xh(t,n,e);dt(),t=t.memoizedState,n=dt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Cs(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Te.updateQueue,t===null&&(t=Ur(),Te.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function jh(){return dt().memoizedState}function qr(e,t,n,i){var c=Ut();Te.flags|=e,c.memoizedState=Cs(1|t,{destroy:void 0},n,i===void 0?null:i)}function Hr(e,t,n,i){var c=dt();i=i===void 0?null:i;var u=c.memoizedState.inst;Ie!==null&&i!==null&&Ho(i,Ie.memoizedState.deps)?c.memoizedState=Cs(t,u,n,i):(Te.flags|=e,c.memoizedState=Cs(1|t,u,n,i))}function Sh(e,t){qr(8390656,8,e,t)}function Jo(e,t){Hr(2048,8,e,t)}function f0(e){Te.flags|=4;var t=Te.updateQueue;if(t===null)t=Ur(),Te.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function kh(e){var t=dt().memoizedState;return f0({ref:t,nextImpl:e}),function(){if((Pe&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Eh(e,t){return Hr(4,2,e,t)}function Th(e,t){return Hr(4,4,e,t)}function Nh(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ah(e,t,n){n=n!=null?n.concat([e]):null,Hr(4,4,Nh.bind(null,t,e),n)}function Zo(){}function Ch(e,t){var n=dt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Ho(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Oh(e,t){var n=dt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Ho(t,i[1]))return i[0];if(i=e(),Va){jn(!0);try{e()}finally{jn(!1)}}return n.memoizedState=[i,t],i}function Wo(e,t,n){return n===void 0||(qn&1073741824)!==0&&(De&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Mf(),Te.lanes|=e,ga|=e,n)}function Rh(e,t,n,i){return Vt(n,t)?n:Ts.current!==null?(e=Wo(e,n,i),Vt(e,t)||(pt=!0),e):(qn&42)===0||(qn&1073741824)!==0&&(De&261930)===0?(pt=!0,e.memoizedState=n):(e=Mf(),Te.lanes|=e,ga|=e,t)}function Mh(e,t,n,i,c){var u=I.p;I.p=u!==0&&8>u?u:8;var m=C.T,y={};C.T=y,tc(e,!1,t,n);try{var x=c(),M=C.S;if(M!==null&&M(y,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var P=o0(x,i);Si(e,t,P,Wt(e))}else Si(e,t,i,Wt(e))}catch(G){Si(e,t,{then:function(){},status:"rejected",reason:G},Wt())}finally{I.p=u,m!==null&&y.types!==null&&(m.types=y.types),C.T=m}}function m0(){}function Fo(e,t,n,i){if(e.tag!==5)throw Error(l(476));var c=Dh(e).queue;Mh(e,c,t,ee,n===null?m0:function(){return Lh(e),n(i)})}function Dh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:ee},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Lh(e){var t=Dh(e);t.next===null&&(t=e.alternate.memoizedState),Si(e,t.next.queue,{},Wt())}function ec(){return Et($i)}function Uh(){return dt().memoizedState}function zh(){return dt().memoizedState}function g0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Wt();e=ca(n);var i=ua(t,e,n);i!==null&&(Yt(i,t,n),bi(i,t,n)),t={cache:Ao()},e.payload=t;return}t=t.return}}function p0(e,t,n){var i=Wt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},$r(e)?qh(t,n):(n=yo(e,t,n,i),n!==null&&(Yt(n,e,i),Hh(n,t,i)))}function Bh(e,t,n){var i=Wt();Si(e,t,n,i)}function Si(e,t,n,i){var c={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if($r(e))qh(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,y=u(m,n);if(c.hasEagerState=!0,c.eagerState=y,Vt(y,m))return xr(e,t,c,0),Ze===null&&_r(),!1}catch{}if(n=yo(e,t,c,i),n!==null)return Yt(n,e,i),Hh(n,t,i),!0}return!1}function tc(e,t,n,i){if(i={lane:2,revertLane:Mc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},$r(e)){if(t)throw Error(l(479))}else t=yo(e,n,i,2),t!==null&&Yt(t,e,2)}function $r(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function qh(e,t){Ns=Dr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hh(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Cn(e,n)}}var ki={readContext:Et,use:zr,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};ki.useEffectEvent=it;var $h={readContext:Et,use:zr,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:Sh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,qr(4194308,4,Nh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){qr(4,2,e,t)},useMemo:function(e,t){var n=Ut();t=t===void 0?null:t;var i=e();if(Va){jn(!0);try{e()}finally{jn(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ut();if(n!==void 0){var c=n(t);if(Va){jn(!0);try{n(t)}finally{jn(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=p0.bind(null,Te,e),[i.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:function(e){e=Xo(e);var t=e.queue,n=Bh.bind(null,Te,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Zo,useDeferredValue:function(e,t){var n=Ut();return Wo(n,e,t)},useTransition:function(){var e=Xo(!1);return e=Mh.bind(null,Te,e.queue,!0,!1),Ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Te,c=Ut();if(Be){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),Ze===null)throw Error(l(349));(De&127)!==0||oh(i,t,n)}c.memoizedState=n;var u={value:n,getSnapshot:t};return c.queue=u,Sh(uh.bind(null,i,u,e),[e]),i.flags|=2048,Cs(9,{destroy:void 0},ch.bind(null,i,u,n,t),null),n},useId:function(){var e=Ut(),t=Ze.identifierPrefix;if(Be){var n=kn,i=Sn;n=(i&~(1<<32-Lt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Lr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=c0++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ec,useFormState:bh,useActionState:bh,useOptimistic:function(e){var t=Ut();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=tc.bind(null,Te,!0,n),n.dispatch=t,[e,t]},useMemoCache:Yo,useCacheRefresh:function(){return Ut().memoizedState=g0.bind(null,Te)},useEffectEvent:function(e){var t=Ut(),n={impl:e};return t.memoizedState=n,function(){if((Pe&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},nc={readContext:Et,use:zr,useCallback:Ch,useContext:Et,useEffect:Jo,useImperativeHandle:Ah,useInsertionEffect:Eh,useLayoutEffect:Th,useMemo:Oh,useReducer:Br,useRef:jh,useState:function(){return Br(Hn)},useDebugValue:Zo,useDeferredValue:function(e,t){var n=dt();return Rh(n,Ie.memoizedState,e,t)},useTransition:function(){var e=Br(Hn)[0],t=dt().memoizedState;return[typeof e=="boolean"?e:ji(e),t]},useSyncExternalStore:lh,useId:Uh,useHostTransitionStatus:ec,useFormState:_h,useActionState:_h,useOptimistic:function(e,t){var n=dt();return fh(n,Ie,e,t)},useMemoCache:Yo,useCacheRefresh:zh};nc.useEffectEvent=kh;var Ph={readContext:Et,use:zr,useCallback:Ch,useContext:Et,useEffect:Jo,useImperativeHandle:Ah,useInsertionEffect:Eh,useLayoutEffect:Th,useMemo:Oh,useReducer:Io,useRef:jh,useState:function(){return Io(Hn)},useDebugValue:Zo,useDeferredValue:function(e,t){var n=dt();return Ie===null?Wo(n,e,t):Rh(n,Ie.memoizedState,e,t)},useTransition:function(){var e=Io(Hn)[0],t=dt().memoizedState;return[typeof e=="boolean"?e:ji(e),t]},useSyncExternalStore:lh,useId:Uh,useHostTransitionStatus:ec,useFormState:wh,useActionState:wh,useOptimistic:function(e,t){var n=dt();return Ie!==null?fh(n,Ie,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Yo,useCacheRefresh:zh};Ph.useEffectEvent=kh;function ac(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:w({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sc={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Wt(),c=ca(i);c.payload=t,n!=null&&(c.callback=n),t=ua(e,c,i),t!==null&&(Yt(t,e,i),bi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Wt(),c=ca(i);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=ua(e,c,i),t!==null&&(Yt(t,e,i),bi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wt(),i=ca(n);i.tag=2,t!=null&&(i.callback=t),t=ua(e,i,n),t!==null&&(Yt(t,e,n),bi(t,e,n))}};function Kh(e,t,n,i,c,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,m):t.prototype&&t.prototype.isPureReactComponent?!di(n,i)||!di(c,u):!0}function Gh(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&sc.enqueueReplaceState(t,t.state,null)}function Ia(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=w({},n));for(var c in e)n[c]===void 0&&(n[c]=e[c])}return n}function Yh(e){br(e)}function Vh(e){console.error(e)}function Ih(e){br(e)}function Pr(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Xh(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function ic(e,t,n){return n=ca(n),n.tag=3,n.payload={element:null},n.callback=function(){Pr(e,t)},n}function Qh(e){return e=ca(e),e.tag=3,e}function Jh(e,t,n,i){var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var u=i.value;e.payload=function(){return c(u)},e.callback=function(){Xh(t,n,i)}}var m=n.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Xh(t,n,i),typeof c!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function v0(e,t,n,i,c){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&ws(t,n,c,!0),n=Xt.current,n!==null){switch(n.tag){case 31:case 13:return dn===null?el():n.alternate===null&&rt===0&&(rt=3),n.flags&=-257,n.flags|=65536,n.lanes=c,i===Ar?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Cc(e,i,c)),!1;case 22:return n.flags|=65536,i===Ar?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Cc(e,i,c)),!1}throw Error(l(435,n.tag))}return Cc(e,i,c),el(),!1}if(Be)return t=Xt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==So&&(e=Error(l(422),{cause:i}),mi(ln(e,n)))):(i!==So&&(t=Error(l(423),{cause:i}),mi(ln(t,n))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=ln(i,n),c=ic(e.stateNode,i,c),Lo(e,c),rt!==4&&(rt=2)),!1;var u=Error(l(520),{cause:i});if(u=ln(u,n),Mi===null?Mi=[u]:Mi.push(u),rt!==4&&(rt=2),t===null)return!0;i=ln(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=c&-c,n.lanes|=e,e=ic(n.stateNode,i,e),Lo(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(pa===null||!pa.has(u))))return n.flags|=65536,c&=-c,n.lanes|=c,c=Qh(c),Jh(c,e,n,i),Lo(n,c),!1}n=n.return}while(n!==null);return!1}var rc=Error(l(461)),pt=!1;function Tt(e,t,n,i){t.child=e===null?eh(t,null,n,i):Ya(t,e.child,n,i)}function Zh(e,t,n,i,c){n=n.render;var u=t.ref;if("ref"in i){var m={};for(var y in i)y!=="ref"&&(m[y]=i[y])}else m=i;return $a(t),i=$o(e,t,n,m,u,c),y=Po(),e!==null&&!pt?(Ko(e,t,c),$n(e,t,c)):(Be&&y&&wo(t),t.flags|=1,Tt(e,t,i,c),t.child)}function Wh(e,t,n,i,c){if(e===null){var u=n.type;return typeof u=="function"&&!bo(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,Fh(e,t,u,i,c)):(e=jr(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!mc(e,c)){var m=u.memoizedProps;if(n=n.compare,n=n!==null?n:di,n(m,i)&&e.ref===t.ref)return $n(e,t,c)}return t.flags|=1,e=Ln(u,i),e.ref=t.ref,e.return=t,t.child=e}function Fh(e,t,n,i,c){if(e!==null){var u=e.memoizedProps;if(di(u,i)&&e.ref===t.ref)if(pt=!1,t.pendingProps=i=u,mc(e,c))(e.flags&131072)!==0&&(pt=!0);else return t.lanes=e.lanes,$n(e,t,c)}return lc(e,t,n,i,c)}function ef(e,t,n,i){var c=i.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~u}else i=0,t.child=null;return tf(e,t,u,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Tr(t,u!==null?u.cachePool:null),u!==null?ah(t,u):zo(),sh(t);else return i=t.lanes=536870912,tf(e,t,u!==null?u.baseLanes|n:n,n,i)}else u!==null?(Tr(t,u.cachePool),ah(t,u),ha(),t.memoizedState=null):(e!==null&&Tr(t,null),zo(),ha());return Tt(e,t,c,n),t.child}function Ei(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function tf(e,t,n,i,c){var u=Oo();return u=u===null?null:{parent:mt._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&Tr(t,null),zo(),sh(t),e!==null&&ws(e,t,i,!0),t.childLanes=c,null}function Kr(e,t){return t=Yr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function nf(e,t,n){return Ya(t,e.child,null,n),e=Kr(t,t.pendingProps),e.flags|=2,Qt(t),t.memoizedState=null,e}function y0(e,t,n){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Be){if(i.mode==="hidden")return e=Kr(t,i),t.lanes=536870912,Ei(null,e);if(qo(t),(e=tt)?(e=gm(e,un),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:sa!==null?{id:Sn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},n=qd(e),n.return=t,t.child=n,kt=t,tt=null)):e=null,e===null)throw ra(t);return t.lanes=536870912,null}return Kr(t,i)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(qo(t),c)if(t.flags&256)t.flags&=-257,t=nf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(pt||ws(e,t,n,!1),c=(n&e.childLanes)!==0,pt||c){if(i=Ze,i!==null&&(m=pn(i,n),m!==0&&m!==u.retryLane))throw u.retryLane=m,za(e,m),Yt(i,e,m),rc;el(),t=nf(e,t,n)}else e=u.treeContext,tt=hn(m.nextSibling),kt=t,Be=!0,ia=null,un=!1,e!==null&&Pd(t,e),t=Kr(t,i),t.flags|=4096;return t}return e=Ln(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Gr(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function lc(e,t,n,i,c){return $a(t),n=$o(e,t,n,i,void 0,c),i=Po(),e!==null&&!pt?(Ko(e,t,c),$n(e,t,c)):(Be&&i&&wo(t),t.flags|=1,Tt(e,t,n,c),t.child)}function af(e,t,n,i,c,u){return $a(t),t.updateQueue=null,n=rh(t,i,n,c),ih(e),i=Po(),e!==null&&!pt?(Ko(e,t,u),$n(e,t,u)):(Be&&i&&wo(t),t.flags|=1,Tt(e,t,n,u),t.child)}function sf(e,t,n,i,c){if($a(t),t.stateNode===null){var u=ys,m=n.contextType;typeof m=="object"&&m!==null&&(u=Et(m)),u=new n(i,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=sc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=i,u.state=t.memoizedState,u.refs={},Mo(t),m=n.contextType,u.context=typeof m=="object"&&m!==null?Et(m):ys,u.state=t.memoizedState,m=n.getDerivedStateFromProps,typeof m=="function"&&(ac(t,n,m,i),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&sc.enqueueReplaceState(u,u.state,null),xi(t,i,u,c),_i(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,x=Ia(n,y);u.props=x;var M=u.context,P=n.contextType;m=ys,typeof P=="object"&&P!==null&&(m=Et(P));var G=n.getDerivedStateFromProps;P=typeof G=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,P||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||M!==m)&&Gh(t,u,i,m),oa=!1;var D=t.memoizedState;u.state=D,xi(t,i,u,c),_i(),M=t.memoizedState,y||D!==M||oa?(typeof G=="function"&&(ac(t,n,G,i),M=t.memoizedState),(x=oa||Kh(t,n,x,i,D,M,m))?(P||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=M),u.props=i,u.state=M,u.context=m,i=x):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,Do(e,t),m=t.memoizedProps,P=Ia(n,m),u.props=P,G=t.pendingProps,D=u.context,M=n.contextType,x=ys,typeof M=="object"&&M!==null&&(x=Et(M)),y=n.getDerivedStateFromProps,(M=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==G||D!==x)&&Gh(t,u,i,x),oa=!1,D=t.memoizedState,u.state=D,xi(t,i,u,c),_i();var z=t.memoizedState;m!==G||D!==z||oa||e!==null&&e.dependencies!==null&&kr(e.dependencies)?(typeof y=="function"&&(ac(t,n,y,i),z=t.memoizedState),(P=oa||Kh(t,n,P,i,D,z,x)||e!==null&&e.dependencies!==null&&kr(e.dependencies))?(M||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,z,x),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,z,x)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=z),u.props=i,u.state=z,u.context=x,i=P):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),i=!1)}return u=i,Gr(e,t),i=(t.flags&128)!==0,u||i?(u=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&i?(t.child=Ya(t,e.child,null,c),t.child=Ya(t,null,n,c)):Tt(e,t,n,c),t.memoizedState=u.state,e=t.child):e=$n(e,t,c),e}function rf(e,t,n,i){return qa(),t.flags|=256,Tt(e,t,n,i),t.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cc(e){return{baseLanes:e,cachePool:Xd()}}function uc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Zt),e}function lf(e,t,n){var i=t.pendingProps,c=!1,u=(t.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:(ut.current&2)!==0),m&&(c=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(c?da(t):ha(),(e=tt)?(e=gm(e,un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:sa!==null?{id:Sn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},n=qd(e),n.return=t,t.child=n,kt=t,tt=null)):e=null,e===null)throw ra(t);return Vc(e)?t.lanes=32:t.lanes=536870912,null}var y=i.children;return i=i.fallback,c?(ha(),c=t.mode,y=Yr({mode:"hidden",children:y},c),i=Ba(i,c,n,null),y.return=t,i.return=t,y.sibling=i,t.child=y,i=t.child,i.memoizedState=cc(n),i.childLanes=uc(e,m,n),t.memoizedState=oc,Ei(null,i)):(da(t),dc(t,y))}var x=e.memoizedState;if(x!==null&&(y=x.dehydrated,y!==null)){if(u)t.flags&256?(da(t),t.flags&=-257,t=hc(e,t,n)):t.memoizedState!==null?(ha(),t.child=e.child,t.flags|=128,t=null):(ha(),y=i.fallback,c=t.mode,i=Yr({mode:"visible",children:i.children},c),y=Ba(y,c,n,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,Ya(t,e.child,null,n),i=t.child,i.memoizedState=cc(n),i.childLanes=uc(e,m,n),t.memoizedState=oc,t=Ei(null,i));else if(da(t),Vc(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var M=m.dgst;m=M,i=Error(l(419)),i.stack="",i.digest=m,mi({value:i,source:null,stack:null}),t=hc(e,t,n)}else if(pt||ws(e,t,n,!1),m=(n&e.childLanes)!==0,pt||m){if(m=Ze,m!==null&&(i=pn(m,n),i!==0&&i!==x.retryLane))throw x.retryLane=i,za(e,i),Yt(m,e,i),rc;Yc(y)||el(),t=hc(e,t,n)}else Yc(y)?(t.flags|=192,t.child=e.child,t=null):(e=x.treeContext,tt=hn(y.nextSibling),kt=t,Be=!0,ia=null,un=!1,e!==null&&Pd(t,e),t=dc(t,i.children),t.flags|=4096);return t}return c?(ha(),y=i.fallback,c=t.mode,x=e.child,M=x.sibling,i=Ln(x,{mode:"hidden",children:i.children}),i.subtreeFlags=x.subtreeFlags&65011712,M!==null?y=Ln(M,y):(y=Ba(y,c,n,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,Ei(null,i),i=t.child,y=e.child.memoizedState,y===null?y=cc(n):(c=y.cachePool,c!==null?(x=mt._currentValue,c=c.parent!==x?{parent:x,pool:x}:c):c=Xd(),y={baseLanes:y.baseLanes|n,cachePool:c}),i.memoizedState=y,i.childLanes=uc(e,m,n),t.memoizedState=oc,Ei(e.child,i)):(da(t),n=e.child,e=n.sibling,n=Ln(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=n,t.memoizedState=null,n)}function dc(e,t){return t=Yr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yr(e,t){return e=It(22,e,null,t),e.lanes=0,e}function hc(e,t,n){return Ya(t,e.child,null,n),e=dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function of(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),To(e.return,t,n)}function fc(e,t,n,i,c,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c,treeForkCount:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=i,m.tail=n,m.tailMode=c,m.treeForkCount=u)}function cf(e,t,n){var i=t.pendingProps,c=i.revealOrder,u=i.tail;i=i.children;var m=ut.current,y=(m&2)!==0;if(y?(m=m&1|2,t.flags|=128):m&=1,J(ut,m),Tt(e,t,i,n),i=Be?fi:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&of(e,n,t);else if(e.tag===19)of(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Mr(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),fc(t,!1,c,n,u,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Mr(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}fc(t,!0,n,null,u,i);break;case"together":fc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function $n(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ga|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ws(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&kr(e)))}function b0(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),la(t,mt,e.memoizedState.cache),qa();break;case 27:case 5:ke(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:la(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,qo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(da(t),t.flags|=128,null):(n&t.child.childLanes)!==0?lf(e,t,n):(da(t),e=$n(e,t,n),e!==null?e.sibling:null);da(t);break;case 19:var c=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(ws(e,t,n,!1),i=(n&t.childLanes)!==0),c){if(i)return cf(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),J(ut,ut.current),i)break;return null;case 22:return t.lanes=0,ef(e,t,n,t.pendingProps);case 24:la(t,mt,e.memoizedState.cache)}return $n(e,t,n)}function uf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)pt=!0;else{if(!mc(e,n)&&(t.flags&128)===0)return pt=!1,b0(e,t,n);pt=(e.flags&131072)!==0}else pt=!1,Be&&(t.flags&1048576)!==0&&$d(t,fi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Ka(t.elementType),t.type=e,typeof e=="function")bo(e)?(i=Ia(e,i),t.tag=1,t=sf(null,t,e,i,n)):(t.tag=0,t=lc(null,t,e,i,n));else{if(e!=null){var c=e.$$typeof;if(c===X){t.tag=11,t=Zh(null,t,e,i,n);break e}else if(c===W){t.tag=14,t=Wh(null,t,e,i,n);break e}}throw t=te(e)||e,Error(l(306,t,""))}}return t;case 0:return lc(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,c=Ia(i,t.pendingProps),sf(e,t,i,c,n);case 3:e:{if(Y(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var u=t.memoizedState;c=u.element,Do(e,t),xi(t,i,null,n);var m=t.memoizedState;if(i=m.cache,la(t,mt,i),i!==u.cache&&No(t,[mt],n,!0),_i(),i=m.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=rf(e,t,i,n);break e}else if(i!==c){c=ln(Error(l(424)),t),mi(c),t=rf(e,t,i,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,tt=hn(e.firstChild),kt=t,Be=!0,ia=null,un=!0,n=eh(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qa(),i===c){t=$n(e,t,n);break e}Tt(e,t,i,n)}t=t.child}return t;case 26:return Gr(e,t),e===null?(n=xm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Be||(n=t.type,e=t.pendingProps,i=ll(xe.current).createElement(n),i[St]=t,i[qt]=e,Nt(i,n,e),xt(i),t.stateNode=i):t.memoizedState=xm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ke(t),e===null&&Be&&(i=t.stateNode=ym(t.type,t.pendingProps,xe.current),kt=t,un=!0,c=tt,_a(t.type)?(Ic=c,tt=hn(i.firstChild)):tt=c),Tt(e,t,t.pendingProps.children,n),Gr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Be&&((c=i=tt)&&(i=Q0(i,t.type,t.pendingProps,un),i!==null?(t.stateNode=i,kt=t,tt=hn(i.firstChild),un=!1,c=!0):c=!1),c||ra(t)),ke(t),c=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,i=u.children,Pc(c,u)?i=null:m!==null&&Pc(c,m)&&(t.flags|=32),t.memoizedState!==null&&(c=$o(e,t,u0,null,null,n),$i._currentValue=c),Gr(e,t),Tt(e,t,i,n),t.child;case 6:return e===null&&Be&&((e=n=tt)&&(n=J0(n,t.pendingProps,un),n!==null?(t.stateNode=n,kt=t,tt=null,e=!0):e=!1),e||ra(t)),null;case 13:return lf(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ya(t,null,i,n):Tt(e,t,i,n),t.child;case 11:return Zh(e,t,t.type,t.pendingProps,n);case 7:return Tt(e,t,t.pendingProps,n),t.child;case 8:return Tt(e,t,t.pendingProps.children,n),t.child;case 12:return Tt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,la(t,t.type,i.value),Tt(e,t,i.children,n),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,$a(t),c=Et(c),i=i(c),t.flags|=1,Tt(e,t,i,n),t.child;case 14:return Wh(e,t,t.type,t.pendingProps,n);case 15:return Fh(e,t,t.type,t.pendingProps,n);case 19:return cf(e,t,n);case 31:return y0(e,t,n);case 22:return ef(e,t,n,t.pendingProps);case 24:return $a(t),i=Et(mt),e===null?(c=Oo(),c===null&&(c=Ze,u=Ao(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=n),c=u),t.memoizedState={parent:i,cache:c},Mo(t),la(t,mt,c)):((e.lanes&n)!==0&&(Do(e,t),xi(t,null,null,n),_i()),c=e.memoizedState,u=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),la(t,mt,i)):(i=u.cache,la(t,mt,i),i!==c.cache&&No(t,[mt],n,!0))),Tt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Pn(e){e.flags|=4}function gc(e,t,n,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(zf())e.flags|=8192;else throw Ga=Ar,Ro}else e.flags&=-16777217}function df(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Em(t))if(zf())e.flags|=8192;else throw Ga=Ar,Ro}function Vr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?We():536870912,e.lanes|=t,Ds|=t)}function Ti(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function _0(e,t,n){var i=t.pendingProps;switch(jo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Bn(mt),je(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(xs(t)?Pn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ko())),nt(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Pn(t),u!==null?(nt(t),df(t,u)):(nt(t),gc(t,c,null,i,n))):u?u!==e.memoizedState?(Pn(t),nt(t),df(t,u)):(nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Pn(t),nt(t),gc(t,c,e,i,n)),null;case 27:if(ht(t),n=xe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Pn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return nt(t),null}e=Q.current,xs(t)?Kd(t):(e=ym(c,i,n),t.stateNode=e,Pn(t))}return nt(t),null;case 5:if(ht(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Pn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return nt(t),null}if(u=Q.current,xs(t))Kd(t);else{var m=ll(xe.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof i.is=="string"?m.createElement("select",{is:i.is}):m.createElement("select"),i.multiple?u.multiple=!0:i.size&&(u.size=i.size);break;default:u=typeof i.is=="string"?m.createElement(c,{is:i.is}):m.createElement(c)}}u[St]=t,u[qt]=i;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=u;e:switch(Nt(u,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Pn(t)}}return nt(t),gc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Pn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=xe.current,xs(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,c=kt,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[St]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||lm(e.nodeValue,n)),e||ra(t,!0)}else e=ll(e).createTextNode(i),e[St]=t,t.stateNode=e}return nt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=xs(t),n!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[St]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),e=!1}else n=ko(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Qt(t),t):(Qt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return nt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=xs(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[St]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),c=!1}else c=ko(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Qt(t),t):(Qt(t),null)}return Qt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==c&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Vr(t,t.updateQueue),nt(t),null);case 4:return je(),e===null&&zc(t.stateNode.containerInfo),nt(t),null;case 10:return Bn(t.type),nt(t),null;case 19:if($(ut),i=t.memoizedState,i===null)return nt(t),null;if(c=(t.flags&128)!==0,u=i.rendering,u===null)if(c)Ti(i,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Mr(e),u!==null){for(t.flags|=128,Ti(i,!1),e=u.updateQueue,t.updateQueue=e,Vr(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Bd(n,e),n=n.sibling;return J(ut,ut.current&1|2),Be&&Un(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Ee()>Zr&&(t.flags|=128,c=!0,Ti(i,!1),t.lanes=4194304)}else{if(!c)if(e=Mr(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Vr(t,e),Ti(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!Be)return nt(t),null}else 2*Ee()-i.renderingStartTime>Zr&&n!==536870912&&(t.flags|=128,c=!0,Ti(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(e=i.last,e!==null?e.sibling=u:t.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ee(),e.sibling=null,n=ut.current,J(ut,c?n&1|2:n&1),Be&&Un(t,i.treeForkCount),e):(nt(t),null);case 22:case 23:return Qt(t),Bo(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&Vr(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&$(Pa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Bn(mt),nt(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function x0(e,t){switch(jo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bn(mt),je(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ht(t),null;case 31:if(t.memoizedState!==null){if(Qt(t),t.alternate===null)throw Error(l(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(ut),null;case 4:return je(),null;case 10:return Bn(t.type),null;case 22:case 23:return Qt(t),Bo(),e!==null&&$(Pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Bn(mt),null;case 25:return null;default:return null}}function hf(e,t){switch(jo(t),t.tag){case 3:Bn(mt),je();break;case 26:case 27:case 5:ht(t);break;case 4:je();break;case 31:t.memoizedState!==null&&Qt(t);break;case 13:Qt(t);break;case 19:$(ut);break;case 10:Bn(t.type);break;case 22:case 23:Qt(t),Bo(),e!==null&&$(Pa);break;case 24:Bn(mt)}}function Ni(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var c=i.next;n=c;do{if((n.tag&e)===e){i=void 0;var u=n.create,m=n.inst;i=u(),m.destroy=i}n=n.next}while(n!==c)}}catch(y){Ve(t,t.return,y)}}function fa(e,t,n){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&e)===e){var m=i.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,c=t;var x=n,M=y;try{M()}catch(P){Ve(c,x,P)}}}i=i.next}while(i!==u)}}catch(P){Ve(t,t.return,P)}}function ff(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{nh(t,n)}catch(i){Ve(e,e.return,i)}}}function mf(e,t,n){n.props=Ia(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ve(e,t,i)}}function Ai(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(c){Ve(e,t,c)}}function En(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(c){Ve(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(c){Ve(e,t,c)}else n.current=null}function gf(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(c){Ve(e,e.return,c)}}function pc(e,t,n){try{var i=e.stateNode;K0(i,e.type,n,t),i[qt]=t}catch(c){Ve(e,e.return,c)}}function pf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_a(e.type)||e.tag===4}function vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_a(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mn));else if(i!==4&&(i===27&&_a(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}function Ir(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&_a(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ir(e,t,n),e=e.sibling;e!==null;)Ir(e,t,n),e=e.sibling}function vf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Nt(t,i,n),t[St]=e,t[qt]=n}catch(u){Ve(e,e.return,u)}}var Kn=!1,vt=!1,bc=!1,yf=typeof WeakSet=="function"?WeakSet:Set,wt=null;function w0(e,t){if(e=e.containerInfo,Hc=ml,e=Ad(e),ho(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var m=0,y=-1,x=-1,M=0,P=0,G=e,D=null;t:for(;;){for(var z;G!==n||c!==0&&G.nodeType!==3||(y=m+c),G!==u||i!==0&&G.nodeType!==3||(x=m+i),G.nodeType===3&&(m+=G.nodeValue.length),(z=G.firstChild)!==null;)D=G,G=z;for(;;){if(G===e)break t;if(D===n&&++M===c&&(y=m),D===u&&++P===i&&(x=m),(z=G.nextSibling)!==null)break;G=D,D=G.parentNode}G=z}n=y===-1||x===-1?null:{start:y,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for($c={focusedElem:e,selectionRange:n},ml=!1,wt=t;wt!==null;)if(t=wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wt=e;else for(;wt!==null;){switch(t=wt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)c=e[n],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,c=u.memoizedProps,u=u.memoizedState,i=n.stateNode;try{var se=Ia(n.type,c);e=i.getSnapshotBeforeUpdate(se,u),i.__reactInternalSnapshotBeforeUpdate=e}catch(pe){Ve(n,n.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Gc(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,wt=e;break}wt=t.return}}function bf(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Yn(e,n),i&4&&Ni(5,n);break;case 1:if(Yn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(m){Ve(n,n.return,m)}else{var c=Ia(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Ve(n,n.return,m)}}i&64&&ff(n),i&512&&Ai(n,n.return);break;case 3:if(Yn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{nh(e,t)}catch(m){Ve(n,n.return,m)}}break;case 27:t===null&&i&4&&vf(n);case 26:case 5:Yn(e,n),t===null&&i&4&&gf(n),i&512&&Ai(n,n.return);break;case 12:Yn(e,n);break;case 31:Yn(e,n),i&4&&wf(e,n);break;case 13:Yn(e,n),i&4&&jf(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=O0.bind(null,n),Z0(e,n))));break;case 22:if(i=n.memoizedState!==null||Kn,!i){t=t!==null&&t.memoizedState!==null||vt,c=Kn;var u=vt;Kn=i,(vt=t)&&!u?Vn(e,n,(n.subtreeFlags&8772)!==0):Yn(e,n),Kn=c,vt=u}break;case 30:break;default:Yn(e,n)}}function _f(e){var t=e.alternate;t!==null&&(e.alternate=null,_f(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Xl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var st=null,$t=!1;function Gn(e,t,n){for(n=n.child;n!==null;)xf(e,t,n),n=n.sibling}function xf(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Oa,n)}catch{}switch(n.tag){case 26:vt||En(n,t),Gn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:vt||En(n,t);var i=st,c=$t;_a(n.type)&&(st=n.stateNode,$t=!1),Gn(e,t,n),Bi(n.stateNode),st=i,$t=c;break;case 5:vt||En(n,t);case 6:if(i=st,c=$t,st=null,Gn(e,t,n),st=i,$t=c,st!==null)if($t)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(n.stateNode)}catch(u){Ve(n,t,u)}else try{st.removeChild(n.stateNode)}catch(u){Ve(n,t,u)}break;case 18:st!==null&&($t?(e=st,fm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ps(e)):fm(st,n.stateNode));break;case 4:i=st,c=$t,st=n.stateNode.containerInfo,$t=!0,Gn(e,t,n),st=i,$t=c;break;case 0:case 11:case 14:case 15:fa(2,n,t),vt||fa(4,n,t),Gn(e,t,n);break;case 1:vt||(En(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&mf(n,t,i)),Gn(e,t,n);break;case 21:Gn(e,t,n);break;case 22:vt=(i=vt)||n.memoizedState!==null,Gn(e,t,n),vt=i;break;default:Gn(e,t,n)}}function wf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(n){Ve(t,t.return,n)}}}function jf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(n){Ve(t,t.return,n)}}function j0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new yf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new yf),t;default:throw Error(l(435,e.tag))}}function Xr(e,t){var n=j0(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var c=R0.bind(null,e,i);i.then(c,c)}})}function Pt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i],u=e,m=t,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(_a(y.type)){st=y.stateNode,$t=!1;break e}break;case 5:st=y.stateNode,$t=!1;break e;case 3:case 4:st=y.stateNode.containerInfo,$t=!0;break e}y=y.return}if(st===null)throw Error(l(160));xf(u,m,c),st=null,$t=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Sf(t,e),t=t.sibling}var yn=null;function Sf(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pt(t,e),Kt(e),i&4&&(fa(3,e,e.return),Ni(3,e),fa(5,e,e.return));break;case 1:Pt(t,e),Kt(e),i&512&&(vt||n===null||En(n,n.return)),i&64&&Kn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var c=yn;if(Pt(t,e),Kt(e),i&512&&(vt||n===null||En(n,n.return)),i&4){var u=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":u=c.getElementsByTagName("title")[0],(!u||u[ni]||u[St]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(i),c.head.insertBefore(u,c.querySelector("head > title"))),Nt(u,i,n),u[St]=e,xt(u),i=u;break e;case"link":var m=Sm("link","href",c).get(i+(n.href||""));if(m){for(var y=0;y<m.length;y++)if(u=m[y],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){m.splice(y,1);break t}}u=c.createElement(i),Nt(u,i,n),c.head.appendChild(u);break;case"meta":if(m=Sm("meta","content",c).get(i+(n.content||""))){for(y=0;y<m.length;y++)if(u=m[y],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){m.splice(y,1);break t}}u=c.createElement(i),Nt(u,i,n),c.head.appendChild(u);break;default:throw Error(l(468,i))}u[St]=e,xt(u),i=u}e.stateNode=i}else km(c,e.type,e.stateNode);else e.stateNode=jm(c,i,e.memoizedProps);else u!==i?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,i===null?km(c,e.type,e.stateNode):jm(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&pc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pt(t,e),Kt(e),i&512&&(vt||n===null||En(n,n.return)),n!==null&&i&4&&pc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pt(t,e),Kt(e),i&512&&(vt||n===null||En(n,n.return)),e.flags&32){c=e.stateNode;try{ds(c,"")}catch(se){Ve(e,e.return,se)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,pc(e,c,n!==null?n.memoizedProps:c)),i&1024&&(bc=!0);break;case 6:if(Pt(t,e),Kt(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(se){Ve(e,e.return,se)}}break;case 3:if(ul=null,c=yn,yn=ol(t.containerInfo),Pt(t,e),yn=c,Kt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ps(t.containerInfo)}catch(se){Ve(e,e.return,se)}bc&&(bc=!1,kf(e));break;case 4:i=yn,yn=ol(e.stateNode.containerInfo),Pt(t,e),Kt(e),yn=i;break;case 12:Pt(t,e),Kt(e);break;case 31:Pt(t,e),Kt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xr(e,i)));break;case 13:Pt(t,e),Kt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Jr=Ee()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xr(e,i)));break;case 22:c=e.memoizedState!==null;var x=n!==null&&n.memoizedState!==null,M=Kn,P=vt;if(Kn=M||c,vt=P||x,Pt(t,e),vt=P,Kn=M,Kt(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(n===null||x||Kn||vt||Xa(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){x=n=t;try{if(u=x.stateNode,c)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=x.stateNode;var G=x.memoizedProps.style,D=G!=null&&G.hasOwnProperty("display")?G.display:null;y.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(se){Ve(x,x.return,se)}}}else if(t.tag===6){if(n===null){x=t;try{x.stateNode.nodeValue=c?"":x.memoizedProps}catch(se){Ve(x,x.return,se)}}}else if(t.tag===18){if(n===null){x=t;try{var z=x.stateNode;c?mm(z,!0):mm(x.stateNode,!1)}catch(se){Ve(x,x.return,se)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Xr(e,n))));break;case 19:Pt(t,e),Kt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xr(e,i)));break;case 30:break;case 21:break;default:Pt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(pf(i)){n=i;break}i=i.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var c=n.stateNode,u=vc(e);Ir(e,u,c);break;case 5:var m=n.stateNode;n.flags&32&&(ds(m,""),n.flags&=-33);var y=vc(e);Ir(e,y,m);break;case 3:case 4:var x=n.stateNode.containerInfo,M=vc(e);yc(e,M,x);break;default:throw Error(l(161))}}catch(P){Ve(e,e.return,P)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;kf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Yn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)bf(e,t.alternate,t),t=t.sibling}function Xa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:fa(4,t,t.return),Xa(t);break;case 1:En(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&mf(t,t.return,n),Xa(t);break;case 27:Bi(t.stateNode);case 26:case 5:En(t,t.return),Xa(t);break;case 22:t.memoizedState===null&&Xa(t);break;case 30:Xa(t);break;default:Xa(t)}e=e.sibling}}function Vn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,u=t,m=u.flags;switch(u.tag){case 0:case 11:case 15:Vn(c,u,n),Ni(4,u);break;case 1:if(Vn(c,u,n),i=u,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(M){Ve(i,i.return,M)}if(i=u,c=i.updateQueue,c!==null){var y=i.stateNode;try{var x=c.shared.hiddenCallbacks;if(x!==null)for(c.shared.hiddenCallbacks=null,c=0;c<x.length;c++)th(x[c],y)}catch(M){Ve(i,i.return,M)}}n&&m&64&&ff(u),Ai(u,u.return);break;case 27:vf(u);case 26:case 5:Vn(c,u,n),n&&i===null&&m&4&&gf(u),Ai(u,u.return);break;case 12:Vn(c,u,n);break;case 31:Vn(c,u,n),n&&m&4&&wf(c,u);break;case 13:Vn(c,u,n),n&&m&4&&jf(c,u);break;case 22:u.memoizedState===null&&Vn(c,u,n),Ai(u,u.return);break;case 30:break;default:Vn(c,u,n)}t=t.sibling}}function _c(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&gi(n))}function xc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gi(e))}function bn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ef(e,t,n,i),t=t.sibling}function Ef(e,t,n,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:bn(e,t,n,i),c&2048&&Ni(9,t);break;case 1:bn(e,t,n,i);break;case 3:bn(e,t,n,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gi(e)));break;case 12:if(c&2048){bn(e,t,n,i),e=t.stateNode;try{var u=t.memoizedProps,m=u.id,y=u.onPostCommit;typeof y=="function"&&y(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Ve(t,t.return,x)}}else bn(e,t,n,i);break;case 31:bn(e,t,n,i);break;case 13:bn(e,t,n,i);break;case 23:break;case 22:u=t.stateNode,m=t.alternate,t.memoizedState!==null?u._visibility&2?bn(e,t,n,i):Ci(e,t):u._visibility&2?bn(e,t,n,i):(u._visibility|=2,Os(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&_c(m,t);break;case 24:bn(e,t,n,i),c&2048&&xc(t.alternate,t);break;default:bn(e,t,n,i)}}function Os(e,t,n,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,m=t,y=n,x=i,M=m.flags;switch(m.tag){case 0:case 11:case 15:Os(u,m,y,x,c),Ni(8,m);break;case 23:break;case 22:var P=m.stateNode;m.memoizedState!==null?P._visibility&2?Os(u,m,y,x,c):Ci(u,m):(P._visibility|=2,Os(u,m,y,x,c)),c&&M&2048&&_c(m.alternate,m);break;case 24:Os(u,m,y,x,c),c&&M&2048&&xc(m.alternate,m);break;default:Os(u,m,y,x,c)}t=t.sibling}}function Ci(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,c=i.flags;switch(i.tag){case 22:Ci(n,i),c&2048&&_c(i.alternate,i);break;case 24:Ci(n,i),c&2048&&xc(i.alternate,i);break;default:Ci(n,i)}t=t.sibling}}var Oi=8192;function Rs(e,t,n){if(e.subtreeFlags&Oi)for(e=e.child;e!==null;)Tf(e,t,n),e=e.sibling}function Tf(e,t,n){switch(e.tag){case 26:Rs(e,t,n),e.flags&Oi&&e.memoizedState!==null&&cv(n,yn,e.memoizedState,e.memoizedProps);break;case 5:Rs(e,t,n);break;case 3:case 4:var i=yn;yn=ol(e.stateNode.containerInfo),Rs(e,t,n),yn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Oi,Oi=16777216,Rs(e,t,n),Oi=i):Rs(e,t,n));break;default:Rs(e,t,n)}}function Nf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ri(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];wt=i,Cf(i,e)}Nf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Af(e),e=e.sibling}function Af(e){switch(e.tag){case 0:case 11:case 15:Ri(e),e.flags&2048&&fa(9,e,e.return);break;case 3:Ri(e);break;case 12:Ri(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Qr(e)):Ri(e);break;default:Ri(e)}}function Qr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];wt=i,Cf(i,e)}Nf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:fa(8,t,t.return),Qr(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Qr(t));break;default:Qr(t)}e=e.sibling}}function Cf(e,t){for(;wt!==null;){var n=wt;switch(n.tag){case 0:case 11:case 15:fa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:gi(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,wt=i;else e:for(n=e;wt!==null;){i=wt;var c=i.sibling,u=i.return;if(_f(i),i===n){wt=null;break e}if(c!==null){c.return=u,wt=c;break e}wt=u}}}var S0={getCacheForType:function(e){var t=Et(mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Et(mt).controller.signal}},k0=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Ze=null,Oe=null,De=0,Ye=0,Jt=null,ma=!1,Ms=!1,wc=!1,In=0,rt=0,ga=0,Qa=0,jc=0,Zt=0,Ds=0,Mi=null,Gt=null,Sc=!1,Jr=0,Of=0,Zr=1/0,Wr=null,pa=null,bt=0,va=null,Ls=null,Xn=0,kc=0,Ec=null,Rf=null,Di=0,Tc=null;function Wt(){return(Pe&2)!==0&&De!==0?De&-De:C.T!==null?Mc():ss()}function Mf(){if(Zt===0)if((De&536870912)===0||Be){var e=he;he<<=1,(he&3932160)===0&&(he=262144),Zt=e}else Zt=536870912;return e=Xt.current,e!==null&&(e.flags|=32),Zt}function Yt(e,t,n){(e===Ze&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(Us(e,0),ya(e,De,Zt,!1)),ct(e,n),((Pe&2)===0||e!==Ze)&&(e===Ze&&((Pe&2)===0&&(Qa|=n),rt===4&&ya(e,De,Zt,!1)),Tn(e))}function Df(e,t,n){if((Pe&6)!==0)throw Error(l(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||at(e,t),c=i?N0(e,t):Ac(e,t,!0),u=i;do{if(c===0){Ms&&!i&&ya(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!E0(n)){c=Ac(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var y=e;c=Mi;var x=y.current.memoizedState.isDehydrated;if(x&&(Us(y,m).flags|=256),m=Ac(y,m,!1),m!==2){if(wc&&!x){y.errorRecoveryDisabledLanes|=u,Qa|=u,c=4;break e}u=Gt,Gt=c,u!==null&&(Gt===null?Gt=u:Gt.push.apply(Gt,u))}c=m}if(u=!1,c!==2)continue}}if(c===1){Us(e,0),ya(e,t,0,!0);break}e:{switch(i=e,u=c,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:ya(i,t,Zt,!ma);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=Jr+300-Ee(),10<c)){if(ya(i,t,Zt,!ma),Ce(i,0,!0)!==0)break e;Xn=t,i.timeoutHandle=dm(Lf.bind(null,i,n,Gt,Wr,Sc,t,Zt,Qa,Ds,ma,u,"Throttled",-0,0),c);break e}Lf(i,n,Gt,Wr,Sc,t,Zt,Qa,Ds,ma,u,null,-0,0)}}break}while(!0);Tn(e)}function Lf(e,t,n,i,c,u,m,y,x,M,P,G,D,z){if(e.timeoutHandle=-1,G=t.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},Tf(t,u,G);var se=(u&62914560)===u?Jr-Ee():(u&4194048)===u?Of-Ee():0;if(se=uv(G,se),se!==null){Xn=u,e.cancelPendingCommit=se(Kf.bind(null,e,t,u,n,i,c,m,y,x,P,G,null,D,z)),ya(e,u,m,!M);return}}Kf(e,t,u,n,i,c,m,y,x)}function E0(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var c=n[i],u=c.getSnapshot;c=c.value;try{if(!Vt(u(),c))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ya(e,t,n,i){t&=~jc,t&=~Qa,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var u=31-Lt(c),m=1<<u;i[u]=-1,c&=~m}n!==0&&nn(e,n,t)}function Fr(){return(Pe&6)===0?(Li(0),!1):!0}function Nc(){if(Oe!==null){if(Ye===0)var e=Oe.return;else e=Oe,zn=Ha=null,Go(e),Es=null,vi=0,e=Oe;for(;e!==null;)hf(e.alternate,e),e=e.return;Oe=null}}function Us(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,V0(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Xn=0,Nc(),Ze=e,Oe=n=Ln(e.current,null),De=t,Ye=0,Jt=null,ma=!1,Ms=at(e,t),wc=!1,Ds=Zt=jc=Qa=ga=rt=0,Gt=Mi=null,Sc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-Lt(i),u=1<<c;t|=e[c],i&=~u}return In=t,_r(),n}function Uf(e,t){Te=null,C.H=ki,t===ks||t===Nr?(t=Zd(),Ye=3):t===Ro?(t=Zd(),Ye=4):Ye=t===rc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Jt=t,Oe===null&&(rt=1,Pr(e,ln(t,e.current)))}function zf(){var e=Xt.current;return e===null?!0:(De&4194048)===De?dn===null:(De&62914560)===De||(De&536870912)!==0?e===dn:!1}function Bf(){var e=C.H;return C.H=ki,e===null?ki:e}function qf(){var e=C.A;return C.A=S0,e}function el(){rt=4,ma||(De&4194048)!==De&&Xt.current!==null||(Ms=!0),(ga&134217727)===0&&(Qa&134217727)===0||Ze===null||ya(Ze,De,Zt,!1)}function Ac(e,t,n){var i=Pe;Pe|=2;var c=Bf(),u=qf();(Ze!==e||De!==t)&&(Wr=null,Us(e,t)),t=!1;var m=rt;e:do try{if(Ye!==0&&Oe!==null){var y=Oe,x=Jt;switch(Ye){case 8:Nc(),m=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(t=!0);var M=Ye;if(Ye=0,Jt=null,zs(e,y,x,M),n&&Ms){m=0;break e}break;default:M=Ye,Ye=0,Jt=null,zs(e,y,x,M)}}T0(),m=rt;break}catch(P){Uf(e,P)}while(!0);return t&&e.shellSuspendCounter++,zn=Ha=null,Pe=i,C.H=c,C.A=u,Oe===null&&(Ze=null,De=0,_r()),m}function T0(){for(;Oe!==null;)Hf(Oe)}function N0(e,t){var n=Pe;Pe|=2;var i=Bf(),c=qf();Ze!==e||De!==t?(Wr=null,Zr=Ee()+500,Us(e,t)):Ms=at(e,t);e:do try{if(Ye!==0&&Oe!==null){t=Oe;var u=Jt;t:switch(Ye){case 1:Ye=0,Jt=null,zs(e,t,u,1);break;case 2:case 9:if(Qd(u)){Ye=0,Jt=null,$f(t);break}t=function(){Ye!==2&&Ye!==9||Ze!==e||(Ye=7),Tn(e)},u.then(t,t);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Qd(u)?(Ye=0,Jt=null,$f(t)):(Ye=0,Jt=null,zs(e,t,u,7));break;case 5:var m=null;switch(Oe.tag){case 26:m=Oe.memoizedState;case 5:case 27:var y=Oe;if(m?Em(m):y.stateNode.complete){Ye=0,Jt=null;var x=y.sibling;if(x!==null)Oe=x;else{var M=y.return;M!==null?(Oe=M,tl(M)):Oe=null}break t}}Ye=0,Jt=null,zs(e,t,u,5);break;case 6:Ye=0,Jt=null,zs(e,t,u,6);break;case 8:Nc(),rt=6;break e;default:throw Error(l(462))}}A0();break}catch(P){Uf(e,P)}while(!0);return zn=Ha=null,C.H=i,C.A=c,Pe=n,Oe!==null?0:(Ze=null,De=0,_r(),rt)}function A0(){for(;Oe!==null&&!Ue();)Hf(Oe)}function Hf(e){var t=uf(e.alternate,e,In);e.memoizedProps=e.pendingProps,t===null?tl(e):Oe=t}function $f(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=af(n,t,t.pendingProps,t.type,void 0,De);break;case 11:t=af(n,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:Go(t);default:hf(n,t),t=Oe=Bd(t,In),t=uf(n,t,In)}e.memoizedProps=e.pendingProps,t===null?tl(e):Oe=t}function zs(e,t,n,i){zn=Ha=null,Go(t),Es=null,vi=0;var c=t.return;try{if(v0(e,c,t,n,De)){rt=1,Pr(e,ln(n,e.current)),Oe=null;return}}catch(u){if(c!==null)throw Oe=c,u;rt=1,Pr(e,ln(n,e.current)),Oe=null;return}t.flags&32768?(Be||i===1?e=!0:Ms||(De&536870912)!==0?e=!1:(ma=e=!0,(i===2||i===9||i===3||i===6)&&(i=Xt.current,i!==null&&i.tag===13&&(i.flags|=16384))),Pf(t,e)):tl(t)}function tl(e){var t=e;do{if((t.flags&32768)!==0){Pf(t,ma);return}e=t.return;var n=_0(t.alternate,t,In);if(n!==null){Oe=n;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);rt===0&&(rt=5)}function Pf(e,t){do{var n=x0(e.alternate,e);if(n!==null){n.flags&=32767,Oe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=n}while(e!==null);rt=6,Oe=null}function Kf(e,t,n,i,c,u,m,y,x){e.cancelPendingCommit=null;do nl();while(bt!==0);if((Pe&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=vo,ft(e,n,u,m,y,x),e===Ze&&(Oe=Ze=null,De=0),Ls=t,va=e,Xn=n,kc=u,Ec=c,Rf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,M0(gn,function(){return Xf(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=C.T,C.T=null,c=I.p,I.p=2,m=Pe,Pe|=4;try{w0(e,t,n)}finally{Pe=m,I.p=c,C.T=i}}bt=1,Gf(),Yf(),Vf()}}function Gf(){if(bt===1){bt=0;var e=va,t=Ls,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=C.T,C.T=null;var i=I.p;I.p=2;var c=Pe;Pe|=4;try{Sf(t,e);var u=$c,m=Ad(e.containerInfo),y=u.focusedElem,x=u.selectionRange;if(m!==y&&y&&y.ownerDocument&&Nd(y.ownerDocument.documentElement,y)){if(x!==null&&ho(y)){var M=x.start,P=x.end;if(P===void 0&&(P=M),"selectionStart"in y)y.selectionStart=M,y.selectionEnd=Math.min(P,y.value.length);else{var G=y.ownerDocument||document,D=G&&G.defaultView||window;if(D.getSelection){var z=D.getSelection(),se=y.textContent.length,pe=Math.min(x.start,se),Qe=x.end===void 0?pe:Math.min(x.end,se);!z.extend&&pe>Qe&&(m=Qe,Qe=pe,pe=m);var N=Td(y,pe),E=Td(y,Qe);if(N&&E&&(z.rangeCount!==1||z.anchorNode!==N.node||z.anchorOffset!==N.offset||z.focusNode!==E.node||z.focusOffset!==E.offset)){var R=G.createRange();R.setStart(N.node,N.offset),z.removeAllRanges(),pe>Qe?(z.addRange(R),z.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),z.addRange(R))}}}}for(G=[],z=y;z=z.parentNode;)z.nodeType===1&&G.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<G.length;y++){var K=G[y];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}ml=!!Hc,$c=Hc=null}finally{Pe=c,I.p=i,C.T=n}}e.current=t,bt=2}}function Yf(){if(bt===2){bt=0;var e=va,t=Ls,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=C.T,C.T=null;var i=I.p;I.p=2;var c=Pe;Pe|=4;try{bf(e,t.alternate,t)}finally{Pe=c,I.p=i,C.T=n}}bt=3}}function Vf(){if(bt===4||bt===3){bt=0,et();var e=va,t=Ls,n=Xn,i=Rf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?bt=5:(bt=0,Ls=va=null,If(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(pa=null),Ra(n),t=t.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Oa,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=C.T,c=I.p,I.p=2,C.T=null;try{for(var u=e.onRecoverableError,m=0;m<i.length;m++){var y=i[m];u(y.value,{componentStack:y.stack})}}finally{C.T=t,I.p=c}}(Xn&3)!==0&&nl(),Tn(e),c=e.pendingLanes,(n&261930)!==0&&(c&42)!==0?e===Tc?Di++:(Di=0,Tc=e):Di=0,Li(0)}}function If(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gi(t)))}function nl(){return Gf(),Yf(),Vf(),Xf()}function Xf(){if(bt!==5)return!1;var e=va,t=kc;kc=0;var n=Ra(Xn),i=C.T,c=I.p;try{I.p=32>n?32:n,C.T=null,n=Ec,Ec=null;var u=va,m=Xn;if(bt=0,Ls=va=null,Xn=0,(Pe&6)!==0)throw Error(l(331));var y=Pe;if(Pe|=4,Af(u.current),Ef(u,u.current,m,n),Pe=y,Li(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Oa,u)}catch{}return!0}finally{I.p=c,C.T=i,If(e,t)}}function Qf(e,t,n){t=ln(n,t),t=ic(e.stateNode,t,2),e=ua(e,t,2),e!==null&&(ct(e,2),Tn(e))}function Ve(e,t,n){if(e.tag===3)Qf(e,e,n);else for(;t!==null;){if(t.tag===3){Qf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(pa===null||!pa.has(i))){e=ln(n,e),n=Qh(2),i=ua(t,n,2),i!==null&&(Jh(n,i,t,e),ct(i,2),Tn(i));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new k0;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(wc=!0,c.add(n),e=C0.bind(null,e,t,n),t.then(e,e))}function C0(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ze===e&&(De&n)===n&&(rt===4||rt===3&&(De&62914560)===De&&300>Ee()-Jr?(Pe&2)===0&&Us(e,0):jc|=n,Ds===De&&(Ds=0)),Tn(e)}function Jf(e,t){t===0&&(t=We()),e=za(e,t),e!==null&&(ct(e,t),Tn(e))}function O0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Jf(e,n)}function R0(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Jf(e,n)}function M0(e,t){return we(e,t)}var al=null,Bs=null,Oc=!1,sl=!1,Rc=!1,ba=0;function Tn(e){e!==Bs&&e.next===null&&(Bs===null?al=Bs=e:Bs=Bs.next=e),sl=!0,Oc||(Oc=!0,L0())}function Li(e,t){if(!Rc&&sl){Rc=!0;do for(var n=!1,i=al;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var u=0;else{var m=i.suspendedLanes,y=i.pingedLanes;u=(1<<31-Lt(42|e)+1)-1,u&=c&~(m&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,em(i,u))}else u=De,u=Ce(i,i===Ze?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(u&3)===0||at(i,u)||(n=!0,em(i,u));i=i.next}while(n);Rc=!1}}function D0(){Zf()}function Zf(){sl=Oc=!1;var e=0;ba!==0&&Y0()&&(e=ba);for(var t=Ee(),n=null,i=al;i!==null;){var c=i.next,u=Wf(i,t);u===0?(i.next=null,n===null?al=c:n.next=c,c===null&&(Bs=n)):(n=i,(e!==0||(u&3)!==0)&&(sl=!0)),i=c}bt!==0&&bt!==5||Li(e),ba!==0&&(ba=0)}function Wf(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-Lt(u),y=1<<m,x=c[m];x===-1?((y&n)===0||(y&i)!==0)&&(c[m]=ze(y,t)):x<=t&&(e.expiredLanes|=y),u&=~y}if(t=Ze,n=De,n=Ce(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Ae(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||at(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Ae(i),Ra(n)){case 2:case 8:n=ta;break;case 32:n=gn;break;case 268435456:n=as;break;default:n=gn}return i=Ff.bind(null,e),n=we(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Ae(i),e.callbackPriority=2,e.callbackNode=null,2}function Ff(e,t){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(nl()&&e.callbackNode!==n)return null;var i=De;return i=Ce(e,e===Ze?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Df(e,i,t),Wf(e,Ee()),e.callbackNode!=null&&e.callbackNode===n?Ff.bind(null,e):null)}function em(e,t){if(nl())return null;Df(e,t,!0)}function L0(){I0(function(){(Pe&6)!==0?we(Bt,D0):Zf()})}function Mc(){if(ba===0){var e=js;e===0&&(e=ae,ae<<=1,(ae&261888)===0&&(ae=256)),ba=e}return ba}function tm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:hr(""+e)}function nm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function U0(e,t,n,i,c){if(t==="submit"&&n&&n.stateNode===c){var u=tm((c[qt]||null).action),m=i.submitter;m&&(t=(t=m[qt]||null)?tm(t.formAction):m.getAttribute("formAction"),t!==null&&(u=t,m=null));var y=new pr("action","action",null,i,c);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ba!==0){var x=m?nm(c,m):new FormData(c);Fo(n,{pending:!0,data:x,method:c.method,action:u},null,x)}}else typeof u=="function"&&(y.preventDefault(),x=m?nm(c,m):new FormData(c),Fo(n,{pending:!0,data:x,method:c.method,action:u},u,x))},currentTarget:c}]})}}for(var Dc=0;Dc<po.length;Dc++){var Lc=po[Dc],z0=Lc.toLowerCase(),B0=Lc[0].toUpperCase()+Lc.slice(1);vn(z0,"on"+B0)}vn(Rd,"onAnimationEnd"),vn(Md,"onAnimationIteration"),vn(Dd,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(e0,"onTransitionRun"),vn(t0,"onTransitionStart"),vn(n0,"onTransitionCancel"),vn(Ld,"onTransitionEnd"),cs("onMouseEnter",["mouseout","mouseover"]),cs("onMouseLeave",["mouseout","mouseover"]),cs("onPointerEnter",["pointerout","pointerover"]),cs("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ui));function am(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var m=i.length-1;0<=m;m--){var y=i[m],x=y.instance,M=y.currentTarget;if(y=y.listener,x!==u&&c.isPropagationStopped())break e;u=y,c.currentTarget=M;try{u(c)}catch(P){br(P)}c.currentTarget=null,u=x}else for(m=0;m<i.length;m++){if(y=i[m],x=y.instance,M=y.currentTarget,y=y.listener,x!==u&&c.isPropagationStopped())break e;u=y,c.currentTarget=M;try{u(c)}catch(P){br(P)}c.currentTarget=null,u=x}}}}function Re(e,t){var n=t[Il];n===void 0&&(n=t[Il]=new Set);var i=e+"__bubble";n.has(i)||(sm(t,e,2,!1),n.add(i))}function Uc(e,t,n){var i=0;t&&(i|=4),sm(n,e,i,t)}var il="_reactListening"+Math.random().toString(36).slice(2);function zc(e){if(!e[il]){e[il]=!0,Ju.forEach(function(n){n!=="selectionchange"&&(q0.has(n)||Uc(n,!1,e),Uc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[il]||(t[il]=!0,Uc("selectionchange",!1,t))}}function sm(e,t,n,i){switch(Mm(t)){case 2:var c=fv;break;case 8:c=mv;break;default:c=Wc}n=c.bind(null,t,n,e),c=void 0,!no||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Bc(e,t,n,i,c){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var y=i.stateNode.containerInfo;if(y===c)break;if(m===4)for(m=i.return;m!==null;){var x=m.tag;if((x===3||x===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;y!==null;){if(m=rs(y),m===null)return;if(x=m.tag,x===5||x===6||x===26||x===27){i=u=m;continue e}y=y.parentNode}}i=i.return}od(function(){var M=u,P=eo(n),G=[];e:{var D=Ud.get(e);if(D!==void 0){var z=pr,se=e;switch(e){case"keypress":if(mr(n)===0)break e;case"keydown":case"keyup":z=Rp;break;case"focusin":se="focus",z=ro;break;case"focusout":se="blur",z=ro;break;case"beforeblur":case"afterblur":z=ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=_p;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Lp;break;case Rd:case Md:case Dd:z=jp;break;case Ld:z=zp;break;case"scroll":case"scrollend":z=yp;break;case"wheel":z=qp;break;case"copy":case"cut":case"paste":z=kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=fd;break;case"toggle":case"beforetoggle":z=$p}var pe=(t&4)!==0,Qe=!pe&&(e==="scroll"||e==="scrollend"),N=pe?D!==null?D+"Capture":null:D;pe=[];for(var E=M,R;E!==null;){var K=E;if(R=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||R===null||N===null||(K=si(E,N),K!=null&&pe.push(zi(E,K,R))),Qe)break;E=E.return}0<pe.length&&(D=new z(D,se,null,n,P),G.push({event:D,listeners:pe}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",D&&n!==Fl&&(se=n.relatedTarget||n.fromElement)&&(rs(se)||se[is]))break e;if((z||D)&&(D=P.window===P?P:(D=P.ownerDocument)?D.defaultView||D.parentWindow:window,z?(se=n.relatedTarget||n.toElement,z=M,se=se?rs(se):null,se!==null&&(Qe=h(se),pe=se.tag,se!==Qe||pe!==5&&pe!==27&&pe!==6)&&(se=null)):(z=null,se=M),z!==se)){if(pe=dd,K="onMouseLeave",N="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(pe=fd,K="onPointerLeave",N="onPointerEnter",E="pointer"),Qe=z==null?D:ai(z),R=se==null?D:ai(se),D=new pe(K,E+"leave",z,n,P),D.target=Qe,D.relatedTarget=R,K=null,rs(P)===M&&(pe=new pe(N,E+"enter",se,n,P),pe.target=R,pe.relatedTarget=Qe,K=pe),Qe=K,z&&se)t:{for(pe=H0,N=z,E=se,R=0,K=N;K;K=pe(K))R++;K=0;for(var fe=E;fe;fe=pe(fe))K++;for(;0<R-K;)N=pe(N),R--;for(;0<K-R;)E=pe(E),K--;for(;R--;){if(N===E||E!==null&&N===E.alternate){pe=N;break t}N=pe(N),E=pe(E)}pe=null}else pe=null;z!==null&&im(G,D,z,pe,!1),se!==null&&Qe!==null&&im(G,Qe,se,pe,!0)}}e:{if(D=M?ai(M):window,z=D.nodeName&&D.nodeName.toLowerCase(),z==="select"||z==="input"&&D.type==="file")var He=xd;else if(bd(D))if(wd)He=Zp;else{He=Qp;var re=Xp}else z=D.nodeName,!z||z.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?M&&Wl(M.elementType)&&(He=xd):He=Jp;if(He&&(He=He(e,M))){_d(G,He,n,P);break e}re&&re(e,D,M),e==="focusout"&&M&&D.type==="number"&&M.memoizedProps.value!=null&&Zl(D,"number",D.value)}switch(re=M?ai(M):window,e){case"focusin":(bd(re)||re.contentEditable==="true")&&(gs=re,fo=M,hi=null);break;case"focusout":hi=fo=gs=null;break;case"mousedown":mo=!0;break;case"contextmenu":case"mouseup":case"dragend":mo=!1,Cd(G,n,P);break;case"selectionchange":if(Fp)break;case"keydown":case"keyup":Cd(G,n,P)}var Ne;if(oo)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ms?vd(e,n)&&(Le="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Le="onCompositionStart");Le&&(md&&n.locale!=="ko"&&(ms||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ms&&(Ne=cd()):(aa=P,ao="value"in aa?aa.value:aa.textContent,ms=!0)),re=rl(M,Le),0<re.length&&(Le=new hd(Le,e,null,n,P),G.push({event:Le,listeners:re}),Ne?Le.data=Ne:(Ne=yd(n),Ne!==null&&(Le.data=Ne)))),(Ne=Kp?Gp(e,n):Yp(e,n))&&(Le=rl(M,"onBeforeInput"),0<Le.length&&(re=new hd("onBeforeInput","beforeinput",null,n,P),G.push({event:re,listeners:Le}),re.data=Ne)),U0(G,e,M,n,P)}am(G,t)})}function zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rl(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=si(e,n),c!=null&&i.unshift(zi(e,c,u)),c=si(e,t),c!=null&&i.push(zi(e,c,u))),e.tag===3)return i;e=e.return}return[]}function H0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function im(e,t,n,i,c){for(var u=t._reactName,m=[];n!==null&&n!==i;){var y=n,x=y.alternate,M=y.stateNode;if(y=y.tag,x!==null&&x===i)break;y!==5&&y!==26&&y!==27||M===null||(x=M,c?(M=si(n,u),M!=null&&m.unshift(zi(n,M,x))):c||(M=si(n,u),M!=null&&m.push(zi(n,M,x)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var $0=/\r\n?/g,P0=/\u0000|\uFFFD/g;function rm(e){return(typeof e=="string"?e:""+e).replace($0,`
`).replace(P0,"")}function lm(e,t){return t=rm(t),rm(e)===t}function Xe(e,t,n,i,c,u){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ds(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ds(e,""+i);break;case"className":ur(e,"class",i);break;case"tabIndex":ur(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(e,n,i);break;case"style":rd(e,i,u);break;case"data":if(t!=="object"){ur(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=hr(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&Xe(e,t,"name",c.name,c,null),Xe(e,t,"formEncType",c.formEncType,c,null),Xe(e,t,"formMethod",c.formMethod,c,null),Xe(e,t,"formTarget",c.formTarget,c,null)):(Xe(e,t,"encType",c.encType,c,null),Xe(e,t,"method",c.method,c,null),Xe(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=hr(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Mn);break;case"onScroll":i!=null&&Re("scroll",e);break;case"onScrollEnd":i!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(n=i.__html,n!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=hr(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Re("beforetoggle",e),Re("toggle",e),cr(e,"popover",i);break;case"xlinkActuate":Rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Rn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Rn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Rn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Rn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":cr(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=pp.get(n)||n,cr(e,n,i))}}function qc(e,t,n,i,c,u){switch(n){case"style":rd(e,i,u);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(n=i.__html,n!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ds(e,i):(typeof i=="number"||typeof i=="bigint")&&ds(e,""+i);break;case"onScroll":i!=null&&Re("scroll",e);break;case"onScrollEnd":i!=null&&Re("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zu.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(c=n.endsWith("Capture"),t=n.slice(2,c?n.length-7:void 0),u=e[qt]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof i=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,c);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):cr(e,n,i)}}}function Nt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var i=!1,c=!1,u;for(u in n)if(n.hasOwnProperty(u)){var m=n[u];if(m!=null)switch(u){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Xe(e,t,u,m,n,null)}}c&&Xe(e,t,"srcSet",n.srcSet,n,null),i&&Xe(e,t,"src",n.src,n,null);return;case"input":Re("invalid",e);var y=u=m=c=null,x=null,M=null;for(i in n)if(n.hasOwnProperty(i)){var P=n[i];if(P!=null)switch(i){case"name":c=P;break;case"type":m=P;break;case"checked":x=P;break;case"defaultChecked":M=P;break;case"value":u=P;break;case"defaultValue":y=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(l(137,t));break;default:Xe(e,t,i,P,n,null)}}nd(e,u,y,x,M,m,c,!1);return;case"select":Re("invalid",e),i=m=u=null;for(c in n)if(n.hasOwnProperty(c)&&(y=n[c],y!=null))switch(c){case"value":u=y;break;case"defaultValue":m=y;break;case"multiple":i=y;default:Xe(e,t,c,y,n,null)}t=u,n=m,e.multiple=!!i,t!=null?us(e,!!i,t,!1):n!=null&&us(e,!!i,n,!0);return;case"textarea":Re("invalid",e),u=c=i=null;for(m in n)if(n.hasOwnProperty(m)&&(y=n[m],y!=null))switch(m){case"value":i=y;break;case"defaultValue":c=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(l(91));break;default:Xe(e,t,m,y,n,null)}sd(e,i,c,u);return;case"option":for(x in n)n.hasOwnProperty(x)&&(i=n[x],i!=null)&&(x==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":Xe(e,t,x,i,n,null));return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(i=0;i<Ui.length;i++)Re(Ui[i],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in n)if(n.hasOwnProperty(M)&&(i=n[M],i!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Xe(e,t,M,i,n,null)}return;default:if(Wl(t)){for(P in n)n.hasOwnProperty(P)&&(i=n[P],i!==void 0&&qc(e,t,P,i,n,void 0));return}}for(y in n)n.hasOwnProperty(y)&&(i=n[y],i!=null&&Xe(e,t,y,i,n,null))}function K0(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,m=null,y=null,x=null,M=null,P=null;for(z in n){var G=n[z];if(n.hasOwnProperty(z)&&G!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":x=G;default:i.hasOwnProperty(z)||Xe(e,t,z,null,i,G)}}for(var D in i){var z=i[D];if(G=n[D],i.hasOwnProperty(D)&&(z!=null||G!=null))switch(D){case"type":u=z;break;case"name":c=z;break;case"checked":M=z;break;case"defaultChecked":P=z;break;case"value":m=z;break;case"defaultValue":y=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(l(137,t));break;default:z!==G&&Xe(e,t,D,z,i,G)}}Jl(e,m,y,x,M,P,u,c);return;case"select":z=m=y=D=null;for(u in n)if(x=n[u],n.hasOwnProperty(u)&&x!=null)switch(u){case"value":break;case"multiple":z=x;default:i.hasOwnProperty(u)||Xe(e,t,u,null,i,x)}for(c in i)if(u=i[c],x=n[c],i.hasOwnProperty(c)&&(u!=null||x!=null))switch(c){case"value":D=u;break;case"defaultValue":y=u;break;case"multiple":m=u;default:u!==x&&Xe(e,t,c,u,i,x)}t=y,n=m,i=z,D!=null?us(e,!!n,D,!1):!!i!=!!n&&(t!=null?us(e,!!n,t,!0):us(e,!!n,n?[]:"",!1));return;case"textarea":z=D=null;for(y in n)if(c=n[y],n.hasOwnProperty(y)&&c!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Xe(e,t,y,null,i,c)}for(m in i)if(c=i[m],u=n[m],i.hasOwnProperty(m)&&(c!=null||u!=null))switch(m){case"value":D=c;break;case"defaultValue":z=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==u&&Xe(e,t,m,c,i,u)}ad(e,D,z);return;case"option":for(var se in n)D=n[se],n.hasOwnProperty(se)&&D!=null&&!i.hasOwnProperty(se)&&(se==="selected"?e.selected=!1:Xe(e,t,se,null,i,D));for(x in i)D=i[x],z=n[x],i.hasOwnProperty(x)&&D!==z&&(D!=null||z!=null)&&(x==="selected"?e.selected=D&&typeof D!="function"&&typeof D!="symbol":Xe(e,t,x,D,i,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in n)D=n[pe],n.hasOwnProperty(pe)&&D!=null&&!i.hasOwnProperty(pe)&&Xe(e,t,pe,null,i,D);for(M in i)if(D=i[M],z=n[M],i.hasOwnProperty(M)&&D!==z&&(D!=null||z!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(l(137,t));break;default:Xe(e,t,M,D,i,z)}return;default:if(Wl(t)){for(var Qe in n)D=n[Qe],n.hasOwnProperty(Qe)&&D!==void 0&&!i.hasOwnProperty(Qe)&&qc(e,t,Qe,void 0,i,D);for(P in i)D=i[P],z=n[P],!i.hasOwnProperty(P)||D===z||D===void 0&&z===void 0||qc(e,t,P,D,i,z);return}}for(var N in n)D=n[N],n.hasOwnProperty(N)&&D!=null&&!i.hasOwnProperty(N)&&Xe(e,t,N,null,i,D);for(G in i)D=i[G],z=n[G],!i.hasOwnProperty(G)||D===z||D==null&&z==null||Xe(e,t,G,D,i,z)}function om(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function G0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var c=n[i],u=c.transferSize,m=c.initiatorType,y=c.duration;if(u&&y&&om(m)){for(m=0,y=c.responseEnd,i+=1;i<n.length;i++){var x=n[i],M=x.startTime;if(M>y)break;var P=x.transferSize,G=x.initiatorType;P&&om(G)&&(x=x.responseEnd,m+=P*(x<y?1:(y-M)/(x-M)))}if(--i,t+=8*(u+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hc=null,$c=null;function ll(e){return e.nodeType===9?e:e.ownerDocument}function cm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function um(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kc=null;function Y0(){var e=window.event;return e&&e.type==="popstate"?e===Kc?!1:(Kc=e,!0):(Kc=null,!1)}var dm=typeof setTimeout=="function"?setTimeout:void 0,V0=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,I0=typeof queueMicrotask=="function"?queueMicrotask:typeof hm<"u"?function(e){return hm.resolve(null).then(e).catch(X0)}:dm;function X0(e){setTimeout(function(){throw e})}function _a(e){return e==="head"}function fm(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(c),Ps(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Bi(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Bi(n);for(var u=n.firstChild;u;){var m=u.nextSibling,y=u.nodeName;u[ni]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=m}}else n==="body"&&Bi(e.ownerDocument.body);n=c}while(n);Ps(t)}function mm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Gc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gc(n),Xl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Q0(e,t,n,i){for(;e.nodeType===1;){var c=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ni])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=hn(e.nextSibling),e===null)break}return null}function J0(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=hn(e.nextSibling),e===null))return null;return e}function gm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=hn(e.nextSibling),e===null))return null;return e}function Yc(e){return e.data==="$?"||e.data==="$~"}function Vc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Z0(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ic=null;function pm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return hn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function vm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function ym(e,t,n){switch(t=ll(n),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Bi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Xl(e)}var fn=new Map,bm=new Set;function ol(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qn=I.d;I.d={f:W0,r:F0,D:ev,C:tv,L:nv,m:av,X:iv,S:sv,M:rv};function W0(){var e=Qn.f(),t=Fr();return e||t}function F0(e){var t=ls(e);t!==null&&t.tag===5&&t.type==="form"?Lh(t):Qn.r(e)}var qs=typeof document>"u"?null:document;function _m(e,t,n){var i=qs;if(i&&typeof t=="string"&&t){var c=sn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof n=="string"&&(c+='[crossorigin="'+n+'"]'),bm.has(c)||(bm.add(c),e={rel:e,crossOrigin:n,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),Nt(t,"link",e),xt(t),i.head.appendChild(t)))}}function ev(e){Qn.D(e),_m("dns-prefetch",e,null)}function tv(e,t){Qn.C(e,t),_m("preconnect",e,t)}function nv(e,t,n){Qn.L(e,t,n);var i=qs;if(i&&e&&t){var c='link[rel="preload"][as="'+sn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(c+='[imagesrcset="'+sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(c+='[imagesizes="'+sn(n.imageSizes)+'"]')):c+='[href="'+sn(e)+'"]';var u=c;switch(t){case"style":u=Hs(e);break;case"script":u=$s(e)}fn.has(u)||(e=w({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),fn.set(u,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(qi(u))||t==="script"&&i.querySelector(Hi(u))||(t=i.createElement("link"),Nt(t,"link",e),xt(t),i.head.appendChild(t)))}}function av(e,t){Qn.m(e,t);var n=qs;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+sn(i)+'"][href="'+sn(e)+'"]',u=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=$s(e)}if(!fn.has(u)&&(e=w({rel:"modulepreload",href:e},t),fn.set(u,e),n.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Hi(u)))return}i=n.createElement("link"),Nt(i,"link",e),xt(i),n.head.appendChild(i)}}}function sv(e,t,n){Qn.S(e,t,n);var i=qs;if(i&&e){var c=os(i).hoistableStyles,u=Hs(e);t=t||"default";var m=c.get(u);if(!m){var y={loading:0,preload:null};if(m=i.querySelector(qi(u)))y.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},n),(n=fn.get(u))&&Xc(e,n);var x=m=i.createElement("link");xt(x),Nt(x,"link",e),x._p=new Promise(function(M,P){x.onload=M,x.onerror=P}),x.addEventListener("load",function(){y.loading|=1}),x.addEventListener("error",function(){y.loading|=2}),y.loading|=4,cl(m,t,i)}m={type:"stylesheet",instance:m,count:1,state:y},c.set(u,m)}}}function iv(e,t){Qn.X(e,t);var n=qs;if(n&&e){var i=os(n).hoistableScripts,c=$s(e),u=i.get(c);u||(u=n.querySelector(Hi(c)),u||(e=w({src:e,async:!0},t),(t=fn.get(c))&&Qc(e,t),u=n.createElement("script"),xt(u),Nt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(c,u))}}function rv(e,t){Qn.M(e,t);var n=qs;if(n&&e){var i=os(n).hoistableScripts,c=$s(e),u=i.get(c);u||(u=n.querySelector(Hi(c)),u||(e=w({src:e,async:!0,type:"module"},t),(t=fn.get(c))&&Qc(e,t),u=n.createElement("script"),xt(u),Nt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(c,u))}}function xm(e,t,n,i){var c=(c=xe.current)?ol(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Hs(n.href),n=os(c).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Hs(n.href);var u=os(c).hoistableStyles,m=u.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=c.querySelector(qi(e)))&&!u._p&&(m.instance=u,m.state.loading=5),fn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},fn.set(e,n),u||lv(c,e,n,m.state))),t&&i===null)throw Error(l(528,""));return m}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$s(n),n=os(c).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Hs(e){return'href="'+sn(e)+'"'}function qi(e){return'link[rel="stylesheet"]['+e+"]"}function wm(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function lv(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Nt(t,"link",n),xt(t),e.head.appendChild(t))}function $s(e){return'[src="'+sn(e)+'"]'}function Hi(e){return"script[async]"+e}function jm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+sn(n.href)+'"]');if(i)return t.instance=i,xt(i),i;var c=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),xt(i),Nt(i,"style",c),cl(i,n.precedence,e),t.instance=i;case"stylesheet":c=Hs(n.href);var u=e.querySelector(qi(c));if(u)return t.state.loading|=4,t.instance=u,xt(u),u;i=wm(n),(c=fn.get(c))&&Xc(i,c),u=(e.ownerDocument||e).createElement("link"),xt(u);var m=u;return m._p=new Promise(function(y,x){m.onload=y,m.onerror=x}),Nt(u,"link",i),t.state.loading|=4,cl(u,n.precedence,e),t.instance=u;case"script":return u=$s(n.src),(c=e.querySelector(Hi(u)))?(t.instance=c,xt(c),c):(i=n,(c=fn.get(u))&&(i=w({},n),Qc(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),xt(c),Nt(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,cl(i,n.precedence,e));return t.instance}function cl(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,u=c,m=0;m<i.length;m++){var y=i[m];if(y.dataset.precedence===t)u=y;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Xc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Qc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ul=null;function Sm(e,t,n){if(ul===null){var i=new Map,c=ul=new Map;c.set(n,i)}else c=ul,i=c.get(n),i||(i=new Map,c.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),c=0;c<n.length;c++){var u=n[c];if(!(u[ni]||u[St]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(t)||"";m=e+m;var y=i.get(m);y?y.push(u):i.set(m,[u])}}return i}function km(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ov(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Em(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function cv(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Hs(i.href),u=t.querySelector(qi(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=dl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,xt(u);return}u=t.ownerDocument||t,i=wm(i),(c=fn.get(c))&&Xc(i,c),u=u.createElement("link"),xt(u);var m=u;m._p=new Promise(function(y,x){m.onload=y,m.onerror=x}),Nt(u,"link",i),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=dl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Jc=0;function uv(e,t){return e.stylesheets&&e.count===0&&fl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&fl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Jc===0&&(Jc=62500*G0());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&fl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Jc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function dl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var hl=null;function fl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,hl=new Map,t.forEach(dv,e),hl=null,dl.call(e))}function dv(e,t){if(!(t.state.loading&4)){var n=hl.get(e);if(n)var i=n.get(null);else{n=new Map,hl.set(e,n);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var m=c[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(n.set(m.dataset.precedence,m),i=m)}i&&n.set(null,i)}c=t.instance,m=c.getAttribute("data-precedence"),u=n.get(m)||i,u===i&&n.set(null,c),n.set(m,c),this.count++,i=dl.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var $i={$$typeof:B,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function hv(e,t,n,i,c,u,m,y,x){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Je(0),this.hiddenUpdates=Je(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Tm(e,t,n,i,c,u,m,y,x,M,P,G){return e=new hv(e,t,n,m,x,M,P,G,y),t=1,u===!0&&(t|=24),u=It(3,null,null,t),e.current=u,u.stateNode=e,t=Ao(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:i,isDehydrated:n,cache:t},Mo(u),e}function Nm(e){return e?(e=ys,e):ys}function Am(e,t,n,i,c,u){c=Nm(c),i.context===null?i.context=c:i.pendingContext=c,i=ca(t),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=ua(e,i,t),n!==null&&(Yt(n,e,t),bi(n,e,t))}function Cm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zc(e,t){Cm(e,t),(e=e.alternate)&&Cm(e,t)}function Om(e){if(e.tag===13||e.tag===31){var t=za(e,67108864);t!==null&&Yt(t,e,67108864),Zc(e,67108864)}}function Rm(e){if(e.tag===13||e.tag===31){var t=Wt();t=On(t);var n=za(e,t);n!==null&&Yt(n,e,t),Zc(e,t)}}var ml=!0;function fv(e,t,n,i){var c=C.T;C.T=null;var u=I.p;try{I.p=2,Wc(e,t,n,i)}finally{I.p=u,C.T=c}}function mv(e,t,n,i){var c=C.T;C.T=null;var u=I.p;try{I.p=8,Wc(e,t,n,i)}finally{I.p=u,C.T=c}}function Wc(e,t,n,i){if(ml){var c=Fc(i);if(c===null)Bc(e,t,i,gl,n),Dm(e,i);else if(pv(c,e,t,n,i))i.stopPropagation();else if(Dm(e,i),t&4&&-1<gv.indexOf(e)){for(;c!==null;){var u=ls(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=Ge(u.pendingLanes);if(m!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var x=1<<31-Lt(m);y.entanglements[1]|=x,m&=~x}Tn(u),(Pe&6)===0&&(Zr=Ee()+500,Li(0))}}break;case 31:case 13:y=za(u,2),y!==null&&Yt(y,u,2),Fr(),Zc(u,2)}if(u=Fc(i),u===null&&Bc(e,t,i,gl,n),u===c)break;c=u}c!==null&&i.stopPropagation()}else Bc(e,t,i,null,n)}}function Fc(e){return e=eo(e),eu(e)}var gl=null;function eu(e){if(gl=null,e=rs(e),e!==null){var t=h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return gl=e,null}function Mm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case Bt:return 2;case ta:return 8;case gn:case Ca:return 32;case as:return 268435456;default:return 32}default:return 32}}var tu=!1,xa=null,wa=null,ja=null,Pi=new Map,Ki=new Map,Sa=[],gv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dm(e,t){switch(e){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":Pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function Gi(e,t,n,i,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[c]},t!==null&&(t=ls(t),t!==null&&Om(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function pv(e,t,n,i,c){switch(t){case"focusin":return xa=Gi(xa,e,t,n,i,c),!0;case"dragenter":return wa=Gi(wa,e,t,n,i,c),!0;case"mouseover":return ja=Gi(ja,e,t,n,i,c),!0;case"pointerover":var u=c.pointerId;return Pi.set(u,Gi(Pi.get(u)||null,e,t,n,i,c)),!0;case"gotpointercapture":return u=c.pointerId,Ki.set(u,Gi(Ki.get(u)||null,e,t,n,i,c)),!0}return!1}function Lm(e){var t=rs(e.target);if(t!==null){var n=h(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,Xu(e.priority,function(){Rm(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,Xu(e.priority,function(){Rm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fc(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Fl=i,n.target.dispatchEvent(i),Fl=null}else return t=ls(n),t!==null&&Om(t),e.blockedOn=n,!1;t.shift()}return!0}function Um(e,t,n){pl(e)&&n.delete(t)}function vv(){tu=!1,xa!==null&&pl(xa)&&(xa=null),wa!==null&&pl(wa)&&(wa=null),ja!==null&&pl(ja)&&(ja=null),Pi.forEach(Um),Ki.forEach(Um)}function vl(e,t){e.blockedOn===t&&(e.blockedOn=null,tu||(tu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,vv)))}var yl=null;function zm(e){yl!==e&&(yl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){yl===e&&(yl=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(eu(i||n)===null)continue;break}var u=ls(n);u!==null&&(e.splice(t,3),t-=3,Fo(u,{pending:!0,data:c,method:n.method,action:i},i,c))}}))}function Ps(e){function t(x){return vl(x,e)}xa!==null&&vl(xa,e),wa!==null&&vl(wa,e),ja!==null&&vl(ja,e),Pi.forEach(t),Ki.forEach(t);for(var n=0;n<Sa.length;n++){var i=Sa[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Sa.length&&(n=Sa[0],n.blockedOn===null);)Lm(n),n.blockedOn===null&&Sa.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var c=n[i],u=n[i+1],m=c[qt]||null;if(typeof u=="function")m||zm(n);else if(m){var y=null;if(u&&u.hasAttribute("formAction")){if(c=u,m=u[qt]||null)y=m.formAction;else if(eu(c)!==null)continue}else y=m.action;typeof y=="function"?n[i+1]=y:(n.splice(i,3),i-=3),zm(n)}}}function Bm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function nu(e){this._internalRoot=e}bl.prototype.render=nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var n=t.current,i=Wt();Am(n,i,e,t,null,null)},bl.prototype.unmount=nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Am(e.current,2,null,e,null,null),Fr(),t[is]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=ss();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sa.length&&t!==0&&t<Sa[n].priority;n++);Sa.splice(n,0,e),n===0&&Lm(e)}};var qm=a.version;if(qm!=="19.2.4")throw Error(l(527,qm,"19.2.4"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var yv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Oa=_l.inject(yv),Dt=_l}catch{}}return Vi.createRoot=function(e,t){if(!d(e))throw Error(l(299));var n=!1,i="",c=Yh,u=Vh,m=Ih;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Tm(e,1,!1,null,null,n,i,null,c,u,m,Bm),e[is]=t.current,zc(e),new nu(t)},Vi.hydrateRoot=function(e,t,n){if(!d(e))throw Error(l(299));var i=!1,c="",u=Yh,m=Vh,y=Ih,x=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.formState!==void 0&&(x=n.formState)),t=Tm(e,1,!0,t,n??null,i,c,x,u,m,y,Bm),t.context=Nm(null),n=t.current,i=Wt(),i=On(i),c=ca(i),c.callback=null,ua(n,c,i),n=i,t.current.lanes=n,ct(t,n),Tn(t),e[is]=t.current,zc(e),new bl(t)},Vi.version="19.2.4",Vi}var Qm;function Nv(){if(Qm)return iu.exports;Qm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),iu.exports=Tv(),iu.exports}var Av=Nv();const Og=U.createContext(null);function zt(){const s=U.useContext(Og);if(!s)throw new Error("useApp must be used within AppProvider");return s}const Rg=U.createContext(null);function Bl(){const s=U.useContext(Rg);if(!s)throw new Error("useAuth must be used within AuthProvider");return s}const Nn={DASHBOARD:"dashboard",DAILY_LOG:"daily_log",KITCHEN:"kitchen",PROFILE:"profile"};function Cv(){const{signIn:s,signUp:a}=Bl(),[r,l]=U.useState("signin"),[d,h]=U.useState(""),[f,g]=U.useState(""),[v,p]=U.useState(""),[b,w]=U.useState(!1),[k,S]=U.useState("");async function j(T){T.preventDefault(),p(""),S(""),w(!0);try{r==="signup"?(await a(d,f),S("Check your email for a confirmation link!")):await s(d,f)}catch(q){p(q.message)}finally{w(!1)}}function A(){l(r==="signin"?"signup":"signin"),p(""),S("")}return o.jsx("div",{className:"auth",children:o.jsxs("div",{className:"auth-content",children:[o.jsx("h1",{className:"auth-title",children:"Irada"}),o.jsx("p",{className:"auth-subtitle",children:r==="signin"?"Welcome back":"Create your account"}),o.jsx("div",{className:"auth-card",children:o.jsxs("form",{onSubmit:j,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"auth-email",children:"Email"}),o.jsx("input",{id:"auth-email",type:"email",value:d,onChange:T=>h(T.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"auth-password",children:"Password"}),o.jsx("input",{id:"auth-password",type:"password",value:f,onChange:T=>g(T.target.value),placeholder:"",required:!0,minLength:6,autoComplete:r==="signup"?"new-password":"current-password"})]}),v&&o.jsx("p",{className:"auth-error",children:v}),k&&o.jsx("p",{className:"auth-confirm",children:k}),o.jsx("button",{type:"submit",className:"btn-primary",disabled:b,children:b?"Loading...":r==="signin"?"Sign In":"Sign Up"})]})}),o.jsx("button",{type:"button",className:"auth-toggle",onClick:A,children:r==="signin"?"Don't have an account? Sign Up":"Already have an account? Sign In"})]})})}function Wn(s){return s.reduce((a,r)=>({kcal:a.kcal+(r.kcal||0),protein:a.protein+(r.protein||0)}),{kcal:0,protein:0})}const Ov={sedentary:1.2,light:1.375,moderate:1.55,very:1.725,extreme:1.9};function Rv(s,a,r,l){const d=10*s+6.25*a-5*r;return l==="male"?d+5:d-161}function Mv(s,a,r,l,d){const h=Rv(s,a,r,l),f=Ov[d]||1.2;return Math.round(h*f)}const Dv=7700;function Mg(s,a,r){const l=r.maintenanceKcal||r.kcal,d=r.goal||"maintain",h=r.weightLossTarget||5;if(!l||l<=0)return{deltaKcal:0,deltaKg:0,goalKg:h,goal:d,pct:0,daysTracked:0,firstDate:null};const f={};for(const S of s)f[S.dateKey]||(f[S.dateKey]=[]),f[S.dateKey].push(S);const g={};for(const S of a||[])g[S.dateKey]=(g[S.dateKey]||0)+(S.caloriesBurned||0);let v=0,p=0,b=null;for(const[S,j]of Object.entries(f)){const A=Wn(j),T=g[S]||0;v+=l-(A.kcal-T),p++,(!b||S<b)&&(b=S)}const w=v/Dv;let k=0;return d==="lose"&&h>0?k=Math.min(Math.max(w,0)/h,1):d==="gain"&&h>0&&(k=Math.min(Math.max(-w,0)/h,1)),{deltaKcal:Math.round(v),deltaKg:w,goalKg:h,goal:d,pct:k,daysTracked:p,firstDate:b}}function Lv(s){return Math.round(s*35/100)/10}const Uv=[{id:1,name:"Chicken breast",kcalPer100g:165,proteinPer100g:31,portions:[{label:"breast",grams:120}]},{id:2,name:"Chicken thigh",kcalPer100g:209,proteinPer100g:26,portions:[{label:"thigh",grams:115}]},{id:3,name:"Turkey breast",kcalPer100g:135,proteinPer100g:30,portions:[{label:"slice",grams:28}]},{id:4,name:"Ground turkey",kcalPer100g:170,proteinPer100g:21,portions:[{label:"cup",grams:130}]},{id:5,name:"Ground beef (90% lean)",kcalPer100g:176,proteinPer100g:20,portions:[{label:"patty",grams:113}]},{id:6,name:"Ground beef (80% lean)",kcalPer100g:254,proteinPer100g:17,portions:[{label:"patty",grams:113}]},{id:7,name:"Beef steak (sirloin)",kcalPer100g:206,proteinPer100g:26,portions:[{label:"steak",grams:200}]},{id:8,name:"Lamb chop",kcalPer100g:258,proteinPer100g:24,portions:[{label:"chop",grams:100}]},{id:9,name:"Pork chop",kcalPer100g:231,proteinPer100g:26,portions:[{label:"chop",grams:120}]},{id:10,name:"Pork tenderloin",kcalPer100g:143,proteinPer100g:26,portions:[{label:"piece",grams:120}]},{id:11,name:"Bacon",kcalPer100g:541,proteinPer100g:37,portions:[{label:"slice",grams:8}]},{id:12,name:"Salmon",kcalPer100g:208,proteinPer100g:20,portions:[{label:"fillet",grams:150}]},{id:13,name:"Tuna (canned)",kcalPer100g:116,proteinPer100g:26,portions:[{label:"can",grams:85}]},{id:14,name:"Shrimp",kcalPer100g:99,proteinPer100g:24,portions:[{label:"piece",grams:6},{label:"cup",grams:145}]},{id:15,name:"Cod",kcalPer100g:82,proteinPer100g:18,portions:[{label:"fillet",grams:150}]},{id:16,name:"Tilapia",kcalPer100g:96,proteinPer100g:20,portions:[{label:"fillet",grams:115}]},{id:17,name:"Egg (whole)",kcalPer100g:155,proteinPer100g:13,portions:[{label:"egg",grams:50}]},{id:18,name:"Egg white",kcalPer100g:52,proteinPer100g:11,portions:[{label:"white",grams:33}]},{id:19,name:"Milk (whole)",kcalPer100g:61,proteinPer100g:3.2,portions:[{label:"cup",grams:244},{label:"tbsp",grams:15}]},{id:20,name:"Milk (skim)",kcalPer100g:34,proteinPer100g:3.4,portions:[{label:"cup",grams:245},{label:"tbsp",grams:15}]},{id:21,name:"Greek yogurt",kcalPer100g:73,proteinPer100g:10,portions:[{label:"cup",grams:170},{label:"tbsp",grams:15}]},{id:22,name:"Yogurt (plain)",kcalPer100g:61,proteinPer100g:3.5,portions:[{label:"cup",grams:245}]},{id:23,name:"Cottage cheese",kcalPer100g:84,proteinPer100g:11,portions:[{label:"cup",grams:226},{label:"tbsp",grams:14}]},{id:24,name:"Cheddar cheese",kcalPer100g:403,proteinPer100g:25,portions:[{label:"slice",grams:28},{label:"cup shredded",grams:113}]},{id:25,name:"Mozzarella",kcalPer100g:280,proteinPer100g:28,portions:[{label:"slice",grams:28},{label:"cup shredded",grams:113}]},{id:26,name:"Parmesan",kcalPer100g:431,proteinPer100g:38,portions:[{label:"tbsp",grams:5}]},{id:27,name:"Cream cheese",kcalPer100g:342,proteinPer100g:6,portions:[{label:"tbsp",grams:14.5}]},{id:28,name:"Butter",kcalPer100g:717,proteinPer100g:.9,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:29,name:"Heavy cream",kcalPer100g:340,proteinPer100g:2.1,portions:[{label:"tbsp",grams:15},{label:"cup",grams:240}]},{id:30,name:"Whey protein powder",kcalPer100g:400,proteinPer100g:80,portions:[{label:"scoop",grams:30}]},{id:31,name:"White rice (cooked)",kcalPer100g:130,proteinPer100g:2.7,portions:[{label:"cup",grams:186}]},{id:32,name:"Brown rice (cooked)",kcalPer100g:112,proteinPer100g:2.3,portions:[{label:"cup",grams:195}]},{id:33,name:"Pasta (cooked)",kcalPer100g:131,proteinPer100g:5,portions:[{label:"cup",grams:140}]},{id:34,name:"Bread (white)",kcalPer100g:265,proteinPer100g:9,portions:[{label:"slice",grams:25}]},{id:35,name:"Bread (whole wheat)",kcalPer100g:247,proteinPer100g:13,portions:[{label:"slice",grams:28}]},{id:36,name:"Oats (dry)",kcalPer100g:389,proteinPer100g:17,portions:[{label:"cup",grams:80},{label:"tbsp",grams:5}]},{id:37,name:"Oatmeal (cooked)",kcalPer100g:71,proteinPer100g:2.5,portions:[{label:"cup",grams:234}]},{id:38,name:"Tortilla (flour)",kcalPer100g:312,proteinPer100g:8,portions:[{label:"tortilla",grams:45}]},{id:39,name:"Quinoa (cooked)",kcalPer100g:120,proteinPer100g:4.4,portions:[{label:"cup",grams:185}]},{id:40,name:"Couscous (cooked)",kcalPer100g:112,proteinPer100g:3.8,portions:[{label:"cup",grams:157}]},{id:41,name:"Potato",kcalPer100g:77,proteinPer100g:2,portions:[{label:"medium",grams:150}]},{id:42,name:"Sweet potato",kcalPer100g:86,proteinPer100g:1.6,portions:[{label:"medium",grams:130}]},{id:43,name:"Corn",kcalPer100g:86,proteinPer100g:3.3,portions:[{label:"ear",grams:90},{label:"cup",grams:145}]},{id:44,name:"Lentils (cooked)",kcalPer100g:116,proteinPer100g:9,portions:[{label:"cup",grams:198}]},{id:45,name:"Chickpeas (cooked)",kcalPer100g:164,proteinPer100g:8.9,portions:[{label:"cup",grams:164}]},{id:46,name:"Black beans (cooked)",kcalPer100g:132,proteinPer100g:8.9,portions:[{label:"cup",grams:172}]},{id:47,name:"Kidney beans (cooked)",kcalPer100g:127,proteinPer100g:8.7,portions:[{label:"cup",grams:177}]},{id:48,name:"Edamame",kcalPer100g:121,proteinPer100g:11,portions:[{label:"cup",grams:155}]},{id:49,name:"Tofu (firm)",kcalPer100g:76,proteinPer100g:8,portions:[{label:"block",grams:252},{label:"cup",grams:126}]},{id:50,name:"Broccoli",kcalPer100g:34,proteinPer100g:2.8,portions:[{label:"cup",grams:91},{label:"head",grams:600}]},{id:51,name:"Spinach",kcalPer100g:23,proteinPer100g:2.9,portions:[{label:"cup raw",grams:30},{label:"cup cooked",grams:180}]},{id:52,name:"Tomato",kcalPer100g:18,proteinPer100g:.9,portions:[{label:"medium",grams:123},{label:"cup",grams:180}]},{id:53,name:"Onion",kcalPer100g:40,proteinPer100g:1.1,portions:[{label:"medium",grams:110},{label:"cup",grams:160}]},{id:54,name:"Bell pepper",kcalPer100g:31,proteinPer100g:1,portions:[{label:"medium",grams:120},{label:"cup",grams:150}]},{id:55,name:"Carrot",kcalPer100g:41,proteinPer100g:.9,portions:[{label:"medium",grams:61},{label:"cup",grams:128}]},{id:56,name:"Cucumber",kcalPer100g:15,proteinPer100g:.7,portions:[{label:"medium",grams:200},{label:"cup",grams:119}]},{id:57,name:"Lettuce",kcalPer100g:15,proteinPer100g:1.4,portions:[{label:"cup",grams:36},{label:"leaf",grams:5}]},{id:58,name:"Mushrooms",kcalPer100g:22,proteinPer100g:3.1,portions:[{label:"cup",grams:70},{label:"piece",grams:18}]},{id:59,name:"Zucchini",kcalPer100g:17,proteinPer100g:1.2,portions:[{label:"medium",grams:196},{label:"cup",grams:113}]},{id:60,name:"Avocado",kcalPer100g:160,proteinPer100g:2,portions:[{label:"avocado",grams:150},{label:"half",grams:75}]},{id:61,name:"Green beans",kcalPer100g:31,proteinPer100g:1.8,portions:[{label:"cup",grams:125}]},{id:62,name:"Cauliflower",kcalPer100g:25,proteinPer100g:1.9,portions:[{label:"cup",grams:107}]},{id:63,name:"Cabbage",kcalPer100g:25,proteinPer100g:1.3,portions:[{label:"cup",grams:89}]},{id:64,name:"Banana",kcalPer100g:89,proteinPer100g:1.1,portions:[{label:"medium",grams:118}]},{id:65,name:"Apple",kcalPer100g:52,proteinPer100g:.3,portions:[{label:"medium",grams:182}]},{id:66,name:"Orange",kcalPer100g:47,proteinPer100g:.9,portions:[{label:"medium",grams:131}]},{id:67,name:"Strawberries",kcalPer100g:32,proteinPer100g:.7,portions:[{label:"cup",grams:152},{label:"piece",grams:12}]},{id:68,name:"Blueberries",kcalPer100g:57,proteinPer100g:.7,portions:[{label:"cup",grams:148}]},{id:69,name:"Grapes",kcalPer100g:69,proteinPer100g:.7,portions:[{label:"cup",grams:151}]},{id:70,name:"Mango",kcalPer100g:60,proteinPer100g:.8,portions:[{label:"cup",grams:165},{label:"mango",grams:200}]},{id:71,name:"Watermelon",kcalPer100g:30,proteinPer100g:.6,portions:[{label:"cup",grams:152},{label:"slice",grams:280}]},{id:72,name:"Almonds",kcalPer100g:579,proteinPer100g:21,portions:[{label:"handful",grams:28},{label:"cup",grams:143}]},{id:73,name:"Peanuts",kcalPer100g:567,proteinPer100g:26,portions:[{label:"handful",grams:28},{label:"cup",grams:146}]},{id:74,name:"Walnuts",kcalPer100g:654,proteinPer100g:15,portions:[{label:"handful",grams:28},{label:"cup",grams:117}]},{id:75,name:"Cashews",kcalPer100g:553,proteinPer100g:18,portions:[{label:"handful",grams:28},{label:"cup",grams:137}]},{id:76,name:"Peanut butter",kcalPer100g:588,proteinPer100g:25,portions:[{label:"tbsp",grams:16}]},{id:77,name:"Chia seeds",kcalPer100g:486,proteinPer100g:17,portions:[{label:"tbsp",grams:12}]},{id:78,name:"Flax seeds",kcalPer100g:534,proteinPer100g:18,portions:[{label:"tbsp",grams:7}]},{id:79,name:"Sunflower seeds",kcalPer100g:584,proteinPer100g:21,portions:[{label:"tbsp",grams:9},{label:"cup",grams:140}]},{id:80,name:"Olive oil",kcalPer100g:884,proteinPer100g:0,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:81,name:"Coconut oil",kcalPer100g:862,proteinPer100g:0,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:82,name:"Vegetable oil",kcalPer100g:884,proteinPer100g:0,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:83,name:"Honey",kcalPer100g:304,proteinPer100g:.3,portions:[{label:"tbsp",grams:21},{label:"tsp",grams:7}]},{id:84,name:"Sugar",kcalPer100g:387,proteinPer100g:0,portions:[{label:"tbsp",grams:12.5},{label:"tsp",grams:4}]},{id:85,name:"Flour (all-purpose)",kcalPer100g:364,proteinPer100g:10,portions:[{label:"cup",grams:125},{label:"tbsp",grams:8}]},{id:86,name:"Dark chocolate",kcalPer100g:546,proteinPer100g:5,portions:[{label:"square",grams:10},{label:"bar",grams:40}]},{id:87,name:"Hummus",kcalPer100g:166,proteinPer100g:8,portions:[{label:"tbsp",grams:15},{label:"cup",grams:246}]},{id:88,name:"Sour cream",kcalPer100g:193,proteinPer100g:2.4,portions:[{label:"tbsp",grams:12}]},{id:89,name:"Mayonnaise",kcalPer100g:680,proteinPer100g:1,portions:[{label:"tbsp",grams:14},{label:"tsp",grams:5}]},{id:90,name:"Ketchup",kcalPer100g:112,proteinPer100g:1.7,portions:[{label:"tbsp",grams:17},{label:"tsp",grams:6}]},{id:91,name:"Soy sauce",kcalPer100g:53,proteinPer100g:8.1,portions:[{label:"tbsp",grams:18},{label:"tsp",grams:6}]}],Dg="nt_schema_version",Mu="nt_targets",Du="nt_entries",zv="nt_exercise_logs",Bv="nt_water_logs",qv="nt_custom_meals",Lu="nt_recipes",Uu="nt_leftovers",zu="nt_personal_ingredients",Lg=3;function rr(s){try{const a=localStorage.getItem(s);return a?JSON.parse(a):null}catch{return null}}function Qs(s,a){try{localStorage.setItem(s,JSON.stringify(a))}catch(r){console.error(`Failed to save ${s}:`,r)}}function Hv(){return rr(Mu)||{kcal:2e3,protein:120,maintenanceKcal:2e3,userName:"",weightLossTarget:5,onboardingComplete:!1}}function $v(){return rr(Du)||[]}function Pv(){return rr(Lu)||[]}function Kv(){return rr(Uu)||[]}function Bu(){return rr(zu)||[]}function Rl(s){Qs(zu,s)}function Gv(){try{localStorage.removeItem(Mu),localStorage.removeItem(Du),localStorage.removeItem(zv),localStorage.removeItem(Bv),localStorage.removeItem(qv),localStorage.removeItem(Lu),localStorage.removeItem(Uu),localStorage.removeItem(zu),localStorage.removeItem(Dg)}catch(s){console.error("Failed to clear data:",s)}}function Yv(){return JSON.stringify({schemaVersion:Lg,targets:Hv(),entries:$v(),recipes:Pv(),leftovers:Kv(),exportedAt:new Date().toISOString()},null,2)}function Vv(s){const a=JSON.parse(s);if(!a.targets||!Array.isArray(a.entries))throw new Error("Invalid data format");return Qs(Mu,a.targets),Qs(Du,a.entries),Array.isArray(a.recipes)&&Qs(Lu,a.recipes),Array.isArray(a.leftovers)&&Qs(Uu,a.leftovers),Qs(Dg,a.schemaVersion||Lg),{targets:a.targets,entries:a.entries,recipes:a.recipes||[],leftovers:a.leftovers||[]}}function xl(s,a){return(Number(s)||0)*a}const vu={label:"g",grams:1},Wi=[{label:"g",grams:1},{label:"tbsp",grams:15},{label:"tsp",grams:5},{label:"cup",grams:240},{label:"piece",grams:100},{label:"slice",grams:30},{label:"serving",grams:100}],Iv=["Egg","Chicken breast","Rice","Bread","Oats","Banana","Greek yogurt","Milk","Pasta","Salmon","Avocado","Potato"];function yu(s){return s?.portions?[...s.portions,vu]:[vu]}function Xv(s,a){if(s.refAmount&&s.refUnit){const r=Wi.find(g=>g.label===s.refUnit)||Wi[0],l=s.refAmount*r.grams,d=l>0?Math.round(s.refKcal/l*100):0,h=l>0?Math.round(s.refProtein/l*100*10)/10:0,f=r.label!=="g"?[{label:r.label,grams:r.grams}]:[];return{...s,kcalPer100g:d,proteinPer100g:h,portions:f,id:`p_${a}`,isPersonal:!0}}return{...s,id:`p_${a}`,isPersonal:!0}}function Qv(){const s=Bu();return[...Uv,...s.map(Xv)]}function Ug(s,a){const r=s.length,l=a.length;if(r===0)return l;if(l===0)return r;let d=Array.from({length:l+1},(h,f)=>f);for(let h=1;h<=r;h++){const f=[h];for(let g=1;g<=l;g++)f[g]=s[h-1]===a[g-1]?d[g-1]:1+Math.min(d[g-1],d[g],f[g-1]);d=f}return d[l]}function Jv(s,a){const r=s.toLowerCase().trim();if(!r)return null;const l=a.find(v=>v.name.toLowerCase()===r);if(l)return l;const d=a.find(v=>v.name.toLowerCase().includes(r)||r.includes(v.name.toLowerCase()));if(d)return d;let h=null,f=1/0;const g=r.split(/\s+/);for(const v of a){const p=v.name.toLowerCase().split(/\s+/);for(const b of g)if(!(b.length<3))for(const w of p){if(w.length<3)continue;const k=Math.floor(Math.max(b.length,w.length)*.35),S=Ug(b,w);S<=k&&S<f&&(f=S,h=v)}}return h}function Zv(s,a){const r=s.toLowerCase().trim();if(r.length<2)return[];const l=a.filter(f=>f.name.toLowerCase().includes(r));if(l.length>0)return l.slice(0,6);const d=r.split(/\s+/).filter(f=>f.length>=2);if(d.length===0)return[];const h=[];for(const f of a){const g=f.name.toLowerCase().split(/\s+/);let v=1/0;for(const b of d)for(const w of g){const k=Ug(b,w);k<v&&(v=k)}const p=Math.floor(r.length*.4);v<=p&&h.push({ing:f,dist:v})}return h.sort((f,g)=>f.dist-g.dist),h.slice(0,6).map(f=>f.ing)}function Ja(){return{key:Date.now()+Math.random(),query:"",name:"",amount:1,portionLabel:"g",portionGrams:1,portions:Wi,kcalPer100g:0,proteinPer100g:0,totalKcal:0,totalProtein:0,matched:!1,isNew:!1,saveToDb:!0,editing:!1}}function Jm(s){const a=yu(s),r=a[0];return{key:Date.now()+Math.random(),query:s.name,name:s.name,amount:1,portionLabel:r.label,portionGrams:r.grams,portions:a,kcalPer100g:s.kcalPer100g,proteinPer100g:s.proteinPer100g,matched:!0,isNew:!1,isPersonal:!!s.isPersonal,saveToDb:!1,editing:!0}}function Wv({value:s,onChange:a,onSelect:r,onConfirm:l,allDb:d,disabled:h}){const[f,g]=U.useState(!1),v=U.useMemo(()=>Zv(s,d),[s,d]);function p(b){b.key==="Enter"&&(b.preventDefault(),g(!1),l())}return o.jsxs("div",{className:"ilf-name-wrap",children:[o.jsx("input",{type:"text",className:"ilf-field ilf-field-name",value:s,onChange:b=>{a(b.target.value),g(!0)},onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),150),onKeyDown:p,placeholder:"Ingredient name",disabled:h}),f&&s.trim().length>=2&&o.jsxs("div",{className:"ilf-dropdown",children:[v.slice(0,3).map(b=>o.jsxs("button",{type:"button",className:"ilf-dropdown-item",onMouseDown:w=>w.preventDefault(),onClick:()=>{r(b),g(!1)},children:[o.jsx("span",{className:"ilf-dropdown-name",children:b.name}),o.jsxs("span",{className:"ilf-dropdown-meta",children:[b.kcalPer100g," cal  ",b.proteinPer100g,"g per 100g"]})]},b.id)),o.jsx("button",{type:"button",className:"ilf-dropdown-item ilf-dropdown-new",onMouseDown:b=>b.preventDefault(),onClick:()=>{g(!1),l(!0)},children:o.jsxs("span",{className:"ilf-dropdown-name",children:["Add ",s.trim()," as new"]})})]})]})}function Fv({row:s,rowKcal:a,rowProtein:r,onEdit:l,onRemove:d,disabled:h}){return o.jsxs("div",{className:`ilf-compact${h?" ilf-compact--locked":""}`,children:[o.jsx("span",{className:"ilf-compact-name",children:s.name}),o.jsxs("span",{className:"ilf-compact-detail",children:[s.amount," ",s.portionLabel,a!==null&&o.jsxs(o.Fragment,{children:["  ",a," cal  ",r,"g"]})]}),o.jsx("button",{type:"button",className:"ilf-compact-edit",onClick:l,disabled:h,"aria-label":"Edit",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})})}),o.jsx("button",{type:"button",className:"ilf-compact-remove",onClick:d,"aria-label":"Remove",children:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}function Dl({onSave:s,onCancel:a,initialData:r}){const{state:l,dispatch:d}=zt(),[h,f]=U.useState(()=>r?.ingredients?.length>0?[...r.ingredients.map(Z=>({key:Date.now()+Math.random(),query:Z.name,name:Z.name,amount:Z.grams,portionLabel:"g",portionGrams:1,portions:Wi,kcalPer100g:Z.grams>0?Z.kcal/Z.grams*100:0,proteinPer100g:Z.grams>0?Z.protein/Z.grams*100:0,totalKcal:0,totalProtein:0,matched:!0,isNew:!1,saveToDb:!1,editing:!0})),Ja()]:[Ja()]),[g,v]=U.useState(r?.name||""),[p,b]=U.useState(!1),[w,k]=U.useState(!0),S=U.useMemo(()=>Qv(),[]),j=h.findIndex(V=>(V.matched||V.isNew)&&V.editing),A=j>=0;function T(V,Z){f(L=>L.map((H,te)=>te===V?{...H,...Z}:H))}function q(V,Z){T(V,{query:Z,name:Z,matched:!1,isNew:!1})}function O(V,Z){const L=yu(Z),H=L[0];f(te=>{const ne=te.map((I,ee)=>ee===V?{...I,query:Z.name,name:Z.name,amount:1,portionLabel:H.label,portionGrams:H.grams,portions:L,kcalPer100g:Z.kcalPer100g,proteinPer100g:Z.proteinPer100g,matched:!0,isNew:!1,isPersonal:!!Z.isPersonal,saveToDb:!1,editing:!0}:I),C=ne[ne.length-1];return C&&(C.matched||C.isNew)?[...ne,Ja()]:ne})}function B(V,Z){f(L=>{const H=L.map((ne,C)=>{if(C!==V||ne.matched||!ne.query.trim())return ne;const I=Z?null:Jv(ne.query,S);if(I){const le=yu(I),_=le[0];return{...ne,name:I.name,query:I.name,portionLabel:_.label,portionGrams:_.grams,portions:le,kcalPer100g:I.kcalPer100g,proteinPer100g:I.proteinPer100g,matched:!0,isNew:!1,isPersonal:!!I.isPersonal,saveToDb:!1,editing:!0}}const ee=ne.query.trim(),ge=ee.charAt(0).toUpperCase()+ee.slice(1);return{...ne,name:ge,query:ge,isNew:!0,matched:!1,saveToDb:!0,portions:Wi,editing:!0}}),te=H[H.length-1];return te&&(te.matched||te.isNew)?[...H,Ja()]:H})}function X(V,Z){f(L=>L.map((H,te)=>{if(te!==V)return H;const ne=H.portions.find(C=>C.label===Z)||vu;return{...H,portionLabel:ne.label,portionGrams:ne.grams}}))}function ce(V){f(Z=>{const L=Z.filter((H,te)=>te!==V);return L.length===0?[Ja()]:L})}function F(V){if(A)return;const Z=S.find(L=>L.name.toLowerCase().includes(V.toLowerCase()));Z&&f(L=>{const H=L[L.length-1];return H&&!H.matched&&!H.isNew&&!H.query.trim()?[...L.slice(0,-1),Jm(Z),Ja()]:[...L,Jm(Z),Ja()]})}const W=h.filter(V=>V.name.trim()&&Number(V.amount)>0&&(V.matched||V.isNew)),ue=U.useMemo(()=>{let V=0,Z=0;for(const L of W)if(L.isNew)V+=L.totalKcal||0,Z+=L.totalProtein||0;else{const H=xl(L.amount,L.portionGrams);V+=H*(L.kcalPer100g||0)/100,Z+=H*(L.proteinPer100g||0)/100}return{kcal:Math.round(V),protein:Math.round(Z*10)/10}},[W]);function _e(){if(W.length===0)return;const V=Bu();for(const H of h)H.isNew&&H.saveToDb&&H.totalKcal>0&&(V.find(ne=>ne.name.toLowerCase()===H.name.toLowerCase())||V.push({name:H.name,refAmount:Number(H.amount)||0,refUnit:H.portionLabel,refKcal:Math.round(H.totalKcal),refProtein:Math.round(H.totalProtein*10)/10}));Rl(V);const Z=W.map(H=>{if(H.isNew){const ne=xl(H.amount,H.portionGrams);return{name:H.name,grams:Math.round(ne),kcal:Math.round(H.totalKcal),protein:Math.round(H.totalProtein*10)/10}}const te=xl(H.amount,H.portionGrams);return{name:H.name,grams:Math.round(te),kcal:Math.round(te*H.kcalPer100g/100),protein:Math.round(te*H.proteinPer100g/100*10)/10}}),L=g.trim();if(!L){b(!0);return}if(w&&L){const H=(l.customMeals||[]).find(ne=>ne.name.toLowerCase()===L.toLowerCase()),te={...H?{id:H.id}:{id:crypto.randomUUID()},name:L,kcal:ue.kcal,protein:ue.protein,ingredients:Z};d({type:H?"UPDATE_CUSTOM_MEAL":"ADD_CUSTOM_MEAL",payload:te})}s({name:L,kcal:ue.kcal,protein:ue.protein,ingredients:Z})}return o.jsxs("div",{className:"add-mode-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:a,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"add-mode-title",children:"New Meal"})]}),o.jsxs("div",{className:"ilf-meal-card",children:[o.jsxs("div",{className:"ilf-meal-name-group",children:[o.jsx("span",{className:"ilf-meal-name-label",children:"What are we having?"}),o.jsx("input",{type:"text",className:`ilf-meal-title${p?" ilf-meal-title--error":""}`,value:g,onChange:V=>{v(V.target.value),b(!1)},placeholder:"e.g. Morning Omelette"}),p&&o.jsx("span",{className:"ilf-name-error",children:"Give your meal a name first!"})]}),o.jsxs("div",{className:"ilf-ingredients-section",children:[o.jsxs("div",{className:"ilf-ingredients-header",children:[o.jsxs("span",{className:"ilf-ingredients-label",children:[o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 5v14"}),o.jsx("path",{d:"M5 12h14"})]}),"Ingredients"]}),o.jsx("span",{className:"ilf-ingredients-hint",children:"Tap or type your own"})]}),o.jsx("div",{className:`ilf-chips${A?" ilf-chips--locked":""}`,children:Iv.map(V=>o.jsx("button",{type:"button",className:"ilf-chip",disabled:A,onClick:()=>F(V),children:V},V))}),o.jsx("div",{className:"ilf-rows",children:h.map((V,Z)=>{const L=xl(V.amount,V.portionGrams);let H=null,te=null;V.isNew&&(V.totalKcal>0||V.totalProtein>0)?(H=Math.round(V.totalKcal),te=Math.round(V.totalProtein*10)/10):V.kcalPer100g>0&&Number(V.amount)>0&&(H=Math.round(L*V.kcalPer100g/100),te=Math.round(L*V.proteinPer100g/100*10)/10);const ne=V.matched||V.isNew;return ne&&!V.editing?o.jsx(Fv,{row:V,rowKcal:H,rowProtein:te,onEdit:()=>T(Z,{editing:!0}),onRemove:()=>ce(Z),disabled:A},V.key):o.jsxs("div",{className:`ilf-row ${V.isNew?"ilf-row--new":""}`,children:[o.jsxs("div",{className:"ilf-row-top",children:[o.jsx(Wv,{value:V.query,onChange:C=>q(Z,C),onSelect:C=>O(Z,C),onConfirm:C=>B(Z,C),allDb:S,disabled:A&&j!==Z}),ne&&o.jsx("button",{type:"button",className:"ilf-row-action ilf-row-action--remove",onClick:()=>ce(Z),"aria-label":"Remove",children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),ne&&o.jsxs("div",{className:"ilf-row-fields",children:[o.jsx("input",{type:"number",inputMode:"decimal",className:"ilf-field ilf-field-amount",value:V.amount,onChange:C=>T(Z,{amount:C.target.value}),placeholder:"0"}),o.jsx("select",{className:"ilf-field ilf-field-unit",value:V.portionLabel,onChange:C=>X(Z,C.target.value),children:V.portions.map(C=>o.jsx("option",{value:C.label,children:C.label},C.label))}),H!==null&&o.jsxs("span",{className:"ilf-row-calc",children:[H," cal  ",te,"g"]}),V.matched&&V.editing&&o.jsx("button",{type:"button",className:"ilf-done-btn",onClick:()=>T(Z,{editing:!1}),children:"Done"})]}),V.isNew&&V.editing&&o.jsxs("div",{className:"ilf-new-fields",children:[o.jsx("p",{className:"ilf-new-hint",children:"New ingredient  enter total nutrition"}),o.jsxs("div",{className:"ilf-new-row",children:[o.jsx("label",{className:"ilf-new-label",children:"cal"}),o.jsx("input",{type:"number",inputMode:"decimal",className:"ilf-field ilf-field-sm",value:V.totalKcal||"",onChange:C=>T(Z,{totalKcal:Number(C.target.value)||0}),placeholder:"0"})]}),o.jsxs("div",{className:"ilf-new-row",children:[o.jsx("label",{className:"ilf-new-label",children:"protein (g)"}),o.jsx("input",{type:"number",inputMode:"decimal",className:"ilf-field ilf-field-sm",value:V.totalProtein||"",onChange:C=>T(Z,{totalProtein:Number(C.target.value)||0}),placeholder:"0"})]}),o.jsxs("label",{className:"ilf-save-toggle",children:[o.jsx("input",{type:"checkbox",checked:V.saveToDb,onChange:C=>T(Z,{saveToDb:C.target.checked})}),o.jsx("span",{children:"Save to my ingredients"})]}),o.jsx("button",{type:"button",className:"ilf-done-btn",onClick:()=>T(Z,{editing:!1}),children:"Done"})]})]},V.key)})})]}),W.length>0&&o.jsxs("div",{className:"ilf-totals",children:[o.jsx("span",{className:"ilf-totals-label",children:"Total"}),o.jsxs("span",{className:"ilf-totals-value",children:[o.jsx("svg",{className:"ilf-totals-icon",width:"11",height:"11",viewBox:"0 0 16 16",fill:"#ff6b2b",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),ue.kcal," cal",o.jsx("span",{className:"ilf-totals-sep"}),o.jsxs("svg",{className:"ilf-totals-icon",width:"11",height:"11",viewBox:"0 0 24 24",fill:"#9575cd",stroke:"#9575cd",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),ue.protein,"g"]})]}),o.jsxs("div",{className:"ilf-footer",children:[o.jsxs("div",{className:"ilf-my-meals-wrap",children:[o.jsxs("button",{type:"button",className:`ilf-my-meals-toggle ${w?"ilf-my-meals-toggle--on":""}`,onClick:()=>k(!w),children:[o.jsx("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:w?"#fff":"none",stroke:w?"#fff":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),o.jsx("span",{children:w?"Saved to My Meals":"Save to My Meals"})]}),w&&o.jsx("span",{className:"ilf-my-meals-hint",children:"One tap to log next time"})]}),o.jsx("button",{type:"button",className:"ilf-meal-save-btn",disabled:W.length===0,onClick:_e,children:"Done"})]})]})]})}const Rt=(s,a)=>({width:s,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),jt={user:o.jsxs("svg",{...Rt(24,24),children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),activity:o.jsx("svg",{...Rt(24,24),children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),target:o.jsxs("svg",{...Rt(24,24),children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("circle",{cx:"12",cy:"12",r:"6"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),sliders:o.jsxs("svg",{...Rt(24,24),children:[o.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),o.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),o.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),o.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),o.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),o.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),o.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),utensils:o.jsxs("svg",{...Rt(24,24),children:[o.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),o.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),o.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3zm0 0v7"})]}),couch:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3"}),o.jsx("path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0z"}),o.jsx("path",{d:"M4 18v2"}),o.jsx("path",{d:"M20 18v2"})]}),walk:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("circle",{cx:"14",cy:"4",r:"2"}),o.jsx("path",{d:"M10 22l2-6 4 2v-8l-4-2-4 4 2 4"})]}),run:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("circle",{cx:"14",cy:"4",r:"2"}),o.jsx("path",{d:"M4 17l3-3 2 2 4-6 4 2"}),o.jsx("path",{d:"M14 22l-2-6"})]}),dumbbell:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("path",{d:"M6.5 6.5h11"}),o.jsx("path",{d:"M6.5 17.5h11"}),o.jsx("path",{d:"M6.5 6.5v11"}),o.jsx("path",{d:"M17.5 6.5v11"}),o.jsx("path",{d:"M2 9.5h4v5H2z"}),o.jsx("path",{d:"M18 9.5h4v5h-4z"}),o.jsx("line",{x1:"6.5",y1:"12",x2:"2",y2:"12"}),o.jsx("line",{x1:"22",y1:"12",x2:"17.5",y2:"12"})]}),flame:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.5-.5-2-1-3-.5 1-2 2-2 4a2.5 2.5 0 0 0 .5 1.5z"}),o.jsx("path",{d:"M12 22c4-2 8-6 8-12C20 5 15 2 12 2S4 5 4 10c0 6 4 10 8 12z"})]}),trendDown:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("polyline",{points:"23 18 13.5 8.5 8.5 13.5 1 6"}),o.jsx("polyline",{points:"17 18 23 18 23 12"})]}),balance:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("polyline",{points:"8 8 3 12 8 16"}),o.jsx("polyline",{points:"16 8 21 12 16 16"})]}),trendUp:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),o.jsx("polyline",{points:"17 6 23 6 23 12"})]}),feather:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"}),o.jsx("line",{x1:"16",y1:"8",x2:"2",y2:"22"}),o.jsx("line",{x1:"17.5",y1:"15",x2:"9",y2:"15"})]}),zap:o.jsx("svg",{...Rt(18,18),children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),rocket:o.jsxs("svg",{...Rt(18,18),children:[o.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),o.jsx("path",{d:"M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),o.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"}),o.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"})]}),fireFill:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.5-.5-2-1-3-.5 1-2 2-2 4a2.5 2.5 0 0 0 .5 1.5z"}),o.jsx("path",{d:"M12 22c4-2 8-6 8-12C20 5 15 2 12 2S4 5 4 10c0 6 4 10 8 12z"})]}),check:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})})},ey=[{key:"sedentary",icon:jt.couch,label:"Sedentary",desc:"Little or no exercise"},{key:"light",icon:jt.walk,label:"Lightly active",desc:"13 days / week"},{key:"moderate",icon:jt.run,label:"Moderately active",desc:"35 days / week"},{key:"very",icon:jt.dumbbell,label:"Very active",desc:"67 days / week"},{key:"extreme",icon:jt.flame,label:"Extremely active",desc:"Physical job or intense training"}],ty=[{key:"lose",icon:jt.trendDown,label:"Lose weight",desc:"Calorie deficit"},{key:"maintain",icon:jt.balance,label:"Maintain weight",desc:"Eat at maintenance"},{key:"gain",icon:jt.trendUp,label:"Gain weight",desc:"Calorie surplus"}],Zm=[{key:"slow",icon:jt.feather,label:"Slow & steady",desc:"~0.25 kg/week",deficit:250},{key:"moderate",icon:jt.zap,label:"Moderate",desc:"~0.5 kg/week",deficit:500},{key:"aggressive",icon:jt.rocket,label:"Aggressive",desc:"~0.75 kg/week",deficit:750}],ny=[{icon:jt.user,title:"Tell us about yourself"},{icon:jt.activity,title:"How active are you?"},{icon:jt.target,title:"Whats your goal?"},{icon:jt.sliders,title:"Your daily targets"},{icon:jt.utensils,title:"Add your go-to meals"}];function ay(){const{state:s,dispatch:a}=zt(),[r,l]=U.useState(1),[d,h]=U.useState({}),[f,g]=U.useState(""),[v,p]=U.useState(""),[b,w]=U.useState("male"),[k,S]=U.useState(""),[j,A]=U.useState(""),[T,q]=U.useState("moderate"),[O,B]=U.useState("lose"),[X,ce]=U.useState(""),[F,W]=U.useState("moderate"),[ue,_e]=U.useState(""),[V,Z]=U.useState(""),[L,H]=U.useState(""),[te,ne]=U.useState("intro"),[C,I]=U.useState([]),ee=U.useMemo(()=>{const Y=Number(j),je=Number(k),ke=Number(v);return Y>0&&je>0&&ke>0?Mv(Y,je,ke,b,T):null},[j,k,v,b,T]),ge=U.useMemo(()=>{if(ee&&Number(j)>0){const Y=Zm.find(ht=>ht.key===F)?.deficit||500;let je=ee;O==="lose"?je=ee-Y:O==="gain"&&(je=ee+Y);const ke=Math.round(1.6*Number(j));return{kcal:Math.round(je),protein:ke}}return{kcal:2e3,protein:120}},[ee,j,O,F]),le=U.useMemo(()=>{const Y=Number(j);return Y>0?Lv(Y):2.5},[j]);function _(){const Y={};f.trim()||(Y.userName="Enter your name");const je=Number(v);(!je||je<10||je>120)&&(Y.age="10120");const ke=Number(k);(!ke||ke<100||ke>250)&&(Y.height="100250 cm");const ht=Number(j);return(!ht||ht<30||ht>300)&&(Y.weight="30300 kg"),h(Y),Object.keys(Y).length===0}function $(){const Y={},je=Number(ue||ge.kcal),ke=Number(V||ge.protein);return(je<500||je>1e4)&&(Y.kcal="50010,000"),(ke<10||ke>500)&&(Y.protein="10500"),h(Y),Object.keys(Y).length===0}function J(){if(r===1&&_())h({}),l(2);else if(r===2)h({}),l(3);else if(r===3)h({}),l(4);else if(r===4){if(!$())return;h({}),l(5)}}function Q(){if(h({}),r===5&&te==="build"){ne("intro");return}if(r===5&&te==="done"){ne("intro");return}l(r-1)}function ye(){I(s.customMeals||[]),ne("done")}function xe(){const Y=Number(ue||ge.kcal),je=Number(V||ge.protein),ke=Number(L||le),ht=Number(X),Mt=Number(j),tn=O!=="maintain"&&ht>0&&Mt>0?Math.abs(Mt-ht):0;a({type:"SET_TARGETS",payload:{userName:f.trim(),age:Number(v),sex:b,height:Number(k),weight:Number(j),activityLevel:T,goal:O,maintenanceKcal:ee,kcal:Y,protein:je,waterTargetLiters:ke,weightLossTarget:tn,onboardingComplete:!0}})}const de=ny[r-1];return o.jsx("div",{className:"onboarding",children:o.jsxs("div",{className:"onboarding-content",children:[o.jsx("h1",{className:"onboarding-title",children:"Irada"}),o.jsxs("div",{className:"ob-progress",children:[o.jsx("div",{className:"ob-progress-track",children:o.jsx("div",{className:"ob-progress-fill",style:{width:`${(r-1)/4*100}%`}})}),o.jsx("div",{className:"ob-progress-dots",children:[1,2,3,4,5].map(Y=>o.jsx("div",{className:`ob-dot${Y===r?" ob-dot--active":""}${Y<r?" ob-dot--done":""}`,children:Y<r?jt.check:Y},Y))})]}),o.jsxs("div",{className:"ob-hero",children:[o.jsx("div",{className:"ob-hero-icon",children:de.icon}),o.jsx("p",{className:"ob-hero-title",children:de.title})]}),r===1&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsxs("div",{className:"onboarding-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-name",children:"Your name"}),o.jsx("input",{id:"ob-name",type:"text",value:f,onChange:Y=>g(Y.target.value),placeholder:"e.g. Alex"}),d.userName&&o.jsx("span",{className:"form-error",children:d.userName})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-age",children:"Age"}),o.jsx("input",{id:"ob-age",type:"number",inputMode:"numeric",value:v,onChange:Y=>p(Y.target.value),placeholder:"25"}),d.age&&o.jsx("span",{className:"form-error",children:d.age})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Sex"}),o.jsxs("div",{className:"sex-toggle",children:[o.jsx("button",{type:"button",className:`sex-btn ${b==="male"?"sex-btn--active":""}`,onClick:()=>w("male"),children:"Male"}),o.jsx("button",{type:"button",className:`sex-btn ${b==="female"?"sex-btn--active":""}`,onClick:()=>w("female"),children:"Female"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-height",children:"Height (cm)"}),o.jsx("input",{id:"ob-height",type:"number",inputMode:"numeric",value:k,onChange:Y=>S(Y.target.value),placeholder:"175"}),d.height&&o.jsx("span",{className:"form-error",children:d.height})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"ob-weight",children:"Weight (kg)"}),o.jsx("input",{id:"ob-weight",type:"number",inputMode:"decimal",value:j,onChange:Y=>A(Y.target.value),placeholder:"70"}),d.weight&&o.jsx("span",{className:"form-error",children:d.weight})]})]})]})}),o.jsx("button",{type:"button",className:"btn-primary",onClick:J,children:"Continue"})]}),r===2&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsx("div",{className:"option-list",children:ey.map(Y=>o.jsxs("button",{type:"button",className:`option-card ${T===Y.key?"option-card--active":""}`,onClick:()=>q(Y.key),children:[o.jsx("span",{className:"option-icon",children:Y.icon}),o.jsxs("div",{className:"option-text",children:[o.jsx("span",{className:"option-label",children:Y.label}),o.jsx("span",{className:"option-desc",children:Y.desc})]})]},Y.key))})}),ee&&o.jsxs("div",{className:"maintenance-result",children:[o.jsx("div",{className:"maintenance-icon",children:jt.fireFill}),o.jsxs("div",{className:"maintenance-text",children:[o.jsx("span",{className:"maintenance-label",children:"Your maintenance"}),o.jsxs("span",{className:"maintenance-value",children:[ee," cal/day"]})]})]}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:Q,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:J,children:"Continue"})]})]}),r===3&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsxs("div",{className:"onboarding-form",children:[o.jsx("div",{className:"option-list",children:ty.map(Y=>o.jsxs("button",{type:"button",className:`option-card ${O===Y.key?"option-card--active":""}`,onClick:()=>{B(Y.key),_e("")},children:[o.jsx("span",{className:"option-icon",children:Y.icon}),o.jsxs("div",{className:"option-text",children:[o.jsx("span",{className:"option-label",children:Y.label}),o.jsx("span",{className:"option-desc",children:Y.desc})]})]},Y.key))}),O!=="maintain"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Target weight"}),o.jsxs("div",{className:"ob-input-row",children:[o.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:X,onChange:Y=>ce(Y.target.value),placeholder:String(Math.round(O==="lose"?Number(j)*.9:Number(j)*1.1))}),o.jsx("span",{className:"ob-input-unit",children:"kg"})]})]}),o.jsx("p",{className:"form-hint",children:"How fast do you want to get there?"}),o.jsx("div",{className:"option-list option-list--compact",children:Zm.map(Y=>o.jsxs("button",{type:"button",className:`option-card ${F===Y.key?"option-card--active":""}`,onClick:()=>{W(Y.key),_e("")},children:[o.jsx("span",{className:"option-icon",children:Y.icon}),o.jsxs("div",{className:"option-text",children:[o.jsx("span",{className:"option-label",children:Y.label}),o.jsx("span",{className:"option-desc",children:Y.desc})]})]},Y.key))})]})]})}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:Q,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:J,children:"Continue"})]})]}),r===4&&o.jsxs("div",{className:"onboarding-step",children:[o.jsx("div",{className:"ob-card",children:o.jsxs("div",{className:"onboarding-form",children:[o.jsxs("div",{className:"ob-target-card",children:[o.jsx("div",{className:"ob-target-icon",style:{background:"rgba(255,107,43,0.12)",color:"#ff6b2b"},children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 23c-1.1 0-1.99-.89-1.99-1.99h3.98c0 1.1-.89 1.99-1.99 1.99zm7-3H5v-1l2-2v-5c0-2.8 1.6-5.2 4-6.1V5c0-.6.4-1 1-1s1 .4 1 1v.9c2.4.9 4 3.3 4 6.1v5l2 2v1z"})})}),o.jsx("div",{className:"ob-target-info",children:o.jsx("span",{className:"ob-target-label",children:"Calories"})}),o.jsxs("div",{className:"ob-target-value",children:[o.jsx("input",{type:"number",inputMode:"numeric",value:ue||ge.kcal,onChange:Y=>_e(Y.target.value)}),o.jsx("span",{className:"ob-target-unit",children:"cal"})]})]}),d.kcal&&o.jsx("span",{className:"form-error",children:d.kcal}),o.jsxs("div",{className:"ob-target-card",children:[o.jsx("div",{className:"ob-target-icon",style:{background:"rgba(149,117,205,0.12)",color:"#9575cd"},children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"}),o.jsx("line",{x1:"16",y1:"8",x2:"2",y2:"22"})]})}),o.jsx("div",{className:"ob-target-info",children:o.jsx("span",{className:"ob-target-label",children:"Protein"})}),o.jsxs("div",{className:"ob-target-value",children:[o.jsx("input",{type:"number",inputMode:"numeric",value:V||ge.protein,onChange:Y=>Z(Y.target.value)}),o.jsx("span",{className:"ob-target-unit",children:"g/day"})]})]}),d.protein&&o.jsx("span",{className:"form-error",children:d.protein}),o.jsxs("div",{className:"ob-target-card",children:[o.jsx("div",{className:"ob-target-icon",style:{background:"rgba(80,191,232,0.12)",color:"#50bfe8"},children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})}),o.jsx("div",{className:"ob-target-info",children:o.jsx("span",{className:"ob-target-label",children:"Water"})}),o.jsxs("div",{className:"ob-target-value",children:[o.jsx("input",{type:"number",inputMode:"decimal",step:"0.1",value:L||le,onChange:Y=>H(Y.target.value)}),o.jsx("span",{className:"ob-target-unit",children:"L/day"})]})]}),o.jsx("p",{className:"form-hint",children:"Auto-calculated from your profile. Tap to adjust."})]})}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:Q,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:J,children:"Continue"})]})]}),r===5&&o.jsxs("div",{className:"onboarding-step",children:[te==="intro"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"tut-intro",children:[o.jsx("p",{className:"tut-tagline",children:"Here is how you will log meals"}),o.jsxs("div",{className:"tut-steps",children:[o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"1"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Name your meal"}),o.jsx("span",{className:"tut-step-desc",children:"Give it a name like Morning Omelette"})]})]}),o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"2"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Add ingredients"}),o.jsx("span",{className:"tut-step-desc",children:"Tap a suggestion or type your own"})]})]}),o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"3"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Set amounts"}),o.jsx("span",{className:"tut-step-desc",children:"Pick a unit (g, tbsp, cup...) and enter how much"})]})]}),o.jsxs("div",{className:"tut-step",children:[o.jsx("span",{className:"tut-step-num",children:"4"}),o.jsxs("div",{className:"tut-step-text",children:[o.jsx("span",{className:"tut-step-title",children:"Done!"}),o.jsx("span",{className:"tut-step-desc",children:"We calculate calories & protein automatically"})]})]})]})]}),o.jsx("button",{type:"button",className:"btn-primary tut-build-btn",onClick:()=>ne("build"),children:"Build my first meal"}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:Q,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:xe,children:"Skip & Start"})]})]}),te==="build"&&o.jsx(Dl,{onSave:ye,onCancel:()=>ne("intro")}),te==="done"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"tut-success",children:[o.jsx("span",{className:"tut-success-emoji",children:""}),o.jsx("span",{className:"tut-success-title",children:"Meal saved!"}),o.jsx("span",{className:"tut-success-desc",children:"You can find it in your Happy Kitchen anytime"})]}),C.length>0&&o.jsx("div",{className:"qm-list",children:C.map((Y,je)=>o.jsx("div",{className:"qm-card",children:o.jsxs("div",{className:"qm-card-info",children:[o.jsx("span",{className:"qm-card-name",children:Y.name}),o.jsxs("span",{className:"qm-card-macros",children:[Y.kcal," cal  ",Y.protein,"g protein",Y.ingredients?`  ${Y.ingredients.length} ingredients`:""]})]})},je))}),o.jsx("button",{type:"button",className:"tut-add-more",onClick:()=>ne("build"),children:"+ Add another meal"}),o.jsxs("div",{className:"form-nav",children:[o.jsx("button",{type:"button",className:"btn-back",onClick:Q,children:"Back"}),o.jsx("button",{type:"button",className:"btn-primary",onClick:xe,children:"Start Tracking"})]})]})]})]})})}function mn(){return Qi(new Date)}function Qi(s){const a=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0");return`${a}-${r}-${l}`}function zg(){const s=new Date,a=[];for(let r=6;r>=0;r--){const l=new Date(s);l.setDate(s.getDate()-r),a.push(Qi(l))}return a}function qu(){const{state:s}=zt(),a=mn(),r=U.useMemo(()=>s.entries.filter(p=>p.dateKey===a),[s.entries,a]),l=U.useMemo(()=>Wn(r),[r]),d=U.useMemo(()=>(s.exerciseLogs||[]).filter(p=>p.dateKey===a),[s.exerciseLogs,a]),h=U.useMemo(()=>d.reduce((p,b)=>p+(b.caloriesBurned||0),0),[d]),f=U.useMemo(()=>(s.waterLogs||[]).filter(p=>p.dateKey===a),[s.waterLogs,a]),g=U.useMemo(()=>f.reduce((p,b)=>p+(b.amountLiters||0),0),[f]),v=U.useMemo(()=>zg().map(b=>{const w=s.entries.filter(j=>j.dateKey===b),S=(s.exerciseLogs||[]).filter(j=>j.dateKey===b).reduce((j,A)=>j+(A.caloriesBurned||0),0);return{dateKey:b,...Wn(w),burned:S,entryCount:w.length}}),[s.entries,s.exerciseLogs]);return{todayEntries:r,todayTotals:l,todayExerciseLogs:d,caloriesBurned:h,todayWaterLogs:f,todayWaterTotal:g,weekSummary:v}}function Bg(){const{state:s,dispatch:a}=zt(),r=s.targets,l={enabled:r.cyclingEnabled??!1,trainingKcal:r.cyclingTrainingKcal??0,trainingProtein:r.cyclingTrainingProtein??0,restKcal:r.cyclingRestKcal??0,restProtein:r.cyclingRestProtein??0},d=U.useCallback(h=>{a({type:"SET_TARGETS",payload:{cyclingEnabled:h.enabled,cyclingTrainingKcal:h.trainingKcal,cyclingTrainingProtein:h.trainingProtein,cyclingRestKcal:h.restKcal,cyclingRestProtein:h.restProtein}})},[a]);return[l,d]}function sy(){const{state:s,dispatch:a}=zt(),r=mn(),l=s.dayTypes?.[r]||"rest",d=U.useCallback(h=>{a({type:"SET_DAY_TYPE",payload:{dateKey:r,dayType:h}})},[a,r]);return[l,d]}function qg(){const{state:s}=zt(),a=s.targets,[r]=Bg(),[l,d]=sy();if(!r.enabled)return{kcal:a.kcal,protein:a.protein,dayType:null,setDayType:null,cyclingEnabled:!1};const h=l==="training"?r.trainingKcal:r.restKcal,f=l==="training"?r.trainingProtein:r.restProtein;return{kcal:h,protein:f,dayType:l,setDayType:d,cyclingEnabled:!0}}function Ta(){return crypto.randomUUID()}const Jn=120,bu=7,_u=(Jn-bu)/2,cu=2*Math.PI*_u;function iy({weekData:s,targets:a}){const r=Math.max(...s.map(f=>f.kcalPct),1.2),l=Math.max(...s.map(f=>f.proteinPct),1.2),d=1/r*100,h=1/l*100;return o.jsxs("div",{className:"ov-bars",children:[o.jsxs("div",{className:"ov-bar-section",children:[o.jsx("div",{className:"ov-bar-header",children:o.jsxs("span",{className:"ov-bar-label",style:{color:"#ff6b2b"},children:[o.jsx("svg",{width:"9",height:"9",viewBox:"0 0 16 16",fill:"#ff6b2b",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),"Calories"]})}),o.jsxs("div",{className:"ov-bar-chart-wrap",children:[o.jsxs("div",{className:"ov-bar-chart",children:[o.jsx("div",{className:"ov-bar-goal",style:{bottom:`${d}%`,borderColor:"rgba(255,107,43,0.45)"}}),s.map(f=>{const g=f.hasData?f.kcalPct/r*100:0,v=f.hasData&&f.kcalPct>0&&f.kcalPct<=1;return o.jsxs("div",{className:"ov-bar-col",children:[o.jsx("div",{className:"ov-bar",style:{height:`${Math.max(g,f.hasData?5:0)}%`,background:f.hasData?v?"#ff6b2b":"rgba(255,107,43,0.35)":"transparent"}}),f.hasData&&o.jsx("span",{className:"ov-bar-tip",style:{color:"#ff6b2b"},children:f.kcal})]},f.dateKey)})]}),o.jsxs("div",{className:"ov-bar-goal-label",style:{bottom:`${d}%`,color:"#ff6b2b"},children:[o.jsx("span",{children:"Goal"}),o.jsx("span",{children:a.kcal})]})]})]}),o.jsxs("div",{className:"ov-bar-section",children:[o.jsx("div",{className:"ov-bar-header",children:o.jsxs("span",{className:"ov-bar-label",style:{color:"#9575cd"},children:[o.jsxs("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"#9575cd",stroke:"#9575cd",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),"Protein"]})}),o.jsxs("div",{className:"ov-bar-chart-wrap",children:[o.jsxs("div",{className:"ov-bar-chart",children:[o.jsx("div",{className:"ov-bar-goal",style:{bottom:`${h}%`,borderColor:"rgba(149,117,205,0.45)"}}),s.map(f=>{const g=f.hasData?f.proteinPct/l*100:0,v=f.hasData&&f.proteinPct>=1;return o.jsxs("div",{className:"ov-bar-col",children:[o.jsx("div",{className:"ov-bar",style:{height:`${Math.max(g,f.hasData?5:0)}%`,background:f.hasData?v?"#9575cd":"rgba(149,117,205,0.35)":"transparent"}}),f.hasData&&o.jsxs("span",{className:"ov-bar-tip",style:{color:"#9575cd"},children:[f.protein,"g"]})]},f.dateKey)})]}),o.jsxs("div",{className:"ov-bar-goal-label",style:{bottom:`${h}%`,color:"#9575cd"},children:[o.jsx("span",{children:"Goal"}),o.jsxs("span",{children:[Math.round(a.protein),"g"]})]})]})]}),o.jsx("div",{className:"ov-bar-days-row",children:s.map(f=>o.jsx("span",{className:`ov-bar-day-label${f.isToday?" ov-bar-day-label--today":""}`,children:f.label},f.dateKey))})]})}function Wm({pct:s,gradId:a,gradStart:r,gradEnd:l,label:d,value:h,unit:f,isOver:g,mounted:v,icon:p}){const b=v?cu*(1-Math.min(s,1)):cu;return o.jsxs("div",{className:"ov-hero-ring",children:[o.jsxs("div",{className:"ov-hero-ring-wrap",style:{"--ring-glow":r},children:[o.jsxs("svg",{width:Jn,height:Jn,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:a,x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:r}),o.jsx("stop",{offset:"100%",stopColor:l})]})}),o.jsx("circle",{cx:Jn/2,cy:Jn/2,r:_u,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:bu,opacity:"0.06"}),o.jsx("circle",{cx:Jn/2,cy:Jn/2,r:_u,fill:"none",stroke:`url(#${a})`,strokeWidth:bu,strokeDasharray:cu,strokeDashoffset:b,strokeLinecap:"round",className:"ov-ring-anim",transform:`rotate(-90 ${Jn/2} ${Jn/2})`})]}),o.jsxs("div",{className:"ov-hero-ring-inner",children:[o.jsx("span",{className:`ov-hero-ring-num ${g?"ov-hero-ring-num--over":""}`,children:h}),o.jsx("span",{className:"ov-hero-ring-unit",children:f})]})]}),o.jsxs("span",{className:"ov-hero-ring-label",children:[p,d]})]})}function Fm(){const{state:s,dispatch:a}=zt(),{targets:r,entries:l}=s,{todayTotals:d,caloriesBurned:h,todayWaterTotal:f}=qu(),{kcal:g,protein:v,dayType:p,setDayType:b,cyclingEnabled:w}=qg(),[k,S]=U.useState(!1),[j,A]=U.useState(!1),[T,q]=U.useState(!1),[O,B]=U.useState(null);U.useEffect(()=>{requestAnimationFrame(()=>S(!0))},[]);const X=r.waterTargetLiters||2.5,ce=U.useCallback(ie=>{const Me=f>=X;a({type:"ADD_WATER",payload:{id:Ta(),amountLiters:ie,dateKey:mn(),timestamp:Date.now()}}),B(ie),A(!0),Me&&q(!0),setTimeout(()=>{A(!1),q(!1),B(null)},Me?1400:700)},[a,f,X]),F=g||r.kcal,W=v||r.protein,ue=Math.round(d.kcal),_e=ue>F,V=Math.min(ue/F,1),Z=Math.round(d.protein),L=Math.round(W),H=Math.min(Z/L,1),te=_e?"#e55a5a":(V>.85,"#ff6b2b"),ne=_e||V>.85?"#e55a5a":"#e8a840",C=H>=1?"#34b87a":"#9575cd",I=H>=1?"#34b87a":"#b39ddb",ee=new Date().getHours(),ge=ee<12?"Good morning":ee<17?"Good afternoon":"Good evening",le=(r.userName||"").split(" ")[0],_=ue>0,$=_&&!_e&&H>=1,J=U.useMemo(()=>{const ie=zg(),Me=mn(),we=s.exerciseLogs||[],Ae={};for(const Ue of we)Ae[Ue.dateKey]=(Ae[Ue.dateKey]||0)+(Ue.caloriesBurned||0);return ie.map(Ue=>{const et=l.filter(gn=>gn.dateKey===Ue),Ee=Wn(et),qe=Ae[Ue]||0,Bt=Ee.kcal-qe,ta=new Date(Ue+"T00:00:00");return{dateKey:Ue,label:ta.toLocaleDateString("en-US",{weekday:"narrow"}),kcalPct:r.kcal>0?Bt/r.kcal:0,proteinPct:r.protein>0?Ee.protein/r.protein:0,kcal:Math.round(Bt),protein:Math.round(Ee.protein),isToday:Ue===Me,hasData:et.length>0}})},[l,s.exerciseLogs,r]),Q=U.useMemo(()=>{const ie=mn(),Me=s.exerciseLogs||[],we={};for(const et of Me)we[et.dateKey]=(we[et.dateKey]||0)+(et.caloriesBurned||0);let Ae=0;const Ue=new Date(ie+"T00:00:00");for(let et=0;et<365;et++){const Ee=Ue.toISOString().slice(0,10),qe=l.filter(as=>as.dateKey===Ee);if(qe.length===0){if(et===0){Ue.setDate(Ue.getDate()-1);continue}break}const Bt=Wn(qe),ta=Bt.kcal-(we[Ee]||0),gn=r.kcal>0&&ta<=r.kcal,Ca=r.protein>0&&Bt.protein>=r.protein;if(gn&&Ca)Ae++;else break;Ue.setDate(Ue.getDate()-1)}return Ae},[l,s.exerciseLogs,r]),ye=U.useMemo(()=>{const ie=J.filter(we=>we.hasData),Me=ie.filter(we=>we.kcalPct>0&&we.kcalPct<=1.05&&we.proteinPct>=.9);return{tracked:ie.length,onTrack:Me.length}},[J]),xe=U.useMemo(()=>$?"All targets hit today!":Q>=5?`${Q}-day streak  unstoppable!`:Q>=3?`${Q}-day streak  keep it going!`:H>=1&&_?"Protein goal hit!":ye.onTrack>=5?"Strong week so far!":!_&&Q>=1?"Keep your streak alive today!":null,[$,Q,H,_,ye]),de=U.useMemo(()=>Mg(l,s.exerciseLogs,r),[l,s.exerciseLogs,r]),Y=U.useMemo(()=>{const ie=[];if(d.kcal===0)return ie.push({tag:"Getting Started",text:"Start logging to see your progress come alive.",level:"alert"}),ie.push({tag:"Hydration",text:"No water logged yet  stay hydrated!",level:"alert"}),ie;const Me=F-ue;_e?ie.push({tag:"Calories",text:"You've gone a bit over on calories  no stress, just be mindful.",level:"alert"}):Me<F*.15?ie.push({tag:"Calories",text:"Almost at your calorie limit  you're doing great.",level:"good"}):ie.push({tag:"Calories",text:`${Me.toLocaleString()} kcal left  good calorie control so far.`,level:"good"}),H>=1?ie.push({tag:"Protein",text:"Protein target hit  nice work!",level:"good"}):H<.5?ie.push({tag:"Protein",text:"Try adding more protein to your next meal.",level:"alert"}):ie.push({tag:"Protein",text:`${L-Z}g of protein left to hit your target.`,level:"alert"});const we=f/X;we>=1?ie.push({tag:"Hydration",text:"Water goal reached  well hydrated today!",level:"good"}):we<.3?ie.push({tag:"Hydration",text:"You're behind on water  try to catch up.",level:"alert"}):we<.6?ie.push({tag:"Hydration",text:`${(X-f).toFixed(1)}L of water left  keep sipping.`,level:"alert"}):ie.push({tag:"Hydration",text:`${(X-f).toFixed(1)}L left  almost there.`,level:"good"}),h>200?ie.push({tag:"Activity",text:`Great workout! ${h} kcal burned today.`,level:"good"}):h>0?ie.push({tag:"Activity",text:`${h} kcal burned  every bit counts.`,level:"good"}):ee>16&&ie.push({tag:"Activity",text:"Still time for a walk or workout today.",level:"alert"});const Ae=J.filter(Ue=>Ue.hasData&&Ue.kcalPct<=1.1&&Ue.kcalPct>0).length;if(Ae>=5?ie.push({tag:"Weekly",text:`${Ae}/7 days on track this week  strong consistency!`,level:"good"}):Ae>=3&&ie.push({tag:"Weekly",text:`${Ae}/7 days on track  keep building momentum.`,level:"alert"}),de.daysTracked>=3&&de.goal!=="maintain"){const Ue=Math.round(de.pct*100);de.goal==="lose"&&de.deltaKg>0?Ue>=100?ie.push({tag:"Weight Goal",text:`You've reached your ${de.goalKg} kg goal  amazing work!`,level:"good"}):ie.push({tag:"Weight Goal",text:`~${de.deltaKg.toFixed(1)} kg lost  ${Ue}% toward your ${de.goalKg} kg goal.`,level:"good"}):de.goal==="gain"&&de.deltaKg<0&&(Ue>=100?ie.push({tag:"Weight Goal",text:`You've reached your ${de.goalKg} kg gain goal  great work!`,level:"good"}):ie.push({tag:"Weight Goal",text:`~${Math.abs(de.deltaKg).toFixed(1)} kg gained  ${Ue}% toward your ${de.goalKg} kg goal.`,level:"good"}))}return ie},[d,_e,ue,F,r,H,Z,L,f,X,ee,h,J,de]),[je,ke]=U.useState(0),[ht,Mt]=U.useState("none"),tn=U.useRef({x:0,y:0}),ot=Math.min(je,Math.max(0,Y.length-1));function An(ie){tn.current.x=ie.touches[0].clientX,tn.current.y=ie.touches[0].clientY}function ea(ie){const Me=ie.changedTouches[0].clientX-tn.current.x,we=ie.changedTouches[0].clientY-tn.current.y;Math.abs(Me)>50&&Math.abs(Me)>Math.abs(we)*1.5&&(Me<0&&ot<Y.length-1?(Mt("left"),setTimeout(()=>{ke(Ae=>Ae+1),Mt("none")},250)):Me>0&&ot>0&&(Mt("right"),setTimeout(()=>{ke(Ae=>Ae-1),Mt("none")},250)))}function Aa(){ot>0&&(Mt("right"),setTimeout(()=>{ke(ie=>ie-1),Mt("none")},250))}return o.jsxs("div",{className:"overview",children:[o.jsxs("div",{className:`ov-streak${Q>0?" ov-streak--active":""}`,children:[o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:Q>0?"var(--color-success)":"var(--color-text-secondary)",stroke:"none",opacity:Q>0?1:.35,children:o.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),o.jsx("span",{className:"ov-streak-num",style:Q===0?{color:"var(--color-text-secondary)",opacity:.4}:void 0,children:Q})]}),o.jsxs("div",{className:"ov-greeting-wrap ov-enter ov-enter--1",children:[o.jsxs("p",{className:"ov-greeting",children:[ge,le?`, ${le}`:"","!"]}),xe&&o.jsx("p",{className:"ov-greeting-sub",children:xe})]}),o.jsx("div",{className:"ov-week ov-enter ov-enter--2",children:o.jsx(iy,{weekData:J,targets:r})}),de.daysTracked>=3&&de.goal!=="maintain"&&(()=>{const ie=de.goal==="lose",Me=Math.abs(de.deltaKg).toFixed(1),we=Math.round(de.pct*100);let Ae="";we>=100?Ae=`${Me} kg ${ie?"lost":"gained"}  you did it!`:!_&&we>0?Ae="Keep your momentum going!":_?_e&&ie?Ae="One day doesnt define you.":we>=75?Ae="Almost there  so close!":we>=25?Ae=`${Me} kg ${ie?"down":"up"}  real progress!`:we>0?Ae="Youre on your way!":Ae=ie?"Great start!":"Keep fueling!":Ae="Log your first meal to start.";const Ue=[{pct:25,label:"Started",color:"#2e8bc0"},{pct:50,label:"Halfway",color:"#1a6fa0"},{pct:75,label:"Almost",color:"#4db8d9"},{pct:100,label:"Goal",color:"#34b87a",isGoal:!0}],et=Ue.find(Ee=>we<Ee.pct);return o.jsxs("div",{className:`ov-wc ov-enter ov-enter--2${we>=100?" ov-wc--done":""}`,children:[o.jsx("p",{className:"ov-wc-msg",children:Ae}),o.jsxs("div",{className:"ov-wc-path",children:[o.jsx("div",{className:"ov-wc-track",children:o.jsx("div",{className:"ov-wc-track-fill",style:{width:`${Math.min(we,100)}%`}})}),we>0&&we<100&&o.jsxs("span",{className:"ov-wc-pct-flag",style:{left:`${we}%`},children:[we,"%"]}),Ue.map(Ee=>{const qe=we>=Ee.pct,Bt=Ee===et;return Ee.isGoal?o.jsxs("div",{className:`ov-wc-ms ov-wc-ms--goal${qe?" ov-wc-ms--done":""}${Bt?" ov-wc-ms--next":""}`,style:{left:`${Ee.pct}%`},children:[o.jsx("span",{className:"ov-wc-goal-emoji",children:qe?"":""}),o.jsxs("span",{className:"ov-wc-ms-label ov-wc-goal-label",children:[ie?"-":"+",de.goalKg,"kg"]})]},Ee.pct):o.jsxs("div",{className:`ov-wc-ms${qe?" ov-wc-ms--done":""}${Bt?" ov-wc-ms--next":""}`,style:{left:`${Ee.pct}%`},children:[o.jsx("div",{className:"ov-wc-ms-dot",style:qe?{background:Ee.color,borderColor:Ee.color}:void 0,children:qe&&o.jsx("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})})}),o.jsx("span",{className:"ov-wc-ms-label",style:qe?{color:Ee.color,opacity:.9}:void 0,children:Ee.label})]},Ee.pct)})]})]})})(),o.jsxs("div",{className:"ov-today-strip ov-enter ov-enter--3",children:[o.jsx("span",{className:"ov-today-label",children:"Today"}),_?o.jsxs("span",{className:"ov-today-remaining",children:[_e?"Over target":`${(F-ue).toLocaleString()} cal`,"  ",H>=1?"Protein hit":`${L-Z}g protein`,o.jsx("span",{className:"ov-today-suffix",children:" left"})]}):o.jsx("span",{className:"ov-today-remaining",children:"Start logging to see your day"})]}),w&&o.jsxs("div",{className:"ov-day-type-toggle ov-enter ov-enter--3",children:[o.jsx("button",{className:`ov-day-type-btn${p==="rest"?" ov-day-type-btn--active":""}`,onClick:()=>b("rest"),children:"Rest"}),o.jsx("button",{className:`ov-day-type-btn${p==="training"?" ov-day-type-btn--active":""}`,onClick:()=>b("training"),children:"Training"})]}),o.jsxs("div",{className:`ov-heroes ov-enter ov-enter--3${$?" ov-heroes--perfect":""}`,children:[o.jsx(Wm,{pct:V,gradId:"kcal-grad",gradStart:te,gradEnd:ne,label:"Calories",mounted:k,isOver:_e,value:`${ue.toLocaleString()}`,unit:`/ ${F.toLocaleString()}`,icon:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:te,stroke:"none",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})})}),o.jsx(Wm,{pct:H,gradId:"prot-grad",gradStart:C,gradEnd:I,label:"Protein",mounted:k,isOver:!1,value:`${Z}`,unit:`/ ${L}g`,icon:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:C,stroke:C,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]})})]}),$&&o.jsxs("div",{className:"ov-perfect ov-enter ov-enter--4",children:[o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#34b87a",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})}),o.jsx("span",{children:"All targets hit"})]}),(()=>{const ie=Math.min(f/X,1),Me=f>=X,we=Me?"done":ie>=.65?"good":ie>=.3?"mid":"low",Ae={low:{top:"#b0b8c1",bot:"#8e99a4",wave1:"rgba(176,184,193,0.3)",wave2:"rgba(142,153,164,0.2)",stroke:"#8e99a4"},mid:{top:"#78d0ee",bot:"#50bfe8",wave1:"rgba(120,208,238,0.3)",wave2:"rgba(80,191,232,0.2)",stroke:"#50bfe8"},good:{top:"#50bfe8",bot:"#3aacd4",wave1:"rgba(80,191,232,0.35)",wave2:"rgba(58,172,212,0.25)",stroke:"#3aacd4"},done:{top:"#50bfe8",bot:"#3aacd4",wave1:"rgba(80,191,232,0.35)",wave2:"rgba(58,172,212,0.25)",stroke:"#3aacd4"}}[we],Ue={low:"Dont forget to drink water!",mid:"Keep sipping, youre getting there!",good:"Almost there  great job!",done:"Hydration goal smashed!"}[we];return o.jsxs("div",{className:`ov-water-wrap${j?" ov-water-wrap--splash":""}${T?" ov-water-wrap--flood":""}`,children:[o.jsxs("div",{className:`ov-water-float ov-water-float--${we}`,children:[o.jsxs("div",{className:"ov-water-left",children:[o.jsxs("svg",{className:"ov-water-glass",width:"28",height:"38",viewBox:"0 0 24 32",fill:"none",children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"water-grad",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:Ae.top}),o.jsx("stop",{offset:"100%",stopColor:Ae.bot})]}),o.jsx("clipPath",{id:"glass-clip",children:o.jsx("path",{d:"M5 4 L5 25 Q5 30 12 30 Q19 30 19 25 L19 4Z"})})]}),(()=>{const Ee=26*ie,qe=4+(26-Ee);return o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"4",y:qe,width:"16",height:Ee+2,fill:"url(#water-grad)",clipPath:"url(#glass-clip)",className:"ov-water-fill"}),ie>0&&ie<1&&o.jsxs(o.Fragment,{children:[o.jsx("path",{d:`M4 ${qe+1} Q8 ${qe-1.5} 12 ${qe+1} Q16 ${qe+3} 20 ${qe+1} L20 ${qe+4} L4 ${qe+4}Z`,fill:Ae.wave1,clipPath:"url(#glass-clip)",className:"ov-water-wave ov-water-wave--1"}),o.jsx("path",{d:`M4 ${qe+1.5} Q9 ${qe+3} 12 ${qe+1} Q15 ${qe-1} 20 ${qe+1.5} L20 ${qe+4} L4 ${qe+4}Z`,fill:Ae.wave2,clipPath:"url(#glass-clip)",className:"ov-water-wave ov-water-wave--2"})]})]})})(),o.jsx("path",{d:"M5 4 L5 25 Q5 30 12 30 Q19 30 19 25 L19 4",stroke:Ae.stroke,strokeWidth:"1.2",fill:"none",opacity:"0.4",strokeLinejoin:"round"}),o.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4",stroke:Ae.stroke,strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.5"}),o.jsx("line",{x1:"7.5",y1:"7",x2:"7.5",y2:"25",stroke:"rgba(255,255,255,0.4)",strokeWidth:"1.2",strokeLinecap:"round"}),T&&o.jsx("path",{d:"M5 4 Q8 0.5 12 2 Q16 0.5 19 4",fill:"url(#water-grad)",className:"ov-water-overflow"})]}),T&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"ov-flood-drop ov-flood-drop--1"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--2"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--3"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--4"}),o.jsx("span",{className:"ov-flood-drop ov-flood-drop--5"})]}),o.jsxs("div",{className:"ov-water-controls",children:[o.jsx("button",{className:"ov-water-ctrl","aria-label":"Add 0.25L",onClick:()=>ce(.25),children:o.jsxs("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"18"}),o.jsx("line",{x1:"6",y1:"12",x2:"18",y2:"12"})]})}),o.jsx("button",{className:"ov-water-ctrl","aria-label":"Remove 0.25L",disabled:f<=0,onClick:()=>{const et=(s.waterLogs||[]).filter(Ee=>Ee.dateKey===mn());et.length>0&&a({type:"DELETE_WATER",payload:et[et.length-1].id})},children:o.jsx("svg",{width:"9",height:"9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:o.jsx("line",{x1:"6",y1:"12",x2:"18",y2:"12"})})})]})]}),o.jsxs("div",{className:"ov-water-right",children:[o.jsxs("div",{className:`ov-water-hint ov-water-hint--${we}`,"aria-label":Ue,children:[Me?o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#50bfe8",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})}):we==="good"?o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#50bfe8",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2c-5.33 8-10 11.33-10 16a10 10 0 0 0 20 0C22 13.33 17.33 8 12 2z"})}):we==="mid"?o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#78d0ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2c-5.33 8-10 11.33-10 16a10 10 0 0 0 20 0C22 13.33 17.33 8 12 2z"})}):o.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"#e55a5a",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"13"}),o.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),o.jsx("span",{className:"ov-water-hint-msg",children:Ue})]}),o.jsxs("div",{className:"ov-water-float-info",children:[Me?o.jsxs("span",{className:"ov-water-float-amt",children:[f.toFixed(1),"L"]}):o.jsxs("span",{className:"ov-water-float-amt",children:[f===0?`${X}`:`${(X-f).toFixed(1)}`,"L"]}),o.jsx("span",{className:"ov-water-float-sub",children:Me?"done!":"left"})]})]})]}),j&&o.jsxs("span",{className:"ov-water-splash",children:["+",O===1?"1L":`${O*1e3}ml`]})]})})(),Y.length>0&&o.jsxs("div",{className:"ov-insights ov-enter ov-enter--4",onTouchStart:An,onTouchEnd:ea,children:[o.jsxs("div",{className:`ov-insight-card ov-insight-card--${Y[ot].level} ${ht==="left"?"ov-insight-card--exit-left":ht==="right"?"ov-insight-card--exit-right":"ov-insight-card--enter"}`,children:[o.jsxs("div",{className:"ov-insight-top",children:[o.jsxs("span",{className:"ov-insight-tag",children:[Y[ot].level==="good"?o.jsx("span",{className:"ov-insight-badge ov-insight-badge--good",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m6 13 4 4L18 7"})})}):Y[ot].level==="alert"?o.jsx("span",{className:"ov-insight-badge ov-insight-badge--alert",children:o.jsx("span",{className:"ov-insight-badge-text",children:"!"})}):o.jsx("span",{className:"ov-insight-badge ov-insight-badge--neutral",children:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"#fff",stroke:"none",children:[o.jsx("circle",{cx:"12",cy:"7.5",r:"1.4"}),o.jsx("rect",{x:"10.75",y:"10.5",width:"2.5",height:"7",rx:"1.25"})]})}),Y[ot].tag]}),ot>0&&o.jsx("button",{className:"ov-insight-back",onClick:Aa,"aria-label":"Previous insight",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})})]}),o.jsx("p",{className:"ov-insight-text",children:Y[ot].text})]},ot),Y.length>1&&o.jsx("div",{className:"ov-insight-dots",children:Y.map((ie,Me)=>o.jsx("span",{className:`ov-insight-dot ${Me===ot?"ov-insight-dot--active":""}`},Me))})]})]})}function Hu(s){const a=s.toLowerCase();return/oat|porridge/.test(a)?"":/chicken/.test(a)?"":/salad|greens/.test(a)?"":/rice/.test(a)?"":/egg/.test(a)?"":/sandwich|wrap/.test(a)?"":/pasta|noodle/.test(a)?"":/steak|beef/.test(a)?"":/fish|salmon/.test(a)?"":/coffee/.test(a)?"":/smoothie|shake/.test(a)?"":/pizza/.test(a)?"":/soup/.test(a)?"":/bread|toast/.test(a)?"":/yogurt/.test(a)?"":/fruit|apple|banana/.test(a)?"":""}const ry=300,wl=8;function eg(s){s.preventDefault()}function tg(s,a){for(const r of document.elementsFromPoint(s,a)){const l=r.closest("[data-meal]");if(l)return l.dataset.meal}return null}function ly({entry:s,onDelete:a,dragEntryId:r,setDragEntryId:l,setDragOverMeal:d,onEntryDrop:h}){const{dispatch:f}=zt(),g=U.useRef(null),v=U.useRef(null),p=r===s.id,b=U.useCallback(()=>{const T=document.querySelector(".fec-ghost");T&&T.remove()},[]),w=U.useCallback(()=>{g.current?.timerId&&clearTimeout(g.current.timerId),g.current=null,b(),v.current&&(document.removeEventListener("pointermove",v.current.move),document.removeEventListener("pointerup",v.current.up),document.removeEventListener("pointercancel",v.current.cancel),document.removeEventListener("touchmove",eg),v.current=null)},[b]);U.useEffect(()=>w,[w]);const k=U.useCallback(T=>{if(T.button!==0||T.target.closest(".fec-delete"))return;const q=T.clientX,O=T.clientY,B=T.currentTarget,X=setTimeout(()=>{if(!g.current)return;g.current.isDragging=!0,l(s.id),navigator.vibrate&&navigator.vibrate(30);const ce=B.cloneNode(!0);ce.className="fec-ghost";const F=B.getBoundingClientRect();ce.style.width=F.width+"px",ce.style.left=q-F.width/2+"px",ce.style.top=O-F.height/2+"px",document.body.appendChild(ce),g.current.ghost=ce;const W=V=>{V.preventDefault();const Z=g.current;if(!Z?.ghost)return;const L=parseFloat(Z.ghost.style.width),H=Z.ghost.getBoundingClientRect().height;Z.ghost.style.left=V.clientX-L/2+"px",Z.ghost.style.top=V.clientY-H/2+"px",d(tg(V.clientX,V.clientY))},ue=V=>{const Z=tg(V.clientX,V.clientY);w(),Z&&Z!==s.meal&&h(s,Z),l(null),d(null)},_e=()=>{w(),l(null),d(null)};v.current={move:W,up:ue,cancel:_e},document.addEventListener("pointermove",W),document.addEventListener("pointerup",ue),document.addEventListener("pointercancel",_e),document.addEventListener("touchmove",eg,{passive:!1})},ry);g.current={startX:q,startY:O,timerId:X,isDragging:!1,ghost:null}},[s,l,d,h,w]),S=U.useCallback(T=>{const q=g.current;if(!q||q.isDragging)return;const O=T.clientX-q.startX,B=T.clientY-q.startY;(Math.abs(O)>wl||Math.abs(B)>wl)&&(clearTimeout(q.timerId),g.current=null)},[]),j=U.useCallback(T=>{const q=g.current;if(!q||q.isDragging)return;const O=T.clientX-q.startX,B=T.clientY-q.startY;clearTimeout(q.timerId),g.current=null,Math.abs(O)<wl&&Math.abs(B)<wl&&f({type:"SET_EDITING_ENTRY",payload:s})},[f,s]),A=U.useCallback(()=>{const T=g.current;!T||T.isDragging||(clearTimeout(T.timerId),g.current=null)},[]);return o.jsxs("button",{className:`fec-card ${p?"fec-card--dragging":""}`,onPointerDown:k,onPointerMove:S,onPointerUp:j,onPointerCancel:A,style:{touchAction:"pan-x"},children:[o.jsx("span",{className:"fec-delete",role:"button",tabIndex:0,onClick:T=>{T.stopPropagation(),a(s)},onKeyDown:T=>{T.key==="Enter"&&(T.stopPropagation(),a(s))},children:o.jsx("svg",{width:"8",height:"8",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:o.jsx("path",{d:"M2 2l8 8M10 2l-8 8"})})}),o.jsx("span",{className:"fec-emoji",children:Hu(s.name)}),o.jsx("span",{className:"fec-name",children:s.name}),o.jsxs("span",{className:"fec-macros",children:[Math.round(s.kcal)," cal  ",Math.round(s.protein),"g"]})]})}const Ml=[{key:"walking",label:"Walking",met:3.5},{key:"jogging",label:"Jogging",met:7},{key:"running",label:"Running",met:10},{key:"cycling",label:"Cycling",met:8},{key:"swimming",label:"Swimming",met:8},{key:"weight_training",label:"Weight Training",met:6},{key:"hiit",label:"HIIT",met:10},{key:"yoga",label:"Yoga",met:3},{key:"basketball",label:"Basketball",met:8},{key:"soccer",label:"Soccer",met:10},{key:"jump_rope",label:"Jump Rope",met:11},{key:"rowing",label:"Rowing",met:7},{key:"dancing",label:"Dancing",met:5},{key:"hiking",label:"Hiking",met:6},{key:"elliptical",label:"Elliptical",met:5}],xu={light:{label:"Light",factor:.75},moderate:{label:"Moderate",factor:1},intense:{label:"Intense",factor:1.25}};function oy(s,a="moderate"){const r=Ml.find(d=>d.key===s);if(!r)return 0;const l=xu[a]||xu.moderate;return r.met*l.factor}function ng(s,a,r,l="moderate"){const d=oy(s,l),h=a/60;return Math.round(d*r*h)}function Hg({title:s,children:a,onClose:r}){return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:s}),o.jsx("button",{className:"modal-close",onClick:r,children:""})]}),o.jsx("div",{className:"modal-body",children:a})]})})}function cy(){const{state:s,dispatch:a}=zt(),{todayExerciseLogs:r,caloriesBurned:l}=qu(),[d,h]=U.useState(!1),[f,g]=U.useState(Ml[0].key),[v,p]=U.useState(""),[b,w]=U.useState("moderate"),[k,S]=U.useState(null),j=s.targets.weight||70;function A(O){O.preventDefault();const B=Number(v);if(!B||B<=0)return;const X=ng(f,B,j,b),ce=Ml.find(F=>F.key===f);a({type:"ADD_EXERCISE",payload:{id:Ta(),type:f,label:ce?.label||f,durationMinutes:B,intensity:b,weightUsed:j,caloriesBurned:X,dateKey:mn(),timestamp:Date.now()}}),p(""),h(!1)}function T(){a({type:"DELETE_EXERCISE",payload:k}),S(null)}const q=v>0?ng(f,Number(v),j,b):null;return o.jsxs("div",{className:"exercise-panel",children:[o.jsxs("button",{className:`exercise-add-btn ${d?"exercise-add-btn--active":""}`,onClick:()=>h(!d),children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:d?o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),d?"Cancel":"Add Workout"]}),d&&o.jsxs("form",{className:"exercise-form",onSubmit:A,children:[o.jsxs("div",{className:"exercise-form-row",children:[o.jsxs("div",{className:"exercise-field",children:[o.jsx("label",{className:"exercise-label",children:"Exercise"}),o.jsx("select",{className:"exercise-select",value:f,onChange:O=>g(O.target.value),children:Ml.map(O=>o.jsx("option",{value:O.key,children:O.label},O.key))})]}),o.jsxs("div",{className:"exercise-field exercise-field--duration",children:[o.jsx("label",{className:"exercise-label",children:"Minutes"}),o.jsx("input",{type:"number",className:"exercise-input",placeholder:"30",min:"1",max:"600",value:v,onChange:O=>p(O.target.value)})]})]}),o.jsx("div",{className:"exercise-intensity",children:Object.entries(xu).map(([O,{label:B}])=>o.jsx("button",{type:"button",className:`exercise-intensity-btn ${b===O?"exercise-intensity-btn--active":""}`,onClick:()=>w(O),children:B},O))}),q!==null&&o.jsxs("div",{className:"exercise-preview",children:["~",q," cal burn"]}),o.jsx("button",{type:"submit",className:"btn-primary exercise-submit",disabled:!v||Number(v)<=0,children:"Log Exercise"})]}),r.length>0&&o.jsxs("div",{className:"exercise-log-section",children:[o.jsxs("div",{className:"exercise-log-header",children:[o.jsx("span",{className:"exercise-log-title",children:"Today's Exercise"}),o.jsxs("span",{className:"exercise-log-total",children:[o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})}),l," cal burned"]})]}),o.jsx("div",{className:"exercise-log-list",children:r.map(O=>o.jsxs("div",{className:"exercise-log-item",children:[o.jsxs("div",{className:"exercise-log-info",children:[o.jsx("span",{className:"exercise-log-name",children:O.label}),o.jsxs("span",{className:"exercise-log-detail",children:[O.durationMinutes," min",o.jsx("span",{className:"exercise-log-dot"}),O.intensity,o.jsx("span",{className:"exercise-log-dot"}),O.caloriesBurned," cal"]})]}),o.jsx("button",{className:"exercise-log-delete",onClick:()=>S(O.id),"aria-label":"Delete exercise",children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},O.id))})]}),k&&o.jsxs(Hg,{title:"Delete Exercise",onClose:()=>S(null),children:[o.jsx("p",{style:{marginBottom:16},children:"Delete this exercise entry?"}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-danger)",padding:"10px"},onClick:T,children:"Delete"}),o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-text-secondary)",padding:"10px"},onClick:()=>S(null),children:"Cancel"})]})]})]})}function $g({children:s,className:a}){const r=U.useRef(null),[l,d]=U.useState(!1),[h,f]=U.useState(!1),g=U.useCallback(()=>{const p=r.current;p&&(d(p.scrollLeft>8),f(p.scrollLeft+p.clientWidth<p.scrollWidth-8))},[]);function v(p){const b=r.current;b&&b.scrollBy({left:p*140,behavior:"smooth"})}return U.useEffect(()=>{const p=r.current;if(!p)return;p.scrollLeft=0,requestAnimationFrame(g),p.addEventListener("scroll",g,{passive:!0});const b=new ResizeObserver(g);b.observe(p);function w(X){Math.abs(X.deltaY)<=Math.abs(X.deltaX)||(X.preventDefault(),p.scrollLeft+=X.deltaY)}let k=!1,S=!1,j=0,A=0;function T(X){X.button===0&&(k=!0,S=!1,j=X.clientX,A=p.scrollLeft,document.addEventListener("mousemove",q),document.addEventListener("mouseup",O,{once:!0}))}function q(X){if(!k)return;const ce=X.clientX-j;Math.abs(ce)>5&&(S=!0),S&&(p.scrollLeft=A-ce)}function O(){document.removeEventListener("mousemove",q),k&&(k=!1,S&&p.addEventListener("click",B,{capture:!0,once:!0}))}function B(X){X.stopPropagation(),X.preventDefault()}return p.addEventListener("wheel",w,{passive:!1}),p.addEventListener("mousedown",T),()=>{p.removeEventListener("scroll",g),b.disconnect(),p.removeEventListener("wheel",w),p.removeEventListener("mousedown",T),document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",O)}},[g]),o.jsxs("div",{className:"ss-wrap",children:[l&&o.jsx("button",{className:"ss-arrow ss-arrow--left",onClick:()=>v(-1),"aria-label":"Scroll left",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("div",{ref:r,className:a,children:s}),h&&o.jsx("button",{className:"ss-arrow ss-arrow--right",onClick:()=>v(1),"aria-label":"Scroll right",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]})}const uy=300,jl=8;function ag(s){s.preventDefault()}function sg(s,a){for(const r of document.elementsFromPoint(s,a)){const l=r.closest("[data-meal]");if(l)return l.dataset.meal}return null}function dy({onSelect:s,dragItem:a,setDragItem:r,setDragOverMeal:l,onDrop:d}){const{state:h}=zt(),f=h.customMeals||[],g=U.useRef(null),v=U.useRef(null),p=(h.leftovers||[]).filter(O=>O.remainingServings>0).map(O=>({type:"leftover",id:O.id,name:O.name,kcal:O.perServing.kcal,protein:O.perServing.protein,remaining:O.remainingServings,leftover:O})),b=f.map((O,B)=>({type:"meal",id:O.id||`meal-${B}`,name:O.name,kcal:O.kcal,protein:O.protein,ingredients:O.ingredients})),w=[...p,...b],k=U.useCallback(()=>{const O=document.querySelector(".qmr-ghost");O&&O.remove()},[]),S=U.useCallback(()=>{g.current?.timerId&&clearTimeout(g.current.timerId),g.current=null,k(),v.current&&(document.removeEventListener("pointermove",v.current.move),document.removeEventListener("pointerup",v.current.up),document.removeEventListener("pointercancel",v.current.cancel),document.removeEventListener("touchmove",ag),v.current=null)},[k]);U.useEffect(()=>S,[S]);const j=U.useCallback((O,B,X)=>{if(O.button!==0)return;const ce=O.clientX,F=O.clientY,W=setTimeout(()=>{if(!g.current)return;g.current.isDragging=!0,g.current.item=B,r(B),navigator.vibrate&&navigator.vibrate(30);const ue=X.cloneNode(!0);ue.className="qmr-ghost";const _e=X.getBoundingClientRect();ue.style.width=_e.width+"px",ue.style.left=ce-_e.width/2+"px",ue.style.top=F-_e.height/2+"px",document.body.appendChild(ue),g.current.ghost=ue;const V=H=>{H.preventDefault();const te=g.current;if(!te?.ghost)return;const ne=parseFloat(te.ghost.style.width),C=te.ghost.getBoundingClientRect().height;te.ghost.style.left=H.clientX-ne/2+"px",te.ghost.style.top=H.clientY-C/2+"px",l(sg(H.clientX,H.clientY))},Z=H=>{const te=g.current?.item,ne=sg(H.clientX,H.clientY);S(),ne&&te?d(te,ne):(r(null),l(null))},L=()=>{S(),r(null),l(null)};v.current={move:V,up:Z,cancel:L},document.addEventListener("pointermove",V),document.addEventListener("pointerup",Z),document.addEventListener("pointercancel",L),document.addEventListener("touchmove",ag,{passive:!1})},uy);g.current={startX:ce,startY:F,timerId:W,isDragging:!1,ghost:null,item:B}},[r,l,d,S]),A=U.useCallback(O=>{const B=g.current;if(!B||B.isDragging)return;const X=O.clientX-B.startX,ce=O.clientY-B.startY;(Math.abs(X)>jl||Math.abs(ce)>jl)&&(clearTimeout(B.timerId),g.current=null)},[]),T=U.useCallback(O=>{const B=g.current;if(!B||B.isDragging)return;const X=O.clientX-B.startX,ce=O.clientY-B.startY;clearTimeout(B.timerId);const F=B.item;g.current=null,Math.abs(X)<jl&&Math.abs(ce)<jl&&s(F)},[s]),q=U.useCallback(()=>{const O=g.current;!O||O.isDragging||(clearTimeout(O.timerId),g.current=null)},[]);return w.length===0?null:o.jsxs("div",{className:"qmr",children:[o.jsx("span",{className:"qmr-label",children:"Quick Add"}),a&&o.jsx("span",{className:"qmr-drag-hint",children:"Drop on a meal below"}),o.jsx($g,{className:"qmr-scroll",children:w.map(O=>o.jsxs("button",{className:["qmr-card",O.type==="leftover"?"qmr-card--kitchen":"qmr-card--meal",a?.id===O.id&&"qmr-card--dragging"].filter(Boolean).join(" "),onPointerDown:B=>j(B,O,B.currentTarget),onPointerMove:A,onPointerUp:T,onPointerCancel:q,style:{touchAction:"pan-x"},children:[o.jsx("span",{className:"qmr-add-btn","aria-hidden":"true",children:o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:o.jsx("path",{d:"M6 1v10M1 6h10"})})}),o.jsx("span",{className:"qmr-card-emoji",children:Hu(O.name)}),o.jsx("span",{className:"qmr-card-name",children:O.name}),O.type==="leftover"?o.jsxs("span",{className:"qmr-card-tag",children:["In Kitchen  ",O.remaining," left"]}):o.jsxs("span",{className:"qmr-card-macros",children:[Math.round(O.kcal)," cal  ",Math.round(O.protein),"g"]})]},O.id))})]})}const hy=[{key:"Breakfast",label:"Breakfast"},{key:"Lunch",label:"Lunch"},{key:"Dinner",label:"Dinner"},{key:"Snack",label:"Snacks"}];function fy(){const{state:s,dispatch:a}=zt(),{todayEntries:r,caloriesBurned:l}=qu(),{kcal:d,protein:h}=qg(),[f,g]=U.useState("food"),[v,p]=U.useState(null),[b,w]=U.useState(null),[k,S]=U.useState(null),[j,A]=U.useState(null),[T,q]=U.useState(null);function O(L){if(a({type:"DELETE_ENTRY",payload:L.id}),L.fromLeftoverId){const H=s.leftovers.find(te=>te.id===L.fromLeftoverId);a(H?{type:"UPDATE_LEFTOVER",payload:{...H,remainingServings:H.remainingServings+1}}:{type:"ADD_LEFTOVER",payload:{id:L.fromLeftoverId,recipeId:L.recipeId,name:L.name,perServing:{kcal:L.kcal,protein:L.protein},remainingServings:1,totalServings:1,dateCooked:L.dateKey,timestamp:Date.now()}})}}function B(L){if(L.type==="leftover"){q({name:L.name,kcal:L.kcal,protein:L.protein,servingsYield:L.remaining,servingsConsumed:1,mealSlot:F(),isLeftover:!0,leftover:L.leftover}),A("confirm");return}q({name:L.name,kcal:L.kcal,protein:L.protein,ingredients:L.ingredients,servingsYield:1,servingsConsumed:1,mealSlot:F()}),A("confirm")}function X(L,H){!L||!H||(L.type==="leftover"?(q({name:L.name,kcal:L.kcal,protein:L.protein,servingsYield:L.remaining,servingsConsumed:1,mealSlot:H,isLeftover:!0,leftover:L.leftover}),A("confirm")):a({type:"ADD_ENTRY",payload:{id:Ta(),name:L.name,kcal:Math.round(L.kcal),protein:Math.round(L.protein*10)/10,meal:H,servingSize:1,servingUnit:"serving",timestamp:Date.now(),dateKey:mn(),...L.ingredients?{ingredients:L.ingredients}:{}}}),p(null),S(null))}function ce(L,H){!L||!H||L.meal===H||a({type:"UPDATE_ENTRY",payload:{...L,meal:H}})}function F(){const L=new Date().getHours();return L<11?"Breakfast":L<15?"Lunch":L<20?"Dinner":"Snack"}function W(L){q(H=>({...H,name:L.name,kcal:L.kcal,protein:L.protein,ingredients:L.ingredients,servingsYield:1,servingsConsumed:1,mealSlot:H?.mealSlot||F()})),A("confirm")}function ue(){if(!T||!T.mealSlot)return;const{name:L,kcal:H,protein:te,ingredients:ne,servingsYield:C,servingsConsumed:I,mealSlot:ee}=T,ge=Math.max(1,C),le=Math.min(Math.max(0,I),ge);if(T.isLeftover){const _=T.leftover;if(le>0){a({type:"ADD_ENTRY",payload:{id:Ta(),name:L,kcal:Math.round(H*le),protein:Math.round(te*le*10)/10,meal:ee,servingSize:le,servingUnit:"serving",timestamp:Date.now(),dateKey:mn(),fromLeftoverId:_.id}});const $=_.remainingServings-le;$>0?a({type:"UPDATE_LEFTOVER",payload:{..._,remainingServings:$}}):a({type:"DELETE_LEFTOVER",payload:_.id})}}else{const _={kcal:Math.round(H/ge),protein:Math.round(te/ge*10)/10};le>0&&a({type:"ADD_ENTRY",payload:{id:Ta(),name:L,kcal:Math.round(_.kcal*le),protein:Math.round(_.protein*le*10)/10,meal:ee,servingSize:le,servingUnit:"serving",timestamp:Date.now(),dateKey:mn(),...ne?{ingredients:ne}:{}}});const $=ge-le;$>0&&a({type:"ADD_LEFTOVER",payload:{id:Ta(),name:L,perServing:_,remainingServings:$,totalServings:ge,dateCooked:mn(),timestamp:Date.now()}})}if(T.saveToMyMeals&&L){const _=(s.customMeals||[]).find(J=>J.name.toLowerCase()===L.toLowerCase()),$={..._?{id:_.id}:{id:Ta()},name:L,kcal:Math.round(H),protein:Math.round(te*10)/10,ingredients:ne||[]};a({type:_?"UPDATE_CUSTOM_MEAL":"ADD_CUSTOM_MEAL",payload:$})}A(null),q(null)}function _e(){const L=T?.name?.trim(),H=Number(T?.kcal),te=Number(T?.protein)||0;!L||!H||H<=0||(q(ne=>({...ne,name:L,kcal:H,protein:te,servingsYield:1,servingsConsumed:1,mealSlot:ne?.mealSlot||F()})),A("confirm"))}function V(){A(null),q(null)}if(!!s.editingEntry){const L=s.editingEntry;return o.jsx("div",{className:"today",children:o.jsx(Dl,{initialData:L.ingredients?L:{name:L.name,ingredients:[]},onSave:H=>{a({type:"UPDATE_ENTRY",payload:{...L,name:H.name,kcal:H.kcal,protein:H.protein,ingredients:H.ingredients}}),a({type:"SET_EDITING_ENTRY",payload:null})},onCancel:()=>a({type:"SET_EDITING_ENTRY",payload:null})})})}return j?o.jsxs("div",{className:"today",children:[j==="choose"&&o.jsxs("div",{className:"add-mode-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:V,children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),o.jsx("span",{className:"add-mode-title",children:"Add Meal"})]}),o.jsxs("div",{className:"add-choose-options",children:[o.jsxs("button",{className:"add-choose-card",onClick:()=>{q({name:"",kcal:"",protein:""}),A("direct")},children:[o.jsx("span",{className:"add-choose-card-icon",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})})}),o.jsx("span",{className:"add-choose-card-title",children:"Direct Add"}),o.jsx("span",{className:"add-choose-card-desc",children:"Enter name & macros"})]}),o.jsxs("button",{className:"add-choose-card",onClick:()=>A("list"),children:[o.jsx("span",{className:"add-choose-card-icon",children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M3 12h18"}),o.jsx("path",{d:"M3 18h18"}),o.jsx("circle",{cx:"19",cy:"6",r:"1.5",fill:"currentColor"}),o.jsx("circle",{cx:"19",cy:"12",r:"1.5",fill:"currentColor"}),o.jsx("circle",{cx:"19",cy:"18",r:"1.5",fill:"currentColor"})]})}),o.jsx("span",{className:"add-choose-card-title",children:"Add Ingredients"}),o.jsx("span",{className:"add-choose-card-desc",children:"Build meal step by step"})]})]})]}),j==="direct"&&o.jsxs("div",{className:"add-mode-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:()=>A("choose"),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"add-mode-title",children:"Direct Add"})]}),o.jsxs("div",{className:"direct-form",children:[o.jsxs("div",{className:"direct-form-group",children:[o.jsx("label",{className:"confirm-label",children:"Meal name"}),o.jsx("input",{className:"direct-input",type:"text",placeholder:"e.g. Chicken rice bowl",value:T?.name||"",onChange:L=>q(H=>({...H,name:L.target.value})),autoFocus:!0})]}),o.jsxs("div",{className:"direct-form-row",children:[o.jsxs("div",{className:"direct-form-group",children:[o.jsx("label",{className:"confirm-label",children:"Calories"}),o.jsx("input",{className:"direct-input",type:"number",inputMode:"numeric",placeholder:"0",value:T?.kcal||"",onChange:L=>q(H=>({...H,kcal:L.target.value}))})]}),o.jsxs("div",{className:"direct-form-group",children:[o.jsx("label",{className:"confirm-label",children:"Protein (g)"}),o.jsx("input",{className:"direct-input",type:"number",inputMode:"numeric",placeholder:"0",value:T?.protein||"",onChange:L=>q(H=>({...H,protein:L.target.value}))})]})]}),o.jsxs("button",{type:"button",className:`ilf-my-meals-toggle ${T?.saveToMyMeals?"ilf-my-meals-toggle--on":""}`,onClick:()=>q(L=>({...L,saveToMyMeals:!L.saveToMyMeals})),children:[o.jsx("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:T?.saveToMyMeals?"#fff":"none",stroke:T?.saveToMyMeals?"#fff":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),o.jsx("span",{children:T?.saveToMyMeals?"Saved to My Meals":"Save to My Meals"})]}),o.jsx("button",{className:"confirm-log-btn",onClick:_e,disabled:!T?.name?.trim()||!Number(T?.kcal),children:"Next"})]})]}),j==="list"&&o.jsx(Dl,{onSave:W,onCancel:T?.servingsYield?()=>A("confirm"):()=>A("choose"),initialData:T?.servingsYield?T:void 0}),j==="confirm"&&T&&(()=>{const L=T.servingsYield>1?{kcal:Math.round(T.kcal/T.servingsYield),protein:Math.round(T.protein/T.servingsYield*10)/10}:{kcal:Math.round(T.kcal),protein:Math.round(T.protein*10)/10},H=T.servingsYield-T.servingsConsumed;return o.jsxs("div",{className:"add-mode-view confirm-view",children:[o.jsxs("div",{className:"add-mode-header",children:[o.jsx("button",{className:"add-mode-back",onClick:V,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"add-mode-title",children:"Log Meal"})]}),o.jsxs("div",{className:"confirm-hero",children:[o.jsx("span",{className:"confirm-hero-emoji",children:Hu(T.name)}),o.jsx("span",{className:"confirm-hero-name",children:T.name}),o.jsxs("div",{className:"confirm-hero-macros",children:[o.jsxs("span",{className:"confirm-hero-macro confirm-hero-macro--kcal",children:[o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"#ff6b2b",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),Math.round(T.kcal)," cal"]}),o.jsx("span",{className:"confirm-hero-sep"}),o.jsxs("span",{className:"confirm-hero-macro confirm-hero-macro--protein",children:[o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"#9575cd",stroke:"#9575cd",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),Math.round(T.protein),"g"]})]})]}),T.ingredients&&T.ingredients.length>0&&o.jsxs("div",{className:"confirm-ingredients",children:[o.jsxs("div",{className:"confirm-ingredients-header",children:[o.jsx("span",{className:"confirm-ingredients-title",children:"Ingredients"}),o.jsxs("button",{type:"button",className:"confirm-ingredients-edit",onClick:()=>A("list"),children:[o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})}),"Edit"]})]}),o.jsx("div",{className:"confirm-ingredients-list",children:T.ingredients.map((te,ne)=>o.jsxs("div",{className:"confirm-ingredient-row",children:[o.jsx("span",{className:"confirm-ingredient-name",children:te.name}),o.jsxs("span",{className:"confirm-ingredient-detail",children:[te.grams,"g  ",te.kcal," cal  ",te.protein,"g"]})]},ne))})]}),o.jsxs("div",{className:"confirm-card",children:[o.jsxs("div",{className:"confirm-servings-row",children:[o.jsxs("div",{className:"confirm-serving-group",children:[o.jsx("label",{className:"confirm-label",children:T.isLeftover?"Available":"Servings prepped"}),T.isLeftover?o.jsx("span",{className:"confirm-input confirm-input--static",children:T.servingsYield}):o.jsx("input",{type:"number",inputMode:"numeric",className:"confirm-input",min:"1",value:T.servingsYield,onChange:te=>q(ne=>{const C=Math.max(1,Number(te.target.value)||1);return{...ne,servingsYield:C,servingsConsumed:Math.min(ne.servingsConsumed,C)}})})]}),o.jsxs("div",{className:"confirm-serving-group",children:[o.jsx("label",{className:"confirm-label",children:T.isLeftover?"Eating now":"Having now"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"confirm-input",min:"0",max:T.servingsYield,value:T.servingsConsumed,onChange:te=>q(ne=>({...ne,servingsConsumed:Math.min(Math.max(0,Number(te.target.value)||0),ne.servingsYield)}))})]})]}),T.servingsYield>1&&o.jsxs("div",{className:"confirm-breakdown",children:[o.jsxs("span",{className:"confirm-breakdown-item",children:[L.kcal," cal  ",L.protein,"g per serving"]}),!T.isLeftover&&H>0&&o.jsxs("span",{className:"confirm-breakdown-kitchen",children:[o.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"}),o.jsx("path",{d:"M3 9V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3"})]}),H," serving",H!==1?"s":""," saved to kitchen"]})]})]}),o.jsx("button",{className:"confirm-log-btn",onClick:ue,children:"Log it"})]})})()]}):o.jsxs("div",{className:"today",children:[o.jsxs("div",{className:"today-tabs",children:[o.jsxs("button",{className:`today-tab ${f==="food"?"today-tab--active":""}`,onClick:()=>g("food"),children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),o.jsx("path",{d:"M7 2v20"}),o.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),"Food"]}),o.jsxs("button",{className:`today-tab ${f==="exercise"?"today-tab--active":""}`,onClick:()=>g("exercise"),children:[o.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6.5 6.5h11"}),o.jsx("path",{d:"M6.5 17.5h11"}),o.jsx("path",{d:"M12 6.5v11"}),o.jsx("rect",{x:"2",y:"4",width:"4",height:"16",rx:"1"}),o.jsx("rect",{x:"18",y:"4",width:"4",height:"16",rx:"1"})]}),"Exercise",l>0&&o.jsxs("span",{className:"today-tab-burned",children:["-",l]})]})]}),f==="food"&&(()=>{const L=F(),H=Wn(r),te=d||s.targets?.kcal||2e3,ne=h||s.targets?.protein||120;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"daily-summary",children:[o.jsxs("span",{className:"daily-summary-item",children:[o.jsx("span",{className:"daily-summary-value",children:Math.round(H.kcal)})," / ",te," cal"]}),o.jsx("span",{className:"daily-summary-sep"}),o.jsxs("span",{className:"daily-summary-item",children:[o.jsx("span",{className:"daily-summary-value",children:Math.round(H.protein)})," / ",ne,"g protein"]})]}),o.jsx(dy,{onSelect:B,dragItem:v,setDragItem:p,dragOverMeal:k,setDragOverMeal:S,onDrop:X}),o.jsx("div",{className:"meals-section",children:hy.map(({key:C,label:I})=>{const ee=r.filter(Q=>Q.meal===C),ge=Wn(ee),le=C===L,_=ee.length>0,J=["meal-row",_&&"meal-row--filled",le&&"meal-row--active",(v||b)&&"meal-row--drag-active",k===C&&"meal-row--drop-target"].filter(Boolean).join(" ");return o.jsxs("div",{className:J,"data-meal":C,children:[o.jsxs("div",{className:"meal-row-header",children:[o.jsx("span",{className:"meal-label",children:I}),_&&o.jsxs("span",{className:"meal-totals-compact",children:[Math.round(ge.kcal)," cal  ",Math.round(ge.protein),"g"]}),_&&o.jsx("button",{className:"meal-add-btn",onClick:()=>{q(Q=>({...Q,mealSlot:C})),A("choose")},children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),_&&o.jsx($g,{className:"meal-entries-scroll",children:ee.map(Q=>o.jsx(ly,{entry:Q,onDelete:O,dragEntryId:b,setDragEntryId:w,setDragOverMeal:S,onEntryDrop:ce},Q.id))}),!_&&o.jsxs("button",{className:"meal-empty-prompt",onClick:()=>{q(Q=>({...Q,mealSlot:C})),A("choose")},children:[o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"What did you have for ",I.toLowerCase(),"?"]})]},C)})})]})})(),f==="exercise"&&o.jsx(cy,{})]})}function $u(){return o.jsx("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})})}function Pu(){return o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function Pg(){return o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}function my(){const s=new Date().getHours();return s<6?{text:"Late-night cravings?",emoji:""}:s<12?{text:"Good morning, chef!",emoji:""}:s<17?{text:"What are we cooking?",emoji:""}:s<21?{text:"Dinner time vibes!",emoji:""}:{text:"Cozy evening snack?",emoji:""}}function gy({onEditMeal:s,onAddMeal:a,meals:r,onDeleteMeal:l}){function d(h){const f=r[h];f?.id&&l(f.id)}return o.jsxs("div",{className:"kitchen-section kitchen-section--meals",children:[o.jsxs("div",{className:"kitchen-section-header",children:[o.jsx("span",{className:"kitchen-section-emoji",children:""}),o.jsx("h2",{children:"My Meals"}),o.jsx("button",{type:"button",className:"kitchen-add-btn",onClick:a,"aria-label":"Add meal",children:o.jsx(Pg,{})})]}),r.length===0?o.jsxs("div",{className:"kitchen-empty",children:[o.jsx("span",{className:"kitchen-empty-emoji",children:""}),o.jsx("p",{children:"No saved meals yet"}),o.jsx("p",{className:"kitchen-empty-hint",children:"Tap + to build your first meal!"})]}):o.jsx("div",{className:"kitchen-list",children:r.map((h,f)=>o.jsxs("div",{className:"kitchen-list-item",children:[o.jsxs("button",{type:"button",className:"kitchen-list-info kitchen-list-info--tap",onClick:()=>s(f,h),children:[o.jsx("span",{className:"kitchen-list-name",children:h.name}),o.jsxs("span",{className:"kitchen-list-meta",children:[h.kcal," cal  ",h.protein,"g protein",h.ingredients?`  ${h.ingredients.length} ingredient${h.ingredients.length!==1?"s":""}`:""]})]}),o.jsxs("div",{className:"kitchen-list-actions",children:[o.jsx("button",{type:"button",className:"kitchen-list-edit",onClick:()=>s(f,h),"aria-label":"Edit meal",children:o.jsx($u,{})}),o.jsx("button",{type:"button",className:"kitchen-list-delete",onClick:()=>d(f),"aria-label":"Delete meal",children:o.jsx(Pu,{})})]})]},`${h.name}-${f}`))})]})}const py=[{label:"g",grams:1},{label:"tbsp",grams:15},{label:"tsp",grams:5},{label:"cup",grams:240},{label:"piece",grams:100},{label:"slice",grams:30},{label:"serving",grams:100}];function ig({form:s,setForm:a,onSave:r,onCancel:l,saveLabel:d}){return o.jsxs("div",{className:"kitchen-edit-form kitchen-edit-form--add",children:[o.jsx("input",{className:"kitchen-edit-input",value:s.name,onChange:h=>a({...s,name:h.target.value}),placeholder:"Ingredient name",autoFocus:!0}),o.jsxs("div",{className:"kitchen-edit-row",children:[o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Amount"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",inputMode:"decimal",value:s.amount,onChange:h=>a({...s,amount:h.target.value}),placeholder:"0"})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Unit"}),o.jsx("select",{className:"kitchen-edit-select",value:s.unit,onChange:h=>a({...s,unit:h.target.value}),children:py.map(h=>o.jsx("option",{value:h.label,children:h.label},h.label))})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Calories"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",inputMode:"decimal",value:s.kcal,onChange:h=>a({...s,kcal:h.target.value}),placeholder:"0"})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Protein (g)"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",inputMode:"decimal",value:s.protein,onChange:h=>a({...s,protein:h.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{className:"kitchen-edit-actions",children:[o.jsx("button",{type:"button",className:"kitchen-edit-save",onClick:r,children:d}),o.jsx("button",{type:"button",className:"kitchen-edit-cancel",onClick:l,children:"Cancel"})]})]})}function vy(){const[s,a]=U.useState(()=>Bu()),[r,l]=U.useState(null),[d,h]=U.useState(!1),f={name:"",amount:"",unit:"g",kcal:"",protein:""},[g,v]=U.useState(f);function p(j){const A=s.filter((T,q)=>q!==j);Rl(A),a(A),r===j&&l(null)}function b(j){const A=s[j];v({name:A.name,amount:String(A.refAmount||100),unit:A.refUnit||"g",kcal:String(A.refKcal||0),protein:String(A.refProtein||0)}),l(j),h(!1)}function w(){if(!g.name.trim())return;const j=[...s];j[r]={name:g.name.trim(),refAmount:Number(g.amount)||0,refUnit:g.unit,refKcal:Math.round(Number(g.kcal)||0),refProtein:Math.round(Number(g.protein)*10)/10},Rl(j),a(j),l(null)}function k(){v(f),h(!0),l(null)}function S(){if(!g.name.trim())return;const A=[{name:g.name.trim(),refAmount:Number(g.amount)||0,refUnit:g.unit,refKcal:Math.round(Number(g.kcal)||0),refProtein:Math.round(Number(g.protein)*10)/10},...s];Rl(A),a(A),h(!1)}return o.jsxs("div",{className:"kitchen-section kitchen-section--ingredients",children:[o.jsxs("div",{className:"kitchen-section-header",children:[o.jsx("span",{className:"kitchen-section-emoji",children:""}),o.jsx("h2",{children:"My Ingredients"}),o.jsx("button",{type:"button",className:"kitchen-add-btn",onClick:k,"aria-label":"Add ingredient",children:o.jsx(Pg,{})})]}),d&&o.jsx(ig,{form:g,setForm:v,onSave:S,onCancel:()=>h(!1),saveLabel:"Add"}),!d&&s.length===0?o.jsxs("div",{className:"kitchen-empty",children:[o.jsx("span",{className:"kitchen-empty-emoji",children:""}),o.jsx("p",{children:"No custom ingredients yet"}),o.jsx("p",{className:"kitchen-empty-hint",children:"Tap + to add your first ingredient!"})]}):o.jsx("div",{className:"kitchen-list",children:s.map((j,A)=>o.jsx("div",{className:"kitchen-list-item",children:r===A?o.jsx(ig,{form:g,setForm:v,onSave:w,onCancel:()=>l(null),saveLabel:"Save"}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"kitchen-list-info kitchen-list-info--tap",onClick:()=>b(A),children:[o.jsx("span",{className:"kitchen-list-name",children:j.name}),o.jsxs("span",{className:"kitchen-list-meta",children:[j.refAmount?`${j.refAmount} ${j.refUnit}`:"","  ",j.refKcal??0," cal  ",j.refProtein??0,"g protein"]})]}),o.jsxs("div",{className:"kitchen-list-actions",children:[o.jsx("button",{type:"button",className:"kitchen-list-edit",onClick:()=>b(A),"aria-label":"Edit ingredient",children:o.jsx($u,{})}),o.jsx("button",{type:"button",className:"kitchen-list-delete",onClick:()=>p(A),"aria-label":"Delete ingredient",children:o.jsx(Pu,{})})]})]})},`${j.name}-${A}`))})]})}function yy(){const{state:s,dispatch:a}=zt(),r=(s.leftovers||[]).filter(j=>j.remainingServings>0),[l,d]=U.useState(null),[h,f]=U.useState(null),[g,v]=U.useState({name:"",remainingServings:"",kcal:"",protein:""}),p=my();function b(j,A){d({index:j,meal:A})}function w(j){if(l.index>=0){const A=l.meal?.name?.toLowerCase(),T=j.name.toLowerCase();if(A&&A!==T){const q=(s.customMeals||[]).find(O=>O.name.toLowerCase()===A);q?.id&&a({type:"DELETE_CUSTOM_MEAL",payload:q.id})}}d(null)}function k(j){v({name:j.name,remainingServings:String(j.remainingServings),kcal:String(j.perServing.kcal),protein:String(j.perServing.protein)}),f(j.id)}function S(j){g.name.trim()&&(a({type:"UPDATE_LEFTOVER",payload:{...j,name:g.name.trim(),remainingServings:Math.max(1,Math.round(Number(g.remainingServings)||1)),perServing:{kcal:Math.round(Number(g.kcal)||0),protein:Math.round(Number(g.protein)*10)/10}}}),f(null))}return l?o.jsx(Dl,{initialData:l.index===-1?void 0:l.meal,onSave:w,onCancel:()=>d(null)}):o.jsxs("div",{className:"kitchen",children:[o.jsxs("div",{className:"kitchen-hero",children:[o.jsx("div",{className:"kitchen-hero-glow"}),o.jsx("span",{className:"kitchen-hero-emoji",children:p.emoji}),o.jsx("span",{className:"kitchen-hero-title",children:"My Happy Kitchen"}),o.jsx("span",{className:"kitchen-hero-greeting",children:p.text})]}),o.jsx(gy,{meals:s.customMeals||[],onEditMeal:b,onAddMeal:()=>d({index:-1,meal:null}),onDeleteMeal:j=>a({type:"DELETE_CUSTOM_MEAL",payload:j})}),o.jsx(vy,{}),o.jsxs("div",{className:"kitchen-section kitchen-section--leftovers",children:[o.jsxs("div",{className:"kitchen-section-header",children:[o.jsx("span",{className:"kitchen-section-emoji",children:""}),o.jsx("h2",{children:"Leftovers"})]}),r.length===0?o.jsxs("div",{className:"kitchen-empty",children:[o.jsx("span",{className:"kitchen-empty-emoji",children:""}),o.jsx("p",{children:"Nothing in the fridge"}),o.jsx("p",{className:"kitchen-empty-hint",children:"When you prep extra servings, they will be waiting for you here"})]}):o.jsx("div",{className:"kitchen-list",children:r.map(j=>o.jsx("div",{className:"kitchen-list-item",children:h===j.id?o.jsxs("div",{className:"kitchen-edit-form",children:[o.jsx("input",{className:"kitchen-edit-input",value:g.name,onChange:A=>v({...g,name:A.target.value}),placeholder:"Name"}),o.jsxs("div",{className:"kitchen-edit-row",children:[o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"Servings left"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",value:g.remainingServings,onChange:A=>v({...g,remainingServings:A.target.value})})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"cal / serving"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",value:g.kcal,onChange:A=>v({...g,kcal:A.target.value})})]}),o.jsxs("div",{className:"kitchen-edit-field",children:[o.jsx("label",{className:"kitchen-edit-label",children:"protein / srv"}),o.jsx("input",{className:"kitchen-edit-input kitchen-edit-input--num",type:"number",value:g.protein,onChange:A=>v({...g,protein:A.target.value})})]})]}),o.jsxs("div",{className:"kitchen-edit-actions",children:[o.jsx("button",{type:"button",className:"kitchen-edit-save",onClick:()=>S(j),children:"Save"}),o.jsx("button",{type:"button",className:"kitchen-edit-cancel",onClick:()=>f(null),children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"kitchen-list-info kitchen-list-info--tap",onClick:()=>k(j),children:[o.jsx("span",{className:"kitchen-list-name",children:j.name}),o.jsxs("span",{className:"kitchen-list-meta",children:[j.remainingServings," / ",j.totalServings," servings  ",j.perServing.kcal," cal  ",j.perServing.protein,"g per serving"]})]}),o.jsxs("div",{className:"kitchen-list-actions",children:[o.jsx("button",{type:"button",className:"kitchen-list-edit",onClick:()=>k(j),"aria-label":"Edit leftover",children:o.jsx($u,{})}),o.jsx("button",{type:"button",className:"kitchen-list-delete",onClick:()=>a({type:"DELETE_LEFTOVER",payload:j.id}),"aria-label":"Delete leftover",children:o.jsx(Pu,{})})]})]})},j.id))})]})]})}const by=["M","T","W","T","F","S","S"];function _y(s,a){const r=new Date(s,a,1),l=new Date(s,a+1,0);let d=r.getDay()-1;d<0&&(d=6);const h=[];for(let g=0;g<d;g++)h.push(null);for(let g=1;g<=l.getDate();g++)h.push(g);for(;h.length%7!==0;)h.push(null);const f=[];for(let g=0;g<h.length;g+=7)f.push(h.slice(g,g+7));return f}function xy(s,a){return new Date(s,a,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}function Sl({type:s}){return s==="weight"?o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3v18"}),o.jsx("path",{d:"m8 7 4-4 4 4"}),o.jsx("path",{d:"m8 17 4 4 4-4"})]}):s==="calories"?o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"})}):s==="protein"?o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2C9 2 7 4.2 7 7c0 2 1.2 3.8 3 4.6V20a2 2 0 0 0 2 2v0a2 2 0 0 0 2-2v-8.4c1.8-.8 3-2.6 3-4.6 0-2.8-2-5-5-5z"})}):s==="water"?o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"})}):null}function wy(){const{state:s,dispatch:a}=zt(),{signOut:r}=Bl(),[l,d]=Bg(),{entries:h,targets:f}=s,g=mn(),v=U.useRef(null),p=new Date,[b,w]=U.useState(p.getFullYear()),[k,S]=U.useState(p.getMonth()),j=U.useMemo(()=>{const ae={};for(const he of h)ae[he.dateKey]||(ae[he.dateKey]=[]),ae[he.dateKey].push(he);return ae},[h]),A=U.useMemo(()=>{const ae={};for(const he of s.exerciseLogs||[])ae[he.dateKey]=(ae[he.dateKey]||0)+(he.caloriesBurned||0);return ae},[s.exerciseLogs]),T=_y(b,k);function q(){k===0?(w(b-1),S(11)):S(k-1)}function O(){k===11?(w(b+1),S(0)):S(k+1)}const B=s.dayTypes;function X(ae){if(!l.enabled)return{kcal:f.kcal,protein:f.protein};const he=B&&B[ae]||"rest";return{kcal:he==="training"?l.trainingKcal:l.restKcal,protein:he==="training"?l.trainingProtein:l.restProtein}}function ce(ae){if(!ae)return null;const he=Qi(new Date(b,k,ae)),me=j[he];if(!me||me.length===0)return{dateKey:he,hasData:!1};const Ge=Wn(me),Ce=A[he]||0,at=Ge.kcal-Ce,ze=X(he);return{dateKey:he,hasData:!0,kcalPct:ze.kcal>0?at/ze.kcal:0,proteinPct:ze.protein>0?Ge.protein/ze.protein:0}}const F=U.useMemo(()=>{let ae=0,he=0,me=0;const Ge=new Date(b,k+1,0).getDate();for(let Ce=1;Ce<=Ge;Ce++){const at=Qi(new Date(b,k,Ce)),ze=j[at];if(!ze||ze.length===0)continue;ae++;const We=Wn(ze),Je=A[at]||0,ct=B&&B[at]||"rest",ft=l.enabled?{kcal:ct==="training"?l.trainingKcal:l.restKcal,protein:ct==="training"?l.trainingProtein:l.restProtein}:f;ft.kcal>0&&We.kcal-Je<=ft.kcal&&he++,ft.protein>0&&We.protein>=ft.protein&&me++}return{tracked:ae,calOkDays:he,protOkDays:me}},[b,k,j,A,f,l,B]),W=U.useMemo(()=>Mg(h,s.exerciseLogs,f),[h,s.exerciseLogs,f]),[ue,_e]=U.useState(!1),[V,Z]=U.useState(f.userName||""),[L,H]=U.useState(String(f.weightLossTarget||5)),[te,ne]=U.useState(String(f.kcal)),[C,I]=U.useState(String(f.protein)),[ee,ge]=U.useState(String(f.waterTargetLiters||2.5)),[le,_]=U.useState(l.enabled),[$,J]=U.useState(String(l.trainingKcal||"")),[Q,ye]=U.useState(String(l.trainingProtein||"")),[xe,de]=U.useState(String(l.restKcal||"")),[Y,je]=U.useState(String(l.restProtein||"")),[ke,ht]=U.useState({}),[Mt,tn]=U.useState(!1),[ot,An]=U.useState(!1),[ea,Aa]=U.useState(""),[ie,Me]=U.useState(!1),[we,Ae]=U.useState(""),[Ue,et]=U.useState(""),[Ee,qe]=U.useState(!1),[Bt,ta]=U.useState(""),[gn,Ca]=U.useState("");function as(){Z(f.userName||""),H(String(f.weightLossTarget||5)),ne(String(f.kcal)),I(String(f.protein)),ge(String(f.waterTargetLiters||2.5)),_(l.enabled),J(String(l.trainingKcal||f.kcal)),ye(String(l.trainingProtein||f.protein)),de(String(l.restKcal||f.kcal)),je(String(l.restProtein||f.protein)),ht({}),_e(!0)}function Kl(){_e(!1),ht({})}function Gl(ae){ae.preventDefault();const he={},me=Number(te),Ge=Number(C),Ce=Number(L),at=Number(ee);if(V.trim()||(he.userName="Enter your name"),(!me||me<500||me>1e4)&&(he.kcal="50010,000"),(!Ge||Ge<10||Ge>500)&&(he.protein="10500"),(!Ce||Ce<.5||Ce>100)&&(he.weightLossTarget="0.5100"),(!at||at<.5||at>15)&&(he.water="0.515"),le){const ze=Number($),We=Number(Q),Je=Number(xe),ct=Number(Y);(!ze||ze<500||ze>1e4)&&(he.trainingKcal="50010,000"),(!We||We<10||We>500)&&(he.trainingProtein="10500"),(!Je||Je<500||Je>1e4)&&(he.restKcal="50010,000"),(!ct||ct<10||ct>500)&&(he.restProtein="10500")}ht(he),!(Object.keys(he).length>0)&&(a({type:"SET_TARGETS",payload:{userName:V.trim(),kcal:me,protein:Ge,waterTargetLiters:at,maintenanceKcal:f.maintenanceKcal||f.kcal,weightLossTarget:Ce}}),d({enabled:le,trainingKcal:le?Number($):0,trainingProtein:le?Number(Q):0,restKcal:le?Number(xe):0,restProtein:le?Number(Y):0}),_e(!1),tn(!0),setTimeout(()=>tn(!1),2e3))}function Oa(){const ae=Yv(),he=new Blob([ae],{type:"application/json"}),me=URL.createObjectURL(he),Ge=document.createElement("a");Ge.href=me,Ge.download=`irada-export-${new Date().toISOString().slice(0,10)}.json`,Ge.click(),URL.revokeObjectURL(me)}function Dt(ae){const he=ae.target.files?.[0];if(!he)return;const me=new FileReader;me.onload=Ge=>{try{const Ce=Vv(Ge.target.result);a({type:"IMPORT_DATA",payload:Ce}),Aa("Data imported successfully!"),_e(!1)}catch{Aa("Failed to import. Invalid file format.")}setTimeout(()=>Aa(""),3e3)},me.readAsText(he),ae.target.value=""}function jn(){Gv(),window.location.reload()}function Lt(){const ae=we.trim().split(`
`).filter(Ce=>Ce.trim());if(ae.length===0){et("No data found");return}const he=[];let me=0;for(const Ce of ae){const at=Ce.trim().split(/[\t,|]|\s{2,}/).map(ft=>ft.trim()).filter(Boolean);if(at.length<3){me++;continue}let ze=null,We=[];for(const ft of at){if(!ze){const Cn=ft.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(Cn){ze=`${Cn[1]}-${Cn[2].padStart(2,"0")}-${Cn[3].padStart(2,"0")}`;continue}const pn=ft.match(/^(\d{1,2})[/.](\d{1,2})[/.](\d{2,4})$/);if(pn){ze=`${pn[3].length===2?`20${pn[3]}`:pn[3]}-${pn[2].padStart(2,"0")}-${pn[1].padStart(2,"0")}`;continue}const On=new Date(ft);if(!isNaN(On.getTime())&&ft.length>4){ze=Qi(On);continue}}const nn=parseFloat(ft.replace(/[^\d.]/g,""));isNaN(nn)||We.push(nn)}if(!ze||We.length<2){me++;continue}const Je=Math.round(We[0]),ct=Math.round(We[1]*10)/10;if(Je<=0){me++;continue}he.push({id:Ta(),name:"Daily Total",kcal:Je,protein:ct,meal:"Breakfast",servingSize:1,servingUnit:"serving",timestamp:new Date(ze+"T12:00:00").getTime(),dateKey:ze})}if(he.length===0){et(`Could not parse any rows.${me>0?` ${me} skipped.`:""} Check the format.`);return}const Ge=new Set(he.map(Ce=>Ce.dateKey));for(const Ce of h)Ce.name==="Daily Total"&&Ge.has(Ce.dateKey)&&a({type:"DELETE_ENTRY",payload:Ce.id});for(const Ce of he)a({type:"ADD_ENTRY",payload:Ce});et(`Imported ${he.length} day${he.length!==1?"s":""}${me>0?`, ${me} skipped`:""}`),Ae(""),setTimeout(()=>{et(""),Me(!1)},3e3)}function Yl(){const ae={};for(const me of h)ae[me.dateKey]||(ae[me.dateKey]={kcal:0,protein:0}),ae[me.dateKey].kcal+=me.kcal||0,ae[me.dateKey].protein+=me.protein||0;const he=Object.keys(ae).sort().map(me=>`${me}, ${Math.round(ae[me].kcal)}, ${Math.round(ae[me].protein*10)/10}`).join(`
`);ta(he||"No data to export."),qe(!0),Me(!1)}function Vl(){navigator.clipboard.writeText(Bt).then(()=>{Ca("Copied!"),setTimeout(()=>Ca(""),2e3)})}const or=f.maintenanceKcal||f.kcal;return o.jsxs("div",{className:"profile",children:[o.jsxs("div",{className:"profile-header",children:[o.jsx("div",{className:"profile-avatar",children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"8",r:"4"}),o.jsx("path",{d:"M20 21a8 8 0 1 0-16 0"})]})}),ue?o.jsxs("div",{className:"profile-name-group",children:[o.jsx("input",{className:"profile-name-input",type:"text",value:V,onChange:ae=>Z(ae.target.value),placeholder:"Your name",autoFocus:!0}),ke.userName&&o.jsx("span",{className:"form-error",children:ke.userName})]}):o.jsx("span",{className:"profile-name-display",children:f.userName||"Your name"})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"progress-header",children:[o.jsx("button",{className:"progress-nav-btn",onClick:q,"aria-label":"Previous month",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx("span",{className:"progress-month-label",children:xy(b,k)}),o.jsx("button",{className:"progress-nav-btn",onClick:O,"aria-label":"Next month",children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]}),F.tracked>0&&o.jsxs("div",{className:"progress-summary",children:[o.jsxs("span",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:F.tracked})," tracked"]}),o.jsx("span",{className:"progress-stat-sep"}),o.jsxs("span",{className:"progress-stat",children:[o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"var(--color-success)",stroke:"none",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{className:"progress-stat-value",children:F.calOkDays})]}),o.jsx("span",{className:"progress-stat-sep"}),o.jsxs("span",{className:"progress-stat",children:[o.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"var(--color-success)",stroke:"var(--color-success)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),o.jsx("span",{className:"progress-stat-value",children:F.protOkDays})]})]}),o.jsxs("div",{className:"progress-grid",children:[o.jsx("div",{className:"progress-week-row progress-weekday-row",children:by.map((ae,he)=>o.jsx("div",{className:"progress-weekday",children:ae},he))}),T.map((ae,he)=>o.jsx("div",{className:"progress-week-row",children:ae.map((me,Ge)=>{if(me===null)return o.jsx("div",{className:"progress-card progress-card--pad"},`pad-${Ge}`);const Ce=ce(me),at=Ce?.dateKey,ze=at===g,We=at>g;if(We||!Ce?.hasData)return o.jsxs("div",{className:`progress-card progress-card--empty${ze?" progress-card--today":""}${We?" progress-card--future":""}`,children:[o.jsx("span",{className:`progress-card-day${ze?" progress-card-day--today":""}`,children:me}),o.jsx("div",{className:"progress-card-body"})]},me);const Je=Ce.kcalPct<=1,ct=Ce.proteinPct>=1,ft=Je?"var(--color-success)":"var(--color-danger)",nn=ct?"var(--color-success)":"var(--color-danger)";return o.jsxs("div",{className:`progress-card${ze?" progress-card--today":""}`,children:[o.jsx("span",{className:`progress-card-day${ze?" progress-card-day--today":""}`,children:me}),o.jsxs("div",{className:"progress-card-body",children:[o.jsx("svg",{width:"11",height:"11",viewBox:"0 0 16 16",fill:ft,opacity:Je?.85:.45,children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{className:"progress-card-divider"}),o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:nn,stroke:nn,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:ct?.85:.45,children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]})]})]},me)})},he))]}),o.jsxs("div",{className:"progress-legend",children:[o.jsxs("div",{className:"progress-legend-row",children:[o.jsx("span",{className:"progress-legend-label",children:"Calories"}),o.jsxs("div",{className:"progress-legend-pair",children:[o.jsxs("div",{className:"progress-legend-item",children:[o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"var(--color-success)",stroke:"none",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{children:"On target"})]}),o.jsxs("div",{className:"progress-legend-item",children:[o.jsx("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"var(--color-danger)",stroke:"none",opacity:"0.45",children:o.jsx("path",{d:"M8 16c-3.3 0-6-1.8-6-4 0-2.3 2.1-5 4-7 .3-.3.7-.4 1-.1.2.2.2.5.1.8-.2.6-.1 1.2.1 1.7.3.6.9 1 1.6 1 .9 0 1.5-.6 1.5-1.5 0-.9-.4-1.7-.8-2.3-.2-.3-.1-.7.2-.9.2-.1.5-.1.7.1C12.3 5.5 14 8 14 10.5c0 2.7-2.7 5.5-6 5.5z"})}),o.jsx("span",{children:"Over target"})]})]})]}),o.jsxs("div",{className:"progress-legend-row",children:[o.jsx("span",{className:"progress-legend-label",children:"Protein"}),o.jsxs("div",{className:"progress-legend-pair",children:[o.jsxs("div",{className:"progress-legend-item",children:[o.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"var(--color-success)",stroke:"var(--color-success)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),o.jsx("span",{children:"Goal met"})]}),o.jsxs("div",{className:"progress-legend-item",children:[o.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"var(--color-danger)",stroke:"var(--color-danger)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.45",children:[o.jsx("path",{d:"M19.54,11.53a15.59,15.59,0,0,1-5.49,3.35,10.06,10.06,0,0,1-3,.87L8.25,12.93a10.06,10.06,0,0,1,.87-3,15.59,15.59,0,0,1,3.35-5.49,5,5,0,0,1,7.07,7.07Z"}),o.jsx("path",{d:"M8.34,18.49l2.74-2.74h0L8.25,12.93h0L5.51,15.66A2,2,0,0,0,3.59,19a1.94,1.94,0,0,0,.9.51,1.94,1.94,0,0,0,.51.9,2,2,0,0,0,3.34-1.92Z"})]}),o.jsx("span",{children:"Under target"})]})]})]})]})]}),W.daysTracked>0&&(()=>{const ae=W.goal==="lose",he=W.goal==="gain",me=ae||he,Ge=W.deltaKg>0?"":"+",Ce=Math.abs(W.deltaKg).toFixed(1),at=W.firstDate?new Date(W.firstDate+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",ze=Math.round(W.pct*100);let We="";me?ze>=100?We=ae?"Goal reached! Incredible discipline.":"Goal reached! Amazing commitment.":ze>=75?We="So close! The finish line is within reach.":ze>=50?We="Halfway there! Your consistency is paying off.":ze>=25?We="Great progress  real momentum building!":W.daysTracked>=7?We="Every day counts. Keep showing up!":We="Just getting started. You've got this!":We=`${W.daysTracked} days of tracking. Keep it going!`;const Je=120,ct=7,ft=(Je-ct)/2,nn=2*Math.PI*ft,Cn=me?nn*(1-Math.min(W.pct,1)):nn,pn=[25,50,75,100],On=ae?"#34c759":"#007aff",Ra=ae?"#30d158":"#5856d6";return o.jsxs("div",{className:"wc-card",style:{"--wc-accent":On,"--wc-accent-end":Ra},children:[o.jsx("div",{className:"wc-hero",children:me?o.jsxs("div",{className:"wc-ring-wrap",children:[o.jsxs("svg",{width:Je,height:Je,viewBox:`0 0 ${Je} ${Je}`,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"wc-grad",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:On}),o.jsx("stop",{offset:"100%",stopColor:Ra})]})}),o.jsx("circle",{cx:Je/2,cy:Je/2,r:ft,fill:"none",stroke:"rgba(0,0,0,0.05)",strokeWidth:ct}),o.jsx("circle",{cx:Je/2,cy:Je/2,r:ft,fill:"none",stroke:"url(#wc-grad)",strokeWidth:ct,strokeDasharray:nn,strokeDashoffset:Cn,strokeLinecap:"round",transform:`rotate(-90 ${Je/2} ${Je/2})`,className:"wc-ring-anim"})]}),o.jsxs("div",{className:"wc-ring-center",children:[o.jsxs("span",{className:"wc-delta",children:[Ge,Ce]}),o.jsx("span",{className:"wc-delta-unit",children:"kg"})]})]}):o.jsxs("div",{className:"wc-num-only",children:[o.jsxs("span",{className:"wc-delta",children:[Ge,Ce]}),o.jsx("span",{className:"wc-delta-unit",children:"kg estimated change"})]})}),me&&o.jsxs("div",{className:"wc-milestones",children:[o.jsx("div",{className:"wc-milestone-track",children:o.jsx("div",{className:"wc-milestone-fill",style:{width:`${Math.min(ze,100)}%`}})}),o.jsx("div",{className:"wc-milestone-labels",children:pn.map(ss=>o.jsxs("div",{className:`wc-milestone${ze>=ss?" wc-milestone--reached":""}`,children:[o.jsx("div",{className:"wc-milestone-dot"}),o.jsxs("span",{className:"wc-milestone-text",children:[ss,"%"]})]},ss))})]}),o.jsx("p",{className:"wc-message",children:We}),o.jsxs("div",{className:"wc-stats",children:[o.jsxs("div",{className:"wc-stat",children:[o.jsx("span",{className:"wc-stat-num",children:W.daysTracked}),o.jsx("span",{className:"wc-stat-label",children:"days tracked"})]}),o.jsx("div",{className:"wc-stat-sep"}),me&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"wc-stat",children:[o.jsxs("span",{className:"wc-stat-num",children:[ze,"%"]}),o.jsx("span",{className:"wc-stat-label",children:"of goal"})]}),o.jsx("div",{className:"wc-stat-sep"}),o.jsxs("div",{className:"wc-stat",children:[o.jsx("span",{className:"wc-stat-num",children:W.goalKg}),o.jsxs("span",{className:"wc-stat-label",children:["kg ",ae?"to lose":"to gain"]})]})]})]}),o.jsxs("span",{className:"wc-footnote",children:["Estimated from food log  since ",at]})]})})(),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:"Targets"}),!ue&&o.jsxs("button",{type:"button",className:"edit-btn",onClick:as,children:[o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),o.jsx("path",{d:"m15 5 4 4"})]}),"Edit"]})]}),ue?o.jsxs("form",{onSubmit:Gl,className:"targets-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-weight-loss",children:"Weight loss goal (kg)"}),o.jsx("input",{id:"settings-weight-loss",type:"number",inputMode:"decimal",value:L,onChange:ae=>H(ae.target.value),step:"0.5"}),ke.weightLossTarget&&o.jsx("span",{className:"form-error",children:ke.weightLossTarget})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("div",{className:"form-group-header",children:[o.jsx("label",{htmlFor:"settings-kcal",children:"Calorie target (cal)"}),o.jsxs("span",{className:"form-annotation",children:["Maintenance: ",or]})]}),o.jsx("input",{id:"settings-kcal",type:"number",inputMode:"numeric",value:te,onChange:ae=>ne(ae.target.value),placeholder:"e.g. 1500"}),ke.kcal&&o.jsx("span",{className:"form-error",children:ke.kcal})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-protein",children:"Protein target (g / day)"}),o.jsx("input",{id:"settings-protein",type:"number",inputMode:"numeric",value:C,onChange:ae=>I(ae.target.value),placeholder:"e.g. 120"}),ke.protein&&o.jsx("span",{className:"form-error",children:ke.protein})]}),o.jsxs("div",{className:"cycling-toggle-row",children:[o.jsx("span",{className:"cycling-toggle-label",children:"Calorie cycling"}),o.jsxs("div",{className:"cycling-toggle-pills",children:[o.jsx("button",{type:"button",className:`cycling-pill${le?"":" cycling-pill--active"}`,onClick:()=>_(!1),children:"Off"}),o.jsx("button",{type:"button",className:`cycling-pill${le?" cycling-pill--active":""}`,onClick:()=>_(!0),children:"On"})]})]}),le&&o.jsxs("div",{className:"cycling-fields",children:[o.jsxs("div",{className:"cycling-day-group",children:[o.jsx("span",{className:"cycling-day-label",children:"Training day"}),o.jsxs("div",{className:"cycling-day-inputs",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-training-kcal",children:"Calories"}),o.jsx("input",{id:"settings-training-kcal",type:"number",inputMode:"numeric",value:$,onChange:ae=>J(ae.target.value),placeholder:"e.g. 2500"}),ke.trainingKcal&&o.jsx("span",{className:"form-error",children:ke.trainingKcal})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-training-protein",children:"Protein (g)"}),o.jsx("input",{id:"settings-training-protein",type:"number",inputMode:"numeric",value:Q,onChange:ae=>ye(ae.target.value),placeholder:"e.g. 180"}),ke.trainingProtein&&o.jsx("span",{className:"form-error",children:ke.trainingProtein})]})]})]}),o.jsxs("div",{className:"cycling-day-group",children:[o.jsx("span",{className:"cycling-day-label",children:"Rest day"}),o.jsxs("div",{className:"cycling-day-inputs",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-rest-kcal",children:"Calories"}),o.jsx("input",{id:"settings-rest-kcal",type:"number",inputMode:"numeric",value:xe,onChange:ae=>de(ae.target.value),placeholder:"e.g. 1800"}),ke.restKcal&&o.jsx("span",{className:"form-error",children:ke.restKcal})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-rest-protein",children:"Protein (g)"}),o.jsx("input",{id:"settings-rest-protein",type:"number",inputMode:"numeric",value:Y,onChange:ae=>je(ae.target.value),placeholder:"e.g. 120"}),ke.restProtein&&o.jsx("span",{className:"form-error",children:ke.restProtein})]})]})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"settings-water",children:"Water target (L / day)"}),o.jsx("input",{id:"settings-water",type:"number",inputMode:"decimal",step:"0.1",value:ee,onChange:ae=>ge(ae.target.value),placeholder:"e.g. 2.5"}),ke.water&&o.jsx("span",{className:"form-error",children:ke.water})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"submit",className:"btn-primary settings-save-btn",children:"Save"}),o.jsx("button",{type:"button",className:"btn-cancel",onClick:Kl,children:"Cancel"})]})]}):o.jsxs("div",{className:"targets-display",children:[o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(Sl,{type:"weight"})}),o.jsx("span",{className:"target-label",children:"Weight loss goal"})]}),o.jsxs("span",{className:"target-value",children:[f.weightLossTarget||5," kg"]})]}),o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(Sl,{type:"calories"})}),o.jsxs("div",{className:"target-label-group",children:[o.jsx("span",{className:"target-label",children:"Calorie target"}),o.jsxs("span",{className:"target-sub",children:["Maintenance: ",or," cal"]})]})]}),o.jsxs("span",{className:"target-value",children:[f.kcal," cal"]})]}),o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(Sl,{type:"protein"})}),o.jsx("span",{className:"target-label",children:"Protein target"})]}),o.jsxs("span",{className:"target-value",children:[f.protein," g / day"]})]}),o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsx(Sl,{type:"water"})}),o.jsx("span",{className:"target-label",children:"Water target"})]}),o.jsxs("span",{className:"target-value",children:[f.waterTargetLiters||2.5," L / day"]})]}),l.enabled&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"target-divider"}),o.jsxs("div",{className:"target-row",children:[o.jsxs("div",{className:"target-row-left",children:[o.jsx("span",{className:"target-icon",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M4 12h8"}),o.jsx("path",{d:"M4 18V6"}),o.jsx("path",{d:"M12 18V6"}),o.jsx("path",{d:"M20.5 18a2.5 2.5 0 0 0 0-5H16v5h4.5z"}),o.jsx("path",{d:"M20.5 6a2.5 2.5 0 0 1 0 5H16V6h4.5z"})]})}),o.jsx("span",{className:"target-label",children:"Calorie cycling"})]}),o.jsx("span",{className:"target-value cycling-on-badge",children:"On"})]}),o.jsxs("div",{className:"cycling-display",children:[o.jsxs("div",{className:"cycling-display-row",children:[o.jsx("span",{className:"cycling-display-label",children:"Training day"}),o.jsxs("span",{className:"cycling-display-value",children:[l.trainingKcal," cal  ",l.trainingProtein,"g"]})]}),o.jsxs("div",{className:"cycling-display-row",children:[o.jsx("span",{className:"cycling-display-label",children:"Rest day"}),o.jsxs("span",{className:"cycling-display-value",children:[l.restKcal," cal  ",l.restProtein,"g"]})]})]})]})]}),Mt&&o.jsx("p",{className:"settings-message",children:"Saved!"})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h2",{children:"Data"}),o.jsxs("div",{className:"historical-cards",children:[o.jsxs("button",{className:`historical-card${ie?" historical-card--active":""}`,onClick:()=>{Me(!ie),qe(!1)},children:[o.jsx("span",{className:"historical-card-icon historical-card-icon--import",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),o.jsx("span",{className:"historical-card-title",children:"Import Logs"}),o.jsx("span",{className:"historical-card-desc",children:"Paste day-by-day data"})]}),o.jsxs("button",{className:`historical-card${Ee?" historical-card--active":""}`,onClick:Yl,children:[o.jsx("span",{className:"historical-card-icon historical-card-icon--export",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"17 8 12 3 7 8"}),o.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),o.jsx("span",{className:"historical-card-title",children:"Export Logs"}),o.jsx("span",{className:"historical-card-desc",children:"Copy your daily totals"})]})]}),ie&&o.jsxs("div",{className:"historical-import",children:[o.jsxs("p",{className:"historical-hint",children:["Paste your data below  one line per day.",o.jsx("br",{}),"Format: ",o.jsx("strong",{children:"date, calories, protein"})]}),o.jsxs("p",{className:"historical-example",children:["2025-01-20, 1500, 120",o.jsx("br",{}),"2025-01-21, 1800, 95",o.jsx("br",{}),"Jan 22 2025, 1650, 110"]}),o.jsx("textarea",{className:"historical-textarea",rows:6,value:we,onChange:ae=>Ae(ae.target.value),placeholder:`2025-01-20, 1500, 120
2025-01-21, 1800, 95`}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn-primary settings-save-btn",onClick:Lt,disabled:!we.trim(),children:"Import"}),o.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>{Me(!1),et("")},children:"Cancel"})]}),Ue&&o.jsx("p",{className:"settings-message",children:Ue})]}),Ee&&o.jsxs("div",{className:"historical-import",children:[o.jsxs("p",{className:"historical-hint",children:["Your daily totals  ",o.jsx("strong",{children:"date, calories, protein"})]}),o.jsx("textarea",{className:"historical-textarea",rows:6,value:Bt,readOnly:!0}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"btn-primary settings-save-btn",onClick:Vl,children:"Copy to clipboard"}),o.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>{qe(!1),Ca("")},children:"Close"})]}),gn&&o.jsx("p",{className:"settings-message",children:gn})]}),o.jsxs("div",{className:"settings-actions",children:[o.jsx("button",{type:"button",className:"btn-secondary",onClick:Oa,children:"Export (JSON)"}),o.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>v.current?.click(),children:"Import (JSON)"}),o.jsx("input",{ref:v,type:"file",accept:".json",onChange:Dt,style:{display:"none"}}),o.jsx("button",{type:"button",className:"btn-secondary btn-danger-outline",onClick:()=>An(!0),children:"Clear all data"})]}),ea&&o.jsx("p",{className:"settings-message",children:ea})]}),o.jsx("div",{className:"settings-section",children:o.jsx("button",{type:"button",className:"btn-secondary btn-danger-outline",style:{width:"100%"},onClick:r,children:"Sign Out"})}),o.jsx("div",{className:"settings-section settings-about",children:o.jsx("p",{children:"Irada v1.3  Data synced to cloud."})}),ot&&o.jsxs(Hg,{title:"Clear All Data",onClose:()=>An(!1),children:[o.jsx("p",{style:{marginBottom:16},children:"This will permanently delete all your entries and targets. This cannot be undone."}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-danger)",padding:"10px"},onClick:jn,children:"Clear Everything"}),o.jsx("button",{className:"btn-primary",style:{flex:1,background:"var(--color-text-secondary)",padding:"10px"},onClick:()=>An(!1),children:"Cancel"})]})]})]})}function jy(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),o.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})}function Sy(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),o.jsx("path",{d:"M7 2v20"}),o.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]})}function ky(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 10.5V21a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V10.5"}),o.jsx("path",{d:"m2 9 10-7 10 7"}),o.jsx("path",{d:"M12 14.5c-1.5 0-2.5 1-2.5 2.5s1 2.5 2.5 2.5 2.5-1 2.5-2.5-1-2.5-2.5-2.5z"})]})}function Ey(){return o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"8",r:"4"}),o.jsx("path",{d:"M20 21a8 8 0 1 0-16 0"})]})}const Ty=[{view:Nn.DASHBOARD,label:"Dashboard",icon:o.jsx(jy,{})},{view:Nn.DAILY_LOG,label:"Daily Log",icon:o.jsx(Sy,{})},{view:Nn.KITCHEN,label:"Kitchen",icon:o.jsx(ky,{})},{view:Nn.PROFILE,label:"Profile",icon:o.jsx(Ey,{})}];function Ny(){const{state:s,dispatch:a}=zt(),{currentView:r}=s;return o.jsx("div",{className:"navbar-wrapper",children:o.jsx("nav",{className:"navbar",children:Ty.map(l=>o.jsxs("button",{className:`navbar-tab ${r===l.view?"active":""}`,onClick:()=>a({type:"SET_VIEW",payload:l.view}),children:[o.jsx("span",{className:"navbar-icon",children:l.icon}),o.jsx("span",{className:"navbar-label",children:l.label})]},l.view))})})}function Ay(){return o.jsx("div",{className:"goal-bar goal-bar--compact",children:o.jsx("span",{className:"goal-bar-brand",children:"Irada"})})}function Cy(){const{user:s,loading:a}=Bl(),{state:r,loading:l}=zt();if(a||l)return o.jsx("div",{className:"app-loading",children:o.jsx("div",{className:"app-loading-spinner"})});if(!s)return o.jsx(Cv,{});if(!r.targets.onboardingComplete)return o.jsx(ay,{});const d=()=>{switch(r.currentView){case Nn.DASHBOARD:return o.jsx(Fm,{});case Nn.DAILY_LOG:return o.jsx(fy,{});case Nn.KITCHEN:return o.jsx(yy,{});case Nn.PROFILE:return o.jsx(wy,{});default:return o.jsx(Fm,{})}};return o.jsxs("div",{className:"app-shell",children:[o.jsx("header",{className:"app-header",children:o.jsx(Ay,{})}),o.jsx("main",{className:"app-main",children:d()}),o.jsx(Ny,{})]})}function ql(s,a){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&a.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(s);d<l.length;d++)a.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(s,l[d])&&(r[l[d]]=s[l[d]]);return r}function Oy(s,a,r,l){function d(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function g(b){try{p(l.next(b))}catch(w){f(w)}}function v(b){try{p(l.throw(b))}catch(w){f(w)}}function p(b){b.done?h(b.value):d(b.value).then(g,v)}p((l=l.apply(s,a||[])).next())})}const Ry=s=>s?(...a)=>s(...a):(...a)=>fetch(...a);class Ku extends Error{constructor(a,r="FunctionsError",l){super(a),this.name=r,this.context=l}}class My extends Ku{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class rg extends Ku{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class lg extends Ku{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var wu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(wu||(wu={}));class Dy{constructor(a,{headers:r={},customFetch:l,region:d=wu.Any}={}){this.url=a,this.headers=r,this.region=d,this.fetch=Ry(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return Oy(this,arguments,void 0,function*(r,l={}){var d;let h,f;try{const{headers:g,method:v,body:p,signal:b,timeout:w}=l;let k={},{region:S}=l;S||(S=this.region);const j=new URL(`${this.url}/${r}`);S&&S!=="any"&&(k["x-region"]=S,j.searchParams.set("forceFunctionRegion",S));let A;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(k["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(k["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let T=b;w&&(f=new AbortController,h=setTimeout(()=>f.abort(),w),b?(T=f.signal,b.addEventListener("abort",()=>f.abort())):T=f.signal);const q=yield this.fetch(j.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),g),body:A,signal:T}).catch(ce=>{throw new My(ce)}),O=q.headers.get("x-relay-error");if(O&&O==="true")throw new rg(q);if(!q.ok)throw new lg(q);let B=((d=q.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),X;return B==="application/json"?X=yield q.json():B==="application/octet-stream"||B==="application/pdf"?X=yield q.blob():B==="text/event-stream"?X=q:B==="multipart/form-data"?X=yield q.formData():X=yield q.text(),{data:X,error:null,response:q}}catch(g){return{data:null,error:g,response:g instanceof lg||g instanceof rg?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var Ly=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Uy=class{constructor(s){var a,r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(l=s.urlLengthLimit)!==null&&l!==void 0?l:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,g=null,v=null,p=h.status,b=h.statusText;if(h.ok){var w,k;if(r.method!=="HEAD"){var S;const q=await h.text();q===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((S=r.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?g=q:g=JSON.parse(q))}const A=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),T=(k=h.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");A&&T&&T.length>1&&(v=parseInt(T[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,p=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var j;const A=await h.text();try{f=JSON.parse(A),Array.isArray(f)&&h.status===404&&(g=[],f=null,p=200,b="OK")}catch{h.status===404&&A===""?(p=204,b="No Content"):f={message:A}}if(f&&r.isMaybeSingle&&(!(f==null||(j=f.details)===null||j===void 0)&&j.includes("0 rows"))&&(f=null,p=200,b="OK"),f&&r.shouldThrowOnError)throw new Ly(f)}return{error:f,data:g,count:v,status:p,statusText:b}});return this.shouldThrowOnError||(d=d.catch(h=>{var f;let g="",v="",p="";const b=h?.cause;if(b){var w,k,S,j;const q=(w=b?.message)!==null&&w!==void 0?w:"",O=(k=b?.code)!==null&&k!==void 0?k:"";g=`${(S=h?.name)!==null&&S!==void 0?S:"FetchError"}: ${h?.message}`,g+=`

Caused by: ${(j=b?.name)!==null&&j!==void 0?j:"Error"}: ${q}`,O&&(g+=` (${O})`),b?.stack&&(g+=`
${b.stack}`)}else{var A;g=(A=h?.stack)!==null&&A!==void 0?A:""}const T=this.url.toString().length;return h?.name==="AbortError"||h?.code==="ABORT_ERR"?(p="",v="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(v+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(b?.name==="HeadersOverflowError"||b?.code==="UND_ERR_HEADERS_OVERFLOW")&&(p="",v="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(v+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:g,hint:v,code:p},data:null,count:null,status:0,statusText:""}})),d.then(s,a)}returns(){return this}overrideTypes(){return this}},zy=class extends Uy{select(s){let a=!1;const r=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:r,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:r=a}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:r=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const g=[s?"analyze":null,a?"verbose":null,r?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const og=new RegExp("[,()]");var Js=class extends zy{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const r=Array.from(new Set(a)).map(l=>typeof l=="string"&&og.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,a){const r=Array.from(new Set(a)).map(l=>typeof l=="string"&&og.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:r,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${d}fts${h}.${a}`),this}match(s){return Object.entries(s).forEach(([a,r])=>{this.url.searchParams.append(a,`eq.${r}`)}),this}not(s,a,r){return this.url.searchParams.append(s,`not.${a}.${r}`),this}or(s,{foreignTable:a,referencedTable:r=a}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,a,r){return this.url.searchParams.append(s,`${a}.${r}`),this}},By=class{constructor(s,{headers:a={},schema:r,fetch:l,urlLengthLimit:d=8e3}){this.url=s,this.headers=new Headers(a),this.schema=r,this.fetch=l,this.urlLengthLimit=d}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,a){const{head:r=!1,count:l}=a??{},d=r?"HEAD":"GET";let h=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join(""),{url:g,headers:v}=this.cloneRequestState();return g.searchParams.set("select",f),l&&v.append("Prefer",`count=${l}`),new Js({method:d,url:g,headers:v,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:a,defaultToNull:r=!0}={}){var l;const d="POST",{url:h,headers:f}=this.cloneRequestState();if(a&&f.append("Prefer",`count=${a}`),r||f.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((v,p)=>v.concat(Object.keys(p)),[]);if(g.length>0){const v=[...new Set(g)].map(p=>`"${p}"`);h.searchParams.set("columns",v.join(","))}}return new Js({method:d,url:h,headers:f,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:a,ignoreDuplicates:r=!1,count:l,defaultToNull:d=!0}={}){var h;const f="POST",{url:g,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),a!==void 0&&g.searchParams.set("on_conflict",a),l&&v.append("Prefer",`count=${l}`),d||v.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(p.length>0){const b=[...new Set(p)].map(w=>`"${w}"`);g.searchParams.set("columns",b.join(","))}}return new Js({method:f,url:g,headers:v,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:a}={}){var r;const l="PATCH",{url:d,headers:h}=this.cloneRequestState();return a&&h.append("Prefer",`count=${a}`),new Js({method:l,url:d,headers:h,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var a;const r="DELETE",{url:l,headers:d}=this.cloneRequestState();return s&&d.append("Prefer",`count=${s}`),new Js({method:r,url:l,headers:d,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};function Fi(s){"@babel/helpers - typeof";return Fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Fi(s)}function qy(s,a){if(Fi(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,a);if(Fi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function Hy(s){var a=qy(s,"string");return Fi(a)=="symbol"?a:a+""}function $y(s,a,r){return(a=Hy(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function cg(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function kl(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?cg(Object(r),!0).forEach(function(l){$y(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):cg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}var Py=class Kg{constructor(a,{headers:r={},schema:l,fetch:d,timeout:h,urlLengthLimit:f=8e3}={}){this.url=a,this.headers=new Headers(r),this.schemaName=l,this.urlLengthLimit=f;const g=d??globalThis.fetch;h!==void 0&&h>0?this.fetch=(v,p)=>{const b=new AbortController,w=setTimeout(()=>b.abort(),h),k=p?.signal;if(k){if(k.aborted)return clearTimeout(w),g(v,p);const S=()=>{clearTimeout(w),b.abort()};return k.addEventListener("abort",S,{once:!0}),g(v,kl(kl({},p),{},{signal:b.signal})).finally(()=>{clearTimeout(w),k.removeEventListener("abort",S)})}return g(v,kl(kl({},p),{},{signal:b.signal})).finally(()=>clearTimeout(w))}:this.fetch=g}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new By(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(a){return new Kg(this.url,{headers:this.headers,schema:a,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(a,r={},{head:l=!1,get:d=!1,count:h}={}){var f;let g;const v=new URL(`${this.url}/rpc/${a}`);let p;const b=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(b)),w=l&&Object.values(r).some(b);w?(g="POST",p=r):l||d?(g=l?"HEAD":"GET",Object.entries(r).filter(([S,j])=>j!==void 0).map(([S,j])=>[S,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([S,j])=>{v.searchParams.append(S,j)})):(g="POST",p=r);const k=new Headers(this.headers);return w?k.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&k.set("Prefer",`count=${h}`),new Js({method:g,url:v,headers:k,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class Ky{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const d=l.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const l=this.getWebSocketConstructor();return new l(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const Gy="2.97.0",Yy=`realtime-js/${Gy}`,Vy="1.0.0",Gg="2.0.0",ug=Gg,ju=1e4,Iy=1e3,Xy=100;var Ea;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ea||(Ea={}));var _t;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(_t||(_t={}));var wn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(wn||(wn={}));var Su;(function(s){s.websocket="websocket"})(Su||(Su={}));var es;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(es||(es={}));class Qy{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,r){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(a));let l=[a.join_ref,a.ref,a.topic,a.event,a.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(a){var r;return this._isArrayBuffer((r=a.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var r,l;const d=(l=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(a){var r,l;const d=(l=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,r,l){var d,h;const f=a.topic,g=(d=a.ref)!==null&&d!==void 0?d:"",v=(h=a.join_ref)!==null&&h!==void 0?h:"",p=a.payload.event,b=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+g.length+f.length+p.length+w.length,S=new ArrayBuffer(this.HEADER_LENGTH+k);let j=new DataView(S),A=0;j.setUint8(A++,this.KINDS.userBroadcastPush),j.setUint8(A++,v.length),j.setUint8(A++,g.length),j.setUint8(A++,f.length),j.setUint8(A++,p.length),j.setUint8(A++,w.length),j.setUint8(A++,r),Array.from(v,q=>j.setUint8(A++,q.charCodeAt(0))),Array.from(g,q=>j.setUint8(A++,q.charCodeAt(0))),Array.from(f,q=>j.setUint8(A++,q.charCodeAt(0))),Array.from(p,q=>j.setUint8(A++,q.charCodeAt(0))),Array.from(w,q=>j.setUint8(A++,q.charCodeAt(0)));var T=new Uint8Array(S.byteLength+l.byteLength);return T.set(new Uint8Array(S),0),T.set(new Uint8Array(l),S.byteLength),T.buffer}decode(a,r){if(this._isArrayBuffer(a)){let l=this._binaryDecode(a);return r(l)}if(typeof a=="string"){const l=JSON.parse(a),[d,h,f,g,v]=l;return r({join_ref:d,ref:h,topic:f,event:g,payload:v})}return r({})}_binaryDecode(a){const r=new DataView(a),l=r.getUint8(0),d=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,r,d)}_decodeUserBroadcast(a,r,l){const d=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let v=this.HEADER_LENGTH+4;const p=l.decode(a.slice(v,v+d));v=v+d;const b=l.decode(a.slice(v,v+h));v=v+h;const w=l.decode(a.slice(v,v+f));v=v+f;const k=a.slice(v,a.byteLength),S=g===this.JSON_ENCODING?JSON.parse(l.decode(k)):k,j={type:this.BROADCAST_EVENT,event:b,payload:S};return f>0&&(j.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(a){var r;return a instanceof ArrayBuffer||((r=a?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(a,r){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([l])=>r.includes(l)))}}class Yg{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fe;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Fe||(Fe={}));const dg=(s,a,r={})=>{var l;const d=(l=r.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((h,f)=>(h[f]=Jy(f,s,a,d),h),{}):{}},Jy=(s,a,r,l)=>{const d=a.find(g=>g.name===s),h=d?.type,f=r[s];return h&&!l.includes(h)?Vg(h,f):ku(f)},Vg=(s,a)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return e1(a,r)}switch(s){case Fe.bool:return Zy(a);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return Wy(a);case Fe.json:case Fe.jsonb:return Fy(a);case Fe.timestamp:return t1(a);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return ku(a);default:return ku(a)}},ku=s=>s,Zy=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Wy=s=>{if(typeof s=="string"){const a=parseFloat(s);if(!Number.isNaN(a))return a}return s},Fy=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},e1=(s,a)=>{if(typeof s!="string")return s;const r=s.length-1,l=s[r];if(s[0]==="{"&&l==="}"){let h;const f=s.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>Vg(a,g))}return s},t1=s=>typeof s=="string"?s.replace(" ","T"):s,Ig=s=>{const a=new URL(s);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class uu{constructor(a,r,l={},d=ju){this.channel=a,this.event=r,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var l;return this._hasReceived(a)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var hg;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(hg||(hg={}));class Ji{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ji.syncState(this.state,d,h,f),this.pendingDiffs.forEach(v=>{this.state=Ji.syncDiff(this.state,v,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Ji.syncDiff(this.state,d,h,f),g())}),this.onJoin((d,h,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:f})}),this.onLeave((d,h,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,l,d){const h=this.cloneDeep(a),f=this.transformState(r),g={},v={};return this.map(h,(p,b)=>{f[p]||(v[p]=b)}),this.map(f,(p,b)=>{const w=h[p];if(w){const k=b.map(T=>T.presence_ref),S=w.map(T=>T.presence_ref),j=b.filter(T=>S.indexOf(T.presence_ref)<0),A=w.filter(T=>k.indexOf(T.presence_ref)<0);j.length>0&&(g[p]=j),A.length>0&&(v[p]=A)}else g[p]=b}),this.syncDiff(h,{joins:g,leaves:v},l,d)}static syncDiff(a,r,l,d){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(h,(g,v)=>{var p;const b=(p=a[g])!==null&&p!==void 0?p:[];if(a[g]=this.cloneDeep(v),b.length>0){const w=a[g].map(S=>S.presence_ref),k=b.filter(S=>w.indexOf(S.presence_ref)<0);a[g].unshift(...k)}l(g,b,v)}),this.map(f,(g,v)=>{let p=a[g];if(!p)return;const b=v.map(w=>w.presence_ref);p=p.filter(w=>b.indexOf(w.presence_ref)<0),a[g]=p,d(g,p,v),p.length===0&&delete a[g]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(l=>r(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,l)=>{const d=a[l];return"metas"in d?r[l]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[l]=d,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fg;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(fg||(fg={}));var Zi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Zi||(Zi={}));var Zn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Zn||(Zn={}));class Fs{constructor(a,r={config:{}},l){var d,h;if(this.topic=a,this.params=r,this.socket=l,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new uu(this,wn.join,this.params,this.timeout),this.rejoinTimer=new Yg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wn.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Ji(this),this.broadcastEndpointURL=Ig(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,r=this.timeout){var l,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:f,presence:g,private:v}}=this.params,p=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(S=>S.filter))!==null&&d!==void 0?d:[],b=!!this.bindings[Zi.PRESENCE]&&this.bindings[Zi.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,w={},k={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:v};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(S=>a?.(Zn.CHANNEL_ERROR,S)),this._onClose(()=>a?.(Zn.CLOSED)),this.updateJoinPayload(Object.assign({config:k},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){a?.(Zn.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,T=(j=A?.length)!==null&&j!==void 0?j:0,q=[];for(let O=0;O<T;O++){const B=A[O],{filter:{event:X,schema:ce,table:F,filter:W}}=B,ue=S&&S[O];if(ue&&ue.event===X&&Fs.isFilterValueEqual(ue.schema,ce)&&Fs.isFilterValueEqual(ue.table,F)&&Fs.isFilterValueEqual(ue.filter,W))q.push(Object.assign(Object.assign({},B),{id:ue.id}));else{this.unsubscribe(),this.state=_t.errored,a?.(Zn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,a&&a(Zn.SUBSCRIBED);return}}).receive("error",S=>{this.state=_t.errored,a?.(Zn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{a?.(Zn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,l){return this.state===_t.joined&&a===Zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,r,l)}async httpSend(a,r,l={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let v=g.statusText;try{const p=await g.json();v=p.error||p.message||v}catch{}return Promise.reject(new Error(v))}async send(a,r={}){var l,d;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=a,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,v;const p=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((v=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||v===void 0)&&v.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=_t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new uu(this,wn.leave,{},a),l.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_t.closed,this.bindings={}}async _fetchWithTimeout(a,r,l){const d=new AbortController,h=setTimeout(()=>d.abort(),l),f=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),f}_push(a,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new uu(this,a,r,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>Xy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,l){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,l){var d,h;const f=a.toLocaleLowerCase(),{close:g,error:v,leave:p,join:b}=wn;if(l&&[g,v,p,b].indexOf(f)>=0&&l!==this._joinRef())return;let k=this._onMessage(f,r,l);if(r&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(S=>{var j,A,T;return((j=S.filter)===null||j===void 0?void 0:j.event)==="*"||((T=(A=S.filter)===null||A===void 0?void 0:A.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===f}).map(S=>S.callback(k,l)):(h=this.bindings[f])===null||h===void 0||h.filter(S=>{var j,A,T,q,O,B;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in S){const X=S.id,ce=(j=S.filter)===null||j===void 0?void 0:j.event;return X&&((A=r.ids)===null||A===void 0?void 0:A.includes(X))&&(ce==="*"||ce?.toLocaleLowerCase()===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const X=(O=(q=S?.filter)===null||q===void 0?void 0:q.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return X==="*"||X===((B=r?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===f}).map(S=>{if(typeof k=="object"&&"ids"in k){const j=k.data,{schema:A,table:T,commit_timestamp:q,type:O,errors:B}=j;k=Object.assign(Object.assign({},{schema:A,table:T,commit_timestamp:q,eventType:O,new:{},old:{},errors:B}),this._getPayloadRecords(j))}S.callback(k,l)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,l){const d=a.toLocaleLowerCase(),h={type:d,filter:r,callback:l};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(a,r){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===l&&Fs.isEqual(d.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const l in a)if(a[l]!==r[l])return!1;return!0}static isFilterValueEqual(a,r){return(a??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(wn.close,{},a)}_onError(a){this._on(wn.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=dg(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=dg(a.columns,a.old_record)),r}}const du=()=>{},El={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},n1=[1e3,2e3,5e3,1e4],a1=1e4,s1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class i1{constructor(a,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ju,this.transport=null,this.heartbeatIntervalMs=El.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=du,this.ref=0,this.reconnectTimer=null,this.vsn=ug,this.logger=du,this.conn=null,this.sendBuffer=[],this.serializer=new Qy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${Su.websocket}`,this.httpEndpoint=Ig(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ky.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,l){this.logger(a,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ea.connecting:return es.Connecting;case Ea.open:return es.Open;case Ea.closing:return es.Closing;default:return es.Closed}}isConnected(){return this.connectionState()===es.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const l=`realtime:${a}`,d=this.getChannels().find(h=>h.topic===l);if(d)return d;{const h=new Fs(`realtime:${a}`,r,this);return this.channels.push(h),h}}push(a){const{topic:r,event:l,payload:d,ref:h}=a,f=()=>{this.encode(a,g=>{var v;(v=this.conn)===null||v===void 0||v.send(g)})};this.log("push",`${r} ${l} (${h})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Iy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},El.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",p)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:d,payload:h,ref:f}=r,g=f?`(${f})`:"",v=h.status||"";this.log("receive",`${v} ${l} ${d} ${g}`.trim(),h),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(d,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===Ea.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ea.open||this.conn.readyState===Ea.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(a=>a._trigger(wn.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const l=a.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${a}${l}${d}`}_workerObjectUrl(a){let r;if(a)r=a;else{const l=new Blob([s1],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r,l=!1;if(a)r=a,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const h={access_token:r,version:Yy};r&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(wn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(r)}catch(d){this.log("error",`error in ${a} callback`,d)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Yg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},El.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,l,d,h,f,g,v,p,b,w,k,S;switch(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=a?.timeout)!==null&&l!==void 0?l:ju,this.heartbeatIntervalMs=(d=a?.heartbeatIntervalMs)!==null&&d!==void 0?d:El.HEARTBEAT_INTERVAL,this.worker=(h=a?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=a?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=a?.heartbeatCallback)!==null&&g!==void 0?g:du,this.vsn=(v=a?.vsn)!==null&&v!==void 0?v:ug,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=a?.reconnectAfterMs)!==null&&p!==void 0?p:(j=>n1[j-1]||a1),this.vsn){case Vy:this.encode=(b=a?.encode)!==null&&b!==void 0?b:((j,A)=>A(JSON.stringify(j))),this.decode=(w=a?.decode)!==null&&w!==void 0?w:((j,A)=>A(JSON.parse(j)));break;case Gg:this.encode=(k=a?.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(S=a?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}var er=class extends Error{constructor(s,a){super(s),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&a.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function r1(s,a,r){const l=new URL(a,s);if(r)for(const[d,h]of Object.entries(r))h!==void 0&&l.searchParams.set(d,h);return l.toString()}async function l1(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function o1(s){const a=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:d,body:h,headers:f}){const g=r1(s.baseUrl,l,d),v=await l1(s.auth),p=await a(g,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...v,...f},body:h?JSON.stringify(h):void 0}),b=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),k=w&&b?JSON.parse(b):b;if(!p.ok){const S=w?k:void 0,j=S?.error;throw new er(j?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:j?.type,icebergCode:j?.code,details:S})}return{status:p.status,headers:p.headers,data:k}}}}function Tl(s){return s.join("")}var c1=class{constructor(s,a=""){this.client=s,this.prefix=a}async listNamespaces(s){const a=s?{parent:Tl(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,a){const r={namespace:s.namespace,properties:a?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Tl(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tl(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Tl(s.namespace)}`}),!0}catch(a){if(a instanceof er&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(s,a){try{return await this.createNamespace(s,a)}catch(r){if(r instanceof er&&r.status===409)return;throw r}}};function Ks(s){return s.join("")}var u1=class{constructor(s,a="",r){this.client=s,this.prefix=a,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ks(s.namespace)}/tables`})).data.identifiers}async createTable(s,a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ks(s.namespace)}/tables`,body:a,headers:r})).data.metadata}async updateTable(s,a){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ks(s.namespace)}/tables/${s.name}`,body:a});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ks(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(a?.purge??!1)}})}async loadTable(s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ks(s.namespace)}/tables/${s.name}`,headers:a})).data.metadata}async tableExists(s){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ks(s.namespace)}/tables/${s.name}`,headers:a}),!0}catch(r){if(r instanceof er&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,a){try{return await this.createTable(s,a)}catch(r){if(r instanceof er&&r.status===409)return await this.loadTable({namespace:s.namespace,name:a.name});throw r}}},d1=class{constructor(s){let a="v1";s.catalogName&&(a+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=o1({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new c1(this.client,a),this.tableOps=new u1(this.client,a,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,a){return this.namespaceOps.createNamespace(s,a)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,a){return this.tableOps.createTable(s,a)}async updateTable(s,a){return this.tableOps.updateTable(s,a)}async dropTable(s,a){await this.tableOps.dropTable(s,a)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,a){return this.namespaceOps.createNamespaceIfNotExists(s,a)}async createTableIfNotExists(s,a){return this.tableOps.createTableIfNotExists(s,a)}},Hl=class extends Error{constructor(s,a="storage",r,l){super(s),this.__isStorageError=!0,this.namespace=a,this.name=a==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=l}};function $l(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Nl=class extends Hl{constructor(s,a,r,l="storage"){super(s,l,a,r),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=a,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Xg=class extends Hl{constructor(s,a,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=a}};const h1=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),f1=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Eu=s=>{if(Array.isArray(s))return s.map(r=>Eu(r));if(typeof s=="function"||s!==Object(s))return s;const a={};return Object.entries(s).forEach(([r,l])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));a[d]=Eu(l)}),a},m1=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function tr(s){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},tr(s)}function g1(s,a){if(tr(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,a);if(tr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function p1(s){var a=g1(s,"string");return tr(a)=="symbol"?a:a+""}function v1(s,a,r){return(a=p1(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function mg(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function ve(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?mg(Object(r),!0).forEach(function(l){v1(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):mg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const gg=s=>{var a;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(a=s.error)===null||a===void 0?void 0:a.message)||JSON.stringify(s)},y1=async(s,a,r,l)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const d=s,h=d.status||500;if(typeof d.json=="function")d.json().then(f=>{const g=f?.statusCode||f?.code||h+"";a(new Nl(gg(f),h,g,l))}).catch(()=>{if(l==="vectors"){const f=h+"";a(new Nl(d.statusText||`HTTP ${h} error`,h,f,l))}else{const f=h+"";a(new Nl(d.statusText||`HTTP ${h} error`,h,f,l))}});else{const f=h+"";a(new Nl(d.statusText||`HTTP ${h} error`,h,f,l))}}else a(new Xg(gg(s),s,l))},b1=(s,a,r,l)=>{const d={method:s,headers:a?.headers||{}};return s==="GET"||s==="HEAD"||!l?ve(ve({},d),r):(f1(l)?(d.headers=ve({"Content-Type":"application/json"},a?.headers),d.body=JSON.stringify(l)):d.body=l,a?.duplex&&(d.duplex=a.duplex),ve(ve({},d),r))};async function Ii(s,a,r,l,d,h,f){return new Promise((g,v)=>{s(r,b1(a,l,d,h)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;if(f==="vectors"){const b=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!b||!b.includes("application/json"))return{}}return p.json()}).then(p=>g(p)).catch(p=>y1(p,v,l,f))})}function Qg(s="storage"){return{get:async(a,r,l,d)=>Ii(a,"GET",r,l,d,void 0,s),post:async(a,r,l,d,h)=>Ii(a,"POST",r,d,h,l,s),put:async(a,r,l,d,h)=>Ii(a,"PUT",r,d,h,l,s),head:async(a,r,l,d)=>Ii(a,"HEAD",r,ve(ve({},l),{},{noResolveJson:!0}),d,void 0,s),remove:async(a,r,l,d,h)=>Ii(a,"DELETE",r,d,h,l,s)}}const _1=Qg("storage"),{get:nr,post:xn,put:Tu,head:x1,remove:Gu}=_1,en=Qg("vectors");var ti=class{constructor(s,a={},r,l="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.fetch=h1(r),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=ve(ve({},this.headers),{},{[s]:a}),this}async handleOperation(s){var a=this;try{return{data:await s(),error:null}}catch(r){if(a.shouldThrowOnError)throw r;if($l(r))return{data:null,error:r};throw r}}},w1=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($l(a))return{data:null,error:a};throw a}}};let Jg;Jg=Symbol.toStringTag;var j1=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[Jg]="BlobDownloadBuilder",this.promise=null}asStream(){return new w1(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($l(a))return{data:null,error:a};throw a}}};const S1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var k1=class extends ti{constructor(s,a={},r,l){super(s,a,l,"storage"),this.bucketId=r}async uploadOrUpdate(s,a,r,l){var d=this;return d.handleOperation(async()=>{let h;const f=ve(ve({},pg),l);let g=ve(ve({},d.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const v=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),v&&h.append("metadata",d.encodeMetadata(v)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),v&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(v))):(h=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,v&&(g["x-metadata"]=d.toBase64(d.encodeMetadata(v))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),l?.headers&&(g=ve(ve({},g),l.headers));const p=d._removeEmptyFolders(a),b=d._getFinalPath(p),w=await(s=="PUT"?Tu:xn)(d.fetch,`${d.url}/object/${b}`,h,ve({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{path:p,id:w.Id,fullPath:w.Key}})}async upload(s,a,r){return this.uploadOrUpdate("POST",s,a,r)}async uploadToSignedUrl(s,a,r,l){var d=this;const h=d._removeEmptyFolders(s),f=d._getFinalPath(h),g=new URL(d.url+`/object/upload/sign/${f}`);return g.searchParams.set("token",a),d.handleOperation(async()=>{let v;const p=ve({upsert:pg.upsert},l),b=ve(ve({},d.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(v=new FormData,v.append("cacheControl",p.cacheControl),v.append("",r)):typeof FormData<"u"&&r instanceof FormData?(v=r,v.append("cacheControl",p.cacheControl)):(v=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{path:h,fullPath:(await Tu(d.fetch,g.toString(),v,{headers:b})).Key}})}async createSignedUploadUrl(s,a){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(s);const d=ve({},r.headers);a?.upsert&&(d["x-upsert"]="true");const h=await xn(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:d}),f=new URL(r.url+h.url),g=f.searchParams.get("token");if(!g)throw new Hl("No token returned by API");return{signedUrl:f.toString(),path:s,token:g}})}async update(s,a,r){return this.uploadOrUpdate("PUT",s,a,r)}async move(s,a,r){var l=this;return l.handleOperation(async()=>await xn(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:r?.destinationBucket},{headers:l.headers}))}async copy(s,a,r){var l=this;return l.handleOperation(async()=>({path:(await xn(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:r?.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(s,a,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(s),h=await xn(l.fetch,`${l.url}/object/sign/${d}`,ve({expiresIn:a},r?.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${l.url}${h.signedURL}${f}`)}})}async createSignedUrls(s,a,r){var l=this;return l.handleOperation(async()=>{const d=await xn(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:a,paths:s},{headers:l.headers}),h=r?.download?`&download=${r.download===!0?"":r.download}`:"";return d.map(f=>ve(ve({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${h}`):null}))})}download(s,a,r){const l=typeof a?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(a?.transform||{}),h=d?`?${d}`:"",f=this._getFinalPath(s),g=()=>nr(this.fetch,`${this.url}/${l}/${f}${h}`,{headers:this.headers,noResolveJson:!0},r);return new j1(g,this.shouldThrowOnError)}async info(s){var a=this;const r=a._getFinalPath(s);return a.handleOperation(async()=>Eu(await nr(a.fetch,`${a.url}/object/info/${r}`,{headers:a.headers})))}async exists(s){var a=this;const r=a._getFinalPath(s);try{return await x1(a.fetch,`${a.url}/object/${r}`,{headers:a.headers}),{data:!0,error:null}}catch(l){if(a.shouldThrowOnError)throw l;if($l(l)&&l instanceof Xg){const d=l.originalError;if([400,404].includes(d?.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,a){const r=this._getFinalPath(s),l=[],d=a?.download?`download=${a.download===!0?"":a.download}`:"";d!==""&&l.push(d);const h=typeof a?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(a?.transform||{});f!==""&&l.push(f);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${g}`)}}}async remove(s){var a=this;return a.handleOperation(async()=>await Gu(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:s},{headers:a.headers}))}async list(s,a,r){var l=this;return l.handleOperation(async()=>{const d=ve(ve(ve({},S1),a),{},{prefix:s||""});return await xn(l.fetch,`${l.url}/object/list/${l.bucketId}`,d,{headers:l.headers},r)})}async listV2(s,a){var r=this;return r.handleOperation(async()=>{const l=ve({},s);return await xn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},a)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}};const E1="2.97.0",lr={"X-Client-Info":`storage-js/${E1}`};var T1=class extends ti{constructor(s,a={},r,l){const d=new URL(s);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase."));const h=d.href.replace(/\/$/,""),f=ve(ve({},lr),a);super(h,f,r,"storage")}async listBuckets(s){var a=this;return a.handleOperation(async()=>{const r=a.listBucketOptionsToQueryString(s);return await nr(a.fetch,`${a.url}/bucket${r}`,{headers:a.headers})})}async getBucket(s){var a=this;return a.handleOperation(async()=>await nr(a.fetch,`${a.url}/bucket/${s}`,{headers:a.headers}))}async createBucket(s,a={public:!1}){var r=this;return r.handleOperation(async()=>await xn(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,a){var r=this;return r.handleOperation(async()=>await Tu(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var a=this;return a.handleOperation(async()=>await xn(a.fetch,`${a.url}/bucket/${s}/empty`,{},{headers:a.headers}))}async deleteBucket(s){var a=this;return a.handleOperation(async()=>await Gu(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}))}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},N1=class extends ti{constructor(s,a={},r){const l=s.replace(/\/$/,""),d=ve(ve({},lr),a);super(l,d,r,"storage")}async createBucket(s){var a=this;return a.handleOperation(async()=>await xn(a.fetch,`${a.url}/bucket`,{name:s},{headers:a.headers}))}async listBuckets(s){var a=this;return a.handleOperation(async()=>{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const l=r.toString(),d=l?`${a.url}/bucket?${l}`:`${a.url}/bucket`;return await nr(a.fetch,d,{headers:a.headers})})}async deleteBucket(s){var a=this;return a.handleOperation(async()=>await Gu(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}))}from(s){var a=this;if(!m1(s))throw new Hl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new d1({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const f=d[h];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(d,g),error:null}}catch(v){if(l)throw v;return{data:null,error:v}}}}})}},A1=class extends ti{constructor(s,a={},r){const l=s.replace(/\/$/,""),d=ve(ve({},lr),{},{"Content-Type":"application/json"},a);super(l,d,r,"vectors")}async createIndex(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/CreateIndex`,s,{headers:a.headers})||{})}async getIndex(s,a){var r=this;return r.handleOperation(async()=>await en.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:r.headers}))}async listIndexes(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/ListIndexes`,s,{headers:a.headers}))}async deleteIndex(s,a){var r=this;return r.handleOperation(async()=>await en.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:r.headers})||{})}},C1=class extends ti{constructor(s,a={},r){const l=s.replace(/\/$/,""),d=ve(ve({},lr),{},{"Content-Type":"application/json"},a);super(l,d,r,"vectors")}async putVectors(s){var a=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/PutVectors`,s,{headers:a.headers})||{})}async getVectors(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/GetVectors`,s,{headers:a.headers}))}async listVectors(s){var a=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/ListVectors`,s,{headers:a.headers}))}async queryVectors(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/QueryVectors`,s,{headers:a.headers}))}async deleteVectors(s){var a=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/DeleteVectors`,s,{headers:a.headers})||{})}},O1=class extends ti{constructor(s,a={},r){const l=s.replace(/\/$/,""),d=ve(ve({},lr),{},{"Content-Type":"application/json"},a);super(l,d,r,"vectors")}async createBucket(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{})}async getBucket(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:s},{headers:a.headers}))}async listBuckets(s={}){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/ListVectorBuckets`,s,{headers:a.headers}))}async deleteBucket(s){var a=this;return a.handleOperation(async()=>await en.post(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{})}},R1=class extends O1{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new M1(this.url,this.headers,s,this.fetch)}async createBucket(s){var a=()=>super.createBucket,r=this;return a().call(r,s)}async getBucket(s){var a=()=>super.getBucket,r=this;return a().call(r,s)}async listBuckets(s={}){var a=()=>super.listBuckets,r=this;return a().call(r,s)}async deleteBucket(s){var a=()=>super.deleteBucket,r=this;return a().call(r,s)}},M1=class extends A1{constructor(s,a,r,l){super(s,a,l),this.vectorBucketName=r}async createIndex(s){var a=()=>super.createIndex,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var a=()=>super.listIndexes,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var a=()=>super.getIndex,r=this;return a().call(r,r.vectorBucketName,s)}async deleteIndex(s){var a=()=>super.deleteIndex,r=this;return a().call(r,r.vectorBucketName,s)}index(s){return new D1(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},D1=class extends C1{constructor(s,a,r,l,d){super(s,a,d),this.vectorBucketName=r,this.indexName=l}async putVectors(s){var a=()=>super.putVectors,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var a=()=>super.getVectors,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var a=()=>super.listVectors,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var a=()=>super.queryVectors,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var a=()=>super.deleteVectors,r=this;return a().call(r,ve(ve({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},L1=class extends T1{constructor(s,a={},r,l){super(s,a,r,l)}from(s){return new k1(this.url,this.headers,s,this.fetch)}get vectors(){return new R1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new N1(this.url+"/iceberg",this.headers,this.fetch)}};const Zg="2.97.0",Zs=30*1e3,Nu=3,hu=Nu*Zs,U1="http://localhost:9999",z1="supabase.auth.token",B1={"X-Client-Info":`gotrue-js/${Zg}`},Au="X-Supabase-Api-Version",Wg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,H1=600*1e3;class ar extends Error{constructor(a,r,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function oe(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class $1 extends ar{constructor(a,r,l){super(a,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function P1(s){return oe(s)&&s.name==="AuthApiError"}class ts extends ar{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class Fn extends ar{constructor(a,r,l,d){super(a,l,d),this.name=r,this.status=l}}class Ft extends Fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fu(s){return oe(s)&&s.name==="AuthSessionMissingError"}class Gs extends Fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Al extends Fn{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Cl extends Fn{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function K1(s){return oe(s)&&s.name==="AuthImplicitGrantRedirectError"}class vg extends Fn{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class G1 extends Fn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cu extends Fn{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function mu(s){return oe(s)&&s.name==="AuthRetryableFetchError"}class yg extends Fn{constructor(a,r,l){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class Ou extends Fn{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bg=` 	
\r=`.split(""),Y1=(()=>{const s=new Array(128);for(let a=0;a<s.length;a+=1)s[a]=-1;for(let a=0;a<bg.length;a+=1)s[bg[a].charCodeAt(0)]=-2;for(let a=0;a<Ll.length;a+=1)s[Ll[a].charCodeAt(0)]=a;return s})();function _g(s,a,r){if(s!==null)for(a.queue=a.queue<<8|s,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;r(Ll[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;r(Ll[l]),a.queuedBits-=6}}function Fg(s,a,r){const l=Y1[s];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function xg(s){const a=[],r=f=>{a.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=f=>{X1(f,l,r)};for(let f=0;f<s.length;f+=1)Fg(s.charCodeAt(f),d,h);return a.join("")}function V1(s,a){if(s<=127){a(s);return}else if(s<=2047){a(192|s>>6),a(128|s&63);return}else if(s<=65535){a(224|s>>12),a(128|s>>6&63),a(128|s&63);return}else if(s<=1114111){a(240|s>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function I1(s,a){for(let r=0;r<s.length;r+=1){let l=s.charCodeAt(r);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(s.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}V1(l,a)}}function X1(s,a,r){if(a.utf8seq===0){if(s<=127){r(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=s&31;else if(a.utf8seq===3)a.codepoint=s&15;else if(a.utf8seq===4)a.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|s&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function ei(s){const a=[],r={queue:0,queuedBits:0},l=d=>{a.push(d)};for(let d=0;d<s.length;d+=1)Fg(s.charCodeAt(d),r,l);return new Uint8Array(a)}function Q1(s){const a=[];return I1(s,r=>a.push(r)),new Uint8Array(a)}function ns(s){const a=[],r={queue:0,queuedBits:0},l=d=>{a.push(d)};return s.forEach(d=>_g(d,r,l)),_g(null,r,l),a.join("")}function J1(s){return Math.round(Date.now()/1e3)+s}function Z1(){return Symbol("auth-callback")}const Ct=()=>typeof window<"u"&&typeof document<"u",Za={tested:!1,writable:!1},ep=()=>{if(!Ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Za.tested)return Za.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Za.tested=!0,Za.writable=!0}catch{Za.tested=!0,Za.writable=!1}return Za.writable};function W1(s){const a={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{a[h]=d})}catch{}return r.searchParams.forEach((l,d)=>{a[d]=l}),a}const tp=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),F1=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Ws=async(s,a,r)=>{await s.setItem(a,JSON.stringify(r))},Wa=async(s,a)=>{const r=await s.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},At=async(s,a)=>{await s.removeItem(a)};class Pl{constructor(){this.promise=new Pl.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}Pl.promiseConstructor=Promise;function Ol(s){const a=s.split(".");if(a.length!==3)throw new Ou("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!q1.test(a[l]))throw new Ou("JWT not in base64url format");return{header:JSON.parse(xg(a[0])),payload:JSON.parse(xg(a[1])),signature:ei(a[2]),raw:{header:a[0],payload:a[1]}}}async function eb(s){return await new Promise(a=>{setTimeout(()=>a(null),s)})}function tb(s,a){return new Promise((l,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await s(h);if(!a(h,null,f)){l(f);return}}catch(f){if(!a(h,f)){d(f);return}}})()})}function nb(s){return("0"+s.toString(16)).substr(-2)}function ab(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(a),Array.from(a,nb).join("")}async function sb(s){const r=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(l);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function ib(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await sb(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(s,a,r=!1){const l=ab();let d=l;r&&(d+="/PASSWORD_RECOVERY"),await Ws(s,`${a}-code-verifier`,d);const h=await ib(l);return[h,l===h?"plain":"s256"]}const rb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lb(s){const a=s.headers.get(Au);if(!a||!a.match(rb))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function ob(s){if(!s)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(s<=a)throw new Error("JWT has expired")}function cb(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ub=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vs(s){if(!ub.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gu(){const s={};return new Proxy(s,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function db(s,a){return new Proxy(s,{get:(r,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,d)}return!a.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(r,l,d)}})}function wg(s){return JSON.parse(JSON.stringify(s))}const Fa=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),hb=[502,503,504];async function jg(s){var a;if(!F1(s))throw new Cu(Fa(s),0);if(hb.includes(s.status))throw new Cu(Fa(s),s.status);let r;try{r=await s.json()}catch(h){throw new ts(Fa(h),h)}let l;const d=lb(s);if(d&&d.getTime()>=Wg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new yg(Fa(r),s.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new Ft}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new yg(Fa(r),s.status,r.weak_password.reasons);throw new $1(Fa(r),s.status||500,l)}const fb=(s,a,r,l)=>{const d={method:s,headers:a?.headers||{}};return s==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),r))};async function be(s,a,r,l){var d;const h=Object.assign({},l?.headers);h[Au]||(h[Au]=Wg["2024-01-01"].name),l?.jwt&&(h.Authorization=`Bearer ${l.jwt}`);const f=(d=l?.query)!==null&&d!==void 0?d:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",v=await mb(s,a,r+g,{headers:h,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(v):{data:Object.assign({},v),error:null}}async function mb(s,a,r,l,d,h){const f=fb(a,l,d,h);let g;try{g=await s(r,Object.assign({},f))}catch(v){throw console.error(v),new Cu(Fa(v),0)}if(g.ok||await jg(g),l?.noResolveJson)return g;try{return await g.json()}catch(v){await jg(v)}}function _n(s){var a;let r=null;vb(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=J1(s.expires_in)));const l=(a=s.user)!==null&&a!==void 0?a:s;return{data:{session:r,user:l},error:null}}function Sg(s){const a=_n(s);return!a.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(a.data.weak_password=s.weak_password),a}function Na(s){var a;return{data:{user:(a=s.user)!==null&&a!==void 0?a:s},error:null}}function gb(s){return{data:s,error:null}}function pb(s){const{action_link:a,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h}=s,f=ql(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:a,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h},v=Object.assign({},f);return{data:{properties:g,user:v},error:null}}function kg(s){return s}function vb(s){return s.access_token&&s.refresh_token&&s.expires_in}const pu=["global","local","others"];class yb{constructor({url:a="",headers:r={},fetch:l}){this.url=a,this.headers=r,this.fetch=tp(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,r=pu[0]){if(pu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pu.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(oe(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,r={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Na})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:r}=a,l=ql(a,["options"]),d=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(d.new_email=l?.newEmail,delete d.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:pb,redirectTo:r?.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Na})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,l,d,h,f,g,v;try{const p={nextPage:null,lastPage:0,total:0},b=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=a?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:kg});if(b.error)throw b.error;const w=await b.json(),k=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(v=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return S.length>0&&(S.forEach(j=>{const A=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(j.split(";")[1].split("=")[1]);p[`${T}Page`]=A}),p.total=parseInt(k)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(a){Vs(a);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Na})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){Vs(a);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:Na})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,r=!1){Vs(a);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:Na})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){Vs(a.userId);try{const{data:r,error:l}=await be(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:l}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(a){Vs(a.userId),Vs(a.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(a){var r,l,d,h,f,g,v;try{const p={nextPage:null,lastPage:0,total:0},b=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=a?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:kg});if(b.error)throw b.error;const w=await b.json(),k=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(v=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return S.length>0&&(S.forEach(j=>{const A=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(j.split(";")[1].split("=")[1]);p[`${T}Page`]=A}),p.total=parseInt(k)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(oe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(a){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(a){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(a,r){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(oe(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(a){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(a){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}}function Eg(s={}){return{getItem:a=>s[a]||null,setItem:(a,r)=>{s[a]=r},removeItem:a=>{delete s[a]}}}const Is={debug:!!(globalThis&&ep()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class np extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Tg extends np{}async function bb(s,a,r){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,a);const l=new globalThis.AbortController;a>0&&setTimeout(()=>{l.abort(),Is.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},a),await Promise.resolve();try{return await globalThis.navigator.locks.request(s,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,d.name);try{return await r()}finally{Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,d.name)}}else{if(a===0)throw Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Tg(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Is.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(d){throw d?.name==="AbortError"?new Tg(`Acquiring an exclusive Navigator LockManager lock "${s}" timed out waiting ${a}ms`):d}}function _b(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ap(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function xb(s){return parseInt(s,16)}function wb(s){const a=new TextEncoder().encode(s);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function jb(s){var a;const{chainId:r,domain:l,expirationTime:d,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:v,resources:p,scheme:b,uri:w,version:k}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((a=s.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const S=ap(s.address),j=b?`${b}://${l}`:l,A=s.statement?`${s.statement}
`:"",T=`${j} wants you to sign in with your Ethereum account:
${S}

${A}`;let q=`URI: ${w}
Version: ${k}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(d&&(q+=`
Expiration Time: ${d.toISOString()}`),g&&(q+=`
Not Before: ${g.toISOString()}`),v&&(q+=`
Request ID: ${v}`),p){let O=`
Resources:`;for(const B of p){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);O+=`
- ${B}`}q+=O}return`${T}
${q}`}class yt extends Error{constructor({message:a,code:r,cause:l,name:d}){var h;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(h=d??(l instanceof Error?l.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class Ul extends yt{constructor(a,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:a}),this.name="WebAuthnUnknownError",this.originalError=r}}function Sb({error:s,options:a}){var r,l,d;const{publicKey:h}=a;if(!h)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(a.mediation==="conditional"&&((l=h.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new yt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(sp(f)){if(h.rp.id!==f)return new yt({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function kb({error:s,options:a}){const{publicKey:r}=a;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new yt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(sp(l)){if(r.rpId!==l)return new yt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Eb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Tb=new Eb;function Nb(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:a,user:r,excludeCredentials:l}=s,d=ql(s,["challenge","user","excludeCredentials"]),h=ei(a).buffer,f=Object.assign(Object.assign({},r),{id:ei(r.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:h,user:f});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let v=0;v<l.length;v++){const p=l[v];g.excludeCredentials[v]=Object.assign(Object.assign({},p),{id:ei(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function Ab(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:a,allowCredentials:r}=s,l=ql(s,["challenge","allowCredentials"]),d=ei(a).buffer,h=Object.assign(Object.assign({},l),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:ei(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function Cb(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:ns(new Uint8Array(s.response.attestationObject)),clientDataJSON:ns(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Ob(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,l=s.getClientExtensionResults(),d=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ns(new Uint8Array(d.authenticatorData)),clientDataJSON:ns(new Uint8Array(d.clientDataJSON)),signature:ns(new Uint8Array(d.signature)),userHandle:d.userHandle?ns(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function sp(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Ng(){var s,a;return!!(Ct()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function Rb(s){try{const a=await navigator.credentials.create(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Ul("Browser returned unexpected credential type",a)}:{data:null,error:new Ul("Empty credential response",a)}}catch(a){return{data:null,error:Sb({error:a,options:s})}}}async function Mb(s){try{const a=await navigator.credentials.get(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Ul("Browser returned unexpected credential type",a)}:{data:null,error:new Ul("Empty credential response",a)}}catch(a){return{data:null,error:kb({error:a,options:s})}}}const Db={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Lb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zl(...s){const a=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of s)if(d)for(const h in d){const f=d[h];if(f!==void 0)if(Array.isArray(f))l[h]=f;else if(r(f))l[h]=f;else if(a(f)){const g=l[h];a(g)?l[h]=zl(g,f):l[h]=zl(f)}else l[h]=f}return l}function Ub(s,a){return zl(Db,s,a||{})}function zb(s,a){return zl(Lb,s,a||{})}class Bb{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:r,friendlyName:l,signal:d},h){var f;try{const{data:g,error:v}=await this.client.mfa.challenge({factorId:a,webauthn:r});if(!g)return{data:null,error:v};const p=d??Tb.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:b}=g.webauthn.credential_options.publicKey;if(!b.name){const w=l;if(w)b.name=`${b.id}:${w}`;else{const S=(await this.client.getUser()).data.user,j=((f=S?.user_metadata)===null||f===void 0?void 0:f.name)||S?.email||S?.id||"User";b.name=`${b.id}:${j}`}}b.displayName||(b.displayName=b.name)}switch(g.webauthn.type){case"create":{const b=Ub(g.webauthn.credential_options.publicKey,h?.create),{data:w,error:k}=await Rb({publicKey:b,signal:p});return w?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:w}},error:null}:{data:null,error:k}}case"request":{const b=zb(g.webauthn.credential_options.publicKey,h?.request),{data:w,error:k}=await Mb(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:b,signal:p}));return w?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:w}},error:null}:{data:null,error:k}}}}catch(g){return oe(g)?{data:null,error:g}:{data:null,error:new ts("Unexpected error in challenge",g)}}}async _verify({challengeId:a,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new ar("rpId is required for WebAuthn authentication")};try{if(!Ng())return{data:null,error:new ts("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:a,webauthn:{rpId:r,rpOrigins:l},signal:d},{request:h});if(!f)return{data:null,error:g};const{webauthn:v}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:v.type,rpId:r,rpOrigins:l,credential_response:v.credential_response}})}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new ts("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new ar("rpId is required for WebAuthn registration")};try{if(!Ng())return{data:null,error:new ts("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===a&&k.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:v,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:d},{create:h});return v?this._verify({factorId:f.id,challengeId:v.challengeId,webauthn:{rpId:r,rpOrigins:l,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:p}}catch(f){return oe(f)?{data:null,error:f}:{data:null,error:new ts("Unexpected error in register",f)}}}}_b();const qb={url:U1,storageKey:z1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Ag(s,a,r){return await r()}const Xs={};class sr{get jwks(){var a,r;return(r=(a=Xs[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){Xs[this.storageKey]=Object.assign(Object.assign({},Xs[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=Xs[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){Xs[this.storageKey]=Object.assign(Object.assign({},Xs[this.storageKey]),{cachedAt:a})}constructor(a){var r,l,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},qb),a);if(this.storageKey=h.storageKey,this.instanceID=(r=sr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,sr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&Ct()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new yb({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=tp(h.fetch),this.lock=h.lock||Ag,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&Ct()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=bb:this.lock=Ag,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Bb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:ep()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Eg(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=Eg(this.memoryStorage)),Ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}h.skipAutoInitialize||this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zg}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let r={},l="none";if(Ct()&&(r=W1(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),Ct()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,l);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),K1(h)){const v=(a=h.details)===null||a===void 0?void 0:a.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?this._returnResult({error:r}):this._returnResult({error:new ts("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,l,d;try{const h=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=a?.options)===null||d===void 0?void 0:d.captchaToken}},xform:_n}),{data:f,error:g}=h;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const v=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(h){if(oe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(a){var r,l,d;try{let h;if("email"in a){const{email:b,password:w,options:k}=a;let S=null,j=null;this.flowType==="pkce"&&([S,j]=await Ys(this.storage,this.storageKey)),h=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:b,password:w,data:(r=k?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:S,code_challenge_method:j},xform:_n})}else if("phone"in a){const{phone:b,password:w,options:k}=a;h=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(l=k?.data)!==null&&l!==void 0?l:{},channel:(d=k?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:_n})}else throw new Al("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return await At(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const v=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(h){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(a){try{let r;if("email"in a){const{email:h,password:f,options:g}=a;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Sg})}else if("phone"in a){const{phone:h,password:f,options:g}=a;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Sg})}else throw new Al("You must provide either an email or phone number and a password");const{data:l,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const h=new Gs;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(a){var r,l,d,h;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=a.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=a.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;switch(r){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(a){var r,l,d,h,f,g,v,p,b,w,k;let S,j;if("message"in a)S=a.message,j=a.signature;else{const{chain:A,wallet:T,statement:q,options:O}=a;let B;if(Ct())if(typeof T=="object")B=T;else{const _e=window;if("ethereum"in _e&&typeof _e.ethereum=="object"&&"request"in _e.ethereum&&typeof _e.ethereum.request=="function")B=_e.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=T}const X=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href),ce=await B.request({method:"eth_requestAccounts"}).then(_e=>_e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ce||ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=ap(ce[0]);let W=(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!W){const _e=await B.request({method:"eth_chainId"});W=xb(_e)}const ue={domain:X.host,address:F,statement:q,uri:X.href,version:"1",chainId:W,nonce:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(h=O?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=O?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(v=O?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(p=O?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=O?.signInWithEthereum)===null||b===void 0?void 0:b.resources};S=jb(ue),j=await B.request({method:"personal_sign",params:[wb(S),F]})}try{const{data:A,error:T}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:j},!((w=a.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(k=a.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:_n});if(T)throw T;if(!A||!A.session||!A.user){const q=new Gs;return this._returnResult({data:{user:null,session:null},error:q})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:T})}catch(A){if(oe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(a){var r,l,d,h,f,g,v,p,b,w,k,S;let j,A;if("message"in a)j=a.message,A=a.signature;else{const{chain:T,wallet:q,statement:O,options:B}=a;let X;if(Ct())if(typeof q=="object")X=q;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))X=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=q}const ce=new URL((r=B?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in X&&X.signIn){const F=await X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:ce.host,uri:ce.href}),O?{statement:O}:null));let W;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")W=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)W=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)j=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),A=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${ce.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${ce.href}`,`Issued At: ${(d=(l=B?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=B?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((f=B?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((g=B?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((v=B?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((p=B?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((w=(b=B?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...B.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const F=await X.signMessage(new TextEncoder().encode(j),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=F}}try{const{data:T,error:q}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:ns(A)},!((k=a.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(S=a.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:_n});if(q)throw q;if(!T||!T.session||!T.user){const O=new Gs;return this._returnResult({data:{user:null,session:null},error:O})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:q})}catch(T){if(oe(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(a){const r=await Wa(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new G1;const{data:h,error:f}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:_n});if(await At(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const g=new Gs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:f})}catch(h){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(a){try{const{options:r,provider:l,token:d,access_token:h,nonce:f}=a,g=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:_n}),{data:v,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!v||!v.session||!v.user){const b=new Gs;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:p})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(a){var r,l,d,h,f;try{if("email"in a){const{email:g,options:v}=a;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Ys(this.storage,this.storageKey));const{error:w}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=v?.data)!==null&&r!==void 0?r:{},create_user:(l=v?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in a){const{phone:g,options:v}=a,{data:p,error:b}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=v?.data)!==null&&d!==void 0?d:{},create_user:(h=v?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(f=v?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:b})}throw new Al("You must provide either an email or phone number.")}catch(g){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(a){var r,l;try{let d,h;"options"in a&&(d=(r=a.options)===null||r===void 0?void 0:r.redirectTo,h=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:g}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:_n});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const v=f.session,p=f.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:p,session:v},error:null})}catch(d){if(oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(a){var r,l,d,h,f;try{let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ys(this.storage,this.storageKey));const p=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=a?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:v}),headers:this.headers,xform:gb});return!((h=p.data)===null||h===void 0)&&h.url&&Ct()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;if(l)throw l;if(!r)throw new Ft;const{error:d}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(a){if(oe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:l,type:d,options:h}=a,{error:f}=await be(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:l,type:d,options:h}=a,{data:f,error:g}=await be(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new Al("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await Wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<hu:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const f=await Wa(this.userStorage,this.storageKey+"-user");f?.user?a.user=f.user:a.user=gu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=db(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:d,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(a){try{return a?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Na}):await this._useSession(async r=>{var l,d,h;const{data:f,error:g}=r;if(g)throw g;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ft}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:Na})})}catch(r){if(oe(r))return fu(r)&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async l=>{const{data:d,error:h}=l;if(h)throw h;if(!d.session)throw new Ft;const f=d.session;let g=null,v=null;this.flowType==="pkce"&&a.email!=null&&([g,v]=await Ys(this.storage,this.storageKey));const{data:p,error:b}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:v}),jwt:f.access_token,xform:Na});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Ft;const r=Date.now()/1e3;let l=r,d=!0,h=null;const{payload:f}=Ol(a.access_token);if(f.exp&&(l=f.exp,d=l<=r),d){const{data:g,error:v}=await this._callRefreshToken(a.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:v}=await this._getUser(a.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});h={access_token:a.access_token,refresh_token:a.refresh_token,user:g.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var l;if(!a){const{data:f,error:g}=r;if(g)throw g;a=(l=f.session)!==null&&l!==void 0?l:void 0}if(!a?.refresh_token)throw new Ft;const{data:d,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(a,r){try{if(!Ct())throw new Cl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Cl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new vg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new vg("No code detected.");const{data:O,error:B}=await this._exchangeCodeForSession(a.code);if(B)throw B;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:h,refresh_token:f,expires_in:g,expires_at:v,token_type:p}=a;if(!h||!g||!f||!p)throw new Cl("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(g);let k=b+w;v&&(k=parseInt(v));const S=k-b;S*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${w}s`);const j=k-w;b-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,k,b):b-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,k,b);const{data:A,error:T}=await this._getUser(h);if(T)throw T;const q={provider_token:l,provider_refresh_token:d,access_token:h,expires_in:w,expires_at:k,refresh_token:f,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:a.type},error:null})}catch(l){if(oe(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await Wa(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h&&!fu(h))return this._returnResult({error:h});const f=(l=d.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:g}=await this.admin.signOut(f,a);if(g&&!(P1(g)&&(g.status===404||g.status===401||g.status===403)||fu(g)))return this._returnResult({error:g})}return a!=="others"&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const r=Z1(),l={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async r=>{var l,d;try{const{data:{session:h},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",a,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(a))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",h),console.error(h)}})}async resetPasswordForEmail(a,r={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await Ys(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var a;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var r;try{const{data:l,error:d}=await this._useSession(async h=>{var f,g,v,p,b;const{data:w,error:k}=h;if(k)throw k;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=a.options)===null||g===void 0?void 0:g.scopes,queryParams:(v=a.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",S,{headers:this.headers,jwt:(b=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(d)throw d;return Ct()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:a.provider,url:l?.url},error:null})}catch(l){if(oe(l))return this._returnResult({data:{provider:a.provider,url:null},error:l});throw l}}async linkIdentityIdToken(a){return await this._useSession(async r=>{var l;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:f,provider:g,token:v,access_token:p,nonce:b}=a,w=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=h?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:v,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:_n}),{data:k,error:S}=w;return S?this._returnResult({data:{user:null,session:null},error:S}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new Gs}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:S}))}catch(d){if(await At(this.storage,`${this.storageKey}-code-verifier`),oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(a){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)throw f;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await tb(async d=>(d>0&&await eb(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:_n})),(d,h)=>{const f=200*Math.pow(2,d);return h&&mu(h)&&Date.now()+f-l<Zs})}catch(l){if(this._debug(r,"error",l),oe(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",l),Ct()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await Wa(this.storage,this.storageKey);if(d&&this.userStorage){let f=await Wa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await Ws(this.userStorage,this.storageKey+"-user",f)),d.user=(a=f?.user)!==null&&a!==void 0?a:gu()}else if(d&&!d.user&&!d.user){const f=await Wa(this.storage,this.storageKey+"-user");f&&f?.user?(d.user=f.user,await At(this.storage,this.storageKey+"-user"),await Ws(this.storage,this.storageKey,d)):d.user=gu()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<hu;if(this._debug(l,`session has${h?"":" not"} expired with margin of ${hu}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),mu(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(d.access_token);!g&&f?.user?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var r,l;if(!a)throw new Ft;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Pl;const{data:h,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!h.session)throw new Ft;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(d,"error",h),oe(h)){const f={data:null,error:h};return mu(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,r,l=!0){const d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(a,r)}catch(v){h.push(v)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await At(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},a),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await Ws(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=wg(d);await Ws(this.storage,this.storageKey,h)}else{const d=wg(r);await Ws(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await At(this.storage,this.storageKey),await At(this.storage,this.storageKey+"-code-verifier"),await At(this.storage,this.storageKey+"-user"),this.userStorage&&await At(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&Ct()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-a)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${Zs}ms, refresh threshold is ${Nu} ticks`),d<=Nu&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof np)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ct()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(a){this._debug("#visibilityChangedCallback","error",a)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,l){const d=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[h,f]=await Ys(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(g.toString())}if(l?.queryParams){const h=new URLSearchParams(l.queryParams);d.push(h.toString())}return l?.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await be(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(a){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:v,error:p}=await be(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(a.factorType==="totp"&&v.type==="totp"&&(!((d=v?.totp)===null||d===void 0)&&d.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?Cb(a.webauthn.credential_response):Ob(a.webauthn.credential_response)})}:{code:a.code}),{data:g,error:v}=await be(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:v}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await be(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Nb(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Ab(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(a){const{data:r,error:l}=await this._challenge({factorId:a.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){var a;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(a=r?.factors)!==null&&a!==void 0?a:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(a){var r,l,d,h;if(a)try{const{payload:S}=Ol(a);let j=null;S.aal&&(j=S.aal);let A=j;const{data:{user:T},error:q}=await this.getUser(a);if(q)return this._returnResult({data:null,error:q});((l=(r=T?.factors)===null||r===void 0?void 0:r.filter(X=>X.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(A="aal2");const B=S.amr||[];return{data:{currentLevel:j,nextLevel:A,currentAuthenticationMethods:B},error:null}}catch(S){if(oe(S))return this._returnResult({data:null,error:S});throw S}const{data:{session:f},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=Ol(f.access_token);let p=null;v.aal&&(p=v.aal);let b=p;((h=(d=f.user.factors)===null||d===void 0?void 0:d.filter(S=>S.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(b="aal2");const k=v.amr||[];return{data:{currentLevel:p,nextLevel:b,currentAuthenticationMethods:k},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:l.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Ft})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(a,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Ft});const f=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&Ct()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(a,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Ft});const f=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&Ct()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;return l?this._returnResult({data:null,error:l}):r?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Ft})})}catch(a){if(oe(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ft})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(a,r={keys:[]}){let l=r.keys.find(g=>g.kid===a);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(g=>g.kid===a),l&&this.jwks_cached_at+H1>d)return l;const{data:h,error:f}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,l=h.keys.find(g=>g.kid===a),!l)?null:l}async getClaims(a,r={}){try{let l=a;if(!l){const{data:S,error:j}=await this.getSession();if(j||!S.session)return this._returnResult({data:null,error:j});l=S.session.access_token}const{header:d,payload:h,signature:f,raw:{header:g,payload:v}}=Ol(l);r?.allowExpired||ob(h.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:S}=await this.getUser(l);if(S)throw S;return{data:{claims:h,header:d,signature:f},error:null}}const b=cb(d.alg),w=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,Q1(`${g}.${v}`)))throw new Ou("Invalid JWT signature");return{data:{claims:h,header:d,signature:f},error:null}}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}}sr.nextInstanceID={};const Hb=sr,$b="2.97.0";let Xi="";typeof Deno<"u"?Xi="deno":typeof document<"u"?Xi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xi="react-native":Xi="node";const Pb={"X-Client-Info":`supabase-js-${Xi}/${$b}`},Kb={headers:Pb},Gb={schema:"public"},Yb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vb={};function ir(s){"@babel/helpers - typeof";return ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ir(s)}function Ib(s,a){if(ir(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,a);if(ir(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function Xb(s){var a=Ib(s,"string");return ir(a)=="symbol"?a:a+""}function Qb(s,a,r){return(a=Xb(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function Cg(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),r.push.apply(r,l)}return r}function lt(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Cg(Object(r),!0).forEach(function(l){Qb(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Cg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const Jb=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),Zb=()=>Headers,Wb=(s,a,r)=>{const l=Jb(r),d=Zb();return async(h,f)=>{var g;const v=(g=await a())!==null&&g!==void 0?g:s;let p=new d(f?.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${v}`),l(h,lt(lt({},f),{},{headers:p}))}};function Fb(s){return s.endsWith("/")?s:s+"/"}function e_(s,a){var r,l;const{db:d,auth:h,realtime:f,global:g}=s,{db:v,auth:p,realtime:b,global:w}=a,k={db:lt(lt({},v),d),auth:lt(lt({},p),h),realtime:lt(lt({},b),f),storage:{},global:lt(lt(lt({},w),g),{},{headers:lt(lt({},(r=w?.headers)!==null&&r!==void 0?r:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?k.accessToken=s.accessToken:delete k.accessToken,k}function t_(s){const a=s?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fb(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var n_=class extends Hb{constructor(s){super(s)}},a_=class{constructor(s,a,r){var l,d;this.supabaseUrl=s,this.supabaseKey=a;const h=t_(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:Gb,realtime:Vb,auth:lt(lt({},Yb),{},{storageKey:f}),global:Kb},v=e_(r??{},g);if(this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(d=v.global.headers)!==null&&d!==void 0?d:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=v.auth)!==null&&p!==void 0?p:{},this.headers,v.global.fetch)}this.fetch=Wb(a,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new Py(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch,timeout:v.db.timeout,urlLengthLimit:v.db.urlLengthLimit}),this.storage=new L1(this.storageUrl.href,this.headers,this.fetch,r?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Dy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,r)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,a,r;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:r,storage:l,userStorage:d,storageKey:h,flowType:f,lock:g,debug:v,throwOnError:p},b,w){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new n_({url:this.authUrl.href,headers:lt(lt({},k),b),storageKey:h,autoRefreshToken:s,persistSession:a,detectSessionInUrl:r,storage:l,userStorage:d,flowType:f,lock:g,debug:v,throwOnError:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new i1(this.realtimeUrl.href,lt(lt({},s),{},{params:lt(lt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(s,a,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const s_=(s,a,r)=>new a_(s,a,r);function i_(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const a=s.version;if(a==null)return!1;const r=a.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}i_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ke=s_("https://uaplcqesvzvqljbqkthv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVhcGxjcWVzdnp2cWxqYnFrdGh2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0NjM5NTgsImV4cCI6MjA4NzAzOTk1OH0.JsFrrDvHqSpkrm3Qjk5E5w82JOTK3ZeBMtlPzD8Lahs");function r_({children:s}){const[a,r]=U.useState(null),[l,d]=U.useState(!0);U.useEffect(()=>{Ke.auth.getSession().then(({data:{session:p}})=>{r(p?.user??null),d(!1)});const{data:{subscription:v}}=Ke.auth.onAuthStateChange((p,b)=>{r(b?.user??null)});return()=>v.unsubscribe()},[]);async function h(v,p){const{data:b,error:w}=await Ke.auth.signUp({email:v,password:p});if(w)throw w;return b}async function f(v,p){const{data:b,error:w}=await Ke.auth.signInWithPassword({email:v,password:p});if(w)throw w;return b}async function g(){const{error:v}=await Ke.auth.signOut();if(v)throw v}return o.jsx(Rg.Provider,{value:{user:a,loading:l,signUp:h,signIn:f,signOut:g},children:s})}function Yu(s){return s?typeof s=="number"?new Date(s).toISOString():s:new Date().toISOString()}function Vu(s){return s?typeof s=="string"?new Date(s).getTime():s:Date.now()}async function l_(s){const{data:a,error:r}=await Ke.from("profiles").select("*").eq("id",s).single();return r?(console.error("fetchProfile:",r),null):c_(a)}async function o_(s,a){const r=u_(s,a),{error:l}=await Ke.from("profiles").upsert(r);l&&console.error("upsertProfile:",l)}function c_(s){return s?{kcal:s.calorie_target,protein:s.protein_target,maintenanceKcal:s.maintenance_kcal,userName:s.user_name,weightLossTarget:s.weight_loss_target,onboardingComplete:s.onboarding_complete,age:s.age,sex:s.sex,height:s.height,weight:s.weight,activityLevel:s.activity_level,goal:s.goal,intensity:s.intensity,waterTargetLiters:s.water_target_liters,cyclingEnabled:s.cycling_enabled??!1,cyclingTrainingKcal:s.cycling_training_kcal??0,cyclingTrainingProtein:s.cycling_training_protein??0,cyclingRestKcal:s.cycling_rest_kcal??0,cyclingRestProtein:s.cycling_rest_protein??0}:null}function u_(s,a){return{id:s,calorie_target:a.kcal,protein_target:a.protein,maintenance_kcal:a.maintenanceKcal,user_name:a.userName,weight_loss_target:a.weightLossTarget,onboarding_complete:a.onboardingComplete,age:a.age,sex:a.sex,height:a.height,weight:a.weight,activity_level:a.activityLevel,goal:a.goal,intensity:a.intensity,water_target_liters:a.waterTargetLiters,cycling_enabled:a.cyclingEnabled??!1,cycling_training_kcal:a.cyclingTrainingKcal??0,cycling_training_protein:a.cyclingTrainingProtein??0,cycling_rest_kcal:a.cyclingRestKcal??0,cycling_rest_protein:a.cyclingRestProtein??0}}async function d_(s){const{data:a,error:r}=await Ke.from("entries").select("*").eq("user_id",s).order("timestamp",{ascending:!0});return r?(console.error("fetchEntries:",r),[]):a.map(g_)}async function h_(s,a){const r=ip(s,a),{error:l}=await Ke.from("entries").insert(r);l&&console.error("insertEntry:",l)}async function f_(s){const{id:a,...r}=ip(null,s),{error:l}=await Ke.from("entries").update(r).eq("id",a);l&&console.error("updateEntry:",l)}async function m_(s){const{error:a}=await Ke.from("entries").delete().eq("id",s);a&&console.error("deleteEntry:",a)}function g_(s){return{id:s.id,name:s.name,kcal:s.kcal,protein:s.protein,meal:s.meal,servingSize:s.serving_size,servingUnit:s.serving_unit,dateKey:s.date_key,timestamp:Vu(s.timestamp),ingredients:s.ingredients,fromLeftoverId:s.from_leftover_id,recipeId:s.recipe_id}}function ip(s,a){const r={id:a.id,name:a.name||"Food",kcal:a.kcal??0,protein:a.protein??0,meal:a.meal||"Snack",serving_size:a.servingSize??null,serving_unit:a.servingUnit||"g",date_key:a.dateKey||new Date().toISOString().slice(0,10),timestamp:Yu(a.timestamp),ingredients:a.ingredients||null,from_leftover_id:a.fromLeftoverId||null,recipe_id:a.recipeId||null};return s&&(r.user_id=s),r}async function p_(s){const{data:a,error:r}=await Ke.from("exercise_logs").select("*").eq("user_id",s).order("timestamp",{ascending:!0});return r?(console.error("fetchExerciseLogs:",r),[]):a.map(b_)}async function v_(s,a){const r=__(s,a),{error:l}=await Ke.from("exercise_logs").insert(r);l&&console.error("insertExerciseLog:",l)}async function y_(s){const{error:a}=await Ke.from("exercise_logs").delete().eq("id",s);a&&console.error("deleteExerciseLog:",a)}function b_(s){return{id:s.id,name:s.name,caloriesBurned:s.calories_burned,duration:s.duration_minutes??s.duration,durationMinutes:s.duration_minutes,type:s.type,label:s.label||s.name,intensity:s.intensity,weightUsed:s.weight_used,dateKey:s.date_key,timestamp:Vu(s.timestamp)}}function __(s,a){const r={id:a.id,name:a.name||a.label||a.type||"Exercise",calories_burned:a.caloriesBurned??0,duration_minutes:a.durationMinutes??a.duration??null,type:a.type||null,label:a.label||null,intensity:a.intensity||null,weight_used:a.weightUsed||null,date_key:a.dateKey||new Date().toISOString().slice(0,10),timestamp:Yu(a.timestamp)};return s&&(r.user_id=s),r}async function x_(s){const{data:a,error:r}=await Ke.from("water_logs").select("*").eq("user_id",s).order("timestamp",{ascending:!0});return r?(console.error("fetchWaterLogs:",r),[]):a.map(S_)}async function w_(s,a){const r=k_(s,a),{error:l}=await Ke.from("water_logs").insert(r);l&&console.error("insertWaterLog:",l)}async function j_(s){const{error:a}=await Ke.from("water_logs").delete().eq("id",s);a&&console.error("deleteWaterLog:",a)}function S_(s){return{id:s.id,amountLiters:s.amount_ml!=null?s.amount_ml/1e3:0,dateKey:s.date_key,timestamp:Vu(s.timestamp)}}function k_(s,a){const r={id:a.id,amount_ml:Math.round((a.amountLiters||0)*1e3),date_key:a.dateKey||new Date().toISOString().slice(0,10),timestamp:Yu(a.timestamp)};return s&&(r.user_id=s),r}async function E_(s){const{data:a,error:r}=await Ke.from("recipes").select("*").eq("user_id",s).order("created_at",{ascending:!1});return r?(console.error("fetchRecipes:",r),[]):a.map(C_)}async function T_(s,a){const r=rp(s,a),{error:l}=await Ke.from("recipes").insert(r);l&&console.error("insertRecipe:",l)}async function N_(s){const{id:a,...r}=rp(null,s),{error:l}=await Ke.from("recipes").update(r).eq("id",a);l&&console.error("updateRecipe:",l)}async function A_(s){const{error:a}=await Ke.from("recipes").delete().eq("id",s);a&&console.error("deleteRecipe:",a)}function C_(s){return{id:s.id,name:s.name,ingredients:s.ingredients,totalKcal:s.total_kcal,totalProtein:s.total_protein,servings:s.servings,servingsYield:s.servings_yield??s.servings,perServing:{kcal:s.per_serving_kcal??(s.servings?Math.round(s.total_kcal/s.servings):s.total_kcal),protein:s.per_serving_protein??(s.servings?Math.round(s.total_protein/s.servings*10)/10:s.total_protein)},notes:s.notes}}function rp(s,a){const r={id:a.id,name:a.name||"Recipe",ingredients:a.ingredients||[],total_kcal:a.totalKcal??0,total_protein:a.totalProtein??0,servings:a.servings??a.servingsYield??1,servings_yield:a.servingsYield??a.servings??1,per_serving_kcal:a.perServing?.kcal??0,per_serving_protein:a.perServing?.protein??0,notes:a.notes||null};return s&&(r.user_id=s),r}async function O_(s){const{data:a,error:r}=await Ke.from("leftovers").select("*").eq("user_id",s).order("created_at",{ascending:!1});return r?(console.error("fetchLeftovers:",r),[]):a.map(L_)}async function R_(s,a){const r=lp(s,a),{error:l}=await Ke.from("leftovers").insert(r);l&&console.error("insertLeftover:",l)}async function M_(s){const{id:a,...r}=lp(null,s),{error:l}=await Ke.from("leftovers").update(r).eq("id",a);l&&console.error("updateLeftover:",l)}async function D_(s){const{error:a}=await Ke.from("leftovers").delete().eq("id",s);a&&console.error("deleteLeftover:",a)}function L_(s){return{id:s.id,name:s.name,remainingServings:s.remaining_servings??s.servings_left,totalServings:s.total_servings??s.remaining_servings??s.servings_left,perServing:{kcal:s.per_serving_kcal??s.kcal,protein:s.per_serving_protein??s.protein},dateKey:s.date_key,dateCooked:s.date_cooked,recipeId:s.recipe_id}}function lp(s,a){const r={id:a.id,name:a.name||"Leftover",kcal:a.perServing?.kcal??a.kcal??0,protein:a.perServing?.protein??a.protein??0,remaining_servings:a.remainingServings??1,total_servings:a.totalServings??a.remainingServings??1,servings_left:a.remainingServings??1,per_serving_kcal:a.perServing?.kcal??0,per_serving_protein:a.perServing?.protein??0,date_key:a.dateKey||a.dateCooked||new Date().toISOString().slice(0,10),date_cooked:a.dateCooked||null,recipe_id:a.recipeId||null};return s&&(r.user_id=s),r}async function U_(s){const{data:a,error:r}=await Ke.from("custom_meals").select("*").eq("user_id",s).order("created_at",{ascending:!1});return r?(console.error("fetchCustomMeals:",r),[]):a.map(H_)}async function z_(s,a){const r=op(s,a),{error:l}=await Ke.from("custom_meals").insert(r);l&&console.error("insertCustomMeal:",l)}async function B_(s){const{id:a,...r}=op(null,s),{error:l}=await Ke.from("custom_meals").update(r).eq("id",a);l&&console.error("updateCustomMeal:",l)}async function q_(s){const{error:a}=await Ke.from("custom_meals").delete().eq("id",s);a&&console.error("deleteCustomMeal:",a)}function H_(s){return{id:s.id,name:s.name,ingredients:s.ingredients,kcal:s.total_kcal,protein:s.total_protein}}function op(s,a){const r={name:a.name||"Meal",ingredients:a.ingredients||[],total_kcal:a.kcal??0,total_protein:a.protein??0};return a.id&&(r.id=a.id),s&&(r.user_id=s),r}async function $_(s){const{data:a,error:r}=await Ke.from("day_types").select("*").eq("user_id",s);if(r)return console.error("fetchDayTypes:",r),{};const l={};for(const d of a)l[d.date_key]=d.day_type;return l}async function P_(s,a,r){const{error:l}=await Ke.from("day_types").upsert({user_id:s,date_key:a,day_type:r},{onConflict:"user_id,date_key"});l&&console.error("upsertDayType:",l)}const Iu={kcal:2e3,protein:120,maintenanceKcal:2e3,userName:"",weightLossTarget:5,onboardingComplete:!1};function K_(){return{targets:Iu,entries:[],exerciseLogs:[],waterLogs:[],recipes:[],leftovers:[],customMeals:[],dayTypes:{},currentView:Nn.DASHBOARD,editingEntry:null}}function G_(s,a){switch(a.type){case"INIT_DATA":return{...s,targets:a.payload.targets||Iu,entries:a.payload.entries||[],exerciseLogs:a.payload.exerciseLogs||[],waterLogs:a.payload.waterLogs||[],recipes:a.payload.recipes||[],leftovers:a.payload.leftovers||[],customMeals:a.payload.customMeals||[],dayTypes:a.payload.dayTypes||{},currentView:Nn.DASHBOARD,editingEntry:null};case"SET_TARGETS":return{...s,targets:{...s.targets,...a.payload}};case"ADD_ENTRY":return{...s,entries:[...s.entries,a.payload]};case"UPDATE_ENTRY":return{...s,entries:s.entries.map(r=>r.id===a.payload.id?a.payload:r)};case"DELETE_ENTRY":return{...s,entries:s.entries.filter(r=>r.id!==a.payload)};case"SET_VIEW":return{...s,currentView:a.payload,editingEntry:null};case"SET_EDITING_ENTRY":return{...s,editingEntry:a.payload};case"ADD_EXERCISE":return{...s,exerciseLogs:[...s.exerciseLogs,a.payload]};case"DELETE_EXERCISE":return{...s,exerciseLogs:s.exerciseLogs.filter(r=>r.id!==a.payload)};case"ADD_WATER":return{...s,waterLogs:[...s.waterLogs,a.payload]};case"DELETE_WATER":return{...s,waterLogs:s.waterLogs.filter(r=>r.id!==a.payload)};case"ADD_RECIPE":return{...s,recipes:[...s.recipes,a.payload]};case"UPDATE_RECIPE":return{...s,recipes:s.recipes.map(r=>r.id===a.payload.id?a.payload:r)};case"DELETE_RECIPE":return{...s,recipes:s.recipes.filter(r=>r.id!==a.payload)};case"ADD_LEFTOVER":return{...s,leftovers:[...s.leftovers,a.payload]};case"UPDATE_LEFTOVER":return{...s,leftovers:s.leftovers.map(r=>r.id===a.payload.id?a.payload:r)};case"DELETE_LEFTOVER":return{...s,leftovers:s.leftovers.filter(r=>r.id!==a.payload)};case"SET_CUSTOM_MEALS":return{...s,customMeals:a.payload};case"ADD_CUSTOM_MEAL":return{...s,customMeals:[a.payload,...s.customMeals]};case"UPDATE_CUSTOM_MEAL":return{...s,customMeals:s.customMeals.map(r=>r.id===a.payload.id?a.payload:r)};case"DELETE_CUSTOM_MEAL":return{...s,customMeals:s.customMeals.filter(r=>r.id!==a.payload)};case"SET_DAY_TYPE":return{...s,dayTypes:{...s.dayTypes,[a.payload.dateKey]:a.payload.dayType}};case"IMPORT_DATA":return{...s,targets:a.payload.targets,entries:a.payload.entries,recipes:a.payload.recipes||s.recipes,leftovers:a.payload.leftovers||s.leftovers};default:return s}}function Y_({children:s}){const{user:a}=Bl(),[r,l]=U.useReducer(G_,null,K_),[d,h]=U.useState(!0),f=U.useRef(r),g=U.useRef(null);U.useEffect(()=>{f.current=r}),U.useEffect(()=>{let p=!1;return(async()=>{if(!a){h(!1);return}h(!0);const[b,w,k,S,j,A,T,q]=await Promise.all([l_(a.id),d_(a.id),p_(a.id),x_(a.id),E_(a.id),O_(a.id),U_(a.id),$_(a.id)]);p||(l({type:"INIT_DATA",payload:{targets:b||Iu,entries:w,exerciseLogs:k,waterLogs:S,recipes:j,leftovers:A,customMeals:T,dayTypes:q}}),h(!1))})(),()=>{p=!0}},[a]);const v=U.useCallback(p=>{if(!a){l(p);return}switch(p.type){case"SET_TARGETS":{l(p),clearTimeout(g.current),g.current=setTimeout(()=>{o_(a.id,f.current.targets)},500);break}case"ADD_ENTRY":{l(p),h_(a.id,p.payload);break}case"UPDATE_ENTRY":{l(p),f_(p.payload);break}case"DELETE_ENTRY":{l(p),m_(p.payload);break}case"ADD_EXERCISE":{l(p),v_(a.id,p.payload);break}case"DELETE_EXERCISE":{l(p),y_(p.payload);break}case"ADD_WATER":{l(p),w_(a.id,p.payload);break}case"DELETE_WATER":{l(p),j_(p.payload);break}case"ADD_RECIPE":{l(p),T_(a.id,p.payload);break}case"UPDATE_RECIPE":{l(p),N_(p.payload);break}case"DELETE_RECIPE":{l(p),A_(p.payload);break}case"ADD_LEFTOVER":{l(p),R_(a.id,p.payload);break}case"UPDATE_LEFTOVER":{l(p),M_(p.payload);break}case"DELETE_LEFTOVER":{l(p),D_(p.payload);break}case"ADD_CUSTOM_MEAL":{l(p),z_(a.id,p.payload);break}case"UPDATE_CUSTOM_MEAL":{l(p),B_(p.payload);break}case"DELETE_CUSTOM_MEAL":{l(p),q_(p.payload);break}case"SET_DAY_TYPE":{l(p),P_(a.id,p.payload.dateKey,p.payload.dayType);break}default:l(p)}},[a]);return o.jsx(Og.Provider,{value:{state:r,dispatch:v,loading:d},children:s})}Av.createRoot(document.getElementById("root")).render(o.jsx(U.StrictMode,{children:o.jsx(r_,{children:o.jsx(Y_,{children:o.jsx(Cy,{})})})}));
